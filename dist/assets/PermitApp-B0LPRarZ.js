import{e as a,u as oe,j as le,ab as se,ap as te,at as O,O as ae,L as ne,o as x,c as W,a as q,d as U,g as e,h as r,R as G,l as re,t as ie,F as ce,au as de,aa as ue,q as me,W as pe,X as fe,_ as be}from"./index-CcotfURp.js";import{s as ve}from"./index-CzlLx1C9.js";import{s as ye}from"./index-Bon-qPwh.js";import{s as ge}from"./index-BdyhjJQm.js";import{s as he}from"./index-DyK3Oept.js";import{s as _e}from"./index-B-AXOx4C.js";import{u as xe,a as Ve,b as H,_ as we}from"./use-createProcessnumber-CDczO7y0.js";import{u as Pe}from"./accountsStore-Cex37qmj.js";import{u as Se}from"./permitapp-BExstUx7.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-WhpUTu4g.js";import"./index-DYsYX7cB.js";import"./index-CupgQPS8.js";import"./index-40oXW4vm.js";import"./index-Dv266EeI.js";import"./index-1yr22Lxv.js";import"./index-BwLO2Ccg.js";import"./useAxios-D99Vf8X-.js";import"./processStore-DkdH9Upi.js";const Ne={setup(){const t=a(!1),l=a(""),M=oe(),s=a(!1),I=a(),{procData:X,procReceive:f}=xe(),{accountUsers:m,getUser:c,addUser:b}=Pe(),v=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),V=a("me"),y=Se(),o=a(""),A=a(""),n=le({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),z=a(!0),C=a(""),D=a(""),w=a(""),B=a(""),E=a(""),p=a([]);se(()=>{s.value=!0,g(),localStorage.clear()});async function g(){var d,u,h,N,_;p.value=await m.value[0],w.value=(d=p.value)==null?void 0:d.bphone,C.value=(u=p.value)==null?void 0:u.name,D.value=(h=p.value)==null?void 0:h.email,B.value=(N=p.value)==null?void 0:N.secondary_status,E.value=(_=p.value)==null?void 0:_.dba,console.log(w.value,p.value)}te(g,()=>{}),O(async()=>{await de(g).toBe(!0)});const L=ae(()=>z.value===!0?v.value[0]:"");Ve();const{lastNum:J,resNum:R}=H(),P=a(""),S=a(""),T=a(null),k=a(""),j=a(null);a("");const K=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},1e3),A.value=o.value;const h=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${a(n.address).value}`;F(h),n.license=m.value[0].license,n.contractor=m.value[0].name,n.emails=m.value[0].email,n.muniProc=o.value,n.phNumber=m.value[0].bphone;let _=String(R.value).substring(3,19),$=ue(_).value+1,ee=String($);n.processNumber=V.value.concat(ee),f(n)}catch(d){alert(d)}},F=async d=>{t.value=!0,j.value=null;try{const u=await fetch(d);T.value=await u.json(),k.value=T.value.MinimumPropertyInfos[0],n.muni=k.value.Municipality,n.folio=k.value.Strap,S.value=n.folio,P.value=S.value.substring(1,2)}catch(u){j.value=u.message}finally{t.value=!1}},Q=async()=>{f(n)},Y=()=>{M.push("/roofsystem")};function Z(d,u){d=n,u=L.value,console.log(d),d.length!==0&&y.addSystem(d,u,P.value,o.value,A.value)}return{isDialog:s,fetchData:F,onSubmit:Q,accountUsers:m,getUser:c,email:D,dba:E,invoke:O,phone:w,name:C,licenseStatus:B,muniProcess:o,addUser:b,navigateNext:Y,addItemAndClear:Z,selectedApplication:L,type:v,resNum:R,setProperties:g,localStorage,...ne(n),responseMessage:l,lastNum:J,useLast:H,load:K,checkMB:P,checkV:S,content:I}}},i=t=>(pe("data-v-f7bb71c5"),t=t(),fe(),t),Ue={class:"container md:w-1/3",style:{"margin-left":"650px"}},Me={class:"flex flex-row"},Ie={class:"flex mt-4 space-y-2 flex-col gap-2"},Ae=i(()=>e("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Ce={class:"flex justify-center"},De={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Be=i(()=>e("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ee={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Le={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Re=i(()=>e("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Te={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},je=i(()=>e("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Fe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Oe=i(()=>e("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),We={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},qe=i(()=>e("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=i(()=>e("label",{id:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Xe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=i(()=>e("label",{id:"Email",style:{color:"#122620"}},"Email",-1)),Je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ke=i(()=>e("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ye=i(()=>e("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},$e=i(()=>e("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),eo={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},oo=i(()=>e("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),lo={key:0},so=i(()=>e("br",null,null,-1)),to=i(()=>e("br",null,null,-1));function ao(t,l,M,s,I,X){const f=we,m=_e,c=he,b=ge,v=ye,V=ve,y=be;return x(),W(ce,null,[s.isDialog?(x(),q(f,{key:0})):U("",!0),e("div",Ue,[e("form",null,[e("div",Me,[e("div",Ie,[Ae,e("div",Ce,[r(m,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=o=>s.selectedApplication=o),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),e("div",De,[Be,r(c,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=o=>s.licenseStatus=o),type:"text",placeholder:"status"},null,8,["modelValue"])]),e("div",Ee,[e("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...o)=>s.onSubmit&&s.onSubmit(...o))},[e("div",Le,[Re,G(r(c,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=o=>s.muniProcess=o),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[y,"Enter Municipality Process Number",void 0,{top:!0}]])]),e("div",Te,[je,G(r(c,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=o=>t.address=o),placeholder:"address"},null,8,["modelValue"]),[[y,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),r(b,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),e("div",Fe,[Oe,r(c,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=o=>s.dba=o),type:"text",placeholder:"dba"},null,8,["modelValue"])]),e("div",We,[qe,r(c,{id:"name",modelValue:s.name,"onUpdate:modelValue":l[5]||(l[5]=o=>s.name=o),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ge,[He,r(v,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=o=>s.phone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999"},null,8,["modelValue"])]),e("div",Xe,[ze,r(c,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=o=>s.email=o),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(x(),q(V,{key:0,severity:"error"},{default:re(()=>[me("Email is required")]),_:1})):U("",!0)]),e("div",Je,[Ke,r(c,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=o=>t.muni=o),type:"text",placeholder:"municipality",style:{color:"green"}},null,8,["modelValue"])]),e("div",Qe,[Ye,r(c,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=o=>t.folio=o),type:"text",placeholder:"folio",onInput:t.updatemEProcess,style:{color:"green"}},null,8,["modelValue","onInput"])]),e("div",Ze,[$e,r(c,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=o=>t.permit=o),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",eo,[oo,r(c,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=o=>t.processNumber=o),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(x(),W("p",lo,ie(s.responseMessage),1)):U("",!0),so,r(b,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=o=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),to])])])])])],64)}const No=ke(Ne,[["render",ao],["__scopeId","data-v-f7bb71c5"]]);export{No as default};
