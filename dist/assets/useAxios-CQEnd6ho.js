import{N as J,w as L,a0 as M,af as S,r as B}from"./index-BQAun09o.js";import{a as W}from"./axios-DTyqpfTh.js";const{Axios:Q,AxiosError:V,CanceledError:X,isCancel:Y,CancelToken:Z,VERSION:$,all:ee,Cancel:te,isAxiosError:ne,spread:oe,toFormData:re,AxiosHeaders:le,HttpStatusCode:ie,formToJSON:se,getAdapter:ue,mergeConfig:ae}=W;function T(e){return typeof e=="function"?e():J(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const G=()=>{};function H(e,i=!1,n="Timeout"){return new Promise((h,w)=>{setTimeout(i?()=>w(n):h,e)})}function O(e,i=!1){function n(t,{flush:l="sync",deep:a=!1,timeout:c,throwOnTimeout:m}={}){let r=null;const d=[new Promise(u=>{r=L(e,f=>{t(f)!==i&&(r==null||r(),u(f))},{flush:l,deep:a,immediate:!0})})];return c!=null&&d.push(H(c,m).then(()=>T(e)).finally(()=>r==null?void 0:r())),Promise.race(d)}function h(t,l){if(!M(t))return n(f=>f===t,l);const{flush:a="sync",deep:c=!1,timeout:m,throwOnTimeout:r}=l??{};let s=null;const u=[new Promise(f=>{s=L([e,t],([y,E])=>{i!==(y===E)&&(s==null||s(),f(y))},{flush:a,deep:c,immediate:!0})})];return m!=null&&u.push(H(m,r).then(()=>T(e)).finally(()=>(s==null||s(),T(e)))),Promise.race(u)}function w(t){return n(l=>!!l,t)}function A(t){return h(null,t)}function v(t){return h(void 0,t)}function C(t){return n(Number.isNaN,t)}function x(t,l){return n(a=>{const c=Array.from(a);return c.includes(t)||c.includes(T(t))},l)}function P(t){return b(1,t)}function b(t=1,l){let a=-1;return n(()=>(a+=1,a>=t),l)}return Array.isArray(T(e))?{toMatch:n,toContains:x,changed:P,changedTimes:b,get not(){return O(e,!i)}}:{toMatch:n,toBe:h,toBeTruthy:w,toBeNull:A,toBeNaN:C,toBeUndefined:v,changed:P,changedTimes:b,get not(){return O(e,!i)}}}function U(e){return O(e)}function ce(...e){const i=typeof e[0]=="string"?e[0]:void 0,n=typeof i=="string"?1:0,h={immediate:!!n,shallow:!0,abortPrevious:!0};let w={},A=W,v=h;const C=o=>!!(o!=null&&o.request);e.length>0+n&&(C(e[0+n])?A=e[0+n]:w=e[0+n]),e.length>1+n&&C(e[1+n])&&(A=e[1+n]),(e.length===2+n&&!C(e[1+n])||e.length===3+n)&&(v=e[e.length-1]||h);const{initialData:x,shallow:P,onSuccess:b=G,onError:t=G,immediate:l,resetOnExecute:a=!1}=v,c=S(),m=(P?S:B)(x),r=B(!1),s=B(!1),d=B(!1),u=S();let f=new AbortController;const y=o=>{r.value||!s.value||(f.abort(o),f=new AbortController,d.value=!0,s.value=!1,r.value=!1)},E=o=>{s.value=o,r.value=!o},j=()=>{a&&(m.value=x)},D=()=>new Promise((o,g)=>{U(r).toBe(!0).then(()=>u.value?g(u.value):o(I))}),N={then:(...o)=>D().then(...o),catch:(...o)=>D().catch(...o)};let R=0;const F=(o=i,g={})=>{u.value=void 0;const _=typeof o=="string"?o:i??g.url;if(_===void 0)return u.value=new V(V.ERR_INVALID_URL),r.value=!0,N;j(),v.abortPrevious!==!1&&y(),E(!0),R+=1;const q=R;return d.value=!1,A(_,{...w,...typeof o=="object"?o:g,signal:f.signal}).then(p=>{if(d.value)return;c.value=p;const k=p.data;m.value=k,b(k)}).catch(p=>{u.value=p,t(p)}).finally(()=>{var p;(p=v.onFinish)==null||p.call(v),q===R&&E(!1)}),N};l&&i&&F();const I={response:c,data:m,error:u,isFinished:r,isLoading:s,cancel:y,isAborted:d,isCanceled:d,abort:y,execute:F};return{...I,...N}}export{ce as u};
