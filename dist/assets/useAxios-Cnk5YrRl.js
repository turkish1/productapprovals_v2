import{bc as A,r as f,bd as S,at as q}from"./index-BE6y4DOZ.js";import{a as L}from"./axios-I_wKO6Q1.js";const{Axios:z,AxiosError:_,CanceledError:G,isCancel:K,CancelToken:M,VERSION:Q,all:W,Cancel:X,isAxiosError:Y,spread:Z,toFormData:$,AxiosHeaders:U,HttpStatusCode:ee,formToJSON:te,getAdapter:oe,mergeConfig:ne}=L;function le(...t){const a=typeof t[0]=="string"?t[0]:void 0,o=typeof a=="string"?1:0,x={immediate:!!o,shallow:!0,abortPrevious:!0};let w={},v=L,i=x;const d=e=>!!(e!=null&&e.request);t.length>0+o&&(d(t[0+o])?v=t[0+o]:w=t[0+o]),t.length>1+o&&d(t[1+o])&&(v=t[1+o]),(t.length===2+o&&!d(t[1+o])||t.length===3+o)&&(i=t[t.length-1]||x);const{initialData:E,shallow:N,onSuccess:g=S,onError:H=S,immediate:T,resetOnExecute:V=!1}=i,y=A(),h=(N?A:f)(E),l=f(!1),u=f(!1),r=f(!1),s=A();let p=new AbortController;const m=e=>{l.value||!u.value||(p.abort(e),p=new AbortController,r.value=!0,u.value=!1,l.value=!1)},R=e=>{u.value=e,l.value=!e},j=()=>{V&&(h.value=E)},D=()=>new Promise((e,c)=>{q(l).toBe(!0).then(()=>s.value?c(s.value):e(I))}),C={then:(...e)=>D().then(...e),catch:(...e)=>D().catch(...e)};let b=0;const F=(e=a,c={})=>{s.value=void 0;const O=typeof e=="string"?e:a??c.url;if(O===void 0)return s.value=new _(_.ERR_INVALID_URL),l.value=!0,C;j(),i.abortPrevious!==!1&&m(),R(!0),b+=1;const k=b;return r.value=!1,v(O,{...w,...typeof e=="object"?e:c,signal:p.signal}).then(n=>{if(r.value)return;y.value=n;const P=n.data;h.value=P,g(P)}).catch(n=>{s.value=n,H(n)}).finally(()=>{var n;(n=i.onFinish)==null||n.call(i),k===b&&R(!1)}),C};T&&a&&F();const I={response:y,data:h,error:s,isFinished:l,isLoading:u,cancel:m,isAborted:r,isCanceled:r,abort:m,execute:F};return{...I,...C}}export{le as u};
