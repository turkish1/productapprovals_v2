import{e as n,f as V,y as B,z as Y,C as z,u as J,h as Q,D as W,E as X,G as Z,o as F,c as M,i as t,H as k,j as r,I as $,J as ee,t as oe,d as ae,F as te,K as se,L as le,M as ne,T as ie}from"./index-B2smwGly.js";import{_ as re}from"./FileSaver-D8VEgNAx.js";import{s as de}from"./index-B3faANOt.js";import{s as ce}from"./index-P6uYNwrj.js";import{s as me}from"./index-BUJJqf1Q.js";import{s as ue}from"./index-Cb5mLeSw.js";import{u as pe}from"./accountsStore-BMO8BRMi.js";import{u as E}from"./useAxios-fhzp9nkt.js";import{u as fe}from"./auth-DiQeo3ey.js";import{E as _e}from"./jspdf.es.min-BVoazh76.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./permitapp-NCykq1Gf.js";import"./index-DU9H1nvo.js";import"./index-B3wxthp8.js";import"./index-BFLMIBiU.js";import"./index-mJ9Mqzll.js";import"./index-34UwQZj5.js";function ge(){const l=n([]),a=n("");let v=n([]);const{accountUsers:e,getUser:y,addUser:s}=pe();let d=V({license:"",dba:"",name:"",username:"",password:"",secondary_status:"",expiration_date:"",address:"",projects:[],password:"",cphone:"",bphone:"",email:"",date:new Date});const g=n("");let h="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/accounts";const{execute:c,data:m}=E(h,{method:"POST"},{immediate:!1});let u=V({});function p(o){console.log(o),u=o,c({data:o}),a.value="Form submitted successfully!",s(u),console.log(u,"System added")}return{takp:p,noaNum:l,formData:d,error:g,accountUsers:e,getUser:y,addUser:s,accountUsers:e,results:v,responseMessage:a,...B(u)}}const he=Y("cccinput",{state:()=>({cccinput:[],id:0}),actions:{addData(l){this.cccinput.push({cccAccounts:l,completed:!1})}},getters:{cccData:l=>l.cccAccounts}});function xe(){const l=n(""),a=n(""),v=n(""),e=n(""),y=n("");let s="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/contractors";const{execute:d,then:g,data:h}=E(s,{method:"GET"},{immediate:!1}),c=V({});let m=V({license:"",dba:"",name:"",city:"",license_status:"",expiration_date:"",address:""});d().then(f=>(c.value=h.value,v));function u(f){console.log(f),e.value=f,D(e.value)}const p=n(""),o=n([]);function D(f){console.log(f),p.value=f;for(let b=0;b<c.value.length-1;b++)p.value===c.value[b].alt_license&&o.value.push(c.value[b]);m.license=o.value[0].alt_license,m.dba=o.value[0].DBA,m.name=o.value[0].name,m.license_status=o.value[0].secondary_status,m.city=o.value[0].city,m.expiration_date=o.value[0].expiration_date,m.effective_date=o.value[0].effective_date,m.address=o.value[0].address1}return he(),{error:a,retrieveAccount:u,responseMessage:l,results:v,fndContract:D,contractors:c,licenseNumbers:y,cccAccounts:m}}const ye={setup(){const l=n([]),a=fe(),{message:v}=z(a),e=J(),y=n(!1);n(!1);const s=V({license:"",dba:"",name:"",username:"",password:"",license_status:"",expiration_date:"",address:"",city:"",projects:[],cphone:"",bphone:"",email:"",insurance:"",carrier:"",date:new Date}),{cccAccounts:d,retrieveAccount:g,foundContrator:h}=xe();n(""),Q(()=>{});const c=n(""),{Data:m,takp:u}=ge(),p=async()=>{D.value&&(u(s),s.license="",s.name="",s.license_status="",s.dba="",s.address="",s.cphone="",s.bphone="",s.email="",s.insurance="",s.carrier="",w())};function o(){g(s.license),l.value=d,console.log("Contractors:",l.value),s.dba=l.value.dba,s.name=l.value.name,s.expiration_date=l.value.expiration_date,s.address=l.value.address,s.city=l.value.city,s.expiration_date=l.value.expiration_date,s.license_status=l.value.license_status,c.value=l.value.license_status,console.log(s,c.value),f()}const D=W(()=>s.license_status.trim()!==""&&s.license_status.trim()!=="I"&&s.email.trim()!=="");function f(){c.value===""?s.license_status="":c.value==="A"?(s.license_status="Active",C()):c.value==="I"&&(s.license_status="Inactive",alert("Your license is Inactive!"),w())}const b=n(!1);function C(){console.log(s.expiration_date);const _=new Date(s.expiration_date),x=new Date;_.setHours(0,0,0,0),x.setHours(0,0,0,0),_<=x&&(alert("Your license is Expired!"),w())}const w=()=>{e.push("/")},G=X(),I=n(),N=()=>{I.value&&I.value.upload&&I.value.upload()},P=()=>{G.add({severity:"contrast",summary:"Contrast",detail:"File Uploaded",life:3e3})},R=n([{name:"Florida",code:"Florida"},{name:"Georgia",code:"Georgia"}]),T=n([{name:"Miami",code:"Miami"},{name:"Homestead",code:"Homestead"},{name:"Miami Beach",code:"Miami Beach"},{name:"Miami Gardens",code:"Miami Gardens"}]),L=n([{name:"Roofing Contractor",code:"Roofing"},{name:"General Contractor",code:"General"}]),H=n(null),j=n(null),K=n(null),U=()=>{const _=document.getElementById("shingle");if(console.log("Element to capture:",_),!_){console.error('Element with id "shingle" not found');return}html2canvas(_).then(x=>{const S=x.toDataURL("image/png"),A=new _e;A.addImage(S,"PNG",10,10,190,0);const q=A.output("blob");O(q)})},O=async _=>{try{const S=await(await window.showSaveFilePicker({suggestedName:"permitapp.pdf",types:[{description:"PDF file",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await S.write(_),await S.close(),console.log("PDF saved successfully without popping download dialog!")}catch(x){console.error("Error saving file:",x)}};return Z(()=>{U(),console.log("Component unmounted: PDF generated.")}),{formDatas:s,...B(s),disabled:y,navigateNext:w,authStore:a,DateCheck:C,message:v,isDateValid:b,isFormValid:D,trade:L,trades:H,onSubmit:p,onUpload:P,upload:N,retriveContractor:o,dropdownItemCt:T,dropdownItemSt:R,dropdownItemct:K,dropdownItemst:j,generatePdf:U}}},i=l=>(se("data-v-b10d8720"),l=l(),le(),l),be=i(()=>t("div",{class:"h-[10rem]"},null,-1)),De={class:"grid h-56 grid-cols-3 content-start gap-4",style:{"margin-left":"50px","margin-top":"50px","margin-right":"40px"}},Ve=i(()=>t("div",{class:"font-semibold text-xl"},"Contractor Information",-1)),we={class:"flex flex-col gap-4"},Se=i(()=>t("label",{for:"lic1",style:{color:"#122620"}},"State of Florida License No.",-1)),Ie={class:"flex flex-wrap gap-2"},Ce=i(()=>t("label",{for:"trade",style:{color:"#122620"}},"Trade",-1)),Ue={class:"flex flex-col gap-2"},Ae=i(()=>t("label",{for:"dba",style:{color:"#122620"}},"DBA",-1)),Fe={class:"flex flex-col gap-2"},Me=i(()=>t("label",{for:"name",style:{color:"#122620"}},"Qualifier Name",-1)),ke={class:"flex flex-col gap-2"},Be=i(()=>t("label",{for:"secondary_status",style:{color:"#122620"}},"License Status",-1)),Ee={class:"flex flex-col gap-2"},Ge=i(()=>t("label",{for:"license",style:{color:"#122620"}},"License Expiration Date",-1)),Ne={class:"flex flex-col gap-2"},Pe=i(()=>t("label",{for:"license",style:{color:"#122620"}},"Insurance Policy Number",-1)),Re={class:"flex flex-col gap-2"},Te=i(()=>t("label",{for:"license",style:{color:"#122620"}},"Insurance Carrier",-1)),Le=i(()=>t("div",{class:"h-[10rem]"},null,-1)),He={class:"grid h-64 grid-cols-3 content-around gap-12 ...",style:{"margin-left":"250px","margin-right":"40px"}},je={class:"flex flex-col gap-4"},Ke=i(()=>t("label",{for:"addr",style:{color:"#122620"}},"Business Address",-1)),Oe={class:"flex flex-col gap-4"},qe=i(()=>t("label",{for:"state",style:{color:"#122620"}},"City",-1)),Ye={class:"flex flex-col gap-4"},ze=i(()=>t("label",{for:"state",style:{color:"#122620"}},"State",-1)),Je={class:"flex flex-col gap-4"},Qe=i(()=>t("label",{for:"bphone",style:{color:"#122620"}},"Business Phone",-1)),We={class:"flex flex-col gap-4"},Xe=i(()=>t("label",{for:"cphone",style:{color:"#122620"}},"Cell Phone Number",-1)),Ze={class:"flex flex-col gap-4"},$e=i(()=>t("label",{for:"email1",style:{color:"#122620"}},"Gmail account",-1)),eo={class:"md:w-1/4 flex justify-center flex-wrap gap-4",style:{"margin-left":"50px"}},oo={class:"md:w-2/3 flex flex-col gap-2",style:{"margin-top":"120px"}},ao=i(()=>t("label",{for:"addr",style:{color:"#122620"}},"Upload Insurance Information",-1)),to={key:0};function so(l,a,v,e,y,s){const d=ue,g=me,h=ce,c=de,m=ne,u=re,p=ie;return F(),M(te,null,[t("form",{class:"container md:w-2/3",onSubmit:a[14]||(a[14]=ee((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"])),style:{"margin-left":"350px","margin-top":"50px"}},[be,t("div",De,[Ve,t("div",we,[Se,k(r(d,{type:"text",modelValue:e.formDatas.license,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formDatas.license=o),placeholder:"CRC000000",onChange:l.checkLicense,invalid:e.formDatas.license==="",onKeydown:$(e.retriveContractor,["tab"])},null,8,["modelValue","onChange","invalid","onKeydown"]),[[p,"Enter your license and hit tab"]])]),t("div",Ie,[Ce,r(g,{id:"trad",modelValue:e.trades,"onUpdate:modelValue":a[1]||(a[1]=o=>e.trades=o),options:e.trade,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),t("div",Ue,[Ae,r(d,{id:"dba",type:"text",modelValue:e.formDatas.dba,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formDatas.dba=o),placeholder:" ",invalid:e.formDatas.dba===""},null,8,["modelValue","invalid"])]),t("div",Fe,[Me,r(d,{id:"name",type:"text",modelValue:e.formDatas.name,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formDatas.name=o),placeholder:" ",invalid:e.formDatas.name===""},null,8,["modelValue","invalid"])]),t("div",ke,[Be,r(d,{id:"secondary_status",type:"text",modelValue:e.formDatas.license_status,"onUpdate:modelValue":a[4]||(a[4]=o=>e.formDatas.license_status=o),placeholder:" ",invalid:e.formDatas.license_status===""},null,8,["modelValue","invalid"])]),t("div",Ee,[Ge,r(d,{id:"license",type:"text",modelValue:e.formDatas.expiration_date,"onUpdate:modelValue":a[5]||(a[5]=o=>e.formDatas.expiration_date=o),placeholder:" ",invalid:e.formDatas.expiration_date===""},null,8,["modelValue","invalid"])]),t("div",Ne,[Pe,r(d,{id:"license",type:"text",modelValue:e.formDatas.insurance,"onUpdate:modelValue":a[6]||(a[6]=o=>e.formDatas.insurance=o),placeholder:" ",invalid:e.formDatas.insurance===""},null,8,["modelValue","invalid"])]),t("div",Re,[Te,r(d,{id:"license",type:"text",modelValue:e.formDatas.carrier,"onUpdate:modelValue":a[7]||(a[7]=o=>e.formDatas.carrier=o),placeholder:" ",invalid:e.formDatas.carrier===""},null,8,["modelValue","invalid"])])]),Le,t("div",He,[t("div",je,[Ke,r(d,{id:"addr",type:"text",modelValue:e.formDatas.address,"onUpdate:modelValue":a[8]||(a[8]=o=>e.formDatas.address=o),placeholder:"address"},null,8,["modelValue"])]),t("div",Oe,[qe,r(d,{id:"city",type:"text",modelValue:e.formDatas.city,"onUpdate:modelValue":a[9]||(a[9]=o=>e.formDatas.city=o),placeholder:"city"},null,8,["modelValue"])]),t("div",Ye,[ze,r(g,{id:"state",modelValue:e.dropdownItemst,"onUpdate:modelValue":a[10]||(a[10]=o=>e.dropdownItemst=o),options:e.dropdownItemSt,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),t("div",Je,[Qe,r(h,{modelValue:e.formDatas.bphone,"onUpdate:modelValue":a[11]||(a[11]=o=>e.formDatas.bphone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.formDatas.bphone===""},null,8,["modelValue","invalid"])]),t("div",We,[Xe,r(h,{modelValue:e.formDatas.cphone,"onUpdate:modelValue":a[12]||(a[12]=o=>e.formDatas.cphone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.formDatas.cphone===""},null,8,["modelValue","invalid"])]),t("div",Ze,[$e,k(r(d,{id:"email1",modelValue:e.formDatas.email,"onUpdate:modelValue":a[13]||(a[13]=o=>e.formDatas.email=o),type:"text",placeholder:"email",invalid:e.formDatas.email===""},null,8,["modelValue","invalid"]),[[p,"Enter your gmail account in order to submit"]])])]),t("div",eo,[r(c,{label:"Submit",severity:"contrast",raised:"",onClick:e.onSubmit,disabled:!e.isFormValid},null,8,["onClick","disabled"])]),t("div",oo,[ao,r(m),r(u,{class:"w-2/3"})])],32),l.responseMessage?(F(),M("p",to,oe(l.responseMessage),1)):ae("",!0)],64)}const Vo=ve(ye,[["render",so],["__scopeId","data-v-b10d8720"]]);export{Vo as default};
