import{_ as K}from"./FileSaver-DMk3bxBq.js";import{e as c,H as D,f as V,E as U,h as j,o as k,c as b,i as t,F as B,z as P,t as x,n as q,J as A,k as C,X as H,Y as J,j as h,v as X,p as Y,q as Q,x as N,A as W}from"./index-D3wMbSd2.js";import{s as Z}from"./index-C0tn4pC9.js";import{u as ee,a as te}from"./useAxios-D9GkFEC9.js";import{u as se}from"./generalpageStore-BZFwaoVa.js";import{u as L}from"./roofList-D481aCBT.js";import{u as oe}from"./permitapp-O4JcHwCc.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as O}from"./index-B3rhT1BY.js";import{s as ae}from"./index-CnuJy6v_.js";import{s as le}from"./index-BXpZiN2J.js";import"./index-CEPVotdU.js";import"./index-CmWqcyAl.js";import"./index-Bm8DRZZz.js";import"./index-D7mO1f_j.js";import"./index-AN2CWQvo.js";import"./index-vLeHrgo5.js";const ne="https://75tyxhvxx6be6gznfs5kcne73a0sxznj.lambda-url.us-east-1.on.aws/";function ie(){const p=c(null),i=c(!1);var m=c(null),r=c(null);const{data:v,error:u,isFetching:f,execute:l}=ee(ne,{method:"POST",headers:{"Content-Type":"application/json"}},te,{immediate:!1});return{data:v,errors:p,isFetching:f,loading:i,postGeneral:async a=>{r.value=a,console.log(r.value),i.value=!0,u.value=null;try{return await l({data:r.value})}catch(_){u.value=_.massage,console.error("Lambda post failed:",_)}finally{i.value=!1}},postRoofcheck:async a=>{m.value=a,console.log(m.value),i.value=!0,u.value=null;try{return await l({data:m.value})}catch(_){u.value=_.massage,console.error("Lambda post failed:",_)}finally{i.value=!1}}}}function re(){const p=L(),{roofList:i}=D(p),m=se(),{postGeneral:r}=ie(),v=c(null),u=c(m.$state.generalpdfinput),f=c(!1),l=V({mtile:!1,adtile:!1,shingle:!1,metal:!1,slope:!1}),o=V({steep1:0,steep2:0,steep3:0,steep4:0,low1:0}),e=V({steep:0,lowslope:0,total:0}),a=V({steepData:"",slopeData:"",totalData:"",mtileChk:!1,adtileChk:!1,shingleChk:!1,slopeChk:!1,metalChk:!1,roofCheck:"",area:""});function _(M){v.value=M.value[0];const T={"Asphalt Shingle":{dim:"dim1",flag:"shingle",steepKey:"steep1"},"Adhesive Set Tile":{dim:"dim4",flag:"adtile",steepKey:"steep2"},"Mechanical Fastened Tile":{dim:"dim3",flag:"mtile",steepKey:"steep3"},"Metal Panel":{dim:"dim5",flag:"metal",steepKey:"steep4"},"Low Slope":{dim:"dim2",flag:"slope"}};Object.keys(l).forEach(y=>l[y]=!1),Object.keys(o).forEach(y=>o[y]=0),i.value.forEach(y=>{const S=T[y.item];if(S){const $=Number(y[S.dim])||0;l[S.flag]=!0,a[`${S.flag}Chk`]=!0,S.flag==="slope"?o.low1=$:o[S.steepKey]=$}}),R()}async function R(){e.steep=o.steep1+o.steep2+o.steep3+o.steep4,e.lowslope=o.low1,e.total=e.steep+e.lowslope,a.area=e.total,console.log(a,e),a.steepData=e.steep,a.slopeData=e.lowslope,a.totalData=e.total,a.roofCheck=v.value,m.addgeneralpdfData(a),await r(a),f.value=!0}return{addRoof:_,roofArea:R,dataGeneral:a,generalType:u,isGeneralPageValid:f}}const de=U("roofinput",{state:()=>({roofinput:[],id:0}),actions:{addCheck(p){this.roofinput.push({roofCheckdata:p,completed:!1})},reset(){this.roofinput=[]},persist:!0}}),ce={class:"terminal"},pe={class:"terminal-content"},ue={class:"content"},me=["onClick"],fe=15,ve={__name:"RoofSystemList",setup(p){const i=L(),{roofList:m}=D(i),{toggleCompleted:r}=D(i),v=["Initializing system...","Loading modules...","Connecting to server...","Server connection established.","Awaiting Roof System Selection..."],u=c([]);function f(){let l=0;const o=setInterval(()=>{l<v.length?(u.value.length>=fe&&u.value.shift(),u.value.push(v[l]),l++):clearInterval(o)},500)}return j(()=>{f()}),(l,o)=>(k(),b("div",ce,[t("div",pe,[(k(!0),b(B,null,P(u.value,(e,a)=>(k(),b("div",{key:a,class:"terminal-line"},x(e),1))),128)),(k(!0),b(B,null,P(C(m),e=>(k(),b("div",{key:e.id,class:"item"},[t("div",ue,[t("span",{class:q({completed:e.completed}),style:{color:"green"}},x(e.item)+" "+x(e.dim1)+" "+x(e.dim2)+" "+x(e.dim3)+" "+x(e.dim4)+" "+x(e.dim5),3),t("span",{onClick:A(a=>C(r)(e.id),["stop"])},"âœ”",8,me)])]))),128))])]))}},he=I(ve,[["__scopeId","data-v-66faea4b"]]),g=p=>(Y("data-v-1570e5a8"),p=p(),Q(),p),_e={class:"layout"},ge={class:"card glass"},ye=g(()=>t("i",{class:"pi pi-refresh"},null,-1)),Se=g(()=>t("h2",{class:"title"},"Roof System",-1)),ke={class:"field"},be=g(()=>t("label",{for:"area"},"Square Footage",-1)),xe={class:"field"},Ce=g(()=>t("label",{for:"system"},"Roof System",-1)),we={class:"flex flex-wrap mt-4 space-y-6 justify-center gap-8"},$e={class:"flex items-center mt-4 space-y-6"},Ve=g(()=>t("label",{for:"newroof",class:"ml-2",style:{color:"#122620"}},"New Roof ",-1)),Re={class:"flex items-center mt-4 space-y-6"},Te=g(()=>t("label",{for:"reroof",class:"ml-2",style:{color:"#122620"}},"Re-Roof ",-1)),Ae={class:"footer"},De=g(()=>t("br",null,null,-1)),Le=g(()=>t("p",{class:"dz-title"},"For Images documents",-1)),Ie=g(()=>t("p",{class:"dz-sub"},[N("Drag & drop files here"),t("br"),N("or click to upload")],-1)),Me=2,Fe={__name:"RoofSystemForm",setup(p){var F;const i=oe(),m=de(),r=L(),v=[{name:" "},{name:"Asphalt Shingle"},{name:"Low Slope"},{name:"Mechanical Fastened Tile"},{name:"Adhesive Set Tile"},{name:"Metal Panel"}],u=v.slice(1),f=c(""),l=c(null),o=c(!1),e=c(!1),a=c((F=i.$state.permitapp[0])==null?void 0:F.miamibeach),_=H(a.value);J(()=>{e.value=_.value===Me});const{addRoof:R,roofArea:M}=re(),T=V({roofCheck:""});c("");async function y(){var n,G,z;const d=(G=(n=l.value)==null?void 0:n.name)==null?void 0:G.trim();if(!d)return;const s=f.value,w={"Asphalt Shingle":()=>r.addSystemShingle(d,s),"Low Slope":()=>r.addSystemBur(d,s),"Mechanical Fastened Tile":()=>r.addSystemMTile(d,s),"Adhesive Set Tile":()=>r.addSystemATile(d,s),"Metal Panel":()=>r.addSystemMetal(d,s)};(z=w[d])==null||z.call(w),console.log(o.value),T.roofCheck=o.value,m.addCheck(T),$()}function S(){R(o),$()}function $(){f.value="",l.value=null}function E(){r.$reset()}return(d,s)=>{const w=Z;return k(),b("main",_e,[t("aside",ge,[h(C(O),{class:"icon-btn",plain:"",text:"",onClick:E},{default:X(()=>[ye]),_:1}),Se,t("form",{class:"grid-form",onSubmit:s[4]||(s[4]=A(()=>{},["prevent"]))},[t("div",ke,[be,h(C(ae),{id:"area",modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=n=>f.value=n),placeholder:"e.g. 1200"},null,8,["modelValue"])]),t("div",xe,[Ce,h(C(le),{id:"system",modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=n=>l.value=n),options:e.value?C(u):v,optionLabel:"name",placeholder:"Select roof system",class:"w-full",onChange:y},null,8,["modelValue","options"])]),t("div",we,[t("div",$e,[h(w,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=n=>o.value=n),invalid:!o.value,inputId:"newroof",name:"checked",value:"newroof"},null,8,["modelValue","invalid"]),Ve]),t("div",Re,[h(w,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=n=>o.value=n),invalid:!o.value,inputId:"reroof",name:"checked",value:"reroof"},null,8,["modelValue","invalid"]),Te])])],32),t("footer",Ae,[h(C(O),{label:"Submit",severity:"contrast",raised:"",as:"router-link",to:"/dynamicstepper",onClick:S})]),De,h(he)]),t("section",{class:"card dropzone",onDragover:s[6]||(s[6]=A(n=>d.dragOver=!0,["prevent"])),onDragleave:s[7]||(s[7]=n=>d.dragOver=!1),onDrop:s[8]||(s[8]=A((...n)=>d.handleDrop&&d.handleDrop(...n),["prevent"]))},[Le,Ie,t("input",{type:"file",accept:"application/pdf",multiple:"",class:"file-input",onChange:s[5]||(s[5]=(...n)=>d.handleFiles&&d.handleFiles(...n))},null,32)],32)])}}},Ge=I(Fe,[["__scopeId","data-v-1570e5a8"]]),ze={id:"id",class:"grid grid-cols-3 gap-6"},Be={class:"roof-app",style:{"margin-left":"250px","margin-top":"20px",border:"none","border-radius":"12px","box-shadow":"4px 4px 16px rgb(22, 183, 183)","padding-bottom":"10px",position:"center","max-height":"400px",width:"500px",top:"5vh"}},Pe={__name:"RoofSystemApp",setup(p){return j(()=>{W.init({duration:4500,easing:"ease-in-out",once:!1})}),(i,m)=>(k(),b("div",ze,[t("div",Be,[h(Ge)])]))}},Ne=I(Pe,[["__scopeId","data-v-d0495c4e"]]),Oe={class:"grid grid-cols-2 gap-0"},je={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}},nt={__name:"RoofSystem",setup(p){return(i,m)=>(k(),b("div",Oe,[h(Ne),t("div",je,[h(K)])]))}};export{nt as default};
