import{e as o,N as L,u as $,ao as q,bd as z,P as M,f as y,ab as N,ap as k,at as A,o as G,c as I,R as D,aq as S,h as u,p as Y,g as i,l as j,au as H,ar as J,q as K,Y as Q}from"./index-Bu1j2vh1.js";import{s as W}from"./index-CYS61bvl.js";import{a as X,u as Z}from"./use-downloadpdf-EOL18X9J.js";import{c as ee,u as oe}from"./pdfsignStore-Ue3sku0R.js";import{u as te}from"./permitapp-BpaY2Ta5.js";import"./index-BO-shrY0.js";import"./useAxios-CvRFoOnV.js";const se={class:"card"},ae={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},ne={class:"payment-widget"},le=i("h2",{style:{color:"black"}},"Download Link",-1),ve={__name:"Payment",setup(re){var v,w;const b=te();ee();const T=o(((w=(v=b.$state.permitapp[0])==null?void 0:v.formdt)==null?void 0:w.muniProc)||""),B=o(!1),P=o(!1),a=o(!1),V=o(!1),n=o(!1);o(!1);const l=X();L(l.$state);const E=$(),d=q("my-storage",{processNumber:T.value}),{resp:m}=oe();z(()=>{}),M(),o(0),o(),y(()=>{var e,t;((t=(e=m.value)==null?void 0:e.status)==null?void 0:t.status)===200&&(V.value=!0,console.log(m.value.status.status))});const p=o("");y(async()=>{const e=new URLSearchParams(location.search).get("session_id");if(p.value=e,e)console.log(p.value);else{console.log(e);return}});const{secondFetch:O}=Z(),R=N(()=>{O(d.value.processNumber),console.log(d.value),setTimeout(()=>{n.value=!0},500),a.value=!0});k(R,()=>{});function U(){C()}const f=N(()=>{setTimeout(()=>{n.value=!0},500)}),C=async()=>{var _,g,h,x;const e=(g=(_=l.downloadinput[0])==null?void 0:_.downloadData)==null?void 0:g.download_url;if(console.log(e),!e||e.length===0)return;const t=(x=(h=l.downloadinput[0])==null?void 0:h.downloadData)==null?void 0:x.download_url;if(!t)return;B.value=!0;const r=t,c="processnumber.zip",s=document.createElement("a");s.href=r,s.download=c,s.click(),s.remove(),a.value=!0,F()};k(f,()=>{}),A(async()=>{await H(f).toBe(!0)});const F=()=>{console.log("Entered Navigate"),setTimeout(()=>{n.value=!0},1e3),E.push("/download")};return(e,t)=>{const r=W,c=Q;return G(),I("div",se,[D(u(Y(J),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[S,P.value]]),i("div",ae,[i("div",ne,[le,D(u(r,{onClick:U,severity:"contrast"},{default:j(()=>[K("Click Download Files")]),_:1},512),[[S,a.value]]),u(c)])])])}}};export{ve as default};
