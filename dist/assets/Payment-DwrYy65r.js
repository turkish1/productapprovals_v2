import{s as M}from"./index-UHQU6vCr.js";import{e as o,N as A,u as G,P as I,f as D,ao as W,ab as T,ap as b,at as Y,o as j,c as H,R as B,aq as P,h as a,p as J,g as d,l as K,au as Q,ar as X,q as Z,Y as oo}from"./index-fT6uM7hJ.js";import{s as eo}from"./index-BRLRYhi8.js";import{u as to,a as so}from"./use-downloadpdf-swC4qYrx.js";import{c as ao,u as no}from"./pdfsignStore-BBXGQEdA.js";import{u as lo}from"./permitapp-DOr21xHV.js";import{s as ro}from"./sessionStore-Cv_wWZHc.js";import"./index-BPfmzsMd.js";import"./useAxios-CgEwUL7U.js";const co={class:"card"},uo={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},io={class:"payment-widget"},mo=d("h2",{style:{color:"black"}},"Download Link",-1),ko={__name:"Payment",setup(po){var h,y;const V=lo();ro();const m=ao(),p=o(0),E=o(((y=(h=V.$state.permitapp[0])==null?void 0:h.formdt)==null?void 0:y.muniProc)||""),O=o(!1),R=o(!1),n=o(!1),$=o(!1),l=o(!1);o(!1),o(null);const{getNumber:C,result:fo,secondFetch:f}=to(),r=so();A(r.$state);const L=G(),{resp:v}=no();I();const U=o(0);o(),D(()=>{var e,t;p.value=1,m.addCount(p),console.log(m),((t=(e=v.value)==null?void 0:e.status)==null?void 0:t.status)===200&&($.value=!0,console.log(v.value.status.status))});const w=o("");D(async()=>{const e=new URLSearchParams(location.search).get("session_id");if(w.value=e,e)console.log(w.value);else{console.log(e);return}});const c=W("my-storage",{processNumber:E.value}),q=T(()=>{C(),setTimeout(()=>{l.value=!0},500),n.value=!0});b(q,()=>{});function z(){f(c.value),g()}const _=T(()=>{setTimeout(()=>{l.value=!0},200),f(c.value),console.log(c.value),g()}),g=async()=>{var x,S,N,k;const e=(S=(x=r.downloadinput[0])==null?void 0:x.downloadData)==null?void 0:S.download_url;if(console.log(e),!e||e.length===0)return;const t=(k=(N=r.downloadinput[0])==null?void 0:N.downloadData)==null?void 0:k.download_url;if(!t)return;O.value=!0;const u=t,i="processnumber.zip",s=document.createElement("a");s.href=u,s.download=i,s.click(),s.remove(),n.value=!0,F()};b(_,()=>{}),Y(async()=>{await Q(_).toBe(!0)});const F=()=>{console.log("Entered Navigate"),setTimeout(()=>{l.value=!0},1e3),L.push("/download")};return(e,t)=>{const u=eo,i=oo,s=M;return j(),H("div",co,[B(a(J(X),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[P,R.value]]),d("div",uo,[d("div",io,[mo,B(a(u,{onClick:z,severity:"contrast"},{default:K(()=>[Z("Wait for download")]),_:1},512),[[P,n.value]]),a(i),a(s,{value:U.value,severity:"contrast"},null,8,["value"])])])])}}};export{ko as default};
