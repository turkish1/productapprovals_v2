import{T as le}from"./index-DRuiycbA.js";import{s as re,_ as ne}from"./index-Bhx-86CY.js";import{s as ie}from"./index-Cvu4PV7M.js";import{_ as H,r as l,e as S,f as A,h as u,i as q,g as e,p as J,n as Z,a as W,u as ce,o as G,a7 as de,a6 as pe,ah as j,t as ue,G as E,l as L,E as me,k as ge,a5 as fe,ai as ve,m as be,a2 as he}from"./index-B5Kcxqj3.js";import{s as _e}from"./index-CZ0axrzT.js";import{s as ye}from"./index-CgYnkIE6.js";import{s as we}from"./index-C_LEEX4w.js";import{s as Se}from"./index-DZSDt0-G.js";import{s as xe}from"./index-TtEN6nlD.js";import{a as Ve,u as Pe}from"./useAxios-DccbYf3D.js";import{u as ke}from"./processStore-C5bVeJru.js";import{u as Ae}from"./accountsStore-CbaTDPtD.js";import{u as Ne}from"./permitapp-CHeD75TJ.js";import Ue from"./html2canvas.esm-CBrSDip1.js";import{E as Me}from"./jspdf.es.min-jv1IrHy7.js";import"./index-CM2iPE14.js";import"./index-DXkgR0bV.js";import"./index-LzFO0s94.js";import"./index-BVDk_Xfc.js";const f=o=>(J("data-v-354c67a3"),o=o(),Z(),o),Ce={class:"card flex justify-center ."},Ie=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"The use of the mePermit Application system is limited to properly licensed & insured Roofing Contractors.")],-1)),De=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"This application is only valid for residential work or commercial work subsidiary to a master building permit.")],-1)),Te=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Roofing permits cannot be issued for mobile homes (approved by the State of Florida Department of Motor Vehicles).")],-1)),Ee=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-8 ..."},[e("p",{style:{color:"black"}},"It is the applicant's responsiblity to complete this application correctly.")],-1)),Le=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Failure to provide valid permitting information can result in failed inspections and/or cancelation of the permit by the Authority Having Jurisdiction (AHJ).")],-1)),Re=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Double permit fees plus a fine determined by the AHJ issuing the permit, can be required for work without a permit.")],-1)),Be=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"red"}},"Refunds will not be provided by the AHJ issuing the permit, due to errors on the applicant's part.")],-1)),Fe=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"red"}},"Any deviations from an approved permit package will require a permit revision.")],-1)),$e=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"This application is only valid for residential roof permits, either standalone or tied to a master building permit.")],-1)),ze=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"The permit applicant agrees to comply with these terms of use requirements when obtaining this permit electronically.")],-1)),Oe={class:"flex justify-end gap-2"},Ge=f(()=>e("label",{class:"ml-2"}," I Agree",-1)),je={__name:"PermitInitalAgreement",setup(o){const t=l(!0);return(i,s)=>{const h=xe,_=Se,y=we;return S(),A("div",Ce,[u(y,{visible:t.value,"onUpdate:visible":s[2]||(s[2]=d=>t.value=d),modal:"",header:"Terms Of Use",style:{width:"70rem"}},{default:q(()=>[Ie,De,Te,Ee,u(h),Le,Re,Be,Fe,$e,ze,e("div",Oe,[Ge,u(_,{modelValue:i.agreement,"onUpdate:modelValue":s[0]||(s[0]=d=>i.agreement=d),value:"1",invalid:i.value===null,onClick:s[1]||(s[1]=d=>t.value=!1)},null,8,["modelValue","invalid"])])]),_:1},8,["visible"])])}}},He=H(je,[["__scopeId","data-v-354c67a3"]]),a=Ve.create({baseURL:"https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint",headers:{"Cache-Control":"no-cache","Content-Type":"application/json",apiKey:"LduI7j9z7Iwppo1AbxE9TBz2z2lJFZZFF3MU5ZFCbfxHU8wMlyCjvz0pWMByVH5n","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}}),qe={getAddr(){return a.get("/folio")},postProcessnumber(o){return a.post("/process",o)},getLastProcess(){return a.get("/lastnumber")},getSlopeless(){return a.get("/slopeless")},getSlopemore(){return a.get("/slopemore")},getdeOne(){return a.get("/desupone")},getdeTwo(){return a.get("/desuptwo")},getdeThree(){return a.get("/desupthree")},getdeFour(){return a.get("/desupfour")},getZones23(){return a.get("/gableroofs23")},getNoa(){return a.get("/noa")},getSBS(){return a.get("/shinglesbs")},getSystemE(){return a.get("/systemtype")},getburMaterial(){return a.get("/burmaterial")},getnewburMaterial(){return a.get("/burmaterials")},getburSystem(){return a.get("/bursystem")},getPoly(){return a.get("/shinglepoly")},getSystemF(){return a.get("/systemtypef")},getdeGauge(){return a.get("/degauge")},getdeMaterial(){return a.get("/dematerial")},getdeMatMore(){return a.get("/dematerials")},getdeSize(){return a.get("/desize")},getdeFastener(){return a.get("/defastener")},getprimeBase(){return a.get("/primebase")},getPerimeter(){return a.get("/perimeter")},getNoas(){return a.post("/shinglenoa")},getTile(){return http.get("/tileroof")},getTiles(){return a.get("/tilenoa")},getZones(){return a.get("/gablezones")},getLay(){return a.get("/underlaymentshingle")},getContractors(){return a.get("/contractors")},postAccount(o){return a.post("/accounts",o)},getAccount(){return a.get("/retriveaccounts")},getDripMaterials(){return a.get("/dripmaterials")}};function N(){const o=l(null),t=l(0);return qe.getLastProcess().then(i=>{o.value=i.data,o.value.forEach(s=>{console.log(s.processNumber),t.value=s.processNumber})}).catch(i=>{console.error("Error:",i)}),{resNum:o,lastNum:t}}function Je(){const{resNum:o,lastNum:t}=N(),i=l(""),s=l(new Date().getFullYear()),h=l(6),_=l("me"),y=Array.from({length:10**h.value},(n,v)=>`${_.value}${s.value}${String(v).padStart(h.value,"0")}`),d=N();return console.log(d),i.value=y[0]+1,t.value!==0||(i.value=t.value+1),{pNum:i,lastNum:t,resNum:o,test:d}}function Ze(){const o=l("");let t=l([]);const i=ke(),s=l("");let h="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/process";const{execute:_,data:y}=Pe(h,{method:"POST"},{immediate:!1});let d=W({});function n(v){console.log(v),d=v,_({data:v}),o.value="Form submitted successfully!",i.addData(d),console.log(d,"System added")}return{error:s,results:t,procReceive:n,responseMessage:o,procData:d,procStore:i}}l(1);const We={setup(){const o=l(""),t=ce(),i=l(!1),s=l(),h=l(),_=l(),{procData:y,procReceive:d}=Ze(),{accountUsers:n,getUser:v,addUser:U}=Ae();console.log(n._value[0]);const M=l("me"),C=Ne(),p=W({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),r=l(""),R=l(""),I=l(""),B=l(""),F=l("");G(()=>{de.init({duration:800,easing:"ease-in-out",once:!0})}),pe(()=>{if(n._value[0].name==="")return t.push("/");i.value=!0,r.value=n._value[0].name,R.value=n._value[0].email,I.value=n._value[0].phone,B.value=n._value[0].secondary_status,F.value=n._value[0].dba,console.log(n._value[0].phone)});const D=l(!1),$=l(!1);Je();const{lastNum:k,resNum:Y}=N();I.value=n._value[0].phone,l(null);const V=l(""),T=l("");G(()=>{i.value=!0});const K=async()=>{try{const g=l(p.address),P=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(g.value)}&to=200`,w=await fetch(P);$.value=!0;const c=await w.json();console.log(c),p.muni=c.MinimumPropertyInfos[0].Municipality,p.license=n._value[0].license,p.contractor=n._value[0].name,p.folio=c.MinimumPropertyInfos[0].Strap;let b=String(k.value);console.log(k.value.length,k.value,b);let oe=b.substring(2,13),se=fe(oe).value+1,ae=String(se);p.processNumber=M.value.concat(ae),console.log(p.processNumber),T.value=p.folio,V.value=T.value.substring(1,2),console.log(V.value),d(p),setTimeout(()=>{$.value=!1},2e3)}catch(g){alert(g)}},Q=async()=>{d(p)},z=l(),X=l([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),ee=()=>{t.push("/roofsystem")};function te(g,x){g=p,x=z.value,g.length!==0&&(C.addSystem(g,x,V.value),D.value=!0,console.log(g,x,V.value,"System added"))}const O=()=>{const g=document.getElementById("permitapp");console.log(g),Ue(g).then(P=>{const w=P.toDataURL("image/png"),c=new Me;c.text(`${p.processNumber}`,20,30),c.setGState(new c.GState({opacity:.4})),c.setFontSize(24),c.setTextColor(150,150,150),c.text("DigitalSolutions",c.internal.pageSize.getWidth()/2,c.internal.pageSize.getHeight()/2,{angle:0,align:"left",baseline:"bottom",renderingMode:"fill"}),console.log(c.text),c.addImage(w,"PNG",10,10,190,0),c.setGState(new c.GState({opacity:1}));const b=c.output("blob");console.log(b),x(b)});const x=async P=>{try{const w=P,c=new Blob([w],{type:"application/pdf"}),b=document.createElement("a");b.href=URL.createObjectURL(c),b.download=`${p.processNumber}-permitapp.pdf`,b.click(),URL.revokeObjectURL(b.href),console.log("PDF saved successfully without popping download dialog!")}catch(w){console.error("Error saving file:",w)}}};return j(async()=>{await ve(D).changed(),O()}),{isDialog:i,pdfcleared:D,generatePdf:O,onSubmit:Q,accountUsers:n,getUser:v,email:R,dba:F,invoke:j,phone:I,contractor:r,licenseStatus:B,addUser:U,navigateNext:ee,addItemAndClear:te,selectedApplication:z,type:X,resNum:Y,...ue(p),responseMessage:o,lastNum:k,useLast:N,load:K,checkMB:V,checkV:T,content:s,canvas:h,doc:_}}},m=o=>(J("data-v-c72d71f4"),o=o(),Z(),o),Ye={id:"permitapp",ref:"permitapp",class:"flex flex-col md:flex-row gap-2",style:{"margin-left":"220px"}},Ke={class:"md:w-3/4"},Qe={class:"container"},Xe={class:"row"},et={class:"card flex flex-col gap-1",style:{"background-color":"#eae7e2"}},tt=m(()=>e("div",{class:"font-semibold text-xl"},"Permit Application",-1)),ot={class:"card flex justify-center",style:{"background-color":"#eae7e2"}},st={class:"flex flex-col mt-3 grow basis-0 gap-3",style:{"max-width":"300px"}},at=m(()=>e("label",{for:"license"},"License Status",-1)),lt={class:"card flex flex-col gap-2",style:{"background-color":"#eae7e2"}},rt={class:"flex flex-col grow basis-0 gap-2"},nt=m(()=>e("label",{for:"addr"},"Property Address",-1)),it={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},ct={class:"flex flex-col mt-3 grow basis-0 gap-3"},dt=m(()=>e("label",{for:"dba"},"DBA ",-1)),pt={class:"flex flex-col mt-3 grow basis-0 gap-3"},ut=m(()=>e("label",{for:"contractor"},"Contractor Name",-1)),mt={class:"flex flex-col mt-3 grow basis-0 gap-3"},gt=m(()=>e("label",{for:"phone"},"Cell Phone Number",-1)),ft={class:"flex flex-col mt-3 grow basis-0 gap-3"},vt=m(()=>e("label",{for:"Email"},"Email",-1)),bt={class:"flex flex-col mt-3 grow basis-0 gap-3"},ht=m(()=>e("label",{for:"muni"},"Municipality",-1)),_t={class:"flex flex-col mt-3 grow basis-0 gap-3"},yt=m(()=>e("label",{for:"folio"},"Folio",-1)),wt={class:"flex flex-col mt-3 grow basis-0 gap-3"},St=m(()=>e("label",{for:"permit"},"Master Permit",-1)),xt={class:"flex flex-col mt-3 grow basis-0 gap-3"},Vt=m(()=>e("label",{for:"processnum"},"mEProcess Number",-1)),Pt={key:0},kt=m(()=>e("br",null,null,-1)),At=m(()=>e("br",null,null,-1)),Nt={"data-aos":"fade-up-right","data-aos-delay":"500"};function Ut(o,t,i,s,h,_){const y=He,d=ye,n=_e,v=be,U=re,M=ie,C=ne,p=le;return S(),A("div",Ye,[s.isDialog?(S(),E(y,{key:0})):L("",!0),e("div",Ke,[e("div",Qe,[e("form",null,[e("div",Xe,[e("div",et,[tt,e("div",ot,[u(d,{modelValue:s.selectedApplication,"onUpdate:modelValue":t[0]||(t[0]=r=>s.selectedApplication=r),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",st,[at,u(n,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":t[1]||(t[1]=r=>s.licenseStatus=r),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",lt,[e("form",{class:"w-3/4",onSubmit:t[12]||(t[12]=(...r)=>s.onSubmit&&s.onSubmit(...r))},[e("div",rt,[nt,me(u(n,{id:"addr",type:"text",modelValue:o.address,"onUpdate:modelValue":t[2]||(t[2]=r=>o.address=r),placeholder:"address"},null,8,["modelValue"]),[[p,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),o.loading?(S(),A("i",it)):(S(),E(v,{key:0,id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:o.loading,onClick:s.load,onInput:o.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",ct,[dt,u(n,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":t[3]||(t[3]=r=>s.dba=r),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",pt,[ut,u(n,{id:"contractor",modelValue:s.contractor,"onUpdate:modelValue":t[4]||(t[4]=r=>s.contractor=r),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",mt,[gt,u(U,{modelValue:s.phone,"onUpdate:modelValue":t[5]||(t[5]=r=>s.phone=r),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),e("div",ft,[vt,u(n,{modelValue:s.email,"onUpdate:modelValue":t[6]||(t[6]=r=>s.email=r),invalid:s.email===null,error:o.emailError},null,8,["modelValue","invalid","error"]),o.invalid?(S(),E(M,{key:0,severity:"error"},{default:q(()=>[he("Email is required")]),_:1})):L("",!0)]),e("div",bt,[ht,u(n,{id:"muni",modelValue:o.muni,"onUpdate:modelValue":t[7]||(t[7]=r=>o.muni=r),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",_t,[yt,u(n,{id:"folio",modelValue:o.folio,"onUpdate:modelValue":t[8]||(t[8]=r=>o.folio=r),type:"text",placeholder:"folio",onInput:o.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",wt,[St,u(n,{id:"permit",modelValue:o.permit,"onUpdate:modelValue":t[9]||(t[9]=r=>o.permit=r),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",xt,[Vt,u(n,{id:"processnum",modelValue:o.processNumber,"onUpdate:modelValue":t[10]||(t[10]=r=>o.processNumber=r),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(S(),A("p",Pt,ge(s.responseMessage),1)):L("",!0),kt,u(v,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:t[11]||(t[11]=r=>s.addItemAndClear(o.formData,s.selectedApplication)),onChange:s.generatePdf},null,8,["onChange"])],32),At,e("div",Nt,[u(C)])])])])])])])],512)}const Yt=H(We,[["render",Ut],["__scopeId","data-v-c72d71f4"]]);export{Yt as default};
