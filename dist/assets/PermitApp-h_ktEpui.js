import{r as a,u as K,a as Q,o as C,A as X,a7 as Y,a8 as Z,as as $,l as ee,b as y,c as D,P as E,x as S,e,d as n,f as R,h as oe,t as le,F as se,a6 as te,am as ae,p as ne,i as re,T as ie}from"./index-MayFP46N.js";import{s as de}from"./index-ySFUuMWc.js";import{s as ce}from"./index-C2QYHWVT.js";import{s as me}from"./index-HOnYxFqc.js";import{s as ue}from"./index-BZ_nVfGh.js";import{s as pe}from"./index-Crhn4btR.js";import{u as fe,a as be,b as B,_ as ve}from"./use-createProcessnumber-aYclw2Kr.js";import{u as ye}from"./accountsStore-iyFYUs9i.js";import{u as ge}from"./permitapp-Dz0nNy9d.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DguXm-CJ.js";import"./index-CR1kz7c3.js";import"./index-DhQXVgkY.js";import"./index-CzouyRMU.js";import"./index-C-olrPfw.js";import"./index-BXzLm_AD.js";import"./index-BcKptR7f.js";import"./index-CE73CkQQ.js";import"./index-ypBFE7cI.js";import"./useAxios-Dp0B0zNl.js";import"./processStore-DHRdBrGs.js";a(1);const he={setup(){const t=a(!1),o=a(""),g=K(),l=a(!1),N=a(),{procData:L,procReceive:p}=fe(),{accountUsers:i,getUser:d,addUser:f}=ye();console.log(i._value[0]);const b=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),_=a("me"),u=ge(),s=a(""),c=Q({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),T=a(!0),A=a(""),U=a(""),h=a(""),k=a(""),M=a("");C(()=>{X.init({duration:800,easing:"ease-in-out",once:!0})}),Y(()=>{if(i._value[0].name==="")return g.push("/");l.value=!0,A.value=i._value[0].name,U.value=i._value[0].email,h.value=i._value[0].phone,k.value=i._value[0].secondary_status,M.value=i._value[0].dba});const I=Z(()=>T.value===!0?b.value[0]:"");be();const{lastNum:x,resNum:F}=B();h.value=i._value[0].phone,a(null);const v=a(""),V=a("");C(()=>{l.value=!0});const O=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},3e3);const m=a(c.address),q=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,P=await(await fetch(q)).json();console.log(P),c.muni=P.MinimumPropertyInfos[0].Municipality,c.license=i._value[0].license,c.contractor=i._value[0].name,c.folio=P.MinimumPropertyInfos[0].Strap,console.log(x.value);let H=String(x.value).substring(2,13),z=te(H).value+1,J=String(z);c.processNumber=_.value.concat(J),console.log(c.processNumber),V.value=c.folio,v.value=V.value.substring(1,2),console.log(v.value),p(c)}catch(m){alert(m)}},j=async()=>{p(c)},G=()=>{g.push("/roofsystem")};function W(m,w){m=c,w=I.value,m.length!==0&&(u.addSystem(m,w,v.value,s.value),console.log(u))}return{isDialog:l,onSubmit:j,accountUsers:i,getUser:d,email:U,dba:M,invoke:$,phone:h,contractor:A,licenseStatus:k,muniProcess:s,addUser:f,navigateNext:G,addItemAndClear:W,selectedApplication:I,type:b,resNum:F,...ee(c),responseMessage:o,lastNum:x,useLast:B,load:O,checkMB:v,checkV:V,content:N}}},r=t=>(ne("data-v-5f2ad69e"),t=t(),re(),t),xe={class:"container md:w-1/3",style:{"margin-left":"650px"}},Ve={class:"flex flex-row"},we={class:"flex mt-4 space-y-2 flex-col gap-2"},Pe=r(()=>e("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Se={class:"flex justify-center"},Ne={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Ae=r(()=>e("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ue={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},ke={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Me=r(()=>e("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Ie={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Ce=r(()=>e("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),De={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Ee=r(()=>e("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),Re={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Be=r(()=>e("label",{for:"contractor",style:{color:"#122620"}},"Contractor Name",-1)),Le={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Te=r(()=>e("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Fe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Oe=r(()=>e("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ge=r(()=>e("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),We={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},qe=r(()=>e("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),He={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=r(()=>e("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),Je={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},Ke=r(()=>e("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),Qe={key:0},Xe=r(()=>e("br",null,null,-1)),Ye=r(()=>e("br",null,null,-1));function Ze(t,o,g,l,N,L){const p=ve,i=pe,d=ue,f=me,b=ce,_=de,u=ie;return y(),D(se,null,[l.isDialog?(y(),E(p,{key:0})):S("",!0),e("div",xe,[e("form",null,[e("div",Ve,[e("div",we,[Pe,e("div",Se,[n(i,{modelValue:l.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=s=>l.selectedApplication=s),options:l.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),e("div",Ne,[Ae,n(d,{id:"license",modelValue:l.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=s=>l.licenseStatus=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ue,[e("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:o[13]||(o[13]=(...s)=>l.onSubmit&&l.onSubmit(...s))},[e("div",ke,[Me,R(n(d,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=s=>t.address=s),placeholder:"address"},null,8,["modelValue"]),[[u,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),n(f,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:l.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),e("div",Ie,[Ce,R(n(d,{id:"processMuni",modelValue:l.muniProcess,"onUpdate:modelValue":o[3]||(o[3]=s=>l.muniProcess=s),type:"text",placeholder:"municipal process number"},null,8,["modelValue"]),[[u,"Enter Municipality Process Number",void 0,{top:!0}]])]),e("div",De,[Ee,n(d,{id:"dba",modelValue:l.dba,"onUpdate:modelValue":o[4]||(o[4]=s=>l.dba=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Re,[Be,n(d,{id:"contractor",modelValue:l.contractor,"onUpdate:modelValue":o[5]||(o[5]=s=>l.contractor=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Le,[Te,n(b,{modelValue:l.phone,"onUpdate:modelValue":o[6]||(o[6]=s=>l.phone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:l.phone===""},null,8,["modelValue","invalid"])]),e("div",Fe,[Oe,n(d,{modelValue:l.email,"onUpdate:modelValue":o[7]||(o[7]=s=>l.email=s),invalid:l.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(y(),E(_,{key:0,severity:"error"},{default:oe(()=>[ae("Email is required")]),_:1})):S("",!0)]),e("div",je,[Ge,n(d,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[8]||(o[8]=s=>t.muni=s),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",We,[qe,n(d,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[9]||(o[9]=s=>t.folio=s),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",He,[ze,n(d,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[10]||(o[10]=s=>t.permit=s),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",Je,[Ke,n(d,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[11]||(o[11]=s=>t.processNumber=s),type:"text",placeholder:"process number"},null,8,["modelValue"])]),l.responseMessage?(y(),D("p",Qe,le(l.responseMessage),1)):S("",!0),Xe,n(f,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[12]||(o[12]=s=>l.addItemAndClear(t.formData,l.selectedApplication))})],32),Ye])])])])])],64)}const Po=_e(he,[["render",Ze],["__scopeId","data-v-5f2ad69e"]]);export{Po as default};
