import{s as F}from"./index-BJk3eT7L.js";import{e,J as j,u as G,h as S,ad as I,_ as x,ae as B,af as J,o as V,c as C,j as L,i as n,M as Y,ag as q,t as O,d as A,ah as H}from"./index-PV4IfQic.js";import{u as K,b as Q,a as W}from"./pdfsignStore-Dmc_NDa8.js";import{c as X}from"./countStore-Dhr2OSGN.js";import{u as Z}from"./permitapp-CuLdRTV7.js";import"./index-CfmA0_12.js";import"./useAxios-60L-vhiw.js";const oo={class:"card-system"},eo={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},so={class:"payment-widget"},to=n("h2",{style:{color:"black"}},"Download Link",-1),ao={key:0,class:"confirmation"},fo={__name:"DownloadLink",setup(no){var g,y;const P=Z(),i=X(),u=e(0),d=e(((y=(g=P.$state.permitapp[0])==null?void 0:g.formdt)==null?void 0:y.muniProc)||""),{secondFetch:m}=K(d.value),T=e(!1),l=e(!1),U=e(!1),M=e(!1),p=e(!1);e(null);const r=Q();j(r.$state);const{resp:f}=W(),R=G();S(()=>{var o,s;u.value=1,i.addCount(u),console.log(i),((s=(o=f.value)==null?void 0:o.status)==null?void 0:s.status)===200&&(U.value=!0,console.log(f.value.status.status))});const v=e("");S(async()=>{const o=new URLSearchParams(location.search).get("session_id");if(v.value=o,o)console.log(v.value);else{console.log(o);return}});const c=I("my-storage",{processNumber:d.value}),$=x(()=>{l.value=!0});B($,()=>{});function w(){m(c.value.processNumber),_()}const h=x(()=>{setTimeout(()=>{M.value=!0},1e3),m(c.value.processNumber),_()}),z=()=>{R.push("/")},_=async()=>{var k,b,D,N;const o=(b=(k=r.downloadinput[0])==null?void 0:k.downloadData)==null?void 0:b.download_url;if(console.log(o),!o||o.length===0)return;console.log(o,c.value);const s=(N=(D=r.downloadinput[0])==null?void 0:D.downloadData)==null?void 0:N.download_url;if(!s)return;T.value=!0;const t=s,E="processnumber.zip",a=document.createElement("a");a.href=t,a.download=E,a.click(),a.remove(),l.value=!0,p.value=!0};return B(h,w,()=>{}),J(async()=>{await H(h).toBe(!0)}),(o,s)=>{const t=F;return V(),C("div",oo,[L(t,{icon:"pi pi-home",severity:"info",style:{"font-size":"2rem"},onClick:z}),n("div",eo,[n("div",so,[to,Y(L(t,{icon:"pi pi-arrow-circle-down",severity:"info","aria-label":"User",onClick:w},null,512),[[q,l.value]])]),p.value?(V(),C("div",ao,[n("p",null,"Thank you, "+O(o.Name)+"! Your payment of $"+O(107)+" was processed.",1)])):A("",!0)])])}}};export{fo as default};
