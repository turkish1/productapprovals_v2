import{e as a,u as oe,j as le,f as S,A as se,Y as te,ag as ae,y as ne,o as h,c as F,a as W,d as N,g as o,h as c,O as H,l as re,t as ie,F as ce,W as ue,aq as de,q as me,H as pe,I as fe,T as ve}from"./index-Cxz0REwX.js";import{s as ge}from"./index-BJHs2eeY.js";import{s as be}from"./index-CiknD2Lc.js";import{s as ye}from"./index-CDmPlCRn.js";import{s as he}from"./index-DRdmoZbK.js";import{s as _e}from"./index-D6aPZgV5.js";import{u as xe,a as Ve,b as O,_ as we}from"./use-createProcessnumber-f9g_XaCO.js";import{u as Pe}from"./accountsStore-BkJH3zXC.js";import{u as ke}from"./permitapp-CW6pXiqC.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DWTyal_i.js";import"./index-K42CP52G.js";import"./index-vrN0R7aK.js";import"./index-CDILUN8o.js";import"./index-BCCkH82Q.js";import"./index-tEubRmtl.js";import"./index-CuxZL7yD.js";import"./index-gvspZ__M.js";import"./index-CEvp-K3l.js";import"./useAxios-DLvD8L0S.js";import"./processStore-BUD97LAP.js";const Ne={setup(){const t=a(!1),l=a(""),M=oe(),s=a(!1),U=a(),{procData:G,procReceive:v}=xe(),{accountUsers:n,getUser:d,addUser:g}=Pe(),b=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),_=a("me"),p=ke(),e=a(""),x=a(""),i=le({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),Y=a(!0),I=a(""),A=a(""),C=a(""),D=a(""),E=a("");S(()=>{se.init({duration:800,easing:"ease-in-out",once:!0})}),S(()=>{s.value=!0,console.log(n.value[0]),I.value=n.value[0].name,A.value=n.value[0].email,D.value=n.value[0].secondary_status,E.value=n.value[0].dba});const B=te(()=>Y.value===!0?b.value[0]:"");Ve();const{lastNum:z,resNum:V}=O();a(null);const y=a(""),w=a(""),T=a(null),f=a(""),R=a(null);S(()=>{s.value=!0});const P=a(""),J=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},1e3),x.value=e.value,console.log(e.value,x.value);const r=a(i.address);console.log(r.value);const m=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${r.value}`;console.log(m),L(m),console.log(e.value),i.license=n.value[0].license,i.contractor=n.value[0].name,i.emails=n.value[0].email,i.muniProc=e.value,i.phNumber=n.value[0].bphone,console.log(V.value);let j=String(V.value);console.log(j);let q=j.substring(3,19);console.log(q);const k=ue(q);console.log(typeof k,k.value);let $=k.value+1,ee=String($);i.processNumber=_.value.concat(ee),(n.value[0].bphone||n.value[0].cphone)&&K(),v(i)}catch(r){alert(r)}},K=()=>{var r;P.value=(r=n.value)==null?void 0:r[0].bphone,console.log(P.value),de(()=>{(n.value[0].bphone||n.value[0].cphone)&&(C.value=P.value)})},L=async r=>{t.value=!0,R.value=null;try{const m=await fetch(r);console.log(r),T.value=await m.json(),f.value=T.value.MinimumPropertyInfos[0],console.log(f.value),i.muni=f.value.Municipality,console.log(f.value.Strap),i.folio=f.value.Strap,w.value=i.folio,y.value=w.value.substring(1,2),console.log(y.value)}catch(m){R.value=m.message}finally{t.value=!1}},Q=async()=>{v(i)},X=()=>{M.push("/roofsystem")};function Z(r,m){r=i,m=B.value,console.log(r),r.length!==0&&(p.addSystem(r,m,y.value,e.value,x.value),console.log(p))}return{isDialog:s,fetchData:L,onSubmit:Q,accountUsers:n,getUser:d,email:A,dba:E,invoke:ae,phone:C,name:I,licenseStatus:D,muniProcess:e,addUser:g,navigateNext:X,addItemAndClear:Z,selectedApplication:B,type:b,resNum:V,...ne(i),responseMessage:l,lastNum:z,useLast:O,load:J,checkMB:y,checkV:w,content:U}}},u=t=>(pe("data-v-e47fda0f"),t=t(),fe(),t),Me={class:"container md:w-1/3",style:{"margin-left":"650px"}},Ue={class:"flex flex-row"},Ie={class:"flex mt-4 space-y-2 flex-col gap-2"},Ae=u(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Ce={class:"flex justify-center"},De={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Ee=u(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Be={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Te={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Re=u(()=>o("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Le={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},je=u(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),qe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Fe=u(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),We={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},He=u(()=>o("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),Oe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ge=u(()=>o("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Ye={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=u(()=>o("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),Je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ke=u(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Xe=u(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},$e=u(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),eo={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},oo=u(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),lo={key:0},so=u(()=>o("br",null,null,-1)),to=u(()=>o("br",null,null,-1));function ao(t,l,M,s,U,G){const v=we,n=_e,d=he,g=ye,b=be,_=ge,p=ve;return h(),F(ce,null,[s.isDialog?(h(),W(v,{key:0})):N("",!0),o("div",Me,[o("form",null,[o("div",Ue,[o("div",Ie,[Ae,o("div",Ce,[c(n,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=e=>s.selectedApplication=e),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",De,[Ee,c(d,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=e=>s.licenseStatus=e),type:"text",placeholder:"status"},null,8,["modelValue"])]),o("div",Be,[o("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...e)=>s.onSubmit&&s.onSubmit(...e))},[o("div",Te,[Re,H(c(d,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=e=>s.muniProcess=e),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[p,"Enter Municipality Process Number",void 0,{top:!0}]])]),o("div",Le,[je,H(c(d,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=e=>t.address=e),placeholder:"address"},null,8,["modelValue"]),[[p,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),c(g,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),o("div",qe,[Fe,c(d,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=e=>s.dba=e),type:"text",placeholder:"dba"},null,8,["modelValue"])]),o("div",We,[He,c(d,{id:"name",modelValue:s.name,"onUpdate:modelValue":l[5]||(l[5]=e=>s.name=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Oe,[Ge,c(b,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>s.phone=e),mask:"(999) 999-9999"},null,8,["modelValue"])]),o("div",Ye,[ze,c(d,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=e=>s.email=e),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(h(),W(_,{key:0,severity:"error"},{default:re(()=>[me("Email is required")]),_:1})):N("",!0)]),o("div",Je,[Ke,c(d,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=e=>t.muni=e),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),o("div",Qe,[Xe,c(d,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=e=>t.folio=e),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),o("div",Ze,[$e,c(d,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=e=>t.permit=e),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",eo,[oo,c(d,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=e=>t.processNumber=e),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(h(),F("p",lo,ie(s.responseMessage),1)):N("",!0),so,c(g,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=e=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),to])])])])])],64)}const Uo=Se(Ne,[["render",ao],["__scopeId","data-v-e47fda0f"]]);export{Uo as default};
