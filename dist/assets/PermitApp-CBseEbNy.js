import{e as l,u as te,h as ae,f as ne,a0 as re,E as W,ae as ie,af as ue,o as P,c as G,a as Y,d as U,j as o,k as n,I as z,q as ce,t as de,F as me,ah as pe,_ as H,v as ve,L as fe,M as be,T as ye}from"./index-BFHByW5m.js";import{s as _e}from"./index-DxIME6K6.js";import{s as ge}from"./index-h433Exl2.js";import{s as he}from"./index-Dni1F9oq.js";import{s as xe}from"./index-B9EqkDRn.js";import{s as Ve}from"./index-BvujZvnS.js";import{u as we,_ as Pe}from"./lastNumber-5fqoQxvf.js";import{u as ke}from"./processStore-85WJnGrM.js";import{u as Ne}from"./use-createProcessnumber-CQnFbEHH.js";import{u as Se}from"./accountsStore-C0mR6WLj.js";import{u as Me}from"./permitapp-CZj0wf0G.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-tf2bG66K.js";import"./index-xX7X9geD.js";import"./index-JMCDWj6-.js";import"./index-DwZHOUay.js";import"./index-Dd6lGAHZ.js";import"./index-C0qiqLPC.js";import"./index-yXhYPJYb.js";import"./useAxios-c5LqnOyH.js";const r=g=>(fe("data-v-5f5e4778"),g=g(),be(),g),Ie={class:"container md:w-1/3",style:{"margin-left":"650px"}},De={class:"flex flex-row"},Ae={class:"flex mt-4 space-y-2 flex-col gap-2"},Be=r(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Ce={class:"flex justify-center"},Ee={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Te=r(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),$e={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Le=r(()=>o("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Re={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Fe=r(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Oe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},qe=r(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),We={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Ge=r(()=>o("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),Ye={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=r(()=>o("label",{id:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),He={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Je=r(()=>o("label",{id:"Email",style:{color:"#122620"}},"Email",-1)),Ke={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Qe=r(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Xe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ze=r(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),eo={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},oo=r(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),lo={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},so=r(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),to={key:0},ao=r(()=>o("br",null,null,-1)),no=r(()=>o("br",null,null,-1)),ro={__name:"PermitApp",setup(g){const v=l(!1),I=l(""),D=l(!1);l(),te();const J=ke(),{procData:io,procReceive:A}=Ne(),{accountUsers:d,getUser:uo,addUser:co}=Se(),B=Me(),C=l([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),K=l("me"),t=ae({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),u=l(""),E=l(""),Q=l(!0),k=l(!1),h=l(""),x=l(""),f=l(""),N=l(""),b=l(""),y=l([]),c=l(""),S=l(!1);ne(()=>{S.value===!1&&d.value[0].secondary_status==="I"?(console.log(S.value),alert("Your license is Inactive!")):S.value=!0}),re(()=>{T(),D.value=!0,localStorage.clear()});const X=W(()=>{var a,e;return((a=d.value[0])==null?void 0:a.bphone)!==""&&(k.value=!0,f.value=d.value[0].bphone,console.log(f.value)),k.value===!0?f.value:(e=d.value[0])==null?void 0:e.bphone});ie(T,X,()=>{});async function T(){var a,e,m,p,i,_,w;y.value=await d.value[0],N.value=((a=y.value)==null?void 0:a.name)||"",b.value=((e=y.value)==null?void 0:e.email)||"",h.value=((m=y.value)==null?void 0:m.secondary_status)||"",x.value=((p=y.value)==null?void 0:p.dba)||"",c.value=(_=(i=J.$state.processinput[0])==null?void 0:i.procData)==null?void 0:_.address,f.value=(w=d.value[0])==null?void 0:w.bphone}ue(async()=>{await pe(k).toBe(!0)});const M=W(()=>Q.value?C.value[0]:""),{resNum:Z}=we(),$=l(""),j=l(""),L=l(null),V=l(""),R=l(null),F=l("");async function ee(a){v.value=!0,R.value=null;try{const e=await fetch(a);L.value=await e.json(),V.value=L.value.MinimumPropertyInfos[0],console.log(V.value),t.muni=V.value.Municipality,t.folio=V.value.Strap,j.value=t.folio,F.value=j.value.substring(1,2),$.value=H(F)}catch(e){R.value=e.message}finally{v.value=!1}}async function O(){try{v.value=!0,setTimeout(()=>v.value=!1,1e3),E.value=u.value;const a=c.value;console.log(a);const e=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${a}`;console.log(e),await ee(e),console.log(u.value),Object.assign(t,{license:h.value,contractor:x.value,emails:b.value,muniProc:u.value,phNumber:f.value});const m=String(Z.value).substring(3,19),p=H(m).value+1;t.processNumber=K.value.concat(String(p)),t.muniProc=u.value,t.address=c.value,console.log(t),A(t)}catch(a){alert(a)}}function oe(){A(t)}function le(){console.log(c.value),B.addSystem(t,M.value,$.value,u.value,E.value,c.value),console.log(B)}return(a,e)=>{const m=Pe,p=Ve,i=xe,_=he,w=ge,se=_e,q=ye;return P(),G(me,null,[D.value?(P(),Y(m,{key:0})):U("",!0),o("div",Ie,[o("form",null,[o("div",De,[o("div",Ae,[Be,o("div",Ce,[n(p,{modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=s=>M.value=s),options:C.value,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",Ee,[Te,n(i,{id:"license",modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),type:"text",placeholder:"status"},null,8,["modelValue"])]),o("div",$e,[o("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:oe},[o("div",je,[Le,z(n(i,{id:"processMuni",modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s),type:"text",placeholder:"municipal process number",onChange:O},null,8,["modelValue"]),[[q,"Enter Municipality Process Number",void 0,{top:!0}]])]),o("div",Re,[Fe,z(n(i,{id:"addr",type:"text",modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=s=>c.value=s),placeholder:"address"},null,8,["modelValue"]),[[q,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),n(_,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:v.value,onClick:O},null,8,["loading"])]),o("div",Oe,[qe,n(i,{id:"dba",modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=s=>x.value=s),type:"text",placeholder:"dba"},null,8,["modelValue"])]),o("div",We,[Ge,n(i,{id:"name",modelValue:N.value,"onUpdate:modelValue":e[5]||(e[5]=s=>N.value=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Ye,[ze,n(w,{modelValue:t.phNumber,"onUpdate:modelValue":e[6]||(e[6]=s=>t.phNumber=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999"},null,8,["modelValue"])]),o("div",He,[Je,n(i,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=s=>b.value=s),invalid:b.value===null,error:a.emailError},null,8,["modelValue","invalid","error"]),a.invalid?(P(),Y(se,{key:0,severity:"error"},{default:ce(()=>[ve("Email is required")]),_:1})):U("",!0)]),o("div",Ke,[Qe,n(i,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":e[8]||(e[8]=s=>t.muni=s),type:"text",placeholder:"municipality",style:{color:"green"}},null,8,["modelValue"])]),o("div",Xe,[Ze,n(i,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":e[9]||(e[9]=s=>t.folio=s),type:"text",placeholder:"folio",onInput:a.updatemEProcess,style:{color:"green"}},null,8,["modelValue","onInput"])]),o("div",eo,[oo,n(i,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":e[10]||(e[10]=s=>t.permit=s),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",lo,[so,n(i,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":e[11]||(e[11]=s=>t.processNumber=s),type:"text",placeholder:"process number"},null,8,["modelValue"])]),I.value?(P(),G("p",to,de(I.value),1)):U("",!0),ao,n(_,{id:"submit",type:"submit",disabled:"",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:le})],32),no])])])])])],64)}}},Ao=Ue(ro,[["__scopeId","data-v-5f5e4778"]]);export{Ao as default};
