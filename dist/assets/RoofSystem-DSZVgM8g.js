import{_ as U}from"./FileSaver-BC9kKEog.js";import{e as p,H as D,f as V,E as q,h as E,o as k,c as b,i as t,F as P,z as N,t as C,n as H,J as A,k as w,ag as J,X,j as h,v as Q,p as W,q as Y,x as O,A as Z}from"./index-BYmq2Yp0.js";import{s as ee}from"./index-C0Q7y6zU.js";import{u as te,a as oe}from"./useAxios-D_tTh0B3.js";import{u as se}from"./generalpageStore-BetSbk1X.js";import{u as I}from"./roofList-BsME_oVl.js";import{u as ae}from"./permitapp-e6UUlF8F.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as j}from"./index-DIxPgNzG.js";import{s as le}from"./index-D3wxLAH5.js";import{s as ne}from"./index-CjOMU0UZ.js";import"./index-wlTN0BAO.js";import"./index-WdiyqUIj.js";import"./index-DMV-gMv0.js";import"./index-HOI6eqmU.js";import"./index-DGLfjea1.js";import"./index-Dc8H5I55.js";const ie="https://75tyxhvxx6be6gznfs5kcne73a0sxznj.lambda-url.us-east-1.on.aws/";function re(){const u=p(null),i=p(!1);var m=p(null),r=p(null);const{data:v,error:c,isFetching:f,execute:l}=te(ie,{method:"POST",headers:{"Content-Type":"application/json"}},oe,{immediate:!1});return{data:v,errors:u,isFetching:f,loading:i,postGeneral:async a=>{r.value=a,console.log(r.value),i.value=!0,c.value=null;try{return await l({data:r.value})}catch(g){c.value=g.massage,console.error("Lambda post failed:",g)}finally{i.value=!1}},postRoofcheck:async a=>{m.value=a,console.log(m.value),i.value=!0,c.value=null;try{return await l({data:m.value})}catch(g){c.value=g.massage,console.error("Lambda post failed:",g)}finally{i.value=!1}}}}function ce(){const u=I(),{roofList:i}=D(u);p(!1);const m=se(),{postGeneral:r}=re(),v=p(null),c=p(m.$state.generalpdfinput),f=p(!1),l=V({mtile:!1,adtile:!1,shingle:!1,metal:!1,slope:!1}),s=V({steep1:0,steep2:0,steep3:0,steep4:0,low1:0}),e=V({steep:0,lowslope:0,total:0}),a=V({steepData:"",slopeData:"",totalData:"",mtileChk:!1,adtileChk:!1,shingleChk:!1,slopeChk:!1,metalChk:!1,roofCheck:"",area:""});function g(M){v.value=M.value[0];const T={"Asphalt Shingle":{dim:"dim1",flag:"shingle",steepKey:"steep1"},"Adhesive Set Tile":{dim:"dim4",flag:"adtile",steepKey:"steep2"},"Mechanical Fastened Tile":{dim:"dim3",flag:"mtile",steepKey:"steep3"},"Metal Panel":{dim:"dim5",flag:"metal",steepKey:"steep4"},"Low Slope":{dim:"dim2",flag:"slope"}};Object.keys(l).forEach(S=>l[S]=!1),Object.keys(s).forEach(S=>s[S]=0),i.value.forEach(S=>{const _=T[S.item];if(_){const $=Number(S[_.dim])||0;l[_.flag]=!0,a[`${_.flag}Chk`]=!0,console.log(_.flag),_.flag==="slope"?s.low1=$:s[_.steepKey]=$}}),R()}async function R(){e.steep=s.steep1+s.steep2+s.steep3+s.steep4,e.lowslope=s.low1,e.total=e.steep+e.lowslope,a.area=e.total,a.steepData=e.steep,a.slopeData=e.lowslope,a.totalData=e.total,a.roofCheck=v.value,m.addgeneralpdfData(a),await r(a),f.value=!0}return{addRoof:g,roofArea:R,dataGeneral:a,generalType:c,isGeneralPageValid:f}}const de=q("roofinput",{state:()=>({roofinput:[],id:0}),actions:{addCheck(u){this.roofinput.push({roofCheckdata:u,completed:!1})},reset(){this.roofinput=[]},persist:!0}}),pe={class:"terminal"},ue={class:"terminal-content"},me={class:"content"},fe=["onClick"],ve=15,he={__name:"RoofSystemList",setup(u){const i=I(),{roofList:m}=D(i),{toggleCompleted:r}=D(i),v=["Initializing system...","Loading modules...","Connecting to server...","Server connection established.","Awaiting Roof System Selection..."],c=p([]);function f(){let l=0;const s=setInterval(()=>{l<v.length?(c.value.length>=ve&&c.value.shift(),c.value.push(v[l]),l++):clearInterval(s)},500)}return E(()=>{f()}),(l,s)=>(k(),b("div",pe,[t("div",ue,[(k(!0),b(P,null,N(c.value,(e,a)=>(k(),b("div",{key:a,class:"terminal-line"},C(e),1))),128)),(k(!0),b(P,null,N(w(m),e=>(k(),b("div",{key:e.id,class:"item"},[t("div",me,[t("span",{class:H({completed:e.completed}),style:{color:"green"}},C(e.item)+" "+C(e.dim1)+" "+C(e.dim2)+" "+C(e.dim3)+" "+C(e.dim4)+" "+C(e.dim5),3),t("span",{onClick:A(a=>w(r)(e.id),["stop"])},"âœ”",8,fe)])]))),128))])]))}},ge=L(he,[["__scopeId","data-v-66faea4b"]]),y=u=>(W("data-v-1a308072"),u=u(),Y(),u),_e={class:"layout"},ye={class:"card glass"},Se=y(()=>t("i",{class:"pi pi-refresh"},null,-1)),ke=y(()=>t("h2",{class:"title"},"Roof System",-1)),be={class:"field"},xe=y(()=>t("label",{for:"area"},"Square Footage",-1)),Ce={class:"field"},we=y(()=>t("label",{for:"system"},"Roof System",-1)),$e={class:"flex flex-wrap mt-4 space-y-6 justify-center gap-8"},Ve={class:"flex items-center mt-4 space-y-6"},Re=y(()=>t("label",{for:"newroof",class:"ml-2",style:{color:"#122620"}},"New Roof ",-1)),Te={class:"flex items-center mt-4 space-y-6"},Ae=y(()=>t("label",{for:"reroof",class:"ml-2",style:{color:"#122620"}},"Re-Roof ",-1)),De={class:"footer"},Ie=y(()=>t("br",null,null,-1)),Le=y(()=>t("p",{class:"dz-title"},"For Images documents",-1)),Me=y(()=>t("p",{class:"dz-sub"},[O("Drag & drop files here"),t("br"),O("or click to upload")],-1)),Fe=2,Ge={__name:"RoofSystemForm",setup(u){var F,G;const i=ae(),m=de(),r=I(),v=[{name:" "},{name:"Asphalt Shingle"},{name:"Low Slope"},{name:"Mechanical Fastened Tile"},{name:"Adhesive Set Tile"},{name:"Metal Panel"}],c=v.slice(2),f=p(""),l=p(null),s=p(!1),e=p(!1),a=p((G=(F=i.$state.permitapp[0])==null?void 0:F.formdt)==null?void 0:G.checkIfBeach),g=J(a.value);X(()=>{console.log(i.$state,a.value,g.value),e.value=a.value===Fe,console.log(e.value,c)});const{addRoof:R,roofArea:M}=ce(),T=V({roofCheck:""});async function S(){var n,B,z;const d=(B=(n=l.value)==null?void 0:n.name)==null?void 0:B.trim();if(!d)return;const o=f.value,x={"Asphalt Shingle":()=>r.addSystemShingle(d,o),"Low Slope":()=>r.addSystemBur(d,o),"Mechanical Fastened Tile":()=>r.addSystemMTile(d,o),"Adhesive Set Tile":()=>r.addSystemATile(d,o),"Metal Panel":()=>r.addSystemMetal(d,o)};(z=x[d])==null||z.call(x),console.log(s.value,x),T.roofCheck=s.value,m.addCheck(T),$()}function _(){R(s),$()}function $(){f.value="",l.value=null}function K(){r.$reset()}return(d,o)=>{const x=ee;return k(),b("main",_e,[t("aside",ye,[h(w(j),{class:"icon-btn",plain:"",text:"",onClick:K},{default:Q(()=>[Se]),_:1}),ke,t("form",{class:"grid-form",onSubmit:o[4]||(o[4]=A(()=>{},["prevent"]))},[t("div",be,[xe,h(w(le),{id:"area",modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=n=>f.value=n),placeholder:"e.g. 1200"},null,8,["modelValue"])]),t("div",Ce,[we,h(w(ne),{id:"system",modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=n=>l.value=n),options:e.value?w(c):v,optionLabel:"name",placeholder:"Select roof system",class:"w-full",onChange:S},null,8,["modelValue","options"])]),t("div",$e,[t("div",Ve,[h(x,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=n=>s.value=n),invalid:!s.value,inputId:"newroof",name:"checked",value:"newroof"},null,8,["modelValue","invalid"]),Re]),t("div",Te,[h(x,{modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=n=>s.value=n),invalid:!s.value,inputId:"reroof",name:"checked",value:"reroof"},null,8,["modelValue","invalid"]),Ae])])],32),t("footer",De,[h(w(j),{label:"Submit",severity:"contrast",raised:"",as:"router-link",to:"/dynamicstepper",onClick:_})]),Ie,h(ge)]),t("section",{class:"card dropzone",onDragover:o[6]||(o[6]=A(n=>d.dragOver=!0,["prevent"])),onDragleave:o[7]||(o[7]=n=>d.dragOver=!1),onDrop:o[8]||(o[8]=A((...n)=>d.handleDrop&&d.handleDrop(...n),["prevent"]))},[Le,Me,t("input",{type:"file",accept:"application/pdf",multiple:"",class:"file-input",onChange:o[5]||(o[5]=(...n)=>d.handleFiles&&d.handleFiles(...n))},null,32)],32)])}}},Be=L(Ge,[["__scopeId","data-v-1a308072"]]),ze={id:"id",class:"grid grid-cols-3 gap-6"},Pe={class:"roof-app",style:{"margin-left":"250px","margin-top":"20px",border:"none","border-radius":"12px","box-shadow":"4px 4px 16px rgb(22, 183, 183)","padding-bottom":"10px",position:"center","max-height":"400px",width:"500px",top:"5vh"}},Ne={__name:"RoofSystemApp",setup(u){return E(()=>{Z.init({duration:4500,easing:"ease-in-out",once:!1})}),(i,m)=>(k(),b("div",ze,[t("div",Pe,[h(Be)])]))}},Oe=L(Ne,[["__scopeId","data-v-d0495c4e"]]),je={class:"grid grid-cols-2 gap-0"},Ee={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}},it={__name:"RoofSystem",setup(u){return(i,m)=>(k(),b("div",je,[h(Oe),t("div",Ee,[h(U)])]))}};export{it as default};
