import{e as n,f as V,y as B,z as Y,C as z,u as J,h as Q,D as W,E as X,G as Z,o as F,c as M,i as s,H as $,I as k,j as r,J as ee,t as oe,d as ae,q as te,F as se,K as le,L as ne,M as ie,T as re}from"./index-Cvy_Uli4.js";import{_ as de}from"./FileSaver-CFaBE43W.js";import{s as ce}from"./index-CgxonwMF.js";import{s as me}from"./index-CAVOL31K.js";import{s as ue}from"./index-C2EndnG-.js";import{s as pe}from"./index-BBh8RON8.js";import{u as fe}from"./accountsStore-ks9Q1EzV.js";import{u as E}from"./useAxios-BMBpnL0R.js";import{u as _e}from"./auth-HEuPsGAY.js";import{E as ve}from"./jspdf.es.min-CyxZLldS.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./permitapp-DPOhqQtP.js";import"./index-_Lg-n5vw.js";import"./index-DaqYdppk.js";import"./index-CCwgV7oM.js";import"./index-C0_xaW7H.js";import"./index-B4SXv95R.js";function he(){const l=n([]),a=n("");let v=n([]);const{accountUsers:e,getUser:y,addUser:t}=fe();let d=V({license:"",dba:"",name:"",username:"",password:"",secondary_status:"",expiration_date:"",address:"",projects:[],password:"",cphone:"",bphone:"",email:"",date:new Date});const g=n("");let h="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/accounts";const{execute:c,data:m}=E(h,{method:"POST"},{immediate:!1});let u=V({});function p(o){console.log(o),u=o,c({data:o}),a.value="Form submitted successfully!",t(u),console.log(u,"System added")}return{takp:p,noaNum:l,formData:d,error:g,accountUsers:e,getUser:y,addUser:t,accountUsers:e,results:v,responseMessage:a,...B(u)}}const xe=Y("cccinput",{state:()=>({cccinput:[],id:0}),actions:{addData(l){this.cccinput.push({cccAccounts:l,completed:!1})}},getters:{cccData:l=>l.cccAccounts}});function ye(){const l=n(""),a=n(""),v=n(""),e=n(""),y=n("");let t="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/contractors";const{execute:d,then:g,data:h}=E(t,{method:"GET"},{immediate:!1}),c=V({});let m=V({license:"",dba:"",name:"",city:"",license_status:"",expiration_date:"",address:""});d().then(f=>(c.value=h.value,v));function u(f){console.log(f),e.value=f,D(e.value)}const p=n(""),o=n([]);function D(f){console.log(f),p.value=f;for(let b=0;b<c.value.length-1;b++)p.value===c.value[b].alt_license&&o.value.push(c.value[b]);m.license=o.value[0].alt_license,m.dba=o.value[0].DBA,m.name=o.value[0].name,m.license_status=o.value[0].secondary_status,m.city=o.value[0].city,m.expiration_date=o.value[0].expiration_date,m.effective_date=o.value[0].effective_date,m.address=o.value[0].address1}return xe(),{error:a,retrieveAccount:u,responseMessage:l,results:v,fndContract:D,contractors:c,licenseNumbers:y,cccAccounts:m}}const be={setup(){const l=n([]),a=_e(),{message:v}=z(a),e=J(),y=n(!1);n(!1);const t=V({license:"",dba:"",name:"",username:"",password:"",license_status:"",expiration_date:"",address:"",city:"",projects:[],cphone:"",bphone:"",email:"",insurance:"",carrier:"",date:new Date}),{cccAccounts:d,retrieveAccount:g,foundContrator:h}=ye();n(""),Q(()=>{});const c=n(""),{Data:m,takp:u}=he(),p=async()=>{D.value&&(u(t),t.license="",t.name="",t.license_status="",t.dba="",t.address="",t.cphone="",t.bphone="",t.email="",t.insurance="",t.carrier="",w())};function o(){g(t.license),l.value=d,console.log("Contractors:",l.value),t.dba=l.value.dba,t.name=l.value.name,t.expiration_date=l.value.expiration_date,t.address=l.value.address,t.city=l.value.city,t.expiration_date=l.value.expiration_date,t.license_status=l.value.license_status,c.value=l.value.license_status,console.log(t,c.value),f()}const D=W(()=>t.insurance.trim()!==""&&t.carrier.trim()!==""&&t.license_status.trim()!==""&&t.license_status.trim()!=="I"&&t.email.trim()!=="");function f(){c.value===""?t.license_status="":c.value==="A"?(t.license_status="Active",C()):c.value==="I"&&(t.license_status="Inactive",alert("Your license is Inactive!"),w())}const b=n(!1);function C(){console.log(t.expiration_date);const _=new Date(t.expiration_date),x=new Date;_.setHours(0,0,0,0),x.setHours(0,0,0,0),_<=x&&(alert("Your license is Expired!"),w())}const w=()=>{e.push("/")},N=X(),I=n(),G=()=>{I.value&&I.value.upload&&I.value.upload()},P=()=>{N.add({severity:"contrast",summary:"Contrast",detail:"File Uploaded",life:3e3})},T=n([{name:"Florida",code:"Florida"},{name:"Georgia",code:"Georgia"}]),R=n([{name:"Miami",code:"Miami"},{name:"Homestead",code:"Homestead"},{name:"Miami Beach",code:"Miami Beach"},{name:"Miami Gardens",code:"Miami Gardens"}]),L=n([{name:"Roofing Contractor",code:"Roofing"},{name:"General Contractor",code:"General"}]),H=n(null),j=n(null),K=n(null),U=()=>{const _=document.getElementById("shingle");if(console.log("Element to capture:",_),!_){console.error('Element with id "shingle" not found');return}html2canvas(_).then(x=>{const S=x.toDataURL("image/png"),A=new ve;A.addImage(S,"PNG",10,10,190,0);const q=A.output("blob");O(q)})},O=async _=>{try{const S=await(await window.showSaveFilePicker({suggestedName:"permitapp.pdf",types:[{description:"PDF file",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await S.write(_),await S.close(),console.log("PDF saved successfully without popping download dialog!")}catch(x){console.error("Error saving file:",x)}};return Z(()=>{U(),console.log("Component unmounted: PDF generated.")}),{formDatas:t,...B(t),disabled:y,navigateNext:w,authStore:a,DateCheck:C,message:v,isDateValid:b,isFormValid:D,trade:L,trades:H,onSubmit:p,onUpload:P,upload:G,retriveContractor:o,dropdownItemCt:R,dropdownItemSt:T,dropdownItemct:K,dropdownItemst:j,generatePdf:U}}},i=l=>(le("data-v-23e4b524"),l=l(),ne(),l),De={class:"card"},Ve=i(()=>s("div",{class:"h-[10rem]"},null,-1)),we={class:"grid h-56 grid-cols-3 content-start gap-4",style:{"margin-left":"50px","margin-top":"50px","margin-right":"40px"}},Se=i(()=>s("div",{class:"font-semibold text-xl"},"Contractor Information",-1)),Ie={class:"flex flex-col gap-4"},Ce=i(()=>s("label",{for:"lic1",style:{color:"#122620"}},"State of Florida License No.",-1)),Ue={class:"flex flex-wrap gap-2"},Ae=i(()=>s("label",{for:"trade",style:{color:"#122620"}},"Trade",-1)),Fe={class:"flex flex-col gap-2"},Me=i(()=>s("label",{for:"dba",style:{color:"#122620"}},"DBA",-1)),ke={class:"flex flex-col gap-2"},Be=i(()=>s("label",{for:"name",style:{color:"#122620"}},"Qualifier Name",-1)),Ee={class:"flex flex-col gap-2"},Ne=i(()=>s("label",{for:"secondary_status",style:{color:"#122620"}},"License Status",-1)),Ge={class:"flex flex-col gap-2"},Pe=i(()=>s("label",{for:"license",style:{color:"#122620"}},"License Expiration Date",-1)),Te={class:"flex flex-col gap-2"},Re=i(()=>s("label",{for:"license",style:{color:"#122620"}},"Insurance Policy Number",-1)),Le={class:"flex flex-col gap-2"},He=i(()=>s("label",{for:"license",style:{color:"#122620"}},"Insurance Carrier",-1)),je=i(()=>s("div",{class:"h-[10rem]"},null,-1)),Ke={class:"grid h-64 grid-cols-3 content-around gap-12 ...",style:{"margin-left":"250px","margin-right":"40px"}},Oe={class:"flex flex-col gap-4"},qe=i(()=>s("label",{for:"addr",style:{color:"#122620"}},"Business Address",-1)),Ye={class:"flex flex-col gap-4"},ze=i(()=>s("label",{for:"state",style:{color:"#122620"}},"City",-1)),Je={class:"flex flex-col gap-4"},Qe=i(()=>s("label",{for:"state",style:{color:"#122620"}},"State",-1)),We={class:"flex flex-col gap-4"},Xe=i(()=>s("label",{for:"bphone",style:{color:"#122620"}},"Business Phone",-1)),Ze={class:"flex flex-col gap-4"},$e=i(()=>s("label",{for:"cphone",style:{color:"#122620"}},"Cell Phone Number",-1)),eo={class:"flex flex-col gap-4"},oo=i(()=>s("label",{for:"email1",style:{color:"#122620"}},"Gmail account",-1)),ao={class:"md:w-1/4 flex justify-center flex-wrap gap-4",style:{"margin-left":"50px"}},to={class:"md:w-2/3 flex flex-col gap-2",style:{"margin-top":"120px"}},so=i(()=>s("label",{for:"addr",style:{color:"#122620"}},"Upload Insurance Information",-1)),lo={key:0};function no(l,a,v,e,y,t){const d=pe,g=ue,h=me,c=ce,m=ie,u=de,p=re;return F(),M(se,null,[s("div",De,[s("form",{class:"container md:w-2/3",onSubmit:a[14]||(a[14]=$((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"])),style:{"margin-left":"350px","margin-top":"50px"}},[Ve,s("div",we,[Se,s("div",Ie,[Ce,k(r(d,{type:"text",modelValue:e.formDatas.license,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formDatas.license=o),placeholder:"CRC000000",onChange:l.checkLicense,invalid:e.formDatas.license==="",onKeydown:ee(e.retriveContractor,["tab"])},null,8,["modelValue","onChange","invalid","onKeydown"]),[[p,"Enter your license and hit tab"]])]),s("div",Ue,[Ae,r(g,{id:"trad",modelValue:e.trades,"onUpdate:modelValue":a[1]||(a[1]=o=>e.trades=o),options:e.trade,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),s("div",Fe,[Me,r(d,{id:"dba",type:"text",modelValue:e.formDatas.dba,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formDatas.dba=o),placeholder:" ",invalid:e.formDatas.dba===""},null,8,["modelValue","invalid"])]),s("div",ke,[Be,r(d,{id:"name",type:"text",modelValue:e.formDatas.name,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formDatas.name=o),placeholder:" ",invalid:e.formDatas.name===""},null,8,["modelValue","invalid"])]),s("div",Ee,[Ne,r(d,{id:"secondary_status",type:"text",modelValue:e.formDatas.license_status,"onUpdate:modelValue":a[4]||(a[4]=o=>e.formDatas.license_status=o),placeholder:" ",invalid:e.formDatas.license_status===""},null,8,["modelValue","invalid"])]),s("div",Ge,[Pe,r(d,{id:"license",type:"text",modelValue:e.formDatas.expiration_date,"onUpdate:modelValue":a[5]||(a[5]=o=>e.formDatas.expiration_date=o),placeholder:" ",invalid:e.formDatas.expiration_date===""},null,8,["modelValue","invalid"])]),s("div",Te,[Re,r(d,{id:"license",type:"text",modelValue:e.formDatas.insurance,"onUpdate:modelValue":a[6]||(a[6]=o=>e.formDatas.insurance=o),placeholder:" ",invalid:e.formDatas.insurance===""},null,8,["modelValue","invalid"])]),s("div",Le,[He,r(d,{id:"license",type:"text",modelValue:e.formDatas.carrier,"onUpdate:modelValue":a[7]||(a[7]=o=>e.formDatas.carrier=o),placeholder:" ",invalid:e.formDatas.carrier===""},null,8,["modelValue","invalid"])])]),je,s("div",Ke,[s("div",Oe,[qe,r(d,{id:"addr",type:"text",modelValue:e.formDatas.address,"onUpdate:modelValue":a[8]||(a[8]=o=>e.formDatas.address=o),placeholder:"address"},null,8,["modelValue"])]),s("div",Ye,[ze,r(d,{id:"city",type:"text",modelValue:e.formDatas.city,"onUpdate:modelValue":a[9]||(a[9]=o=>e.formDatas.city=o),placeholder:"city"},null,8,["modelValue"])]),s("div",Je,[Qe,r(g,{id:"state",modelValue:e.dropdownItemst,"onUpdate:modelValue":a[10]||(a[10]=o=>e.dropdownItemst=o),options:e.dropdownItemSt,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),s("div",We,[Xe,r(h,{modelValue:e.formDatas.bphone,"onUpdate:modelValue":a[11]||(a[11]=o=>e.formDatas.bphone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.formDatas.bphone===""},null,8,["modelValue","invalid"])]),s("div",Ze,[$e,r(h,{modelValue:e.formDatas.cphone,"onUpdate:modelValue":a[12]||(a[12]=o=>e.formDatas.cphone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.formDatas.cphone===""},null,8,["modelValue","invalid"])]),s("div",eo,[oo,k(r(d,{id:"email1",modelValue:e.formDatas.email,"onUpdate:modelValue":a[13]||(a[13]=o=>e.formDatas.email=o),type:"text",placeholder:"email",invalid:e.formDatas.email===""},null,8,["modelValue","invalid"]),[[p,"Enter your gmail account in order to submit"]])])]),s("div",ao,[r(c,{label:"Submit",severity:"contrast",raised:"",onClick:e.onSubmit,disabled:!e.isFormValid},null,8,["onClick","disabled"])]),s("div",to,[so,r(m),r(u,{class:"w-2/3"})])],32),l.responseMessage?(F(),M("p",lo,oe(l.responseMessage),1)):ae("",!0)]),te(" > ")],64)}const So=ge(be,[["render",no],["__scopeId","data-v-23e4b524"]]);export{So as default};
