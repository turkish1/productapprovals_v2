import{u as k,a as P,b as L}from"./pdfsignStore-DV6QdQkh.js";import{u as F}from"./permitapp-Bo8_7I9r.js";import{e as s,Z as b,ac as N,x as T,o as B,a as Y,V as R,C as V,l as _,f as w,E as D,I as O,g as $,ad as x,ae as Q,c as Z,j as C,k as A,af as G}from"./index-JMpC5vnI.js";import{u as I}from"./useAxios-Dv3B_cJm.js";import{c as M}from"./countStore-Bk-QjdyX.js";const U={__name:"BuyButton",setup(n){var c,u;const i=F(),e=s(((u=(c=i.$state.permitapp[0])==null?void 0:c.formdt)==null?void 0:u.muniProc)||""),l="pk_test_51PDPFeE9FsYF7D6YfBrV7kYvnDYIAR5QQfaR8ba5TGnoQAbEQgSeY7DLwhOZafrl8ZXJOPsbZN9tYl5HMLlhkxB100cmCtoWo7",{secondFetch:o}=k(),d="buy_btn_1RVdS4E9FsYF7D6YupNeXupi",p=s(!1);b(()=>{setTimeout(()=>{p.value=!0},1e3),o(e.value),p.value=!1,m()}),N("my-storage",{processNumber:e.value});const m=async r=>{console.log("Entered CaptureSession",r),new URL(window.location.href)};return(r,f)=>{const t=T("stripe-buy-button");return B(),Y(t,{"buy-button-id":_(d),"publishable-key":_(l),onUpdate:m},{default:R(()=>[V("Pay")]),_:1},8,["buy-button-id","publishable-key"])}}};function j(){const n=s(""),i=w({status:"",message:"",isFinished:"",isLoading:""}),e=w({status:"",message:"",isFinished:"",isLoading:""}),l=s("");let o="https://4cgf7owinctxji4vx56hnisxh40iskps.lambda-url.us-east-1.on.aws/";const{execute:d,then:p,data:m}=I(o,{method:"GET"},{immediate:!1}),{confirmResponse:c,addResponse:u}=P();function r(t){console.log(t),n.value=t+"/",f()}const f=async()=>{try{const t=await d({params:{processnumber:n.value}}).then(a=>{console.log(a),e.status=a.response.value.status,e.message=a.data.value,e.isFinished=a.isFinished,e.isLoading=a.isLoading});u(e)}catch(t){console.log("Error, fectching data",t)}};return{error:l,sendProc:n,getSignpdf:r,fetchSignPdf:f,result:e,confirmResponse:c,results:i}}const X=D("sessioninput",{state:()=>({sessioninput:[],id:0}),actions:{addSession(n){this.sessioninput.push({sessionData:n,completed:!1})}}}),H={class:"flex flex-col w-3/4 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"85px","margin-top":"200px"}},J={class:"payment-widget"},K=C("h2",{style:{color:"black"}},"Credit Card Payment",-1),oe={__name:"Paymentgateway",setup(n){var y,S;const i=F();X();const e=M(),l=s(0),o=s(((S=(y=i.$state.permitapp[0])==null?void 0:y.formdt)==null?void 0:S.muniProc)||"");s(!1),s(!1);const d=s(!1),p=s(!1),m=s(!1),c=s(!1),{getSignpdf:u}=j(),r=b(()=>{setTimeout(()=>{c.value=!0},2e3),u(a.value.processNumber),console.log(o.value)}),f=L();O(f.$state);const{resp:t}=P();$(()=>{var g,h;l.value=1,((h=(g=t.value)==null?void 0:g.status)==null?void 0:h.status)===200&&(p.value=!0,console.log(t.value.status.status))});const a=N("my-storage",{processNumber:o.value}),{getNumber:W,secondFetch:E}=k(),v=b(()=>{E(a.value.processNumber),e.addCount(o.value),console.log(e.$state),setTimeout(()=>{m.value=!0},1e3),console.log(o.value),d.value=!0});return x(v,()=>{}),x(r,()=>{}),Q(async()=>{await G(c).toBe(!0)}),(g,h)=>(B(),Z("div",H,[C("div",J,[K,A(U,{onClick:_(v)},null,8,["onClick"])])]))}};export{oe as default};
