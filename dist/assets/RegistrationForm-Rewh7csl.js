import{e as a,f as S,D as L,E as z,u as H,G as $,H as j,I as O,o as M,c as k,i as t,J as P,K as G,j as i,L as q,t as K,d as Y,p as J,q as Q,M as W,T as X}from"./index-_nNA5V8C.js";import{_ as Z}from"./FileSaver-CYXrLcLG.js";import{s as ee}from"./index-DY9YWukx.js";import{s as te}from"./index-DpTTOZYJ.js";import{s as oe}from"./index-CkoVLyRs.js";import{s as se}from"./index-Ca3rY-UA.js";import{u as ae}from"./accountsStore-BRjVdBZ9.js";import{u as R}from"./useAxios-DxZnUbFM.js";import{u as le}from"./auth-BB6Pf611.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./permitapp-B23cbjZZ.js";import"./index-BGkzRMpn.js";import"./index-DIypzEaB.js";import"./index-B9TPSqLa.js";import"./index-CY-F9FGU.js";import"./index-CAx4OR6S.js";function ie(){const r=a([]),v=a("");let h=a([]);const{accountUsers:f,getUser:e,addUser:b}=ae();let g=S({license:"",dba:"",name:"",username:"",password:"",secondary_status:"",expiration_date:"",address:"",projects:[],password:"",cphone:"",bphone:"",email:"",date:new Date});const I=a("");let y="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/accounts";const{execute:u,data:c}=R(y,{method:"POST"},{immediate:!1});let p=S({});function V(n){console.log(n),p=n,u({data:n}),v.value="Form submitted successfully!",b(p),console.log(p,"System added")}return{takp:V,noaNum:r,formData:g,error:I,accountUsers:f,getUser:e,addUser:b,accountUsers:f,results:h,responseMessage:v,...L(p)}}const de=z("cccinput",{state:()=>({cccinput:[],id:0}),actions:{addData(r){this.cccinput.push({cccAccounts:r,completed:!1})}},getters:{cccData:r=>r.cccAccounts}});function ce(){const r=a(""),v=a(""),h=a(""),f=a(""),e=a("");let b="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/contractors";const{execute:g,then:I,data:y}=R(b,{method:"GET"},{immediate:!1}),u=S({});let c=S({license:"",dba:"",name:"",city:"",license_status:"",expiration_date:"",address:"",zipcode:""});g().then(_=>(u.value=y.value,h));function p(_){console.log(_),f.value=_,w(f.value)}const V=a(""),n=a([]);function w(_){console.log(_),V.value=_;for(let x=0;x<u.value.length-1;x++)V.value===u.value[x].alt_license&&n.value.push(u.value[x]);console.log(n.value),c.license=n.value[0].alt_license,c.dba=n.value[0].dba,c.name=n.value[0].name,c.license_status=n.value[0].secondary_status,c.city=n.value[0].city,c.expiration_date=n.value[0].expiration_date,c.effective_date=n.value[0].effective_date,c.address=n.value[0].address1,c.zipcode=n.value[0].zip}return de(),{error:v,retrieveAccount:p,responseMessage:r,results:h,fndContract:w,contractors:u,licenseNumbers:e,cccAccounts:c}}const l=r=>(J("data-v-861ee885"),r=r(),Q(),r),re={class:"hero"},ue={class:"card"},me=l(()=>t("h1",{class:"title"},"Registration",-1)),pe=l(()=>t("div",{class:"h-[10rem]"},null,-1)),_e=l(()=>t("div",{class:"font-semibold text-xl"},"Contractor Information",-1)),fe={class:"field"},ve=l(()=>t("label",{for:"lic1",style:{color:"#122620"}},"State of Florida License No.",-1)),he={class:"field"},be=l(()=>t("label",{for:"trade",style:{color:"#122620"}},"Trade",-1)),ye={class:"field"},Ve=l(()=>t("label",{for:"dba",style:{color:"#122620"}},"DBA",-1)),xe={class:"field"},ge=l(()=>t("label",{for:"addr",style:{color:"#122620"}},"Business Address",-1)),we={class:"field span-2"},Se=l(()=>t("label",{for:"name",style:{color:"#122620"}},"Qualifier Name",-1)),Ie={class:"field"},Ue=l(()=>t("label",{for:"secondary_status",style:{color:"#122620"}},"License Status",-1)),Ce={class:"field"},De=l(()=>t("label",{for:"license",style:{color:"#122620"}},"License Expiration Date",-1)),Ae={class:"field"},Me=l(()=>t("label",{for:"license",style:{color:"#122620"}},"Insurance Policy Number",-1)),ke={class:"field"},Ge=l(()=>t("label",{for:"license",style:{color:"#122620"}},"Insurance Carrier",-1)),Re={class:"field"},Be=l(()=>t("label",{for:"state",style:{color:"#122620"}},"City",-1)),Ne={class:"field"},Te=l(()=>t("label",{for:"state",style:{color:"#122620"}},"State",-1)),Ee={class:"field"},Fe=l(()=>t("label",{for:"bphone",style:{color:"#122620"}},"Business Phone",-1)),Le={class:"field"},ze=l(()=>t("label",{for:"cphone",style:{color:"#122620"}},"Cell Phone Number",-1)),He={class:"field"},$e=l(()=>t("label",{for:"email1",style:{color:"#122620"}},"Gmail account",-1)),je={class:"span-2 submit-row"},Oe={class:"full:w-3/4 flex flex-col gap-2",style:{"margin-top":"120px"}},Pe=l(()=>t("label",{for:"addr",style:{color:"#122620"}},"Upload Insurance Information",-1)),qe={key:0},Ke={__name:"RegistrationForm",setup(r){const v=H();$();const h=le();j(h),a(!0),a(!1);const f=a(!1);a(!1);const e=S({license:"",dba:"",name:"",username:"",password:"",license_status:"",expiration_date:"",address:"",city:"",projects:[],cphone:"",bphone:"",email:"",insurance:"",carrier:"",date:new Date}),{cccAccounts:b,retrieveAccount:g}=ce(),{takp:I}=ie(),y=a([]),u=a("");a(null);const c=a(null),p=a(null);a(null);const V=a([{name:"Florida",code:"Florida"},{name:"Georgia",code:"Georgia"}]);a([{name:"Miami",code:"Miami"},{name:"Homestead",code:"Homestead"},{name:"Miami Beach",code:"Miami Beach"},{name:"Miami Gardens",code:"Miami Gardens"}]);const n=a([{name:"Roofing Contractor",code:"Roofing"},{name:"General Contractor",code:"General"}]),w=O(()=>e.insurance.trim()!==""&&e.carrier.trim()!==""&&e.license_status.trim()!==""&&e.license_status.trim()!=="I"&&e.email.trim()!=="");function _(){w.value&&(I(e),Object.assign(e,{license:"",name:"",license_status:"",dba:"",address:"",cphone:"",bphone:"",email:"",insurance:"",carrier:"",zipcode:""}),U())}function x(){g(e.license),y.value=b,console.log(e);const d=y.value;e.dba=d.dba,e.name=d.name,e.expiration_date=d.expiration_date,e.address=d.address,e.city=d.city,e.zipcode=d.zipcode,e.license_status=d.license_status,u.value=d.license_status,B()}function B(){u.value===""?e.license_status="":u.value==="A"?(e.license_status="Active",N()):u.value==="I"&&(e.license_status="Inactive",alert("Your license is Inactive!"),U())}function N(){const d=new Date(e.expiration_date),o=new Date;d.setHours(0,0,0,0),o.setHours(0,0,0,0),d<=o&&(f.value=!0,alert("Your license is Expired!"),U())}function U(){v.push("/")}return(d,o)=>{const m=se,C=oe,D=te,T=ee,E=W,F=Z,A=X;return M(),k("section",re,[t("div",ue,[me,t("form",{class:"grid-form",onSubmit:P(_,["prevent"])},[pe,_e,t("div",fe,[ve,G(i(m,{type:"text",modelValue:e.license,"onUpdate:modelValue":o[0]||(o[0]=s=>e.license=s),placeholder:"CRC000000",onChange:d.checkLicense,invalid:e.license==="",onKeydown:q(x,["tab"])},null,8,["modelValue","onChange","invalid"]),[[A,"Enter your license and hit tab"]])]),t("div",he,[be,i(C,{id:"trad",modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=s=>c.value=s),options:n.value,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),t("div",ye,[Ve,i(m,{id:"dba",type:"text",modelValue:e.dba,"onUpdate:modelValue":o[2]||(o[2]=s=>e.dba=s),placeholder:" ",invalid:e.dba===""},null,8,["modelValue","invalid"])]),t("div",xe,[ge,i(m,{id:"addr",type:"text",modelValue:e.address,"onUpdate:modelValue":o[3]||(o[3]=s=>e.address=s),placeholder:"address"},null,8,["modelValue"])]),t("div",we,[Se,i(m,{id:"name",type:"text",modelValue:e.name,"onUpdate:modelValue":o[4]||(o[4]=s=>e.name=s),placeholder:" ",invalid:e.name===""},null,8,["modelValue","invalid"])]),t("div",Ie,[Ue,i(m,{id:"secondary_status",type:"text",modelValue:e.license_status,"onUpdate:modelValue":o[5]||(o[5]=s=>e.license_status=s),placeholder:" ",invalid:e.license_status===""},null,8,["modelValue","invalid"])]),t("div",Ce,[De,i(m,{id:"license",type:"text",modelValue:e.expiration_date,"onUpdate:modelValue":o[6]||(o[6]=s=>e.expiration_date=s),placeholder:" ",invalid:e.expiration_date===""},null,8,["modelValue","invalid"])]),t("div",Ae,[Me,i(m,{id:"license",type:"text",modelValue:e.insurance,"onUpdate:modelValue":o[7]||(o[7]=s=>e.insurance=s),placeholder:" ",invalid:e.insurance===""},null,8,["modelValue","invalid"])]),t("div",ke,[Ge,i(m,{id:"license",type:"text",modelValue:e.carrier,"onUpdate:modelValue":o[8]||(o[8]=s=>e.carrier=s),placeholder:" ",invalid:e.carrier===""},null,8,["modelValue","invalid"])]),t("div",Re,[Be,i(m,{id:"city",type:"text",modelValue:e.city,"onUpdate:modelValue":o[9]||(o[9]=s=>e.city=s),placeholder:"city"},null,8,["modelValue"])]),t("div",Ne,[Te,i(C,{id:"state",modelValue:p.value,"onUpdate:modelValue":o[10]||(o[10]=s=>p.value=s),options:V.value,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),t("div",Ee,[Fe,i(D,{modelValue:e.bphone,"onUpdate:modelValue":o[11]||(o[11]=s=>e.bphone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.bphone===""},null,8,["modelValue","invalid"])]),t("div",Le,[ze,i(D,{modelValue:e.cphone,"onUpdate:modelValue":o[12]||(o[12]=s=>e.cphone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.cphone===""},null,8,["modelValue","invalid"])]),t("div",He,[$e,G(i(m,{id:"email1",modelValue:e.email,"onUpdate:modelValue":o[13]||(o[13]=s=>e.email=s),type:"text",placeholder:"email",invalid:e.email===""},null,8,["modelValue","invalid"]),[[A,"Enter your gmail account in order to submit"]])]),t("div",je,[i(T,{label:"Submit",severity:"contrast",raised:"",onClick:_,disabled:!w.value},null,8,["disabled"])]),t("div",Oe,[Pe,i(E),i(F,{class:"w-3/4"})])],32),d.responseMessage?(M(),k("p",qe,K(d.responseMessage),1)):Y("",!0)])])}}},rt=ne(Ke,[["__scopeId","data-v-861ee885"]]);export{rt as default};
