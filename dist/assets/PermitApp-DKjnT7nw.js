import{T as K}from"./index-CXiZ2vYo.js";import{s as Q,_ as X}from"./index-BWzeNybH.js";import{s as Y}from"./index-BSgoZfjZ.js";import{s as Z}from"./index-CUZ1VzUL.js";import{s as $}from"./index-Cw2aw_EC.js";import{s as ee}from"./index-y8xWrfP-.js";import{u as oe,a as se,b as D,_ as le}from"./use-createProcessnumber-Ca75sUU4.js";import{u as te}from"./accountsStore-8VwpmacY.js";import{u as ae}from"./permitapp-CY8sqGxO.js";import{r as a,u as ne,a as ie,o as R,A as re,ah as de,an as B,t as ce,c as u,d as P,O as k,v as A,f as e,e as r,g as me,i as ue,q as pe,F as fe,ag as ve,ae as _e,p as be,j as ge}from"./index-JDX0p84y.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-hHeb8Djp.js";import"./index-1V4Ag9KN.js";import"./index-CiT_2xAA.js";import"./index-eiV48y5m.js";import"./index-36B0kiNO.js";import"./index-B5T88oWN.js";import"./index-DycR-YiW.js";import"./index-C4ZYgsUY.js";import"./useAxios-lX1VYdNU.js";import"./processStore-Bh5phAQ9.js";a(1);const ye={setup(){const t=a(""),o=ne(),v=a(!1),l=a(),{procData:E,procReceive:y}=oe(),{accountUsers:n,getUser:V,addUser:c}=te();console.log(n._value[0]);const _=a("me"),w=ae(),i=ie({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),b=a(""),g=a(""),s=a(""),N=a(""),U=a("");R(()=>{re.init({duration:800,easing:"ease-in-out",once:!0})}),de(()=>{if(n._value[0].name==="")return o.push("/");v.value=!0,b.value=n._value[0].name,g.value=n._value[0].email,s.value=n._value[0].phone,N.value=n._value[0].secondary_status,U.value=n._value[0].dba,console.log(n._value[0].phone)}),a(!1);const I=a(!1);se();const{lastNum:p,resNum:L}=D();s.value=n._value[0].phone,a(null);const f=a(""),x=a("");R(()=>{v.value=!0});const O=async()=>{try{const m=a(i.address),G=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,W=await fetch(G);I.value=!0;const S=await W.json();console.log(S),i.muni=S.MinimumPropertyInfos[0].Municipality,i.license=n._value[0].license,i.contractor=n._value[0].name,i.folio=S.MinimumPropertyInfos[0].Strap,console.log(p.value);let C=String(p.value);console.log(p.value.length,p.value,C);let z=C.substring(2,13),H=ve(z).value+1,J=String(H);i.processNumber=_.value.concat(J),console.log(i.processNumber),x.value=i.folio,f.value=x.value.substring(1,2),console.log(f.value),y(i),setTimeout(()=>{I.value=!1},2e3)}catch(m){alert(m)}},T=async()=>{y(i)},M=a(),j=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),F=()=>{o.push("/roofsystem")};function q(m,h){m=i,h=M.value,m.length!==0&&(w.addSystem(m,h,f.value),console.log(m,h,f.value,"System added"))}return B(async()=>{}),{isDialog:v,onSubmit:T,accountUsers:n,getUser:V,email:g,dba:U,invoke:B,phone:s,contractor:b,licenseStatus:N,addUser:c,navigateNext:F,addItemAndClear:q,selectedApplication:M,type:j,resNum:L,...ce(i),responseMessage:t,lastNum:p,useLast:D,load:O,checkMB:f,checkV:x,content:l}}},d=t=>(be("data-v-eec2313c"),t=t(),ge(),t),Ve={class:"md:w-3/4"},we={class:"container md:w-3/4",style:{"margin-left":"220px"}},xe={class:"row"},Se={class:"card flex flex-col gap-1"},Pe=d(()=>e("div",{class:"font-semibold text-xl"},"Permit Application",-1)),ke={class:"card flex justify-center"},Ae={class:"flex flex-col mt-3 grow basis-0 gap-3",style:{"max-width":"300px"}},Ne=d(()=>e("label",{for:"license"},"License Status",-1)),Ue={class:"card flex flex-col gap-2"},Ie={class:"flex flex-col grow basis-0 gap-2"},Me=d(()=>e("label",{for:"addr"},"Property Address",-1)),Ce={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},De={class:"flex flex-col mt-3 grow basis-0 gap-3"},Re=d(()=>e("label",{for:"dba"},"DBA ",-1)),Be={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ee=d(()=>e("label",{for:"contractor"},"Contractor Name",-1)),Le={class:"flex flex-col mt-3 grow basis-0 gap-3"},Oe=d(()=>e("label",{for:"phone"},"Cell Phone Number",-1)),Te={class:"flex flex-col mt-3 grow basis-0 gap-3"},je=d(()=>e("label",{for:"Email"},"Email",-1)),Fe={class:"flex flex-col mt-3 grow basis-0 gap-3"},qe=d(()=>e("label",{for:"muni"},"Municipality",-1)),Ge={class:"flex flex-col mt-3 grow basis-0 gap-3"},We=d(()=>e("label",{for:"folio"},"Folio",-1)),ze={class:"flex flex-col mt-3 grow basis-0 gap-3"},He=d(()=>e("label",{for:"permit"},"Master Permit",-1)),Je={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ke=d(()=>e("label",{for:"processnum"},"mEProcess Number",-1)),Qe={key:0},Xe=d(()=>e("br",null,null,-1)),Ye=d(()=>e("br",null,null,-1)),Ze={"data-aos":"fade-up-right","data-aos-delay":"500"};function $e(t,o,v,l,E,y){const n=le,V=ee,c=$,_=Z,w=Q,i=Y,b=X,g=K;return u(),P(fe,null,[l.isDialog?(u(),k(n,{key:0})):A("",!0),e("div",Ve,[e("div",we,[e("form",null,[e("div",xe,[e("div",Se,[Pe,e("div",ke,[r(V,{modelValue:l.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=s=>l.selectedApplication=s),options:l.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",Ae,[Ne,r(c,{id:"license",modelValue:l.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=s=>l.licenseStatus=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ue,[e("form",{class:"w-3/4",onSubmit:o[12]||(o[12]=(...s)=>l.onSubmit&&l.onSubmit(...s))},[e("div",Ie,[Me,me(r(c,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=s=>t.address=s),placeholder:"address"},null,8,["modelValue"]),[[g,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),t.loading?(u(),P("i",Ce)):(u(),k(_,{key:0,id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:l.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",De,[Re,r(c,{id:"dba",modelValue:l.dba,"onUpdate:modelValue":o[3]||(o[3]=s=>l.dba=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Be,[Ee,r(c,{id:"contractor",modelValue:l.contractor,"onUpdate:modelValue":o[4]||(o[4]=s=>l.contractor=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Le,[Oe,r(w,{modelValue:l.phone,"onUpdate:modelValue":o[5]||(o[5]=s=>l.phone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:l.phone===""},null,8,["modelValue","invalid"])]),e("div",Te,[je,r(c,{modelValue:l.email,"onUpdate:modelValue":o[6]||(o[6]=s=>l.email=s),invalid:l.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(u(),k(i,{key:0,severity:"error"},{default:ue(()=>[_e("Email is required")]),_:1})):A("",!0)]),e("div",Fe,[qe,r(c,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[7]||(o[7]=s=>t.muni=s),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",Ge,[We,r(c,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[8]||(o[8]=s=>t.folio=s),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",ze,[He,r(c,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[9]||(o[9]=s=>t.permit=s),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",Je,[Ke,r(c,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[10]||(o[10]=s=>t.processNumber=s),type:"text",placeholder:"process number"},null,8,["modelValue"])]),l.responseMessage?(u(),P("p",Qe,pe(l.responseMessage),1)):A("",!0),Xe,r(_,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=s=>l.addItemAndClear(t.formData,l.selectedApplication)),onChange:t.generatePdf},null,8,["onChange"])],32),Ye,e("div",Ze,[r(b)])])])])])])])],64)}const xo=he(ye,[["render",$e],["__scopeId","data-v-eec2313c"]]);export{xo as default};
