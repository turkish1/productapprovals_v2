import{T as K}from"./index-qwH-9hlC.js";import{s as Q,_ as X}from"./index-DqWrlALB.js";import{s as Y}from"./index-C_SloXFp.js";import{s as Z}from"./index-C56NVouX.js";import{s as $}from"./index-CBbWtfRf.js";import{s as ee}from"./index-DDrrGU4-.js";import{u as oe,a as se,b as D,_ as te}from"./use-createProcessnumber-Dy5L38ed.js";import{u as le}from"./accountsStore-Ka8Rzhqr.js";import{u as ae}from"./permitapp-DGbEfkNK.js";import{r as a,u as ne,a as ie,o as R,A as re,ah as de,an as B,t as ce,c as u,d as P,O as k,v as A,f as e,e as r,g as me,i as ue,q as pe,F as fe,ag as ve,ae as _e,p as be,j as ge}from"./index-BTqL2SUo.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DVv019nC.js";import"./index-RR7gECV0.js";import"./index-1blUfyAm.js";import"./index-CVJNPJwM.js";import"./index-CGkpZT_9.js";import"./index-CnJjbTJq.js";import"./index-fpuAjzMn.js";import"./index-BAfoNrod.js";import"./useAxios-CAJ0eRwc.js";import"./processStore-CGTxMMTI.js";a(1);const ye={setup(){const l=a(""),o=ne(),f=a(!1),t=a(),{procData:E,procReceive:y}=oe(),{accountUsers:n,getUser:V,addUser:c}=le();console.log(n._value[0]);const v=a("me"),w=ae(),i=ie({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),_=a(""),b=a(""),s=a(""),N=a(""),U=a("");R(()=>{re.init({duration:800,easing:"ease-in-out",once:!0})}),de(()=>{if(n._value[0].name==="")return o.push("/");f.value=!0,_.value=n._value[0].name,b.value=n._value[0].email,s.value=n._value[0].phone,N.value=n._value[0].secondary_status,U.value=n._value[0].dba,console.log(n._value[0].phone)}),a(!1);const I=a(!1);se();const{lastNum:g,resNum:L}=D();s.value=n._value[0].phone,a(null);const p=a(""),x=a("");R(()=>{f.value=!0});const O=async()=>{try{const m=a(i.address),G=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,W=await fetch(G);I.value=!0;const S=await W.json();console.log(S),i.muni=S.MinimumPropertyInfos[0].Municipality,i.license=n._value[0].license,i.contractor=n._value[0].name,i.folio=S.MinimumPropertyInfos[0].Strap;let C=String(g.value);console.log(g.value.length,g.value,C);let z=C.substring(2,13),H=ve(z).value+1,J=String(H);i.processNumber=v.value.concat(J),console.log(i.processNumber),x.value=i.folio,p.value=x.value.substring(1,2),console.log(p.value),y(i),setTimeout(()=>{I.value=!1},2e3)}catch(m){alert(m)}},T=async()=>{y(i)},M=a(),j=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),F=()=>{o.push("/roofsystem")};function q(m,h){m=i,h=M.value,m.length!==0&&(w.addSystem(m,h,p.value),console.log(m,h,p.value,"System added"))}return B(async()=>{}),{isDialog:f,onSubmit:T,accountUsers:n,getUser:V,email:b,dba:U,invoke:B,phone:s,contractor:_,licenseStatus:N,addUser:c,navigateNext:F,addItemAndClear:q,selectedApplication:M,type:j,resNum:L,...ce(i),responseMessage:l,lastNum:g,useLast:D,load:O,checkMB:p,checkV:x,content:t}}},d=l=>(be("data-v-228e7aff"),l=l(),ge(),l),Ve={class:"md:w-3/4"},we={class:"container md:w-3/4",style:{"margin-left":"220px"}},xe={class:"row"},Se={class:"card flex flex-col gap-1"},Pe=d(()=>e("div",{class:"font-semibold text-xl"},"Permit Application",-1)),ke={class:"card flex justify-center"},Ae={class:"flex flex-col mt-3 grow basis-0 gap-3",style:{"max-width":"300px"}},Ne=d(()=>e("label",{for:"license"},"License Status",-1)),Ue={class:"card flex flex-col gap-2"},Ie={class:"flex flex-col grow basis-0 gap-2"},Me=d(()=>e("label",{for:"addr"},"Property Address",-1)),Ce={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},De={class:"flex flex-col mt-3 grow basis-0 gap-3"},Re=d(()=>e("label",{for:"dba"},"DBA ",-1)),Be={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ee=d(()=>e("label",{for:"contractor"},"Contractor Name",-1)),Le={class:"flex flex-col mt-3 grow basis-0 gap-3"},Oe=d(()=>e("label",{for:"phone"},"Cell Phone Number",-1)),Te={class:"flex flex-col mt-3 grow basis-0 gap-3"},je=d(()=>e("label",{for:"Email"},"Email",-1)),Fe={class:"flex flex-col mt-3 grow basis-0 gap-3"},qe=d(()=>e("label",{for:"muni"},"Municipality",-1)),Ge={class:"flex flex-col mt-3 grow basis-0 gap-3"},We=d(()=>e("label",{for:"folio"},"Folio",-1)),ze={class:"flex flex-col mt-3 grow basis-0 gap-3"},He=d(()=>e("label",{for:"permit"},"Master Permit",-1)),Je={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ke=d(()=>e("label",{for:"processnum"},"mEProcess Number",-1)),Qe={key:0},Xe=d(()=>e("br",null,null,-1)),Ye=d(()=>e("br",null,null,-1)),Ze={"data-aos":"fade-up-right","data-aos-delay":"500"};function $e(l,o,f,t,E,y){const n=te,V=ee,c=$,v=Z,w=Q,i=Y,_=X,b=K;return u(),P(fe,null,[t.isDialog?(u(),k(n,{key:0})):A("",!0),e("div",Ve,[e("div",we,[e("form",null,[e("div",xe,[e("div",Se,[Pe,e("div",ke,[r(V,{modelValue:t.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=s=>t.selectedApplication=s),options:t.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",Ae,[Ne,r(c,{id:"license",modelValue:t.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=s=>t.licenseStatus=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ue,[e("form",{class:"w-3/4",onSubmit:o[12]||(o[12]=(...s)=>t.onSubmit&&t.onSubmit(...s))},[e("div",Ie,[Me,me(r(c,{id:"addr",type:"text",modelValue:l.address,"onUpdate:modelValue":o[2]||(o[2]=s=>l.address=s),placeholder:"address"},null,8,["modelValue"]),[[b,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),l.loading?(u(),P("i",Ce)):(u(),k(v,{key:0,id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:l.loading,onClick:t.load,onInput:l.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",De,[Re,r(c,{id:"dba",modelValue:t.dba,"onUpdate:modelValue":o[3]||(o[3]=s=>t.dba=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Be,[Ee,r(c,{id:"contractor",modelValue:t.contractor,"onUpdate:modelValue":o[4]||(o[4]=s=>t.contractor=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Le,[Oe,r(w,{modelValue:t.phone,"onUpdate:modelValue":o[5]||(o[5]=s=>t.phone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:t.phone===""},null,8,["modelValue","invalid"])]),e("div",Te,[je,r(c,{modelValue:t.email,"onUpdate:modelValue":o[6]||(o[6]=s=>t.email=s),invalid:t.email===null,error:l.emailError},null,8,["modelValue","invalid","error"]),l.invalid?(u(),k(i,{key:0,severity:"error"},{default:ue(()=>[_e("Email is required")]),_:1})):A("",!0)]),e("div",Fe,[qe,r(c,{id:"muni",modelValue:l.muni,"onUpdate:modelValue":o[7]||(o[7]=s=>l.muni=s),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",Ge,[We,r(c,{id:"folio",modelValue:l.folio,"onUpdate:modelValue":o[8]||(o[8]=s=>l.folio=s),type:"text",placeholder:"folio",onInput:l.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",ze,[He,r(c,{id:"permit",modelValue:l.permit,"onUpdate:modelValue":o[9]||(o[9]=s=>l.permit=s),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",Je,[Ke,r(c,{id:"processnum",modelValue:l.processNumber,"onUpdate:modelValue":o[10]||(o[10]=s=>l.processNumber=s),type:"text",placeholder:"process number"},null,8,["modelValue"])]),t.responseMessage?(u(),P("p",Qe,pe(t.responseMessage),1)):A("",!0),Xe,r(v,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=s=>t.addItemAndClear(l.formData,t.selectedApplication)),onChange:l.generatePdf},null,8,["onChange"])],32),Ye,e("div",Ze,[r(_)])])])])])])])],64)}const xo=he(ye,[["render",$e],["__scopeId","data-v-228e7aff"]]);export{xo as default};
