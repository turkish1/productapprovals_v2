import{s as T,a as B}from"./index-CkuIhVEU.js";import{e as a,a_ as C,G as M,o as d,c as p,g as o,F as N,z as U,h as u,t as g,I as h}from"./index-Bv5J4zq0.js";import{u as E}from"./permitapp-BFPhG2LU.js";const V={class:"flex items-center justify-center flex-col"},I=o("label",{for:"muni",style:{color:"#eeebe5"}},[o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"For PDF Documents")])],-1),j=o("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"},null,-1),G=o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"Drag and drop files to here to upload.")],-1),L=[G],O={class:"flex flex-wrap gap-4"},q={class:"font-semibold text-ellipsis max-w-250 whitespace-nowrap overflow-hidden"},Q={__name:"FileSaver",setup(A){var f,v,_;const m=E();a(((v=(f=m.$state.permitapp[0])==null?void 0:f.formdt)==null?void 0:v.processNumber)||"");const x=a(((_=m.$state.permitapp[0].formdt)==null?void 0:_.muniProc)||""),l=a([]),y=C();M();const b=a(0),$=a(0),c=a([]),S=e=>{e.dataTransfer.dropEffect="copy"},k=e=>{const r=y.config.locale.fileSizeTypes;if(e===0)return`0 ${r[0]}`;const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(3))} ${r[t]}`},z=async e=>{l.value=[...e.dataTransfer.files];for(const s of l.value)console.log(s),c.value.push(s),console.log(c.value);D()},w=e=>{l.value.splice(e,1)},F=e=>{$.value=b.value/1,e()};a(""),a(""),a("");const D=async()=>{for(const e of c.value){console.log("Uploading file:",e);const s=`https://dsr-pdfupload.s3.us-east-1.amazonaws.com/${x.value}/${e.name}`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/pdf"},body:e});if(!n.ok){console.error(`Failed to upload ${e.name}. Status: ${n.status}`);continue}console.log(`Successfully uploaded ${e.name} to S3.`)}};return(e,s)=>{const n=T,r=B;return d(),p("div",{class:"dropzone",onDragover:h(S,["prevent"]),onDrop:h(z,["prevent"])},[o("div",V,[I,j,o("p",{class:"mt-6 mb-0",onUpload:s[0]||(s[0]=t=>e.onTemplatedUpload(t)),style:{color:"#eeebe5"}},L,32)]),o("div",O,[(d(!0),p(N,null,U(l.value,(t,i)=>(d(),p("div",{key:i+t.url+t.size,class:"p-8 rounded-border flex flex-col border border-surface items-center gap-4"},[o("div",null,[u(n,{onClick:s[1]||(s[1]=P=>F()),icon:"pi pi-cloud-upload",rounded:"",outlined:"",severity:"success",disabled:!l.value||l.value.length===0},null,8,["disabled"])]),o("span",q,g(t.name),1),o("div",null,g(k(t.size)),1),u(r,{value:"Completed",class:"mt-4",severity:"success"}),u(n,{icon:"pi pi-times",onClick:P=>w(i),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])],32)}}};export{Q as _};
