import{_ as L}from"./Drop-DuPWZXCL.js";import{s as B}from"./index-CeBjm0tL.js";import{s as F}from"./index-D9xuB-ue.js";import{s as R}from"./index-CJ5XZ_OV.js";import{s as z}from"./index-TVQYxk_O.js";import{a as q,u as O}from"./useAxios-Dy7Wqj-j.js";import{r as n,g as j,a as N,_ as Z,u as $,t as G,o as y,c as w,d as s,b as d,N as H,m as W,q as Y,p as J,f as K}from"./index-C6rXEGaK.js";import{u as Q}from"./permitapp-DykkKbVb.js";import{e as X}from"./index-DDcqoSXM.js";import"./index-D1eiXdYu.js";import"./index-urQr43Fi.js";import"./index-Dz681RH_.js";import"./index-C7aQId1r.js";import"./index-4TMI5pES.js";import"./index-BZQ1bzJS.js";const o=q.create({baseURL:"https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint",headers:{"Cache-Control":"no-cache","Content-Type":"application/json",apiKey:"LduI7j9z7Iwppo1AbxE9TBz2z2lJFZZFF3MU5ZFCbfxHU8wMlyCjvz0pWMByVH5n","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}}),ee={getAddr(){return o.get("/folio")},postProcessnumber(e){return o.post("/process",e)},getLastProcess(){return o.get("/lastnumber")},getSlopeless(){return o.get("/slopeless")},getSlopemore(){return o.get("/slopemore")},getdeOne(){return o.get("/desupone")},getdeTwo(){return o.get("/desuptwo")},getdeThree(){return o.get("/desupthree")},getdeFour(){return o.get("/desupfour")},getZones23(){return o.get("/gableroofs23")},getNoa(){return o.get("/noa")},getSBS(){return o.get("/shinglesbs")},getSystemE(){return o.get("/systemtype")},getburMaterial(){return o.get("/burmaterial")},getnewburMaterial(){return o.get("/burmaterials")},getburSystem(){return o.get("/bursystem")},getPoly(){return o.get("/shinglepoly")},getSystemF(){return o.get("/systemtypef")},getdeGauge(){return o.get("/degauge")},getdeMaterial(){return o.get("/dematerial")},getdeMatMore(){return o.get("/dematerials")},getdeSize(){return o.get("/desize")},getdeFastener(){return o.get("/defastener")},getprimeBase(){return o.get("/primebase")},getPerimeter(){return o.get("/perimeter")},getNoas(){return o.post("/shinglenoa")},getTile(){return http.get("/tileroof")},getTiles(){return o.get("/tilenoa")},getZones(){return o.get("/gablezones")},getLay(){return o.get("/underlaymentshingle")},getContractors(){return o.get("/contractors")},postAccount(e){return o.post("/accounts",e)},getAccount(){return o.get("/retriveaccounts")},getDripMaterials(){return o.get("/dripmaterials")}};function S(){const e=n(null),t=n(0);return ee.getLastProcess().then(u=>{e.value=u.data,e.value.forEach(l=>{console.log(l.processNumber),t.value=l.processNumber})}).catch(u=>{console.error("Error:",u)}),{resNum:e,lastNum:t}}function te(){const{resNum:e,lastNum:t}=S(),u=n(""),l=n(new Date().getFullYear()),g=n(6),b=n("me"),i=Array.from({length:10**g.value},(c,m)=>`${b.value}${l.value}${String(m).padStart(g.value,"0")}`),a=S();return console.log(a),u.value=i[0]+1,t.value!==0?console.log("entered lastNum equal null",t.value):(console.log("entered lastNum equal a number",t.value),u.value=t.value+1),console.log(u.value,t.value,a),{pNum:u,lastNum:t,resNum:e,test:a}}const oe=j("processinput",{state:()=>({processinput:[],id:0}),actions:{addData(e){this.processinput.push({procData:e,completed:!1})}}});function se(){const e=n("");let t=n([]);const u=oe(),l=n("");let g="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/process";const{execute:b,data:i}=O(g,{method:"POST"},{immediate:!1});let a=N({});function c(m){console.log(m),a=m,b({data:m}),e.value="Form submitted successfully!",u.addData(a),console.log(a,"System added")}return{error:l,results:t,procReceive:c,responseMessage:e,procData:a,procStore:u}}n(1);const re={setup(){const e=n(""),t=$(),{procData:u,procReceive:l}=se(),g=n("me"),b=Q(),i=N({address:"",muni:"",folio:"",contractor:"",permit:"",processNumber:"",phone:"",email:"",date:new Date}),a=n(!1);te();const{lastNum:c,resNum:m}=S(),f=n(""),r=n(""),x=async()=>{const v=n(i.address),I=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(v.value)}&to=200`,k=await fetch(I);a.value=!0;const _=await k.json();console.log(_),i.muni=_.MinimumPropertyInfos[0].Municipality,i.folio=_.MinimumPropertyInfos[0].Strap;let V=String(c.value);console.log(c.value.length,c.value,V);let D=V.substring(2,13),T=X(D).value+1,E=String(T);i.processNumber=g.value.concat(E),console.log(i.processNumber),r.value=i.folio,f.value=r.value.substring(0,2),console.log(f.value),l(i),setTimeout(()=>{a.value=!1},2e3)},A=async()=>{l(i)},P=n(),M=n([{name:"",code:" "},{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),C=()=>{t.push("/roofsystem")};function U(v,h){v=i,h=P.value,v.length!==0&&(b.addSystem(v,h,f.value),console.log(v,h,f.value,"System added"))}return{onSubmit:A,navigateNext:C,addItemAndClear:U,selectedApplication:P,type:M,resNum:m,...G(i),responseMessage:e,lastNum:c,useLast:S,load:x,checkMB:f,checkV:r}}},p=e=>(J("data-v-b6e32bbf"),e=e(),K(),e),le={class:"flex flex-col md:flex-row gap-4",style:{"margin-left":"220px"}},ae={class:"md:w-2/3"},ne={class:"container"},ie={class:"row"},ue={class:"card flex flex-col gap-2"},de=p(()=>s("div",{class:"font-semibold text-xl"},"Permit Application",-1)),ce={class:"card flex justify-center"},pe={class:"card flex flex-col gap-4"},me={class:"flex flex-wrap gap-4"},ge={class:"flex flex-col grow basis-0 gap-3"},fe=p(()=>s("label",{for:"addr"},"Property Address",-1)),be={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},ve={class:"flex flex-col mt-3 grow basis-0 gap-3"},he=p(()=>s("label",{for:"contractor"},"Contractor Name",-1)),ye={class:"flex flex-col mt-3 grow basis-0 gap-3"},Se=p(()=>s("label",{for:"phone"},"Cell Phone Number",-1)),_e={class:"flex flex-col mt-3 grow basis-0 gap-3"},we=p(()=>s("label",{for:"Email"},"Email",-1)),Pe={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ve=p(()=>s("label",{for:"muni"},"Municipality",-1)),Ne={class:"flex flex-col mt-3 grow basis-0 gap-3"},xe=p(()=>s("label",{for:"folio"},"Folio",-1)),Ae={class:"flex flex-col mt-3 grow basis-0 gap-3"},Me=p(()=>s("label",{for:"permit"},"Master Permit",-1)),Ce={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ue=p(()=>s("label",{for:"processnum"},"mEProcess Number",-1)),Ie=p(()=>s("br",null,null,-1)),ke={key:0};function De(e,t,u,l,g,b){const i=z,a=R,c=F,m=B,f=L;return y(),w("div",le,[s("div",ae,[s("div",ne,[s("form",null,[s("div",ie,[s("div",ue,[de,s("div",ce,[d(i,{modelValue:l.selectedApplication,"onUpdate:modelValue":t[0]||(t[0]=r=>l.selectedApplication=r),options:l.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),s("div",pe,[s("div",me,[s("form",{class:"w-3/4",onSubmit:t[10]||(t[10]=(...r)=>l.onSubmit&&l.onSubmit(...r))},[s("div",ge,[fe,d(a,{id:"addr",type:"text",modelValue:e.address,"onUpdate:modelValue":t[1]||(t[1]=r=>e.address=r),placeholder:"address"},null,8,["modelValue"]),e.loading?(y(),w("i",be)):(y(),H(c,{key:0,type:"button",label:"Search",severity:"contrast",icon:"pi pi-search-plus",loading:e.loading,onClick:l.load},null,8,["loading","onClick"]))]),s("div",ve,[he,d(a,{id:"zip",modelValue:e.contractor,"onUpdate:modelValue":t[2]||(t[2]=r=>e.contractor=r),type:"text",placeholder:"name"},null,8,["modelValue"])]),s("div",ye,[Se,d(m,{modelValue:e.phone,"onUpdate:modelValue":t[3]||(t[3]=r=>e.phone=r),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.phone===""},null,8,["modelValue","invalid"])]),s("div",_e,[we,d(a,{modelValue:e.email,"onUpdate:modelValue":t[4]||(t[4]=r=>e.email=r),invalid:e.email===null},null,8,["modelValue","invalid"])]),s("div",Pe,[Ve,d(a,{id:"muni",modelValue:e.muni,"onUpdate:modelValue":t[5]||(t[5]=r=>e.muni=r),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),s("div",Ne,[xe,d(a,{id:"folio",modelValue:e.folio,"onUpdate:modelValue":t[6]||(t[6]=r=>e.folio=r),type:"text",placeholder:"folio",onInput:e.updatemEProcess},null,8,["modelValue","onInput"])]),s("div",Ae,[Me,d(a,{id:"permit",modelValue:e.permit,"onUpdate:modelValue":t[7]||(t[7]=r=>e.permit=r),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),s("div",Ce,[Ue,d(a,{id:"processnum",modelValue:e.processNumber,"onUpdate:modelValue":t[8]||(t[8]=r=>e.processNumber=r),type:"text",placeholder:"process number"},null,8,["modelValue"])]),Ie,d(c,{type:"submit",label:"Submit",severity:"contrast",raised:"",as:"router-link",to:"/roofsystem",onClick:t[9]||(t[9]=r=>l.addItemAndClear(e.formData,l.selectedApplication))})],32),l.responseMessage?(y(),w("p",ke,W(l.responseMessage),1)):Y("",!0),d(f)])])])])])])])])}const Je=Z(re,[["render",De],["__scopeId","data-v-b6e32bbf"]]);export{Je as default};
