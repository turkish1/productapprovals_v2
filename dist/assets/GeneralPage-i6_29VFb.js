import{r as s,p as x,s as V,u as e,a5 as F,F as ee,v as le,a3 as $,_ as O,$ as q,E as te,Q as oe,as as ae,A as a,y as d,i as p,G as E,ah as se,at as ne,W as de,aK as re,Y as h,ap as ie,aL as ce,aM as ue,V as pe}from"./vue-vendor-DzAkcJj_.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as me}from"./accountsStore-wlHGd0qN.js";import{u as fe}from"./permitapp-DylJ2Cp4.js";import{u as ve}from"./roofList-DphNUyZB.js";import{ao as W,ap as _e,aq as ge}from"./vendor-BRFOvblm.js";import"./lodash-bvFwl9iN.js";const be=m=>(O("data-v-b9ee6bbe"),m=m(),q(),m),he={class:"editor-container"},xe={key:0,class:"instructions"},Ve={key:1,class:"instructions dragging"},we={key:2,class:"image-gallery"},ye=be(()=>e("h3",null,"Uploaded Images",-1)),Se={class:"images-grid"},Ue=["src"],Ie={__name:"CadViewer",setup(m){const w=s([]),v=s(!1);function G(){v.value=!0}function T(){v.value=!1}function M(y){v.value=!1;const u=y.dataTransfer.files;for(const _ of u)if(_.type.startsWith("image/")){const f=new FileReader;f.onload=S=>{w.value.push(S.target.result)},f.readAsDataURL(_)}}return(y,u)=>(x(),V("div",he,[e("div",{class:"drop-zone",onDragover:u[0]||(u[0]=$(()=>{},["prevent"])),onDragenter:$(G,["prevent"]),onDragleave:T,onDrop:$(M,["prevent"])},[!w.value.length&&!v.value?(x(),V("p",xe,"Drag and drop plans here")):F("",!0),v.value?(x(),V("p",Ve,"Release to drop the images")):F("",!0),w.value.length?(x(),V("div",we,[ye,e("div",Se,[(x(!0),V(ee,null,le(w.value,(_,f)=>(x(),V("div",{key:f,class:"image-wrapper"},[e("img",{src:_,alt:"Uploaded Image",class:"uploaded-image"},null,8,Ue)]))),128))])])):F("",!0)],32)]))}},ke=J(Ie,[["__scopeId","data-v-b9ee6bbe"]]),r=m=>(O("data-v-899bf1b4"),m=m(),q(),m),Le={id:"generalpg",class:"flex flex-col md:flex-row gap-6",style:{"margin-left":"320px"}},Ne={class:"md:w-full"},Re={class:"md:w-3/4 card flex flex-col gap-4"},De={class:"container"},Ae={class:"row"},Pe={class:"card flex flex-col gap-4"},Te=se('<div class="grid grid-cols-1 gap-1 place-content-center h-6 ..." data-v-899bf1b4><p class="text-center font-semibold text-xl" data-v-899bf1b4>2023 HVHZ</p></div><div class="grid grid-cols-1 gap-1 place-content-center h-5 ..." data-v-899bf1b4><p class="text-center italic font-semibold text-xl" data-v-899bf1b4>mEPermit</p></div><div class="grid grid-cols-1 gap-1 place-content-center h-4 ..." data-v-899bf1b4><p class="text-center font-semibold text-xl" data-v-899bf1b4>General Information Page</p></div>',3),Ee={class:"flex flex-wrap gap-5 columns-3"},Ge={class:"flex flex-col grow basis-0 gap-3"},Me=r(()=>e("label",{for:"master"},"Master Permit",-1)),Be={class:"flex flex-col grow basis-0 gap-3"},Ce=r(()=>e("label",{for:"process"},"mEProcess Number",-1)),Fe={class:"flex flex-col grow basis-0 gap-2"},$e=r(()=>e("label",{for:"email1"},"Job Address",-1)),je={class:"flex flex-col md:w-1/2 gap-2"},ze=r(()=>e("label",{for:"dba"},"Licensed DBA Name ",-1)),He={class:"card flex flex-wrap justify-center gap-6"},We={class:"flex items-center"},Oe=r(()=>e("label",{for:"newroof",class:"ml-2"}," New Roof",-1)),qe={class:"flex items-center"},Je=r(()=>e("label",{for:"reroof",class:"ml-2"}," Re-Roof",-1)),Ke={class:"card flex flex-wrap justify-center gap-4"},Qe={class:"flex items-center"},Ye=r(()=>e("label",{for:"slope1",class:"ml-2"}," Low Slope ",-1)),Ze={class:"flex items-center"},Xe=r(()=>e("label",{for:"mtile1",class:"ml-2"}," Mechanical Fastened Tile ",-1)),el={class:"flex items-center"},ll=r(()=>e("label",{for:"adtile1",class:"ml-2"}," Adhesive Set Tile ",-1)),tl=r(()=>e("br",null,null,-1)),ol=r(()=>e("label",null,null,-1)),al={class:"flex items-center"},sl=r(()=>e("label",{for:"shingle1",class:"ml-2"}," Asphalt Shingle ",-1)),nl={class:"flex items-center"},dl=r(()=>e("label",{for:"metal",class:"ml-2"}," Metal Panel ",-1)),rl=r(()=>e("label",{style:{"margin-left":"350px"}},"Roof Area ",-1)),il={class:"card flex flex-col md:flex-row gap-8"},cl=r(()=>e("div",null,[e("label",{for:"lowslope",class:"ml-1 text-left"},"Low Slope ")],-1)),ul=r(()=>e("div",{class:"ml-1 text-left"},[e("label",{for:""},"Steep Slope ")],-1)),pl=r(()=>e("label",{for:"",class:"ml-1"},"Total ",-1)),ml={class:"card md:w-1/2 flex flex-col bg-local hover:bg-fixed gap-4",style:{"margin-left":"10px","background-color":"#eae7e2"}},fl={class:"card md:w-1/3 flex flex-col gap-4"},vl={__name:"GeneralPage",setup(m){const w=fe(),{permitapp:v}=W(w),G=ve(),{roofList:T}=W(G),M=te(),{accountUsers:y}=me();let u=s(""),_=s(""),f=s("");const S=s("");let U=s(""),j=s(""),z=s(""),K=s(""),k=s(!1),L=s(!1),N=s(!1),R=s(!1),D=s(),b=s(),A=s(),P=s(),Q=s();const B=s(!1);console.log(T,v),oe(()=>{T.value.forEach((o,t)=>{if(console.log(o.item,t),o.item==="Asphalt Shingle"&&(console.log(o.dim1),f.value=o.dim1,N.value=!0),o.item==="Low Slope"&&(console.log(o.dim2),_.value=o.dim2,console.log(_.value),B.value=!0),o.item==="Mechanical Fastened Tile"&&(f.value=o.dim3,k.value=!0),o.item==="Adhesive Set Tile"&&(j.value=o.dim4,L.value=!0),o.item==="Metal Panel"&&(z.value=o.dim5,R.value=!0),y._value[0].DBA==="")return console.log(y._value[0]),null;A.value=y._value[0].dba}),v.value.forEach((o,t)=>{D.value=o.formdt.permit,b.value=o.formdt.processNumber,P.value=o.formdt.address,Q.value=o.formdt.contractor}),C()});const I=s(!1);function C(){let o=Number(_.value),t=Number(f.value),i=Number(j.value),c=Number(z.value),n=Number(K.value);S.value=t+i+c+n,U.value=o,console.log(f.value),u.value=U.value+S.value}const H=s(!1),Y=()=>{const o=document.getElementById("generalpg");console.log(o),_e(o).then(i=>{const c=i.toDataURL("image/png"),n=new ge;n.text(`${b.value}`,20,30),n.setGState(new n.GState({opacity:.4})),n.setFontSize(24),n.setTextColor(150,150,150),n.text("DigitalSolutions",n.internal.pageSize.getWidth()/2,n.internal.pageSize.getHeight()/2,{angle:0,align:"left",baseline:"bottom",renderingMode:"fill"}),console.log(n.text),n.addImage(c,"PNG",10,10,190,0),n.setGState(new n.GState({opacity:1}));const g=n.output("blob");t(g)});const t=async i=>{try{const c=i,n=new Blob([c],{type:"application/pdf"}),g=document.createElement("a");g.href=URL.createObjectURL(n),g.download=`${b.value}-general-page.pdf`,g.click(),URL.revokeObjectURL(g.href),console.log("PDF saved successfully without popping download dialog!")}catch(c){console.error("Error saving file:",c)}}},Z=()=>{H.value=!0,M.push("/roofinputsection")};return ae(async()=>{await ne(H).changed(),Y()}),(o,t)=>{const i=de,c=ce,n=re,g=ue,X=pe;return x(),V("div",Le,[e("div",Ne,[e("div",Re,[e("div",De,[e("div",Ae,[e("div",Pe,[Te,e("div",Ee,[e("div",Ge,[Me,a(i,{id:"master",modelValue:d(D),"onUpdate:modelValue":t[0]||(t[0]=l=>p(D)?D.value=l:D=l),type:"text",planceholder:"permit number"},null,8,["modelValue"])]),e("div",Be,[Ce,a(i,{id:"process",modelValue:d(b),"onUpdate:modelValue":t[1]||(t[1]=l=>p(b)?b.value=l:b=l),type:"text",planceholder:"mEProcess"},null,8,["modelValue"])]),e("div",Fe,[$e,a(i,{id:"jobaddress",modelValue:d(P),"onUpdate:modelValue":t[2]||(t[2]=l=>p(P)?P.value=l:P=l),type:"text",planceholder:""},null,8,["modelValue"])])]),e("div",je,[ze,a(i,{id:"dba",modelValue:d(A),"onUpdate:modelValue":t[3]||(t[3]=l=>p(A)?A.value=l:A=l),type:"text"},null,8,["modelValue"])])]),e("div",He,[e("div",We,[a(d(h),{modelValue:I.value,"onUpdate:modelValue":t[4]||(t[4]=l=>I.value=l),invalid:!I.value,inputId:"newroof",name:"checked",value:"newroof"},null,8,["modelValue","invalid"]),Oe]),e("div",qe,[a(d(h),{modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=l=>I.value=l),invalid:!I.value,inputId:"reroof",name:"checked",value:"reroof"},null,8,["modelValue","invalid"]),Je])]),e("div",Ke,[e("div",Qe,[a(d(h),{modelValue:B.value,"onUpdate:modelValue":t[6]||(t[6]=l=>B.value=l),inputId:"slope1",name:"lowslope",value:"Low Slope",severity:"contrast",binary:!0},null,8,["modelValue"]),Ye]),e("div",Ze,[a(d(h),{modelValue:d(k),"onUpdate:modelValue":t[7]||(t[7]=l=>p(k)?k.value=l:k=l),inputId:"mtile1",name:"mtile",value:"Mechanical Fastened Tile",severity:"contrast",binary:!0},null,8,["modelValue"]),Xe]),e("div",el,[a(d(h),{modelValue:d(L),"onUpdate:modelValue":t[8]||(t[8]=l=>p(L)?L.value=l:L=l),inputId:"adtile1",name:"adtile",value:"Mortar/Adhesive Set Tile",severity:"contrast",binary:!0},null,8,["modelValue"]),ll]),tl,ol,e("div",al,[a(d(h),{modelValue:d(N),"onUpdate:modelValue":t[9]||(t[9]=l=>p(N)?N.value=l:N=l),inputId:"shingle1",name:"shingle",value:"Asphalt Shingle",severity:"contrast",binary:!0},null,8,["modelValue"]),sl]),e("div",nl,[a(d(h),{modelValue:d(R),"onUpdate:modelValue":t[10]||(t[10]=l=>p(R)?R.value=l:R=l),inputId:"metal1",name:"metal1",value:"metal panel",severity:"contrast",binary:!0},null,8,["modelValue"]),dl])]),rl,e("div",il,[cl,a(n,null,{default:E(()=>[a(i,{modelValue:d(U),"onUpdate:modelValue":t[11]||(t[11]=l=>p(U)?U.value=l:U=l),placeholder:"Low Slope",onChange:C},null,8,["modelValue"]),a(c)]),_:1}),ul,a(n,null,{default:E(()=>[a(g,{modelValue:S.value,"onUpdate:modelValue":t[12]||(t[12]=l=>S.value=l),placeholder:"Steep Sloped",onChange:C},null,8,["modelValue"]),a(c)]),_:1}),pl,a(n,null,{default:E(()=>[a(c,null,{default:E(()=>[ie("Total")]),_:1}),a(i,{modelValue:d(u),"onUpdate:modelValue":t[13]||(t[13]=l=>p(u)?u.value=l:u=l),placeholder:"Total"},null,8,["modelValue"])]),_:1})]),e("div",ml,[a(ke)]),e("div",fl,[a(X,{class:"w-1/3",type:"submit",label:"Submit",style:{"background-color":"#a4b5b9"},raised:"",onClick:Z})])])])])])])}}},yl=J(vl,[["__scopeId","data-v-899bf1b4"]]);export{yl as default};
