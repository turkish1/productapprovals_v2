import{_ as Q}from"./FileSaver-CgftB_Jz.js";import{H as A,e as _,f as R,D as W,g as F,o as d,c as p,i as e,F as M,x as I,t as b,n as Y,J as B,k as g,I as N,Y as X,v as Z,K as ee,a as te,S as q,j as f,d as E,T as se,p as oe,q as ae,A as le}from"./index-DbZDzZqX.js";import{s as U}from"./index-CPv2AVju.js";import{u as ne}from"./usePostGeneralpageLambda-BiD5qHpL.js";import{u as ie}from"./generalpageStore-BxL_P4Up.js";import{u as K}from"./roofList-Cd19t9Cy.js";import{u as re}from"./permitapp-C_FBQS5h.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as j}from"./index-DueXA_wG.js";import{s as ce}from"./index-CuuHE1a5.js";import{s as de}from"./index-DUtMubQM.js";import{s as pe}from"./index-BASE6T7N.js";import"./useAxios-D5c7rzM9.js";import"./index-C666UP2d.js";import"./index-b5-BLW_F.js";import"./index-BKWTwsJH.js";import"./index-CSiU_h9w.js";import"./index-OdFXu2gk.js";function ue(){const u=K(),{roofList:S}=A(u);_(!1);const y=ie(),{postGeneral:h}=ne(),i=_(null),r=_(y.$state.generalpdfinput),m=_(!1),n=R({mtile:!1,adtile:!1,shingle:!1,metal:!1,slope:!1}),o=R({steep1:0,steep2:0,steep3:0,steep4:0,low1:0}),s=R({steep:0,lowslope:0,total:0}),a=R({steepData:"",slopeData:"",totalData:"",mtileChk:!1,adtileChk:!1,shingleChk:!1,slopeChk:!1,metalChk:!1,roofCheck:"",area:""});function T(L){i.value=L.value,console.log(i.value);const x={"Asphalt Shingle":{dim:"dim1",flag:"shingle",steepKey:"steep1"},"Adhesive Set Tile":{dim:"dim4",flag:"adtile",steepKey:"steep2"},"Mechanical Fastened Tile":{dim:"dim3",flag:"mtile",steepKey:"steep3"},"Metal Panel":{dim:"dim5",flag:"metal",steepKey:"steep4"},"Low Slope":{dim:"dim2",flag:"slope"}};Object.keys(n).forEach(k=>n[k]=!1),Object.keys(o).forEach(k=>o[k]=0),S.value.forEach(k=>{const v=x[k.item];if(v){const D=Number(k[v.dim])||0;n[v.flag]=!0,a[`${v.flag}Chk`]=!0,console.log(v.flag),v.flag==="slope"?o.low1=D:o[v.steepKey]=D}}),V()}async function V(){s.steep=o.steep1+o.steep2+o.steep3+o.steep4,s.lowslope=o.low1,s.total=s.steep+s.lowslope,a.area=s.total,a.steepData=s.steep,a.slopeData=s.lowslope,a.totalData=s.total,a.roofCheck=i.value,y.addgeneralpdfData(a),await h(a),m.value=!0}return{addRoof:T,roofArea:V,dataGeneral:a,generalType:r,isGeneralPageValid:m}}const me=W("roofinput",{state:()=>({roofinput:[],id:0}),actions:{addCheck(u){this.roofinput.push({roofCheckdata:u,completed:!1})},reset(){this.roofinput=[]},persist:!0}}),fe={class:"terminal"},_e={class:"terminal-content"},he={class:"content"},ve=["onClick"],ge=20,Se={__name:"RoofSystemList",setup(u){const S=K(),{roofList:y}=A(S),{toggleCompleted:h}=A(S),i=["Initializing system...","Loading modules...","Connecting to server...","Server connection established.","Awaiting Roof System Selection..."],r=_([]);function m(){let n=0;const o=setInterval(()=>{n<i.length?(r.value.length>=ge&&r.value.shift(),r.value.push(i[n]),console.log(i[n]),n++):clearInterval(o)},500)}return F(()=>{m()}),(n,o)=>(d(),p("div",fe,[e("div",_e,[(d(!0),p(M,null,I(r.value,(s,a)=>(d(),p("div",{key:a,class:"terminal-line"},b(s),1))),128)),(d(!0),p(M,null,I(g(y),s=>(d(),p("div",{key:s.id,class:"item"},[e("div",he,[e("span",{class:Y({completed:s.completed}),style:{color:"green"}},b(s.item)+" "+b(s.dim1)+" "+b(s.dim2)+" "+b(s.dim3)+" "+b(s.dim4)+" "+b(s.dim5),3),e("span",{onClick:B(a=>g(h)(s.id),["stop"])},"âœ”",8,ve)])]))),128))])]))}},ye=G(Se,[["__scopeId","data-v-0eaf742f"]]),C=u=>(oe("data-v-5087461b"),u=u(),ae(),u),ke={class:"page"},be={class:"card"},Ce={class:"card__header"},we=C(()=>e("h2",null,"Roof System",-1)),xe=C(()=>e("i",{class:"pi pi-refresh"},null,-1)),$e={class:"form"},Re={class:"field"},Te=C(()=>e("label",{for:"sqft"},"Square Footage",-1)),Ve={class:"field"},Le=C(()=>e("label",{for:"system"},"Roof System",-1)),De={key:0,class:"hint"},Ae={class:"field row"},Me={class:"check"},Ie=C(()=>e("label",{for:"kind-new"},"New Roof",-1)),Be={class:"check"},Fe=C(()=>e("label",{for:"kind-reroof"},"Re-Roof",-1)),Ke={class:"actions"},Ge={class:"side"},Pe=C(()=>e("p",{class:"dz-title"},"Blueprints & images",-1)),ze=C(()=>e("p",{class:"dz-sub"},"Drag & drop files here, or click to select",-1)),Oe={key:0,class:"dz-list"},Ne={__name:"RoofSystemForm",setup(u){var P,z,O;const S=re(),y=me(),h=K(),i=_(""),r=_(null),m=_(""),n=_(!1),o=_([]),{addRoof:s}=ue(),a=R({roofCheck:""}),T=[{name:"Asphalt Shingle"},{name:"Low Slope"},{name:"Mechanical Fastened Tile"},{name:"Adhesive Set Tile"},{name:"Metal Panel"}],V=_((O=(z=(P=S.$state.permitapp)==null?void 0:P[0])==null?void 0:z.formdt)==null?void 0:O.checkIfBeach),L=N(()=>X(V.value).value===2),x=N(()=>L.value?T.slice(1):T);function k(w){var l;if(!w||i.value==0)return;const t=r.value.name,c=Number(i.value),$={"Asphalt Shingle":()=>h.addSystemShingle(t,c),"Low Slope":()=>h.addSystemBur(t,c),"Mechanical Fastened Tile":()=>h.addSystemMTile(t,c),"Adhesive Set Tile":()=>h.addSystemATile(t,c),"Metal Panel":()=>h.addSystemMetal(t,c)};(l=$[t])==null||l.call($),a.roofCheck=m.value,y.addCheck({...a}),i.value="",r.value=null}function v(){s(m)}function D(){h.$reset()}function H(w){var c;n.value=!1;const t=[...((c=w.dataTransfer)==null?void 0:c.files)||[]];t.length&&(o.value=t)}function J(w){var c;const t=[...((c=w.target)==null?void 0:c.files)||[]];t.length&&(o.value=t)}return F(()=>{!r.value&&x.value.length&&(r.value=x.value[0])}),(w,t)=>{const c=Z("RouterLink"),$=se;return d(),p("main",ke,[e("section",be,[e("header",Ce,[we,ee((d(),te(g(j),{class:"icon",text:"",plain:"",onClick:D},{default:q(()=>[xe]),_:1})),[[$,"Reset list",void 0,{bottom:!0}]])]),e("div",$e,[e("div",Re,[Te,f(g(de),{id:"sqft",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),type:"number",inputmode:"numeric",placeholder:"e.g. 1200"},null,8,["modelValue"])]),e("div",Ve,[Le,f(g(pe),{id:"system",class:"w-full",options:x.value,optionLabel:"name",modelValue:r.value,"onUpdate:modelValue":[t[1]||(t[1]=l=>r.value=l),k],placeholder:"Select roof system"},null,8,["options","modelValue"]),L.value?(d(),p("small",De,"Miami Beach restrictions apply.")):E("",!0)]),e("div",Ae,[e("div",Me,[f(g(U),{inputId:"kind-new",name:"roofKind",value:"newroof",modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l)},null,8,["modelValue"]),Ie]),e("div",Be,[f(g(U),{inputId:"kind-reroof",name:"roofKind",value:"reroof",modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l)},null,8,["modelValue"]),Fe])]),e("div",Ke,[f(c,{to:"/dynamicstepper"},{default:q(()=>[f(g(j),{severity:"contrast",label:"Continue",onClick:v})]),_:1})])]),f(g(ce)),f(ye)]),e("section",Ge,[e("div",{class:Y(["dropzone",{over:n.value}]),onDragover:t[4]||(t[4]=B(l=>n.value=!0,["prevent"])),onDragleave:t[5]||(t[5]=l=>n.value=!1),onDrop:B(H,["prevent"])},[Pe,ze,e("input",{type:"file",class:"dz-input",multiple:"",onChange:J},null,32),o.value.length?(d(),p("ul",Oe,[(d(!0),p(M,null,I(o.value,l=>(d(),p("li",{key:l.name},b(l.name),1))),128))])):E("",!0)],34)])])}}},qe=G(Ne,[["__scopeId","data-v-5087461b"]]),Ee={id:"id",class:"grid grid-cols-3 gap-6"},Ue={class:"roof-app",style:{"margin-left":"250px","margin-top":"20px",border:"none","border-radius":"12px","box-shadow":"4px 4px 16px rgb(22, 183, 183)","padding-bottom":"10px",position:"center","max-height":"600px",width:"600px",top:"10vh"}},je={__name:"RoofSystemApp",setup(u){return F(()=>{le.init({duration:4500,easing:"ease-in-out",once:!1})}),(S,y)=>(d(),p("div",Ee,[e("div",Ue,[f(qe)])]))}},Ye=G(je,[["__scopeId","data-v-aebd1914"]]),He={class:"grid grid-cols-2 gap-0"},Je={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}},ft={__name:"RoofSystem",setup(u){return(S,y)=>(d(),p("div",He,[f(Ye),e("div",Je,[f(Q)])]))}};export{ft as default};
