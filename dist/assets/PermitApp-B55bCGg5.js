import{T as H}from"./index-CNxkCw5G.js";import{s as J}from"./index-DTpGCEbC.js";import{s as K}from"./index-0iFOtkTI.js";import{s as Q}from"./index-DUzrkTjN.js";import{s as X}from"./index-1wpILpkM.js";import{s as Y}from"./index-B87K2SrG.js";import{u as Z,a as $,b as R,_ as ee}from"./use-createProcessnumber-Cu86oDGV.js";import{u as oe}from"./accountsStore-CWHaaB5o.js";import{u as le}from"./permitapp-DhmzOtpP.js";import{r as a,u as se,a as te,o as B,A as ae,a8 as ne,a9 as re,as as ie,n as ce,c as u,d as k,l as A,z as N,f as e,e as c,g as de,i as me,t as ue,F as pe,a7 as fe,am as ve,p as ye,j as be}from"./index-Dz4ijoSH.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D3VzUkBK.js";import"./index-GVq0eyHu.js";import"./index-BP3GJkib.js";import"./index-aX1ZQEua.js";import"./index-Cu5pjk6w.js";import"./index-CW4UyTGy.js";import"./index-Ct3neHjD.js";import"./index-DGq2XeP8.js";import"./useAxios-DUCYNTG_.js";import"./processStore-Bub-TQA_.js";a(1);const _e={setup(){const t=a(""),o=se(),v=a(!1),s=a(),{procData:E,procReceive:b}=Z(),{accountUsers:r,getUser:g,addUser:d}=oe();console.log(r._value[0]);const p=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),_=a("me"),h=le(),n=te({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),l=a(!0),U=a(""),I=a(""),V=a(""),M=a(""),C=a("");B(()=>{ae.init({duration:800,easing:"ease-in-out",once:!0})}),ne(()=>{if(r._value[0].name==="")return o.push("/");v.value=!0,U.value=r._value[0].name,I.value=r._value[0].email,V.value=r._value[0].phone,M.value=r._value[0].secondary_status,C.value=r._value[0].dba});const D=re(()=>l.value===!0?p.value[0]:""),x=a(!1);$();const{lastNum:w,resNum:L}=R();V.value=r._value[0].phone,a(null);const f=a(""),S=a("");B(()=>{v.value=!0});const T=async()=>{try{x.value=!0,console.log(x.value);const m=a(n.address),z=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,P=await(await fetch(z)).json();console.log(P),n.muni=P.MinimumPropertyInfos[0].Municipality,n.license=r._value[0].license,n.contractor=r._value[0].name,n.folio=P.MinimumPropertyInfos[0].Strap,console.log(w.value);let G=String(w.value).substring(2,13),W=fe(G).value+1,q=String(W);n.processNumber=_.value.concat(q),console.log(n.processNumber),S.value=n.folio,f.value=S.value.substring(1,2),console.log(f.value),b(n),setTimeout(()=>{x.value=!1},2e3)}catch(m){alert(m)}},j=async()=>{b(n)},F=()=>{o.push("/roofsystem")};function O(m,y){m=n,y=D.value,m.length!==0&&(h.addSystem(m,y,f.value),console.log(m,y,f.value,"System added"))}return{isDialog:v,onSubmit:j,accountUsers:r,getUser:g,email:I,dba:C,invoke:ie,phone:V,contractor:U,licenseStatus:M,addUser:d,navigateNext:F,addItemAndClear:O,selectedApplication:D,type:p,resNum:L,...ce(n),responseMessage:t,lastNum:w,useLast:R,load:T,checkMB:f,checkV:S,content:s}}},i=t=>(ye("data-v-c8acf978"),t=t(),be(),t),he={class:"container md:w-1/3",style:{"margin-left":"330px"}},Ve={class:"flex flex-row"},xe={class:"flex mt-4 space-y-2 flex-col gap-2"},we=i(()=>e("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"430px"}},"Permit Application",-1)),Se={class:"flex justify-center"},Pe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},ke=i(()=>e("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ae={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Ne={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-2"},Ue=i(()=>e("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Ie={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},Me={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ce=i(()=>e("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),De={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Re=i(()=>e("label",{for:"contractor",style:{color:"#122620"}},"Contractor Name",-1)),Be={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ee=i(()=>e("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Le={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Te=i(()=>e("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Fe=i(()=>e("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Oe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=i(()=>e("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},We=i(()=>e("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=i(()=>e("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),Je={key:0},Ke=i(()=>e("br",null,null,-1)),Qe=i(()=>e("br",null,null,-1));function Xe(t,o,v,s,E,b){const r=ee,g=Y,d=X,p=Q,_=K,h=J,n=H;return u(),k(pe,null,[s.isDialog?(u(),A(r,{key:0})):N("",!0),e("div",he,[e("form",null,[e("div",Ve,[e("div",xe,[we,e("div",Se,[c(g,{modelValue:s.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=l=>s.selectedApplication=l),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),e("div",Pe,[ke,c(d,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=l=>s.licenseStatus=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ae,[e("form",{class:"w-2/3",onSubmit:o[12]||(o[12]=(...l)=>s.onSubmit&&s.onSubmit(...l))},[e("div",Ne,[Ue,de(c(d,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=l=>t.address=l),placeholder:"address"},null,8,["modelValue"]),[[n,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),t.loading?(u(),k("i",Ie)):(u(),A(p,{key:0,id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",Me,[Ce,c(d,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":o[3]||(o[3]=l=>s.dba=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",De,[Re,c(d,{id:"contractor",modelValue:s.contractor,"onUpdate:modelValue":o[4]||(o[4]=l=>s.contractor=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Be,[Ee,c(_,{modelValue:s.phone,"onUpdate:modelValue":o[5]||(o[5]=l=>s.phone=l),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),e("div",Le,[Te,c(d,{modelValue:s.email,"onUpdate:modelValue":o[6]||(o[6]=l=>s.email=l),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(u(),A(h,{key:0,severity:"error"},{default:me(()=>[ve("Email is required")]),_:1})):N("",!0)]),e("div",je,[Fe,c(d,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[7]||(o[7]=l=>t.muni=l),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",Oe,[ze,c(d,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[8]||(o[8]=l=>t.folio=l),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",Ge,[We,c(d,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[9]||(o[9]=l=>t.permit=l),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",qe,[He,c(d,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[10]||(o[10]=l=>t.processNumber=l),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(u(),k("p",Je,ue(s.responseMessage),1)):N("",!0),Ke,c(p,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=l=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),Qe])])])])])],64)}const xo=ge(_e,[["render",Xe],["__scopeId","data-v-c8acf978"]]);export{xo as default};
