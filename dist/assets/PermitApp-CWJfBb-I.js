import{T as K}from"./index-D2rTHk8w.js";import{s as Q,_ as X}from"./index-WMU9piwv.js";import{s as Y}from"./index-CDLmzkmc.js";import{s as Z}from"./index-DeR9srIs.js";import{s as $}from"./index-TnRWz9VW.js";import{s as ee}from"./index-B6MHVVyY.js";import{u as oe,a as le,b as D,_ as se}from"./use-createProcessnumber-0ehhGEnd.js";import{u as te}from"./accountsStore-CuKFHl6M.js";import{u as ae}from"./permitapp-CBs8PAls.js";import{r as a,u as ne,a as re,o as R,A as ie,a8 as de,ar as B,n as ce,c as u,d as P,l as k,z as A,f as e,e as i,g as me,i as ue,t as pe,F as fe,a7 as ve,an as _e,p as be,j as ge}from"./index-Cs6-1ItK.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-lXTjsDes.js";import"./index-D3_VOdXL.js";import"./index-D8VrF5DM.js";import"./index-Cq18D7dJ.js";import"./index-DId8Gh_w.js";import"./index-nnz6RRQ8.js";import"./index-BCBlz_Sg.js";import"./index-BPLlRIv8.js";import"./useAxios-Bsx5Fbbr.js";import"./processStore-BKpAClnn.js";a(1);const he={setup(){const t=a(""),o=ne(),v=a(!1),s=a(),{procData:E,procReceive:h}=oe(),{accountUsers:n,getUser:V,addUser:c}=te();console.log(n._value[0]);const _=a("me"),w=ae(),r=re({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),b=a(""),g=a(""),l=a(""),N=a(""),U=a("");R(()=>{ie.init({duration:800,easing:"ease-in-out",once:!0})}),de(()=>{if(n._value[0].name==="")return o.push("/");v.value=!0,b.value=n._value[0].name,g.value=n._value[0].email,l.value=n._value[0].phone,N.value=n._value[0].secondary_status,U.value=n._value[0].dba,console.log(n._value[0].phone)}),a(!1);const I=a(!1);le();const{lastNum:p,resNum:L}=D();l.value=n._value[0].phone,a(null);const f=a(""),x=a("");R(()=>{v.value=!0});const T=async()=>{try{const m=a(r.address),G=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,W=await fetch(G);I.value=!0;const S=await W.json();console.log(S),r.muni=S.MinimumPropertyInfos[0].Municipality,r.license=n._value[0].license,r.contractor=n._value[0].name,r.folio=S.MinimumPropertyInfos[0].Strap,console.log(p.value);let C=String(p.value);console.log(p.value.length,p.value,C);let q=C.substring(2,13),H=ve(q).value+1,J=String(H);r.processNumber=_.value.concat(J),console.log(r.processNumber),x.value=r.folio,f.value=x.value.substring(1,2),console.log(f.value),h(r),setTimeout(()=>{I.value=!1},2e3)}catch(m){alert(m)}},j=async()=>{h(r)},M=a(),F=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),O=()=>{o.push("/roofsystem")};function z(m,y){m=r,y=M.value,m.length!==0&&(w.addSystem(m,y,f.value),console.log(m,y,f.value,"System added"))}return B(async()=>{}),{isDialog:v,onSubmit:j,accountUsers:n,getUser:V,email:g,dba:U,invoke:B,phone:l,contractor:b,licenseStatus:N,addUser:c,navigateNext:O,addItemAndClear:z,selectedApplication:M,type:F,resNum:L,...ce(r),responseMessage:t,lastNum:p,useLast:D,load:T,checkMB:f,checkV:x,content:s}}},d=t=>(be("data-v-0ed48a13"),t=t(),ge(),t),Ve={class:"md:w-2/3"},we={class:"container md:w-2/3",style:{"margin-left":"220px"}},xe={class:"row"},Se={class:"card flex flex-col gap-1"},Pe=d(()=>e("div",{class:"font-semibold text-xl",style:{color:"#eae7e2"}},"Permit Application",-1)),ke={class:"card flex justify-center"},Ae={class:"flex flex-col mt-3 grow basis-0 gap-3",style:{"max-width":"200px"}},Ne=d(()=>e("label",{for:"license",style:{color:"#eae7e2"}},"License Status",-1)),Ue={class:"card flex flex-col gap-2"},Ie={class:"flex flex-col grow basis-0 gap-2"},Me=d(()=>e("label",{for:"addr",style:{color:"#eae7e2"}},"Property Address",-1)),Ce={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},De={class:"flex flex-col mt-3 grow basis-0 gap-3"},Re=d(()=>e("label",{for:"dba",style:{color:"#eae7e2"}},"DBA ",-1)),Be={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ee=d(()=>e("label",{for:"contractor",style:{color:"#eae7e2"}},"Contractor Name",-1)),Le={class:"flex flex-col mt-3 grow basis-0 gap-3"},Te=d(()=>e("label",{for:"phone",style:{color:"#eae7e2"}},"Cell Phone Number",-1)),je={class:"flex flex-col mt-3 grow basis-0 gap-3"},Fe=d(()=>e("label",{for:"Email",style:{color:"#eae7e2"}},"Email",-1)),Oe={class:"flex flex-col mt-3 grow basis-0 gap-3"},ze=d(()=>e("label",{for:"muni",style:{color:"#eae7e2"}},"Municipality",-1)),Ge={class:"flex flex-col mt-3 grow basis-0 gap-3"},We=d(()=>e("label",{for:"folio",style:{color:"#eae7e2"}},"Folio",-1)),qe={class:"flex flex-col mt-3 grow basis-0 gap-3"},He=d(()=>e("label",{for:"permit",style:{color:"#eae7e2"}},"Master Permit",-1)),Je={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ke=d(()=>e("label",{for:"processnum",style:{color:"#eae7e2"}},"mEProcess Number",-1)),Qe={key:0},Xe=d(()=>e("br",null,null,-1)),Ye=d(()=>e("br",null,null,-1)),Ze={"data-aos":"fade-up-right","data-aos-delay":"500"};function $e(t,o,v,s,E,h){const n=se,V=ee,c=$,_=Z,w=Q,r=Y,b=X,g=K;return u(),P(fe,null,[s.isDialog?(u(),k(n,{key:0})):A("",!0),e("div",Ve,[e("div",we,[e("form",null,[e("div",xe,[e("div",Se,[Pe,e("div",ke,[i(V,{modelValue:s.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=l=>s.selectedApplication=l),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",Ae,[Ne,i(c,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=l=>s.licenseStatus=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ue,[e("form",{class:"w-3/4",onSubmit:o[12]||(o[12]=(...l)=>s.onSubmit&&s.onSubmit(...l))},[e("div",Ie,[Me,me(i(c,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=l=>t.address=l),placeholder:"address"},null,8,["modelValue"]),[[g,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),t.loading?(u(),P("i",Ce)):(u(),k(_,{key:0,id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",De,[Re,i(c,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":o[3]||(o[3]=l=>s.dba=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Be,[Ee,i(c,{id:"contractor",modelValue:s.contractor,"onUpdate:modelValue":o[4]||(o[4]=l=>s.contractor=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Le,[Te,i(w,{modelValue:s.phone,"onUpdate:modelValue":o[5]||(o[5]=l=>s.phone=l),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),e("div",je,[Fe,i(c,{modelValue:s.email,"onUpdate:modelValue":o[6]||(o[6]=l=>s.email=l),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(u(),k(r,{key:0,severity:"error"},{default:ue(()=>[_e("Email is required")]),_:1})):A("",!0)]),e("div",Oe,[ze,i(c,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[7]||(o[7]=l=>t.muni=l),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",Ge,[We,i(c,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[8]||(o[8]=l=>t.folio=l),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",qe,[He,i(c,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[9]||(o[9]=l=>t.permit=l),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",Je,[Ke,i(c,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[10]||(o[10]=l=>t.processNumber=l),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(u(),P("p",Qe,pe(s.responseMessage),1)):A("",!0),Xe,i(_,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=l=>s.addItemAndClear(t.formData,s.selectedApplication)),onChange:t.generatePdf},null,8,["onChange"])],32),Ye,e("div",Ze,[i(b)])])])])])])])],64)}const xo=ye(he,[["render",$e],["__scopeId","data-v-0ed48a13"]]);export{xo as default};
