import{_ as E}from"./FileSaver-DmGbIO76.js";import{e as c,H as L,f as V,E as q,h as j,o as S,c as k,i as o,F as B,z as P,t as b,n as H,J as A,k as x,X as J,Y as X,j as h,v as Y,p as K,q as Q,x as N,A as W}from"./index-B4ipf8sK.js";import{s as Z}from"./index-BadQXlVp.js";import{u as ee,a as oe}from"./useAxios-CoY-q13_.js";import{u as te}from"./generalpageStore-CLyVuPQg.js";import{u as I}from"./roofList-D-mEuKb1.js";import{u as se}from"./permitapp-CWrPVcrc.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as O}from"./index-C76FVFHQ.js";import{s as ae}from"./index-yciBK818.js";import{s as le}from"./index-BTzkct3s.js";import"./index-CO9AFI6k.js";import"./index-DyfismO2.js";import"./index-DCMTlQwM.js";import"./index-BoUBLWZg.js";import"./index-Bk4oefTi.js";import"./index-kwRfur5i.js";const ne="https://75tyxhvxx6be6gznfs5kcne73a0sxznj.lambda-url.us-east-1.on.aws/";function ie(){const p=c(null),i=c(!1);var m=c(null),r=c(null);const{data:v,error:u,isFetching:f,execute:n}=ee(ne,{method:"POST",headers:{"Content-Type":"application/json"}},oe,{immediate:!1});return{data:v,errors:p,isFetching:f,loading:i,postGeneral:async a=>{r.value=a,console.log(r.value),i.value=!0,u.value=null;try{return await n({data:r.value})}catch(g){u.value=g.massage,console.error("Lambda post failed:",g)}finally{i.value=!1}},postRoofcheck:async a=>{m.value=a,console.log(m.value),i.value=!0,u.value=null;try{return await n({data:m.value})}catch(g){u.value=g.massage,console.error("Lambda post failed:",g)}finally{i.value=!1}}}}function re(){const p=I(),{roofList:i}=L(p),m=te(),{postGeneral:r}=ie(),v=c(null),u=c(m.$state.generalpdfinput),f=c(!1),n=V({mtile:!1,adtile:!1,shingle:!1,metal:!1,slope:!1}),s=V({steep1:0,steep2:0,steep3:0,steep4:0,low1:0}),e=V({steep:0,lowslope:0,total:0}),a=V({steepData:"",slopeData:"",totalData:"",mtileChk:!1,adtileChk:!1,shingleChk:!1,slopeChk:!1,metalChk:!1,roofCheck:"",area:""});function g(D){v.value=D.value[0],console.log(D);const T={"Asphalt Shingle":{dim:"dim1",flag:"shingle"},"Low Slope":{dim:"dim2",flag:"slope"},"Mechanical Fastened Tile":{dim:"dim3",flag:"mtile"},"Adhesive Set Tile":{dim:"dim4",flag:"adtile"},"Metal Panel":{dim:"dim5",flag:"metal"}};i.value.forEach($=>{console.log($);const _=T[$.item];if(console.log(_),_){const C=Number($[_.dim])||0;n[_.flag]=!0,console.log(C),_.flag==="slope"?s.low1=C:s[`steep${Object.keys(n).indexOf(_.flag)}`]=C,a[`${_.flag}Chk`]=!0}}),R()}async function R(){e.steep=s.steep1+s.steep2+s.steep3+s.steep4,e.lowslope=s.low1,e.total=e.steep+e.lowslope,a.area=e.total,console.log(a,e),a.steepData=e.steep,a.slopeData=e.lowslope,a.totalData=e.total,a.roofCheck=v.value,m.addgeneralpdfData(a),await r(a),f.value=!0}return{addRoof:g,roofArea:R,dataGeneral:a,generalType:u,isGeneralPageValid:f}}const de=q("roofinput",{state:()=>({roofinput:[],id:0}),actions:{addCheck(p){this.roofinput.push({roofCheckdata:p,completed:!1})},reset(){this.roofinput=[]},persist:!0}}),ce={class:"terminal"},pe={class:"terminal-content"},ue={class:"content"},me=["onClick"],fe=15,ve={__name:"RoofSystemList",setup(p){const i=I(),{roofList:m}=L(i),{toggleCompleted:r}=L(i),v=["Initializing system...","Loading modules...","Connecting to server...","Server connection established.","Awaiting Roof System Selection..."],u=c([]);function f(){let n=0;const s=setInterval(()=>{n<v.length?(u.value.length>=fe&&u.value.shift(),u.value.push(v[n]),n++):clearInterval(s)},500)}return j(()=>{f()}),(n,s)=>(S(),k("div",ce,[o("div",pe,[(S(!0),k(B,null,P(u.value,(e,a)=>(S(),k("div",{key:a,class:"terminal-line"},b(e),1))),128)),(S(!0),k(B,null,P(x(m),e=>(S(),k("div",{key:e.id,class:"item"},[o("div",ue,[o("span",{class:H({completed:e.completed}),style:{color:"green"}},b(e.item)+" "+b(e.dim1)+" "+b(e.dim2)+" "+b(e.dim3)+" "+b(e.dim4)+" "+b(e.dim5),3),o("span",{onClick:A(a=>x(r)(e.id),["stop"])},"âœ”",8,me)])]))),128))])]))}},he=M(ve,[["__scopeId","data-v-66faea4b"]]),y=p=>(K("data-v-1570e5a8"),p=p(),Q(),p),ge={class:"layout"},_e={class:"card glass"},ye=y(()=>o("i",{class:"pi pi-refresh"},null,-1)),Se=y(()=>o("h2",{class:"title"},"Roof System",-1)),ke={class:"field"},be=y(()=>o("label",{for:"area"},"Square Footage",-1)),xe={class:"field"},Ce=y(()=>o("label",{for:"system"},"Roof System",-1)),we={class:"flex flex-wrap mt-4 space-y-6 justify-center gap-8"},$e={class:"flex items-center mt-4 space-y-6"},Ve=y(()=>o("label",{for:"newroof",class:"ml-2",style:{color:"#122620"}},"New Roof ",-1)),Re={class:"flex items-center mt-4 space-y-6"},Te=y(()=>o("label",{for:"reroof",class:"ml-2",style:{color:"#122620"}},"Re-Roof ",-1)),Ae={class:"footer"},De=y(()=>o("br",null,null,-1)),Le=y(()=>o("p",{class:"dz-title"},"For Images documents",-1)),Ie=y(()=>o("p",{class:"dz-sub"},[N("Drag & drop files here"),o("br"),N("or click to upload")],-1)),Me=2,Fe={__name:"RoofSystemForm",setup(p){var F;const i=se(),m=de(),r=I(),v=[{name:" "},{name:"Asphalt Shingle"},{name:"Low Slope"},{name:"Mechanical Fastened Tile"},{name:"Adhesive Set Tile"},{name:"Metal Panel"}],u=v.slice(1),f=c(""),n=c(null),s=c(!1),e=c(!1),a=c((F=i.$state.permitapp[0])==null?void 0:F.miamibeach),g=J(a.value);X(()=>{e.value=g.value===Me});const{addRoof:R,roofArea:D}=re(),T=V({roofCheck:""});c("");async function $(){var l,G,z;const d=(G=(l=n.value)==null?void 0:l.name)==null?void 0:G.trim();if(!d)return;const t=f.value,w={"Asphalt Shingle":()=>r.addSystemShingle(d,t),"Low Slope":()=>r.addSystemBur(d,t),"Mechanical Fastened Tile":()=>r.addSystemMTile(d,t),"Adhesive Set Tile":()=>r.addSystemATile(d,t),"Metal Panel":()=>r.addSystemMetal(d,t)};(z=w[d])==null||z.call(w),console.log(s.value),T.roofCheck=s.value,m.addCheck(T),C()}function _(){R(s),C()}function C(){f.value="",n.value=null}function U(){r.$reset()}return(d,t)=>{const w=Z;return S(),k("main",ge,[o("aside",_e,[h(x(O),{class:"icon-btn",plain:"",text:"",onClick:U},{default:Y(()=>[ye]),_:1}),Se,o("form",{class:"grid-form",onSubmit:t[4]||(t[4]=A(()=>{},["prevent"]))},[o("div",ke,[be,h(x(ae),{id:"area",modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),placeholder:"e.g. 1200"},null,8,["modelValue"])]),o("div",xe,[Ce,h(x(le),{id:"system",modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=l=>n.value=l),options:e.value?x(u):v,optionLabel:"name",placeholder:"Select roof system",class:"w-full",onChange:$},null,8,["modelValue","options"])]),o("div",we,[o("div",$e,[h(w,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value=l),invalid:!s.value,inputId:"newroof",name:"checked",value:"newroof"},null,8,["modelValue","invalid"]),Ve]),o("div",Re,[h(w,{modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value=l),invalid:!s.value,inputId:"reroof",name:"checked",value:"reroof"},null,8,["modelValue","invalid"]),Te])])],32),o("footer",Ae,[h(x(O),{label:"Submit",severity:"contrast",raised:"",as:"router-link",to:"/dynamicstepper",onClick:_})]),De,h(he)]),o("section",{class:"card dropzone",onDragover:t[6]||(t[6]=A(l=>d.dragOver=!0,["prevent"])),onDragleave:t[7]||(t[7]=l=>d.dragOver=!1),onDrop:t[8]||(t[8]=A((...l)=>d.handleDrop&&d.handleDrop(...l),["prevent"]))},[Le,Ie,o("input",{type:"file",accept:"application/pdf",multiple:"",class:"file-input",onChange:t[5]||(t[5]=(...l)=>d.handleFiles&&d.handleFiles(...l))},null,32)],32)])}}},Ge=M(Fe,[["__scopeId","data-v-1570e5a8"]]),ze={id:"id",class:"grid grid-cols-3 gap-6"},Be={class:"roof-app",style:{"margin-left":"250px","margin-top":"20px",border:"none","border-radius":"12px","box-shadow":"4px 4px 16px rgb(22, 183, 183)","padding-bottom":"10px",position:"center","max-height":"400px",width:"500px",top:"5vh"}},Pe={__name:"RoofSystemApp",setup(p){return j(()=>{W.init({duration:4500,easing:"ease-in-out",once:!1})}),(i,m)=>(S(),k("div",ze,[o("div",Be,[h(Ge)])]))}},Ne=M(Pe,[["__scopeId","data-v-d0495c4e"]]),Oe={class:"grid grid-cols-2 gap-0"},je={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}},no={__name:"RoofSystem",setup(p){return(i,m)=>(S(),k("div",Oe,[h(Ne),o("div",je,[h(E)])]))}};export{no as default};
