import{e as o,N as M,u as U,bd as $,ao as q,P as z,f as y,ab as N,ap as S,at as A,o as G,c as I,R as k,aq as D,h as u,p as Y,g as i,l as j,au as H,ar as J,q as K,Y as Q}from"./index-D1pNAj1J.js";import{s as W}from"./index-DP22NtEo.js";import{a as X,u as Z}from"./use-downloadpdf-BXMX-88Y.js";import{c as ee,u as oe}from"./pdfsignStore-Cm-qsuqc.js";import{u as te}from"./permitapp-vQMXgmOI.js";import"./index-D7sX-yGb.js";import"./useAxios-Bjyd_Ng9.js";const se={class:"card"},ae={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},ne={class:"payment-widget"},le=i("h2",{style:{color:"black"}},"Download Link",-1),ve={__name:"Payment",setup(re){var v,w;const b=te();ee();const T=o(((w=(v=b.$state.permitapp[0])==null?void 0:v.formdt)==null?void 0:w.muniProc)||""),B=o(!1),P=o(!1),a=o(!1),V=o(!1),n=o(!1);o(!1);const l=X();M(l.$state);const E=U();$(()=>{localStorage.clear()});const d=q("my-storage",{processNumber:T.value}),{resp:m}=oe();z(),o(0),o(),y(()=>{var e,t;((t=(e=m.value)==null?void 0:e.status)==null?void 0:t.status)===200&&(V.value=!0,console.log(m.value.status.status))});const p=o("");y(async()=>{const e=new URLSearchParams(location.search).get("session_id");if(p.value=e,e)console.log(p.value);else{console.log(e);return}});const{secondFetch:O}=Z(),R=N(()=>{O(d.value.processNumber),console.log(d.value),setTimeout(()=>{n.value=!0},500),a.value=!0});S(R,()=>{});function C(){F()}const f=N(()=>{setTimeout(()=>{n.value=!0},500)}),F=async()=>{var _,g,h,x;const e=(g=(_=l.downloadinput[0])==null?void 0:_.downloadData)==null?void 0:g.download_url;if(console.log(e),!e||e.length===0)return;const t=(x=(h=l.downloadinput[0])==null?void 0:h.downloadData)==null?void 0:x.download_url;if(!t)return;B.value=!0;const r=t,c="processnumber.zip",s=document.createElement("a");s.href=r,s.download=c,s.click(),s.remove(),a.value=!0,L()};S(f,()=>{}),A(async()=>{await H(f).toBe(!0)});const L=()=>{console.log("Entered Navigate"),setTimeout(()=>{n.value=!0},1e3),E.push("/download")};return(e,t)=>{const r=W,c=Q;return G(),I("div",se,[k(u(Y(J),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[D,P.value]]),i("div",ae,[i("div",ne,[le,k(u(r,{onClick:C,severity:"contrast"},{default:j(()=>[K("Click Download Files")]),_:1},512),[[D,a.value]]),u(c)])])])}}};export{ve as default};
