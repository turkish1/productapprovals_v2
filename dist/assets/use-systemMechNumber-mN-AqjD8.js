import{s as j}from"./index-DxI8E_pd.js";import{E as N,e as u,f as E,Y as I,h as B,w as C,g as F,ad as H,ae as L,o as A,c as G,j as T,k as w,aj as _,i as V,I as O,ak as P,D as Y}from"./index-25ndKMvN.js";import{u as k,a as J}from"./useAxios-CfJThO0u.js";import{u as K}from"./useDripedge-D4Ds_CwW.js";import{u as Q}from"./roofList-llFMu3FC.js";const q=N("dripinputmaterial",{state:()=>({dripinputmaterial:[],dripMTileMaterial:[],dripinputsize:[],inputselectedUserDripEdge:[],selectedDripSize:[],id:2}),actions:{addMTileDrip(e){this.dripinputmaterial.push({dripMTileData:e,completed:!1})},addSTileDrip(e){this.dripinputsize.push({selectedDripSizenew:e,completed:!1})},insertDripAtIndex(e,l){this.dripinputmaterial.splice(e,0,{dripMTileMaterial:l,completed:!1})},addUseritems(e){this.inputselectedUserDripEdge.push({dripSelection:e,completed:!1})},resetState(){console.log("reset was called: ",this.inputselectedUserDripEdge),this.inputselectedUserDripEdge=[],console.log("reset was called: ",this.inputselectedUserDripEdge)}}});function W(){const e=u([]),l=u([]),s=u([]),t=u([]),n=u(!1),i=u(null),o=u([]);n.value=!0;const r=q();let c="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/dripmaterials";const{execute:h,then:m,data:f}=k(c,{method:"GET"},{immediate:!1});return s.value=h().then(a=>{l.value=f.value.result,e.value=f.value.result.Drip_Edge_Material_Type;for(let p=0;p<e.value.length;p++)o.value.push(e.value[p]);return t.value.push(l.value.size1,l.value.size2,l.value.size3,l.value.size4),r.addMTileDrip(l),r.addSTileDrip(t),e.value}),n.value=!1,{dtype:o,error:i,loading:n,hold:e,results:s,typeSize:t,holdSized:l}}const X={class:"flex flex-col w-96 mb-4 gap-3",style:{"margin-left":"20px"}},Z=V("label",{style:{color:"#122620"}},"Drip Edge Material",-1),ee=V("label",{style:{color:"#122620"}},"Drip Edge Size",-1),ne={__name:"DripEdMechTile",emits:["update-valuesize"],setup(e,{emit:l}){const{selectDripEdge:s,selectDripEdgeSize:t,holdSize:n,type:i}=K(),o=Q(),r=u(o.$state.roofList),c=u();W();const h=u(null),m=q(),f=l;let a=u(!1);const p=u(),M=E({DripEdgeMaterial:"",DripEdgeSize:""}),x=I(()=>{if(r.value.length===0)return"";for(let d=0;d<r.value.length;d++)r.value[d].item==="Mechanical Fastened Tile"&&(console.log(r.value[d].item),a.value=!0,c.value=i.value);v()}),b=E({DripEdgeMaterial:"",DripEdgeSize:""}),U=()=>{f("update-valuesize",t.value),b.DripEdgeSize=t.value,z()};B(()=>{S()});function v(){for(let d=0;d<r.value.length;d++)r.value[d].item==="Mechanical Fastened Tile"&&console.log(r.value[d].item);R()}function S(){c.value=i.value}async function z(){s.value?(s.value==="Galvanized Steel Metal ¹"&&(p.value=n.value.size1,v()),s.value==="Stainless Steel Metal ²"&&(p.value=n.value.size2,v()),s.value==="Aluminum Metal ³"&&(p.value=n.value.size3,v()),s.value==="Copper Metal ⁴"&&(p.value=n.value.size4,v())):console.log("The element not mounted yet"),M.DripEdgeMaterial=s.value,M.DripEdgeSize=t.value,v()}function R(){b.DripEdgeMaterial=s.value,$()}const $=async d=>{m.resetState(),m.addUseritems(M),console.log(m)};return C(c,p,i),F(S,z),H(async()=>{await L(x).toBe(!0)}),(d,g)=>{const y=j;return A(),G("div",X,[Z,T(y,{modelValue:w(s),"onUpdate:modelValue":[g[0]||(g[0]=D=>_(s)?s.value=D:null),S],options:c.value,placeholder:"make selection"},null,8,["modelValue","options"]),ee,T(y,{ref_key:"selectSizeRef",ref:h,modelValue:w(t),"onUpdate:modelValue":g[1]||(g[1]=D=>_(t)?t.value=D:null),options:p.value,onClick:z,onChange:U,placeholder:"make selection"},null,8,["modelValue","options"])])}}},te="https://myfawca4fj3ewpg5usmepe6toi0wuvlw.lambda-url.us-east-1.on.aws/";function re(){const e=u(null),l=u(!1),{data:s,error:t,isFetching:n,execute:i}=k(te,{method:"POST",headers:{"Content-Type":"application/json"}},J,{immediate:!1}),o=async(c,h)=>{var m,f;l.value=!0,e.value=null,console.log(c,h);try{const a=await i({data:c});return console.log(a==null?void 0:a.data,s.value),(a==null?void 0:a.data)??s.value}catch(a){throw console.error(`Lambda ${h} failed:`,{message:a==null?void 0:a.message,code:a==null?void 0:a.code,status:(m=a==null?void 0:a.response)==null?void 0:m.status,data:(f=a==null?void 0:a.response)==null?void 0:f.data,...existing,body:c}),e.value=(a==null?void 0:a.message)||"Request failed",a}finally{l.value=!1}};return{data:s,errors:e,isFetching:n,loading:l,postMech:c=>o(c,"postMech")}}function ce({min:e=null,max:l=null,required:s=!1}){const t=u(null);return{errorHeightMessage:t,validateTileHeight:i=>{const o=i;return e!==null&&o<e?(t.value=`Number must be greater than or equal to ${e}`,console.log("min",o,e),!1):l!==null&&o>=e&&o>=l?(t.value=`Number must be less than or equal to ${l}`,console.log("max",o),!1):s&&(i==null||i==="")?(t.value="This field is required",console.log("required"),!1):(t.value=null,!0)}}}function de({min:e=null,max:l=null,required:s=!1}){const t=u(null);return{errorMessage:t,validateNumber:i=>{const o=i;return e!==null&&o<e?(t.value=`Number must be greater than or equal to ${e}`,!1):l!==null&&o>=e&&o>=l?(t.value=`Number must be less than or equal to ${l}`,console.log("max",o),!1):s&&(i==null||i==="")?(t.value="This field is required",console.log("required"),!1):(t.value=null,!0)}}}const le=N("tileMechInput",{state:()=>({tileMechInput:[],id:0}),actions:{addSystem(e){this.tileMechInput.push({tileMechNumber:e,completed:!1})},reset(){this.$reset()}},getters:{tileMechNumber:e=>e.tileMechNumber}});function pe(){let e=u([]);const l=le(),s=u(""),t=E({noa:[]});function n(){r()}const i=O(()=>"https://h3gd9z0q32.execute-api.us-east-1.amazonaws.com/mechanicaltileNumberstaging"),{data:o}=P(i).get().json(),r=async()=>{t.noa=o,l.addSystem(t),console.log("System added")};return{tileMechNumber:t,fetchData:r,callNumber:n,errors:s,results:e,...Y(t),mechanicalStore:l}}export{ne as _,re as a,de as b,ce as c,q as d,pe as u};
