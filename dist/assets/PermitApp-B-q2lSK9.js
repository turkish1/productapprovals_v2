import{e as s,u as se,j as te,ab as ae,O as L,ap as ne,aq as re,o as P,c as W,a as G,d as D,g as o,h as n,R as X,l as ue,t as ie,F as ce,as as de,aa as z,q as me,W as pe,X as ve,_ as fe}from"./index-Chc17Abb.js";import{s as be}from"./index-C1ZjDv2k.js";import{s as ye}from"./index-BA0zmhAW.js";import{s as ge}from"./index-DryfAUML.js";import{s as _e}from"./index-mNAYASaG.js";import{s as xe}from"./index-BkZdmWUh.js";import{u as he,a as Ve,_ as we}from"./process-DP4jTzSD.js";import{u as Pe}from"./processStore-BSq3Artg.js";import{u as ke}from"./use-createProcessnumber-WHiGWc05.js";import{u as Ne}from"./accountsStore-D9T6NtuY.js";import{u as Se}from"./permitapp-CmbDEw6b.js";import{_ as Me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BkIq-rYG.js";import"./index-DemaRm7o.js";import"./index-xaeXzd-2.js";import"./index-CbbOa7qT.js";import"./index-CmFocK3b.js";import"./index-CeY2gz4L.js";import"./index-CU_oklFS.js";import"./useAxios-cqGI49ol.js";const r=_=>(pe("data-v-0a44ddcb"),_=_(),ve(),_),Ue={class:"container md:w-1/3",style:{"margin-left":"650px"}},De={class:"flex flex-row"},Ie={class:"flex mt-4 space-y-2 flex-col gap-2"},Ae=r(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Be={class:"flex justify-center"},Ce={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Ee=r(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),$e={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Re={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Te=r(()=>o("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),je={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Oe=r(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),qe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Fe=r(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),Le={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},We=r(()=>o("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Xe=r(()=>o("label",{id:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=r(()=>o("label",{id:"Email",style:{color:"#122620"}},"Email",-1)),Je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ke=r(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ye=r(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},eo=r(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),oo={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},lo=r(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),so={key:0},to=r(()=>o("br",null,null,-1)),ao=r(()=>o("br",null,null,-1)),no={__name:"PermitApp",setup(_){const v=s(!1),I=s(""),A=s(!1);s(),se();const H=Pe(),{procData:ro,procReceive:B}=ke(),{accountUsers:f,getUser:uo,addUser:io}=Ne(),C=Se(),E=s([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),J=s("me"),t=te({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),i=s(""),$=s(""),K=s(!0),k=s(!1),x=s(""),h=s(""),b=s(""),N=s(""),y=s(""),d=s([]),c=s("");ae(()=>{S(),A.value=!0,localStorage.clear()});const Q=L(()=>{var a,e;return((a=f.value[0])==null?void 0:a.bphone)!==""&&(k.value=!0,b.value=f.value[0].bphone,console.log(b.value)),k.value===!0?b.value:(e=f.value[0])==null?void 0:e.bphone});async function S(){var a,e,m,p,u,g,w;d.value=await f.value[0],console.log(d.value),N.value=((a=d.value)==null?void 0:a.name)||"",y.value=((e=d.value)==null?void 0:e.email)||"",x.value=((m=d.value)==null?void 0:m.secondary_status)||"",h.value=((p=d.value)==null?void 0:p.dba)||"",c.value=(g=(u=H.$state.processinput[0])==null?void 0:u.procData)==null?void 0:g.address,b.value=(w=f.value[0])==null?void 0:w.bphone}ne(S,Q,()=>{console.log(S)}),re(async()=>{await de(k).toBe(!0)});const M=L(()=>K.value?E.value[0]:"");he();const{resNum:Y}=Ve(),U=s(""),R=s(""),T=s(null),V=s(""),j=s(null),O=s("");async function Z(a){v.value=!0,j.value=null;try{const e=await fetch(a);T.value=await e.json(),V.value=T.value.MinimumPropertyInfos[0],console.log(V.value),t.muni=V.value.Municipality,t.folio=V.value.Strap,R.value=t.folio,O.value=R.value.substring(1,2),U.value=z(O),console.log(typeof U.value)}catch(e){j.value=e.message}finally{v.value=!1}}async function q(){try{v.value=!0,setTimeout(()=>v.value=!1,1e3),$.value=i.value;const a=c.value;console.log(a);const e=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${a}`;console.log(e),await Z(e),console.log(i.value),Object.assign(t,{license:x.value,contractor:h.value,emails:y.value,muniProc:i.value,phNumber:b.value});const m=String(Y.value).substring(3,19),p=z(m).value+1;t.processNumber=J.value.concat(String(p)),t.muniProc=i.value,t.address=c.value,console.log(t),B(t)}catch(a){alert(a)}}function ee(){B(t)}function oe(){console.log(c.value),C.addSystem(t,M.value,U.value,i.value,$.value,c.value),console.log(C)}return(a,e)=>{const m=we,p=xe,u=_e,g=ge,w=ye,le=be,F=fe;return P(),W(ce,null,[A.value?(P(),G(m,{key:0})):D("",!0),o("div",Ue,[o("form",null,[o("div",De,[o("div",Ie,[Ae,o("div",Be,[n(p,{modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=l=>M.value=l),options:E.value,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",Ce,[Ee,n(u,{id:"license",modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),type:"text",placeholder:"status"},null,8,["modelValue"])]),o("div",$e,[o("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:ee},[o("div",Re,[Te,X(n(u,{id:"processMuni",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=l=>i.value=l),type:"text",placeholder:"municipal process number",onChange:q},null,8,["modelValue"]),[[F,"Enter Municipality Process Number",void 0,{top:!0}]])]),o("div",je,[Oe,X(n(u,{id:"addr",type:"text",modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=l=>c.value=l),placeholder:"address"},null,8,["modelValue"]),[[F,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),n(g,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:v.value,onClick:q},null,8,["loading"])]),o("div",qe,[Fe,n(u,{id:"dba",modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=l=>h.value=l),type:"text",placeholder:"dba"},null,8,["modelValue"])]),o("div",Le,[We,n(u,{id:"name",modelValue:N.value,"onUpdate:modelValue":e[5]||(e[5]=l=>N.value=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Ge,[Xe,n(w,{modelValue:t.phNumber,"onUpdate:modelValue":e[6]||(e[6]=l=>t.phNumber=l),mask:"(999) 999-9999",placeholder:"(999) 999-9999"},null,8,["modelValue"])]),o("div",ze,[He,n(u,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=l=>y.value=l),invalid:y.value===null,error:a.emailError},null,8,["modelValue","invalid","error"]),a.invalid?(P(),G(le,{key:0,severity:"error"},{default:ue(()=>[me("Email is required")]),_:1})):D("",!0)]),o("div",Je,[Ke,n(u,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":e[8]||(e[8]=l=>t.muni=l),type:"text",placeholder:"municipality",style:{color:"green"}},null,8,["modelValue"])]),o("div",Qe,[Ye,n(u,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":e[9]||(e[9]=l=>t.folio=l),type:"text",placeholder:"folio",onInput:a.updatemEProcess,style:{color:"green"}},null,8,["modelValue","onInput"])]),o("div",Ze,[eo,n(u,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":e[10]||(e[10]=l=>t.permit=l),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",oo,[lo,n(u,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":e[11]||(e[11]=l=>t.processNumber=l),type:"text",placeholder:"process number"},null,8,["modelValue"])]),I.value?(P(),W("p",so,ie(I.value),1)):D("",!0),to,n(g,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:oe})],32),ao])])])])])],64)}}},Io=Me(no,[["__scopeId","data-v-0a44ddcb"]]);export{Io as default};
