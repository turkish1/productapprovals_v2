import{r as a,u as $,a as ee,o as T,A as oe,a7 as le,a8 as se,as as te,l as ae,b as _,c as F,P as j,x as k,e,d as n,f as O,h as ne,t as re,F as ie,a6 as ce,am as de,p as ue,i as me,T as pe}from"./index-BE6y4DOZ.js";import{s as fe}from"./index-optjdHQx.js";import{s as ve}from"./index-BUPUAq_V.js";import{s as be}from"./index-DxUVi48A.js";import{s as ge}from"./index-BARgc6Qq.js";import{s as ye}from"./index-BW56RdA7.js";import{u as _e,a as he,b as W,_ as xe}from"./use-createProcessnumber-C25HcrFU.js";import{u as Ve}from"./accountsStore-BsWOyLht.js";import{u as we}from"./permitapp-BtXkaIMD.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B71Fege9.js";import"./index-vRGszfUO.js";import"./index-BaVVThze.js";import"./index-DNV2qG4j.js";import"./index-B5IXUgRA.js";import"./index-DGTGgDKF.js";import"./index-C9sM8YX9.js";import"./index-BESpMK-A.js";import"./index-Bi0axYDj.js";import"./useAxios-Cnk5YrRl.js";import"./axios-I_wKO6Q1.js";import"./processStore-B9zCRvWY.js";const Pe={setup(){const t=a(!1),o=a(""),h=$(),l=a(!1),N=a(),{procData:q,procReceive:v}=_e(),{accountUsers:i,getUser:c,addUser:b}=Ve();console.log(i._value[0]);const g=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),x=a("me"),p=we(),s=a(""),d=ee({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),G=a(!0),U=a(""),M=a(""),V=a(""),I=a(""),A=a("");T(()=>{oe.init({duration:800,easing:"ease-in-out",once:!0})}),le(()=>{if(i._value[0].name==="")return h.push("/");l.value=!0,U.value=i._value[0].name,M.value=i._value[0].email,V.value=i._value[0].phone,I.value=i._value[0].secondary_status,A.value=i._value[0].dba});const D=se(()=>G.value===!0?g.value[0]:"");he();const{lastNum:H,resNum:w}=W();V.value=i._value[0].phone,a(null);const y=a(""),S=a(""),C=a(null),f=a(""),E=a(null);T(()=>{l.value=!0});const z=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},3e3);const u=a(d.address);console.log(u.value);const X=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${encodeURIComponent(u.value)}&to=200`;R(X),d.license=i._value[0].license,d.contractor=i._value[0].name,console.log(w.value);let B=String(w.value);console.log(B);let L=B.substring(3,19);console.log(L);const P=ce(L);console.log(typeof P,P.value);let Y=P.value+1,Z=String(Y);d.processNumber=x.value.concat(Z),console.log(d.processNumber),S.value=d.folio,y.value=S.value.substring(1,2),console.log(y.value),v(d)}catch(u){alert(u)}},R=async u=>{t.value=!0,E.value=null;try{const m=await fetch(u);console.log(u),C.value=await m.json(),f.value=C.value.MinimumPropertyInfos[0],console.log(f.value),d.muni=f.value.Municipality,console.log(f.value.Strap),d.folio=f.value.Strap}catch(m){E.value=m.message}finally{t.value=!1}},J=async()=>{v(d)},K=()=>{h.push("/roofsystem")};function Q(u,m){u=d,m=D.value,u.length!==0&&(p.addSystem(u,m,y.value,s.value),console.log(p))}return{isDialog:l,fetchData:R,onSubmit:J,accountUsers:i,getUser:c,email:M,dba:A,invoke:te,phone:V,contractor:U,licenseStatus:I,muniProcess:s,addUser:b,navigateNext:K,addItemAndClear:Q,selectedApplication:D,type:g,resNum:w,...ae(d),responseMessage:o,lastNum:H,useLast:W,load:z,checkMB:y,checkV:S,content:N}}},r=t=>(ue("data-v-4c8ff29f"),t=t(),me(),t),ke={class:"container md:w-1/3",style:{"margin-left":"650px"}},Ne={class:"flex flex-row"},Ue={class:"flex mt-4 space-y-2 flex-col gap-2"},Me=r(()=>e("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Ie={class:"flex justify-center"},Ae={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},De=r(()=>e("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ce={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Ee={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Re=r(()=>e("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Be={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Le=r(()=>e("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Te={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Fe=r(()=>e("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),je={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Oe=r(()=>e("label",{for:"contractor",style:{color:"#122620"}},"Contractor Name",-1)),We={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},qe=r(()=>e("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=r(()=>e("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Je=r(()=>e("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Ke={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Qe=r(()=>e("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Xe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ye=r(()=>e("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),Ze={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},$e=r(()=>e("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),eo={key:0},oo=r(()=>e("br",null,null,-1)),lo=r(()=>e("br",null,null,-1));function so(t,o,h,l,N,q){const v=xe,i=ye,c=ge,b=be,g=ve,x=fe,p=pe;return _(),F(ie,null,[l.isDialog?(_(),j(v,{key:0})):k("",!0),e("div",ke,[e("form",null,[e("div",Ne,[e("div",Ue,[Me,e("div",Ie,[n(i,{modelValue:l.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=s=>l.selectedApplication=s),options:l.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),e("div",Ae,[De,n(c,{id:"license",modelValue:l.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=s=>l.licenseStatus=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ce,[e("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:o[13]||(o[13]=(...s)=>l.onSubmit&&l.onSubmit(...s))},[e("div",Ee,[Re,O(n(c,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=s=>t.address=s),placeholder:"address"},null,8,["modelValue"]),[[p,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),n(b,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:l.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),e("div",Be,[Le,O(n(c,{id:"processMuni",modelValue:l.muniProcess,"onUpdate:modelValue":o[3]||(o[3]=s=>l.muniProcess=s),type:"text",placeholder:"municipal process number"},null,8,["modelValue"]),[[p,"Enter Municipality Process Number",void 0,{top:!0}]])]),e("div",Te,[Fe,n(c,{id:"dba",modelValue:l.dba,"onUpdate:modelValue":o[4]||(o[4]=s=>l.dba=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",je,[Oe,n(c,{id:"contractor",modelValue:l.contractor,"onUpdate:modelValue":o[5]||(o[5]=s=>l.contractor=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",We,[qe,n(g,{modelValue:l.phone,"onUpdate:modelValue":o[6]||(o[6]=s=>l.phone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:l.phone===""},null,8,["modelValue","invalid"])]),e("div",Ge,[He,n(c,{modelValue:l.email,"onUpdate:modelValue":o[7]||(o[7]=s=>l.email=s),invalid:l.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(_(),j(x,{key:0,severity:"error"},{default:ne(()=>[de("Email is required")]),_:1})):k("",!0)]),e("div",ze,[Je,n(c,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[8]||(o[8]=s=>t.muni=s),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",Ke,[Qe,n(c,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[9]||(o[9]=s=>t.folio=s),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",Xe,[Ye,n(c,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[10]||(o[10]=s=>t.permit=s),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",Ze,[$e,n(c,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[11]||(o[11]=s=>t.processNumber=s),type:"text",placeholder:"process number"},null,8,["modelValue"])]),l.responseMessage?(_(),F("p",eo,re(l.responseMessage),1)):k("",!0),oo,n(b,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[12]||(o[12]=s=>l.addItemAndClear(t.formData,l.selectedApplication))})],32),lo])])])])])],64)}const No=Se(Pe,[["render",so],["__scopeId","data-v-4c8ff29f"]]);export{No as default};
