import{s as j}from"./index-DBc3U2pO.js";import{q as G,r as o,o as Y,ao as A,s as R,c as B,d as C,g as d,ap as P,e as T,k as F,f as e,y as O,aq as b,t as U,z as H,ar as q,V as I}from"./index-B34yCi00.js";import{u as J}from"./useAxios-CGnFRm85.js";import{u as K,a as L}from"./use-signpdf-DQSmQGjE.js";import{u as Q}from"./permitapp-D5kmnZV3.js";import"./index-YkhKf99Y.js";const z=G("downloadinput",{state:()=>({downloadinput:[],id:0}),actions:{addDownload(u){this.downloadinput.push({downloadData:u,completed:!1})},reset(){this.$reset()}}});function W(){const u=o(),p=o("");o([]);const l=o(),y=o("");let N="https://9sg5obrcp0.execute-api.us-east-1.amazonaws.com/downloadpdf/downloadpdf";const{execute:_,then:v,data:i}=J(N,{method:"GET"},{immediate:!1}),c=z();function x(n){u.value=n,p.value=u.value+"/",m()}const m=async()=>{try{const n=await _({params:{processnumber:p.value}}).then(f=>{l.value=i.value.download_url,console.log(i.value.download_url),console.log(l.value)});return c.addDownload(l.value),n}catch(n){console.log("Error, fectching data",n)}};return{error:y,getNumber:x,zip_download_url:l,store:c,fetchData:m}}const X={class:"card"},Z={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},ee={class:"payment-widget"},oe=e("h2",{style:{color:"black"}},"Credit Card Payment",-1),ae={class:"form-group"},te=e("label",{for:"cardholder-name"},"Cardholder Name",-1),le={class:"form-group"},se=e("label",{for:"card-number"},"Card Number",-1),ne={class:"form-group small-inputs"},re=e("label",{for:"expiry-date"},"Expiry Date",-1),de=e("label",{for:"cvv"},"CVV",-1),ue=e("button",{type:"submit"},"Pay",-1),ie={key:0,class:"confirmation"},ce=49.99,we={__name:"Paymentgateway",setup(u){const p=Q(),l=o(""),{getNumbers:y,res1:N}=K(),_=o(!1),v=o(!1),i=o(!1),c=o(p.$state.permitapp[0].formdt.processNumber);l.value=c.value.length!==0?c.value:"files";function x(){y(l.value),i.value=!0,console.log(l.value)}Y(()=>{x()});const m=o(!1),{getNumber:n}=W(),f=o(!1),{confirmResponse:h,res:D}=L();console.log(D,h),o(h);const S=o(!1),E=()=>{setTimeout(()=>{S.value=!0},3e3),console.log("time passed",D,h),n(l.value)};A(async()=>{await q(i).toBe(!0),console.log(h),await q(S).toBe(!0,{timeout:4e3}),E()});const a=o({cardholderName:"",cardNumber:"",expiryDate:"",cvv:""}),V=z();R(V.$state.downloadinput);const r=o(V.$state.downloadinput),M=()=>{if(console.log(l.value),console.log(r.value.length),console.log(r.value[0].downloadData),!a.value.cardholderName||!a.value.cardNumber||!a.value.expiryDate||!a.value.cvv){alert("Please fill out all fields.");return}f.value=!0,v.value=!0,setTimeout(()=>{a.value.cardholderName="",a.value.cardNumber="",a.value.expiryDate="",a.value.cvv="",f.value=!1,v.value=!1},2e3),k()},k=async()=>{if(console.log(r.value.length),console.log(r.value[0].downloadData),o(r.value.length).value===0)return!0;{_.value=!0;const t=o(r.value[0].downloadData);console.log(t.value);const g=t.value;console.log(g);const s="processnumber.zip",w=document.createElement("a");w.href=g,w.download=s,m.value=!0,w.click(),w.remove()}};return($,t)=>{const g=j;return B(),C("div",X,[d(T(F(I),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[P,v.value]]),e("div",Z,[d(T(g,{icon:"pi pi-arrow-circle-down",severity:"info","aria-label":"User",onClick:k},null,512),[[P,m.value]]),e("div",ee,[oe,e("form",{onSubmit:O(M,["prevent"])},[e("div",ae,[te,d(e("input",{type:"text",id:"cardholder-name","onUpdate:modelValue":t[0]||(t[0]=s=>a.value.cardholderName=s),placeholder:"Boris Gomez",required:""},null,512),[[b,a.value.cardholderName]])]),e("div",le,[se,d(e("input",{type:"text",id:"card-number","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.cardNumber=s),maxlength:"19",placeholder:"1234 5678 9012 3456",required:""},null,512),[[b,a.value.cardNumber]])]),e("div",ne,[e("div",null,[re,d(e("input",{type:"text",id:"expiry-date","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.expiryDate=s),maxlength:"5",placeholder:"MM/YY",required:""},null,512),[[b,a.value.expiryDate]])]),e("div",null,[de,d(e("input",{type:"text",id:"cvv","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.cvv=s),maxlength:"4",placeholder:"123",required:""},null,512),[[b,a.value.cvv]])])]),ue],32),f.value?(B(),C("div",ie,[e("p",null,"Thank you, "+U(a.value.cardholderName)+"! Your payment of $"+U(ce)+" was processed.",1)])):H("",!0)])])])}}};export{we as default};
