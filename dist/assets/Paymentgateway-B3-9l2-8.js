import{s as O}from"./index-BjIuM62b.js";import{q as Y,r as t,a as A,s as I,o as R,a8 as j,ao as H,c as M,d as P,g as i,ap as $,e as F,k as J,f as a,y as K,aq as y,t as G,z as Q,V as W}from"./index-DTa2BfTK.js";import{u as X}from"./useAxios-BXWNRr8l.js";import{u as Z}from"./pdfsignStore-COdxTYZt.js";import{u as ee}from"./permitapp-B5SBivMU.js";import"./index-CwpCctqJ.js";const L=Y("downloadinput",{state:()=>({downloadinput:[],id:0}),actions:{addDownload(p){this.downloadinput.push({downloadData:p,completed:!1})},reset(){this.$reset()}}});function ae(p){t();const v=t(""),c=t(p),s=A({status:"",message:"",download_url:"",isFinished:"",isLoading:""}),u=t(),f=t("");let b="https://9sg5obrcp0.execute-api.us-east-1.amazonaws.com/downloadpdf/downloadpdf";const{execute:x,then:h,data:e}=X(b,{method:"GET"},{immediate:!1}),w=L();function r(){v.value=c.value+"/",m()}const m=async()=>{try{const g=await x({params:{processnumber:v.value}}).then(l=>(console.log(l),u.value=e.value.download_url,s.status=l.response.value.status,s.download_url=l.data.value.download_url,s.message=l.data.value.message,s.isFinished=l.isFinished,s.isLoading=l.isLoading,console.log(l.data.value.download_url),console.log(l.data.value.message),console.log(s,l),l));return w.addDownload(s),s}catch(g){console.log("Error, fectching data",g)}};return{error:f,result:s,sentInputs:c,getNumber:r,zip_download_url:u,store:w,fetchData:m}}const oe={class:"card"},te={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},le={class:"payment-widget"},se=a("h2",{style:{color:"black"}},"Credit Card Payment",-1),ne={class:"form-group"},de=a("label",{for:"cardholder-name"},"Cardholder Name",-1),re={class:"form-group"},ue=a("label",{for:"card-number"},"Card Number",-1),ie={class:"form-group small-inputs"},ce=a("label",{for:"expiry-date"},"Expiry Date",-1),me=a("label",{for:"cvv"},"CVV",-1),pe=a("button",{type:"submit"},"Pay",-1),ve={key:0,class:"confirmation"},fe=49.99,xe={__name:"Paymentgateway",setup(p){var V,S,k,C;const v=ee(),c=t(((S=(V=v.$state.permitapp[0])==null?void 0:V.formdt)==null?void 0:S.processNumber)||""),s=t(!1),u=t(!1),f=t(!1),b=t(!1),x=t(!1),h=t(!1),e=t({cardholderName:"",cardNumber:"",expiryDate:"",cvv:""});t(!1),t(!1);const{getNumber:w}=ae(c.value),r=L();I(r.$state),console.log((C=(k=r.$state.downloadinput[0])==null?void 0:k.downloadData)==null?void 0:C.download_url);const{resp:m}=Z();R(()=>{var n,o;((o=(n=m.value)==null?void 0:n.status)==null?void 0:o.status)===200&&(b.value=!0,console.log(m.value.status.status))});const g=j(()=>{var n,o;w(),setTimeout(()=>{x.value=!0},1e3),console.log(c.value),console.log((o=(n=r.downloadinput[0])==null?void 0:n.downloadData)==null?void 0:o.message)}),l=()=>{if(!e.value.cardholderName||!e.value.cardNumber||!e.value.expiryDate||!e.value.cvv){alert("Please fill out all fields.");return}h.value=!0,u.value=!0,setTimeout(()=>{e.value.cardholderName="",e.value.cardNumber="",e.value.expiryDate="",e.value.cvv="",h.value=!1,u.value=!1},2e3),D()};H(g,()=>{});const D=async()=>{var T,U,q,z,B,E;console.log((U=(T=r.downloadinput[0])==null?void 0:T.downloadData)==null?void 0:U.download_url);const n=(z=(q=r.downloadinput[0])==null?void 0:q.downloadData)==null?void 0:z.download_url;if(console.log(n),!n||n.length===0)return;console.log(n);const o=(E=(B=r.downloadinput[0])==null?void 0:B.downloadData)==null?void 0:E.download_url;if(!o)return;s.value=!0;const N=o,d="processnumber.zip",_=document.createElement("a");_.href=N,_.download=d,_.click(),_.remove(),f.value=!1};return(n,o)=>{const N=O;return M(),P("div",oe,[i(F(J(W),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[$,u.value]]),a("div",te,[i(F(N,{icon:"pi pi-arrow-circle-down",severity:"info","aria-label":"User",onClick:D},null,512),[[$,f.value]]),a("div",le,[se,a("form",{onSubmit:K(l,["prevent"])},[a("div",ne,[de,i(a("input",{type:"text",id:"cardholder-name","onUpdate:modelValue":o[0]||(o[0]=d=>e.value.cardholderName=d),placeholder:"Boris Gomez",required:""},null,512),[[y,e.value.cardholderName]])]),a("div",re,[ue,i(a("input",{type:"text",id:"card-number","onUpdate:modelValue":o[1]||(o[1]=d=>e.value.cardNumber=d),maxlength:"19",placeholder:"1234 5678 9012 3456",required:""},null,512),[[y,e.value.cardNumber]])]),a("div",ie,[a("div",null,[ce,i(a("input",{type:"text",id:"expiry-date","onUpdate:modelValue":o[2]||(o[2]=d=>e.value.expiryDate=d),maxlength:"5",placeholder:"MM/YY",required:""},null,512),[[y,e.value.expiryDate]])]),a("div",null,[me,i(a("input",{type:"text",id:"cvv","onUpdate:modelValue":o[3]||(o[3]=d=>e.value.cvv=d),maxlength:"4",placeholder:"123",required:""},null,512),[[y,e.value.cvv]])])]),pe],32),h.value?(M(),P("div",ve,[a("p",null,"Thank you, "+G(e.value.cardholderName)+"! Your payment of $"+G(fe)+" was processed.",1)])):Q("",!0)])])])}}};export{xe as default};
