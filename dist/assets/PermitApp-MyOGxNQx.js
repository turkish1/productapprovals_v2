import{T as J}from"./index-CiBRTwpe.js";import{s as K,_ as Q}from"./index-Cisw8ybQ.js";import{s as X}from"./index-DNdSfVv2.js";import{s as Y}from"./index-DBc3U2pO.js";import{s as Z}from"./index-Op4FthZm.js";import{s as $}from"./index-DZLAfNGZ.js";import{u as ee,a as oe,b as D,_ as le}from"./use-createProcessnumber-Bj5QrTK7.js";import{u as se}from"./accountsStore-CsUSvXW1.js";import{u as te}from"./permitapp-D5kmnZV3.js";import{r as a,u as ae,a as ne,o as R,A as re,a8 as ie,ao as B,n as de,c as u,d as k,l as A,z as N,f as e,e as i,g as ce,i as me,t as ue,F as pe,a7 as fe,am as ve,p as ge,j as _e}from"./index-B34yCi00.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-YkhKf99Y.js";import"./index-Y-9EBJAM.js";import"./index-CKMrcjnt.js";import"./index-DpimuAdz.js";import"./index-D_rFEozJ.js";import"./index-BmS9AIAm.js";import"./index-CHo7Aj97.js";import"./index-BDds-czd.js";import"./useAxios-CGnFRm85.js";import"./processStore-CCqMxYJe.js";a(1);const ye={setup(){const t=a(""),o=ae(),v=a(!1),s=a(),{procData:E,procReceive:h}=ee(),{accountUsers:n,getUser:V,addUser:c}=se();console.log(n._value[0]);const g=a("me"),x=te(),r=ne({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),_=a(""),b=a(""),l=a(""),U=a(""),I=a("");R(()=>{re.init({duration:800,easing:"ease-in-out",once:!0})}),ie(()=>{if(n._value[0].name==="")return o.push("/");v.value=!0,_.value=n._value[0].name,b.value=n._value[0].email,l.value=n._value[0].phone,U.value=n._value[0].secondary_status,I.value=n._value[0].dba,console.log(n._value[0].phone)});const w=a(!1);oe();const{lastNum:p,resNum:L}=D();l.value=n._value[0].phone,a(null);const f=a(""),S=a("");R(()=>{v.value=!0});const T=async()=>{try{w.value=!0,console.log(w.value);const m=a(r.address),G=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,P=await(await fetch(G)).json();console.log(P),r.muni=P.MinimumPropertyInfos[0].Municipality,r.license=n._value[0].license,r.contractor=n._value[0].name,r.folio=P.MinimumPropertyInfos[0].Strap,console.log(p.value);let C=String(p.value);console.log(p.value.length,p.value,C);let W=C.substring(2,13),q=fe(W).value+1,H=String(q);r.processNumber=g.value.concat(H),console.log(r.processNumber),S.value=r.folio,f.value=S.value.substring(1,2),console.log(f.value),h(r),setTimeout(()=>{w.value=!1},2e3)}catch(m){alert(m)}},j=async()=>{h(r)},M=a(),F=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),O=()=>{o.push("/roofsystem")};function z(m,y){m=r,y=M.value,m.length!==0&&(x.addSystem(m,y,f.value),console.log(m,y,f.value,"System added"))}return B(async()=>{}),{isDialog:v,onSubmit:j,accountUsers:n,getUser:V,email:b,dba:I,invoke:B,phone:l,contractor:_,licenseStatus:U,addUser:c,navigateNext:O,addItemAndClear:z,selectedApplication:M,type:F,resNum:L,...de(r),responseMessage:t,lastNum:p,useLast:D,load:T,checkMB:f,checkV:S,content:s}}},d=t=>(ge("data-v-3d867c4c"),t=t(),_e(),t),he={class:"grid grid-cols-2 gap-0"},Ve={class:"container md:w-2/3",style:{"margin-left":"90px","margin-top":"90px"}},xe={class:"row"},we={class:"card flex flex-col gap-1"},Se=d(()=>e("div",{class:"font-semibold text-xl",style:{color:"#eae7e2"}},"Permit Application",-1)),Pe={class:"card flex justify-center"},ke={class:"flex flex-col mt-3 grow basis-0 gap-3",style:{"max-width":"200px"}},Ae=d(()=>e("label",{for:"license",style:{color:"#eae7e2"}},"License Status",-1)),Ne={class:"card flex flex-col gap-2"},Ue={class:"flex flex-col grow basis-0 gap-2"},Ie=d(()=>e("label",{for:"addr",style:{color:"#eae7e2"}},"Property Address",-1)),Me={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},Ce={class:"flex flex-col mt-3 grow basis-0 gap-3"},De=d(()=>e("label",{for:"dba",style:{color:"#eae7e2"}},"DBA ",-1)),Re={class:"flex flex-col mt-3 grow basis-0 gap-3"},Be=d(()=>e("label",{for:"contractor",style:{color:"#eae7e2"}},"Contractor Name",-1)),Ee={class:"flex flex-col mt-3 grow basis-0 gap-3"},Le=d(()=>e("label",{for:"phone",style:{color:"#eae7e2"}},"Cell Phone Number",-1)),Te={class:"flex flex-col mt-3 grow basis-0 gap-3"},je=d(()=>e("label",{for:"Email",style:{color:"#eae7e2"}},"Email",-1)),Fe={class:"flex flex-col mt-3 grow basis-0 gap-3"},Oe=d(()=>e("label",{for:"muni",style:{color:"#eae7e2"}},"Municipality",-1)),ze={class:"flex flex-col mt-3 grow basis-0 gap-3"},Ge=d(()=>e("label",{for:"folio",style:{color:"#eae7e2"}},"Folio",-1)),We={class:"flex flex-col mt-3 grow basis-0 gap-3"},qe=d(()=>e("label",{for:"permit",style:{color:"#eae7e2"}},"Master Permit",-1)),He={class:"flex flex-col mt-3 grow basis-0 gap-3"},Je=d(()=>e("label",{for:"processnum",style:{color:"#eae7e2"}},"mEProcess Number",-1)),Ke={key:0},Qe=d(()=>e("br",null,null,-1)),Xe=d(()=>e("br",null,null,-1)),Ye={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}};function Ze(t,o,v,s,E,h){const n=le,V=$,c=Z,g=Y,x=K,r=X,_=Q,b=J;return u(),k(pe,null,[s.isDialog?(u(),A(n,{key:0})):N("",!0),e("div",he,[e("div",Ve,[e("form",null,[e("div",xe,[e("div",we,[Se,e("div",Pe,[i(V,{modelValue:s.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=l=>s.selectedApplication=l),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",ke,[Ae,i(c,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=l=>s.licenseStatus=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ne,[e("form",{class:"w-3/4",onSubmit:o[12]||(o[12]=(...l)=>s.onSubmit&&s.onSubmit(...l))},[e("div",Ue,[Ie,ce(i(c,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=l=>t.address=l),placeholder:"address"},null,8,["modelValue"]),[[b,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),t.loading?(u(),k("i",Me)):(u(),A(g,{key:0,id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",Ce,[De,i(c,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":o[3]||(o[3]=l=>s.dba=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Re,[Be,i(c,{id:"contractor",modelValue:s.contractor,"onUpdate:modelValue":o[4]||(o[4]=l=>s.contractor=l),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ee,[Le,i(x,{modelValue:s.phone,"onUpdate:modelValue":o[5]||(o[5]=l=>s.phone=l),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),e("div",Te,[je,i(c,{modelValue:s.email,"onUpdate:modelValue":o[6]||(o[6]=l=>s.email=l),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(u(),A(r,{key:0,severity:"error"},{default:me(()=>[ve("Email is required")]),_:1})):N("",!0)]),e("div",Fe,[Oe,i(c,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[7]||(o[7]=l=>t.muni=l),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",ze,[Ge,i(c,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[8]||(o[8]=l=>t.folio=l),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",We,[qe,i(c,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[9]||(o[9]=l=>t.permit=l),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",He,[Je,i(c,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[10]||(o[10]=l=>t.processNumber=l),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(u(),k("p",Ke,ue(s.responseMessage),1)):N("",!0),Qe,i(g,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=l=>s.addItemAndClear(t.formData,s.selectedApplication)),onChange:t.generatePdf},null,8,["onChange"])],32),Xe])])])])]),e("div",Ye,[i(_)])])],64)}const wo=be(ye,[["render",Ze],["__scopeId","data-v-3d867c4c"]]);export{wo as default};
