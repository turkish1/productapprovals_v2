import{s as Y}from"./index-D-4jOama.js";import{r as s,s as G,o as A,a8 as F,ao as I,b as K,c as U,d as C,g as n,ap as B,e as p,k as j,f as o,y as H,aq as d,t as M,z as J,V as Q}from"./index-H_zDxpPF.js";import{u as W,a as X}from"./use-downloadpdf-FSABSW3X.js";import{u as Z}from"./pdfsignStore-P2J1qDH9.js";import{u as ee}from"./permitapp-DyJCR05P.js";import"./index-D7xkrfzn.js";import"./useAxios-C93tTn56.js";const oe={class:"card"},ae={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},te={class:"payment-widget"},le=o("h2",{style:{color:"black"}},"Credit Card Payment",-1),se={class:"form-group"},re=o("label",{for:"cardholder-name"},"Cardholder Name",-1),ne={class:"form-group"},de=o("label",{for:"card-number"},"Card Number",-1),ue={class:"form-group small-inputs"},ie=o("label",{for:"expiry-date"},"Expiry Date",-1),ce=o("label",{for:"cvv"},"CVV",-1),me=o("button",{type:"submit"},"Pay",-1),pe={key:0,class:"confirmation"},ve=49.99,Ne={__name:"Paymentgateway",setup(fe){var w,_,g,b;const T=ee(),v=s(((_=(w=T.$state.permitapp[0])==null?void 0:w.formdt)==null?void 0:_.processNumber)||"");s(null),s(null);const q=s(!1),u=s(!1),P=s(!1),f=s(!1),R=s(!1),z=s(!1),i=s(!1),E=s(null),a=s({cardholderName:"",cardNumber:"",expiryDate:"",cvv:""});s(!1),s(!1);const{getNumber:$}=W(v.value),r=X();G(r.$state),console.log((b=(g=r.$state.downloadinput[0])==null?void 0:g.downloadData)==null?void 0:b.download_url);const{resp:h}=Z();A(()=>{var t,e;((e=(t=h.value)==null?void 0:t.status)==null?void 0:e.status)===200&&(R.value=!0,console.log(h.value.status.status))});const L=F(()=>{var t,e;$(),setTimeout(()=>{z.value=!0},1e3),console.log(v.value),console.log((e=(t=r.downloadinput[0])==null?void 0:t.downloadData)==null?void 0:e.message)}),O=t=>{if(!a.value.cardholderName||!a.value.cardNumber||!a.value.expiryDate||!a.value.cvv){alert("Please fill out all fields.");return}i.value=!0,u.value=!0,setTimeout(()=>{a.value.cardholderName="",a.value.cardNumber="",a.value.expiryDate="",a.value.cvv="",i.value=!1,u.value=!1},2e3),y()};I(L,()=>{});const y=async()=>{var x,N,k,D,V,S;console.log((N=(x=r.downloadinput[0])==null?void 0:x.downloadData)==null?void 0:N.download_url);const t=(D=(k=r.downloadinput[0])==null?void 0:k.downloadData)==null?void 0:D.download_url;if(console.log(t),!t||t.length===0)return;console.log(t);const e=(S=(V=r.downloadinput[0])==null?void 0:V.downloadData)==null?void 0:S.download_url;if(!e)return;q.value=!0;const c=e,m="processnumber.zip",l=document.createElement("a");l.href=c,l.download=m,l.click(),l.remove(),f.value=!0};return(t,e)=>{const c=Y,m=K("stripe-checkout");return U(),C("div",oe,[n(p(j(Q),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[B,u.value]]),o("div",ae,[n(p(c,{icon:"pi pi-arrow-circle-down",severity:"info","aria-label":"User",onClick:y},null,512),[[B,f.value]]),p(m,{ref_key:"checkoutRef",ref:E,mode:"payment",pk:t.publishableKey,"line-items":t.lineItems,"success-url":t.successURL,"cancel-url":t.cancelURL,onLoading:e[0]||(e[0]=l=>P.value=l)},null,8,["pk","line-items","success-url","cancel-url"]),o("div",te,[le,o("form",{onSubmit:H(O,["prevent"])},[o("div",se,[re,n(o("input",{type:"text",id:"cardholder-name","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.cardholderName=l),placeholder:"Boris Gomez",required:""},null,512),[[d,a.value.cardholderName]])]),o("div",ne,[de,n(o("input",{type:"text",id:"card-number","onUpdate:modelValue":e[2]||(e[2]=l=>a.value.cardNumber=l),maxlength:"19",placeholder:"1234 5678 9012 3456",required:""},null,512),[[d,a.value.cardNumber]])]),o("div",ue,[o("div",null,[ie,n(o("input",{type:"text",id:"expiry-date","onUpdate:modelValue":e[3]||(e[3]=l=>a.value.expiryDate=l),maxlength:"5",placeholder:"MM/YY",required:""},null,512),[[d,a.value.expiryDate]])]),o("div",null,[ce,n(o("input",{type:"text",id:"cvv","onUpdate:modelValue":e[4]||(e[4]=l=>a.value.cvv=l),maxlength:"4",placeholder:"123",required:""},null,512),[[d,a.value.cvv]])])]),me],32),i.value?(U(),C("div",pe,[o("p",null,"Thank you, "+M(a.value.cardholderName)+"! Your payment of $"+M(ve)+" was processed.",1)])):J("",!0)])])])}}};export{Ne as default};
