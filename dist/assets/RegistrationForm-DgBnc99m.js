import{_ as O}from"./FileSaver-BdJ8oxdy.js";import{r as d,a as h,l as C,m as j,s as q,u as Q,o as W,n as z,q as J,b as I,c as U,e as o,d as n,h as A,v as K,t as X,x as Y,F as Z,p as $,i as ee,y as oe}from"./index-C99ZpHQm.js";import{s as ae}from"./index-DcunPuBN.js";import{s as te}from"./index-DEokl4fd.js";import{u as se,s as le}from"./auth-Mc-xVby4.js";import{s as ne}from"./index-CmKsWQ90.js";import{s as de}from"./index-jmHCQZwA.js";import{s as re}from"./index-CuK2DWw2.js";import{u as ie}from"./accountsStore-Dzhr8iis.js";import{u as B}from"./useAxios-DWOCcrcn.js";import ce from"./html2canvas.esm-CBrSDip1.js";import{E as me}from"./jspdf.es.min-BVkkD2pw.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./permitapp-U3JXEIWp.js";import"./index-BK0ApdOd.js";import"./index-Bcmz7YTW.js";import"./index-_abqPEhy.js";import"./index-DAtSNJ6-.js";import"./index-Wgm2gCaz.js";import"./index-3XQ1v8Pz.js";function fe(){const r=d([]),a=d("");let v=d([]);const{accountUsers:e,getUser:x,addUser:s}=ie();let i=h({license:"",dba:"",name:"",username:"",password:"",secondary_status:"",expiration_date:"",address:"",projects:[],password:"",cphone:"",bphone:"",email:"",date:new Date});const p=d("");let m="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/accounts";const{execute:u,data:b}=B(m,{method:"POST"},{immediate:!1});let f=h({});function y(_){console.log(_),f=_,u({data:_}),a.value="Form submitted successfully!",s(f),console.log(f,"System added")}return{takp:y,noaNum:r,formData:i,error:p,accountUsers:e,getUser:x,addUser:s,accountUsers:e,results:v,responseMessage:a,...C(f)}}const ue=j("cccinput",{state:()=>({cccinput:[],id:0}),actions:{addData(r){this.cccinput.push({cccAccounts:r,completed:!1})}},getters:{cccData:r=>r.cccAccounts}});function _e(){const r=d(""),a=d(""),v=d("");d("");const e=d("");let x="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/contractors";const{execute:s,then:i,data:p}=B(x,{method:"GET"},{immediate:!1}),m=h({});let u=h({license:"",dba:"",name:"",license_status:"",expiration_date:"",address:""});return ue(),s().then(b=>(m.value=p.value,u=m.value,v)),{error:a,responseMessage:r,contractors:m,licenseNumbers:e,cccAccounts:u}}const ve={setup(){const r=d([]),a=se(),{message:v}=q(a),e=Q(),x=d(!1),s=h({license:"",dba:"",name:"",username:"",password:"",secondary_status:"",expiration_date:"",address:"",city:"",projects:[],cphone:"",bphone:"",email:"",insurance:"",carrier:"",date:new Date}),{contractors:i}=_e(),p=d("");W(()=>{r.value=i.value,console.log("Contractors:",r.value)});const m=d(""),{Data:u,takp:b}=fe(),f=async()=>{b(s),s.license="",s.name="",s.secondary_status="",s.dba="",s.username="",s.password="",s.address="",s.cphone="",s.bphone="",s.email="",s.insurance="",s.carrier="",t()};function y(){p.value=s.license.toUpperCase(),Array.isArray(r.value)&&r.value.forEach(c=>{p.value===c.alt_license&&(s.dba=c.DBA,s.name=c.name,s.expiration_date=c.expiration_date,s.address=c.address1,s.city=c.city,m.value=c.secondary_status,console.log("DBA:",c.DBA,"formDatas.dba:",s.dba))}),_()}function _(){m.value===""?s.secondary_status="":m.value==="A"?s.secondary_status="Active":m.value==="I"&&(s.secondary_status="Inactive")}const t=()=>{e.push("/")},k=z(),w=d(),M=()=>{w.value&&w.value.upload&&w.value.upload()},P=()=>{k.add({severity:"contrast",summary:"Contrast",detail:"File Uploaded",life:3e3})},N=d([{name:"Florida",code:"Florida"},{name:"Georgia",code:"Georgia"}]),F=d([{name:"Miami",code:"Miami"},{name:"Homestead",code:"Homestead"},{name:"Miami Beach",code:"Miami Beach"},{name:"Miami Gardens",code:"Miami Gardens"}]),E=d([{name:"Roofing Contractor",code:"Roofing"},{name:"General Contractor",code:"General"}]),G=d(null),L=d(null),R=d(null),V=()=>{const c=document.getElementById("shingle");if(console.log("Element to capture:",c),!c){console.error('Element with id "shingle" not found');return}ce(c).then(g=>{const D=g.toDataURL("image/png"),S=new me;S.addImage(D,"PNG",10,10,190,0);const H=S.output("blob");T(H)})},T=async c=>{try{const D=await(await window.showSaveFilePicker({suggestedName:"permitapp.pdf",types:[{description:"PDF file",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await D.write(c),await D.close(),console.log("PDF saved successfully without popping download dialog!")}catch(g){console.error("Error saving file:",g)}};return J(()=>{V(),console.log("Component unmounted: PDF generated.")}),{formDatas:s,...C(s),disabled:x,navigateNext:t,authStore:a,message:v,checkLicense:y,trade:E,trades:G,onSubmit:f,onUpload:P,upload:M,dropdownItemCt:F,dropdownItemSt:N,dropdownItemct:R,dropdownItemst:L,generatePdf:V}}},l=r=>($("data-v-9db1d0e2"),r=r(),ee(),r),xe={class:"flex flex-col w-64 space-y-2 gap-4",style:{"margin-left":"50px"}},be=l(()=>o("div",{class:"font-semibold text-xl"},"Contractor Information",-1)),ye={class:"flex flex-col gap-4"},he=l(()=>o("label",{for:"lic1",style:{color:"#122620"}},"State of Florida License No.",-1)),ge={class:"flex flex-wrap gap-2"},De=l(()=>o("label",{for:"trade",style:{color:"#122620"}},"Trade",-1)),we={class:"flex flex-col gap-2"},Ve=l(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA",-1)),Se={class:"flex flex-col gap-2"},Ie=l(()=>o("label",{for:"name",style:{color:"#122620"}},"Qualifier Name",-1)),Ue={class:"flex flex-col gap-2"},Ae=l(()=>o("label",{for:"secondary_status",style:{color:"#122620"}},"License Status",-1)),Ce={class:"flex flex-col gap-2"},Be=l(()=>o("label",{for:"license",style:{color:"#122620"}},"License Expiration Date",-1)),ke={class:"flex flex-col gap-2"},Me=l(()=>o("label",{for:"license",style:{color:"#122620"}},"Insurance Policy Number",-1)),Pe={class:"flex flex-col gap-2"},Ne=l(()=>o("label",{for:"license",style:{color:"#122620"}},"Insurance Carrier",-1)),Fe={class:"flex flex-col gap-2"},Ee=l(()=>o("label",{for:"username",style:{color:"#122620"}},"User Name",-1)),Ge={class:"flex flex-col gap-2"},Le=l(()=>o("label",{for:"fname",style:{color:"#122620"}},"Password",-1)),Re=l(()=>o("div",{class:"font-semibold text-xm mb-4"},"Pick a password",-1)),Te=l(()=>o("ul",{class:"pl-2 ml-2 my-0 leading-normal"},[o("li",null,"At least one lowercase"),o("li",null,"At least one uppercase"),o("li",null,"At least one numeric"),o("li",null,"Minimum 8 characters")],-1)),He=l(()=>o("div",{class:"font-semibold text-xl"},"Contact Info",-1)),Oe={class:"flex flex-wrap gap-4"},je={class:"flex flex-col grow basis-0 gap-3"},qe=l(()=>o("label",{for:"addr",style:{color:"#122620"}},"Business Address",-1)),Qe={class:"flex flex-col grow basis-1 gap-3"},We=l(()=>o("label",{for:"state",style:{color:"#122620"}},"City",-1)),ze={class:"flex flex-wrap gap-2 w-full"},Je=l(()=>o("label",{for:"state",style:{color:"#122620"}},"State",-1)),Ke={class:"flex flex-col grow basis-0 gap-3"},Xe=l(()=>o("label",{for:"bphone",style:{color:"#122620"}},"Business Phone",-1)),Ye={class:"flex flex-col grow basis-0 gap-3"},Ze=l(()=>o("label",{for:"cphone",style:{color:"#122620"}},"Cell Phone Number",-1)),$e={class:"flex flex-col grow basis-0 gap-3"},eo=l(()=>o("label",{for:"email1",style:{color:"#122620"}},"Email",-1)),oo={class:"md:w-1/4 flex justify-center flex-wrap gap-4"},ao={class:"md:w-2/3 flex flex-col gap-2"},to=l(()=>o("label",{for:"addr",style:{color:"#122620"}},"Upload Insurance Information",-1)),so={key:0};function lo(r,a,v,e,x,s){const i=re,p=de,m=ne,u=le,b=te,f=ae,y=oe,_=O;return I(),U(Z,null,[o("form",{class:"container md:w-1/3",onSubmit:a[16]||(a[16]=K((...t)=>e.onSubmit&&e.onSubmit(...t),["prevent"])),style:{"margin-left":"650px"}},[o("div",xe,[be,o("div",ye,[he,n(i,{type:"text",modelValue:e.formDatas.license,"onUpdate:modelValue":a[0]||(a[0]=t=>e.formDatas.license=t),placeholder:"CRC000000",invalid:e.formDatas.license==="",onInput:e.checkLicense},null,8,["modelValue","invalid","onInput"])]),o("div",ge,[De,n(p,{id:"trad",modelValue:e.trades,"onUpdate:modelValue":a[1]||(a[1]=t=>e.trades=t),options:e.trade,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),o("div",we,[Ve,n(i,{id:"dba",type:"text",modelValue:e.formDatas.dba,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formDatas.dba=t),placeholder:" ",invalid:e.formDatas.dba===""},null,8,["modelValue","invalid"])]),o("div",Se,[Ie,n(i,{id:"name",type:"text",modelValue:e.formDatas.name,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formDatas.name=t),placeholder:" ",invalid:e.formDatas.name===""},null,8,["modelValue","invalid"])]),o("div",Ue,[Ae,n(i,{id:"secondary_status",type:"text",modelValue:e.formDatas.secondary_status,"onUpdate:modelValue":a[4]||(a[4]=t=>e.formDatas.secondary_status=t),placeholder:" ",invalid:e.formDatas.secondary_status===""},null,8,["modelValue","invalid"])]),o("div",Ce,[Be,n(i,{id:"license",type:"text",modelValue:e.formDatas.expiration_date,"onUpdate:modelValue":a[5]||(a[5]=t=>e.formDatas.expiration_date=t),placeholder:" ",invalid:e.formDatas.expiration_date===""},null,8,["modelValue","invalid"])]),o("div",ke,[Me,n(i,{id:"license",type:"text",modelValue:e.formDatas.insurance,"onUpdate:modelValue":a[6]||(a[6]=t=>e.formDatas.insurance=t),placeholder:" ",invalid:e.formDatas.expiration_date===""},null,8,["modelValue","invalid"])]),o("div",Pe,[Ne,n(i,{id:"license",type:"text",modelValue:e.formDatas.carrier,"onUpdate:modelValue":a[7]||(a[7]=t=>e.formDatas.carrier=t),placeholder:" ",invalid:e.formDatas.expiration_date===""},null,8,["modelValue","invalid"])]),o("div",Fe,[Ee,n(i,{id:"username",type:"text",modelValue:e.formDatas.username,"onUpdate:modelValue":a[8]||(a[8]=t=>e.formDatas.username=t),placeholder:"user name",invalid:e.formDatas.username===""},null,8,["modelValue","invalid"])]),o("div",Ge,[Le,n(u,{modelValue:e.formDatas.password,"onUpdate:modelValue":a[9]||(a[9]=t=>e.formDatas.password=t)},{header:A(()=>[Re]),footer:A(()=>[n(m),Te]),_:1},8,["modelValue"]),He,o("div",Oe,[o("div",je,[qe,n(i,{id:"addr",type:"text",modelValue:e.formDatas.address,"onUpdate:modelValue":a[10]||(a[10]=t=>e.formDatas.address=t),placeholder:"address"},null,8,["modelValue"])]),o("div",Qe,[We,n(i,{id:"city",type:"text",modelValue:e.formDatas.city,"onUpdate:modelValue":a[11]||(a[11]=t=>e.formDatas.city=t),placeholder:"city"},null,8,["modelValue"])]),o("div",ze,[Je,n(p,{id:"state",modelValue:e.dropdownItemst,"onUpdate:modelValue":a[12]||(a[12]=t=>e.dropdownItemst=t),options:e.dropdownItemSt,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),o("div",Ke,[Xe,n(b,{modelValue:e.formDatas.bphone,"onUpdate:modelValue":a[13]||(a[13]=t=>e.formDatas.bphone=t),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.formDatas.bphone===""},null,8,["modelValue","invalid"])]),o("div",Ye,[Ze,n(b,{modelValue:e.formDatas.cphone,"onUpdate:modelValue":a[14]||(a[14]=t=>e.formDatas.cphone=t),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.formDatas.cphone===""},null,8,["modelValue","invalid"])]),o("div",$e,[eo,n(i,{id:"email1",modelValue:e.formDatas.email,"onUpdate:modelValue":a[15]||(a[15]=t=>e.formDatas.email=t),type:"text",placeholder:"email",invalid:e.formDatas.email===""},null,8,["modelValue","invalid"])])]),o("div",oo,[n(f,{label:"Submit",severity:"contrast",raised:"",onClick:e.onSubmit,disabled:e.disabled},null,8,["onClick","disabled"])])])]),o("div",ao,[to,n(y),n(_,{class:"w-2/3"})])],32),r.responseMessage?(I(),U("p",so,X(r.responseMessage),1)):Y("",!0)],64)}const Uo=pe(ve,[["render",lo],["__scopeId","data-v-9db1d0e2"]]);export{Uo as default};
