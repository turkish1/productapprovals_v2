import{s as le,_ as ae}from"./index-D_7fPHK4.js";import{s as H}from"./index-6Pc9fWSw.js";import{s as ne}from"./index-DQjmhQp_.js";import{s as re}from"./index-FZA3RJkw.js";import{s as ie}from"./index-BUCkUqAC.js";import{s as ce}from"./index-BmpggqVk.js";import{_ as $,r as a,c as x,d as k,e as p,i as de,f as e,p as q,j as J,k as pe,a as Z,u as ue,o as me,t as ge,M as j,q as O,n as fe}from"./index-DOTPlwWl.js";import{a as ve,u as be}from"./useAxios-CG7CGqhT.js";import{u as he}from"./accountsStore-CTsBmiSC.js";import{u as ye}from"./permitapp-EISt-yx9.js";import _e from"./html2canvas.esm-CBrSDip1.js";import{E as we}from"./jspdf.es.min-8Js8YdNV.js";import{a as Se,i as G,u as xe,b as Pe}from"./index-CvOQqLSM.js";import"./index-KQYEju5F.js";import"./index-BfqnOIed.js";import"./index-BI-1c7S4.js";import"./index-BumXe-Dy.js";import"./index-DH1wW2PD.js";const b=t=>(q("data-v-670e2bc7"),t=t(),J(),t),Ve={class:"card flex justify-center ."},Ae=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"The use of the mePermit Application system is limited to properly licensed & insured Roofing Contractors.")],-1)),ke=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"This application is only valid for residential work or commercial work subsidiary to a master building permit.")],-1)),Ne=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Roofing permits cannot be issued for mobile homes (approved by the State of Florida Department of Motor Vehicles).")],-1)),Ue=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-8 ..."},[e("p",{style:{color:"black"}},"It is the applicant's responsiblity to complete this application correctly.")],-1)),Ce=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Failure to provide valid permitting information can result in failed inspections and/or cancelation of the permit by the Authority Having Jurisdiction (AHJ).")],-1)),Ie=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Double permit fees plus a fine determined by the AHJ issuing the permit, can be required for work without a permit.")],-1)),Me=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"red"}},"Refunds will not be provided by the AHJ issuing the permit, due to errors on the applicant's part.")],-1)),De=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"red"}},"Any deviations from an approved permit package will require a permit revision.")],-1)),Te=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"This application is only valid for residential roof permits, either standalone or tied to a master building permit.")],-1)),Le=b(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"The permit applicant agrees to comply with these terms of use requirements when obtaining this permit electronically.")],-1)),Ee={class:"flex justify-end gap-2"},Re={__name:"PermitInitalAgreement",setup(t){const o=a(!0);return(c,s)=>{const h=ce,y=H,_=ie;return x(),k("div",Ve,[p(_,{visible:o.value,"onUpdate:visible":s[2]||(s[2]=d=>o.value=d),modal:"",header:"Terms Of Use",style:{width:"70rem"}},{default:de(()=>[Ae,ke,Ne,Ue,p(h),Ce,Ie,Me,De,Te,Le,e("div",Ee,[p(y,{type:"button",modelValue:c.agreement,"onUpdate:modelValue":s[0]||(s[0]=d=>c.agreement=d),severity:"contrast",label:"I Agree",onClick:s[1]||(s[1]=d=>o.value=!1)},null,8,["modelValue"])])]),_:1},8,["visible"])])}}},Be=$(Re,[["__scopeId","data-v-670e2bc7"]]),l=ve.create({baseURL:"https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint",headers:{"Cache-Control":"no-cache","Content-Type":"application/json",apiKey:"LduI7j9z7Iwppo1AbxE9TBz2z2lJFZZFF3MU5ZFCbfxHU8wMlyCjvz0pWMByVH5n","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}}),Fe={getAddr(){return l.get("/folio")},postProcessnumber(t){return l.post("/process",t)},getLastProcess(){return l.get("/lastnumber")},getSlopeless(){return l.get("/slopeless")},getSlopemore(){return l.get("/slopemore")},getdeOne(){return l.get("/desupone")},getdeTwo(){return l.get("/desuptwo")},getdeThree(){return l.get("/desupthree")},getdeFour(){return l.get("/desupfour")},getZones23(){return l.get("/gableroofs23")},getNoa(){return l.get("/noa")},getSBS(){return l.get("/shinglesbs")},getSystemE(){return l.get("/systemtype")},getburMaterial(){return l.get("/burmaterial")},getnewburMaterial(){return l.get("/burmaterials")},getburSystem(){return l.get("/bursystem")},getPoly(){return l.get("/shinglepoly")},getSystemF(){return l.get("/systemtypef")},getdeGauge(){return l.get("/degauge")},getdeMaterial(){return l.get("/dematerial")},getdeMatMore(){return l.get("/dematerials")},getdeSize(){return l.get("/desize")},getdeFastener(){return l.get("/defastener")},getprimeBase(){return l.get("/primebase")},getPerimeter(){return l.get("/perimeter")},getNoas(){return l.post("/shinglenoa")},getTile(){return http.get("/tileroof")},getTiles(){return l.get("/tilenoa")},getZones(){return l.get("/gablezones")},getLay(){return l.get("/underlaymentshingle")},getContractors(){return l.get("/contractors")},postAccount(t){return l.post("/accounts",t)},getAccount(){return l.get("/retriveaccounts")},getDripMaterials(){return l.get("/dripmaterials")}};function N(){const t=a(null),o=a(0);return Fe.getLastProcess().then(c=>{t.value=c.data,t.value.forEach(s=>{console.log(s.processNumber),o.value=s.processNumber})}).catch(c=>{console.error("Error:",c)}),{resNum:t,lastNum:o}}function ze(){const{resNum:t,lastNum:o}=N(),c=a(""),s=a(new Date().getFullYear()),h=a(6),y=a("me"),_=Array.from({length:10**h.value},(r,f)=>`${y.value}${s.value}${String(f).padStart(h.value,"0")}`),d=N();return console.log(d),c.value=_[0]+1,o.value!==0||(c.value=o.value+1),{pNum:c,lastNum:o,resNum:t,test:d}}const je=pe("processinput",{state:()=>({processinput:[],id:0}),actions:{addData(t){this.processinput.push({procData:t,completed:!1})}}});function Oe(){const t=a("");let o=a([]);const c=je(),s=a("");let h="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/process";const{execute:y,data:_}=be(h,{method:"POST"},{immediate:!1});let d=Z({});function r(f){console.log(f),d=f,y({data:f}),t.value="Form submitted successfully!",c.addData(d),console.log(d,"System added")}return{error:s,results:o,procReceive:r,responseMessage:t,procData:d,procStore:c}}a(1);const Ge={setup(){const t=a(""),o=ue(),c=a(!1),s=a(),h=a(),y=a(),{procData:_,procReceive:d}=Oe(),{accountUsers:r,getUser:f,addUser:U}=he();console.log(r._value[0]);const C=a("me"),n=ye(),u=Z({address:"",muni:"",folio:"",permit:"",processNumber:"",date:new Date}),T=a(""),L=a(""),I=a(""),E=a(""),R=a("");Se(()=>{if(r._value[0].name==="")return o.push("/");c.value=!0,T.value=r._value[0].name,L.value=r._value[0].email,I.value=r._value[0].phone,E.value=r._value[0].secondary_status,R.value=r._value[0].dba,console.log(r._value[0].phone)});const M=a(!1),B=a(!1);ze();const{lastNum:A,resNum:W}=N();I.value=r._value[0].phone,a(null);const P=a(""),D=a("");me(()=>{c.value=!0});const Y=async()=>{try{const g=a(u.address),V=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(g.value)}&to=200`,w=await fetch(V);B.value=!0;const i=await w.json();console.log(i),u.muni=i.MinimumPropertyInfos[0].Municipality,u.folio=i.MinimumPropertyInfos[0].Strap;let v=String(A.value);console.log(A.value.length,A.value,v);let te=v.substring(2,13),oe=xe(te).value+1,se=String(oe);u.processNumber=C.value.concat(se),console.log(u.processNumber),D.value=u.folio,P.value=D.value.substring(1,2),console.log(P.value),d(u),setTimeout(()=>{B.value=!1},2e3)}catch(g){alert(g)}},K=async()=>{d(u)},F=a(),Q=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),X=()=>{o.push("/roofsystem")};function ee(g,S){g=u,S=F.value,g.length!==0&&(n.addSystem(g,S,P.value),M.value=!0,console.log(g,S,P.value,"System added"))}const z=()=>{const g=document.getElementById("permitapp");console.log(g),_e(g).then(V=>{const w=V.toDataURL("image/png"),i=new we;i.text(`${u.processNumber}`,20,30),i.setGState(new i.GState({opacity:.4})),i.setFontSize(24),i.setTextColor(150,150,150),i.text("DigitalSolutions",i.internal.pageSize.getWidth()/2,i.internal.pageSize.getHeight()/2,{angle:0,align:"left",baseline:"bottom",renderingMode:"fill"}),console.log(i.text),i.addImage(w,"PNG",10,10,190,0),i.setGState(new i.GState({opacity:1}));const v=i.output("blob");console.log(v),S(v)});const S=async V=>{try{const w=V,i=new Blob([w],{type:"application/pdf"}),v=document.createElement("a");v.href=URL.createObjectURL(i),v.download=`${u.processNumber}-permitapp.pdf`,v.click(),URL.revokeObjectURL(v.href),console.log("PDF saved successfully without popping download dialog!")}catch(w){console.error("Error saving file:",w)}}};return G(async()=>{await Pe(M).changed(),z()}),{isDialog:c,pdfcleared:M,generatePdf:z,onSubmit:K,accountUsers:r,getUser:f,email:L,dba:R,invoke:G,phone:I,contractor:T,licenseStatus:E,addUser:U,navigateNext:X,addItemAndClear:ee,selectedApplication:F,type:Q,resNum:W,...ge(u),responseMessage:t,lastNum:A,useLast:N,load:Y,checkMB:P,checkV:D,content:s,canvas:h,doc:y}}},m=t=>(q("data-v-51eab2a3"),t=t(),J(),t),He={id:"permitapp",ref:"permitapp",class:"flex flex-col md:flex-row gap-2",style:{"margin-left":"220px"}},$e={class:"md:w-3/4"},qe={class:"container"},Je={class:"row"},Ze={class:"card flex flex-col gap-1"},We=m(()=>e("div",{class:"font-semibold text-xl"},"Permit Application",-1)),Ye={class:"card flex justify-center"},Ke={class:"card flex flex-col gap-2"},Qe={class:"flex flex-wrap gap-2"},Xe={class:"flex flex-col grow basis-0 gap-2"},et={class:"flex flex-col mt-3 grow basis-0 gap-3"},tt=m(()=>e("label",{for:"license"},"License Status",-1)),ot=m(()=>e("label",{for:"addr"},"Property Address",-1)),st={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},lt={class:"flex flex-col mt-3 grow basis-0 gap-3"},at=m(()=>e("label",{for:"dba"},"DBA ",-1)),nt={class:"flex flex-col mt-3 grow basis-0 gap-3"},rt=m(()=>e("label",{for:"contractor"},"Contractor Name",-1)),it={class:"flex flex-col mt-3 grow basis-0 gap-3"},ct=m(()=>e("label",{for:"phone"},"Cell Phone Number",-1)),dt={class:"flex flex-col mt-3 grow basis-0 gap-3"},pt=m(()=>e("label",{for:"Email"},"Email",-1)),ut={class:"flex flex-col mt-3 grow basis-0 gap-3"},mt=m(()=>e("label",{for:"muni"},"Municipality",-1)),gt={class:"flex flex-col mt-3 grow basis-0 gap-3"},ft=m(()=>e("label",{for:"folio"},"Folio",-1)),vt={class:"flex flex-col mt-3 grow basis-0 gap-3"},bt=m(()=>e("label",{for:"permit"},"Master Permit",-1)),ht={class:"flex flex-col mt-3 grow basis-0 gap-3"},yt=m(()=>e("label",{for:"processnum"},"mEProcess Number",-1)),_t=m(()=>e("br",null,null,-1)),wt={key:0};function St(t,o,c,s,h,y){const _=Be,d=re,r=ne,f=H,U=le,C=ae;return x(),k("div",He,[s.isDialog?(x(),j(_,{key:0})):O("",!0),e("div",$e,[e("div",qe,[e("form",null,[e("div",Je,[e("div",Ze,[We,e("div",Ye,[p(d,{modelValue:s.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=n=>s.selectedApplication=n),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",Ke,[e("div",Qe,[e("form",{class:"w-3/4",onSubmit:o[12]||(o[12]=(...n)=>s.onSubmit&&s.onSubmit(...n))},[e("div",Xe,[e("div",et,[tt,p(r,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=n=>s.licenseStatus=n),type:"text",placeholder:"name"},null,8,["modelValue"])]),ot,p(r,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=n=>t.address=n),placeholder:"address"},null,8,["modelValue"]),t.loading?(x(),k("i",st)):(x(),j(f,{key:0,type:"button",label:"Search",severity:"contrast",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",lt,[at,p(r,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":o[3]||(o[3]=n=>s.dba=n),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",nt,[rt,p(r,{id:"contractor",modelValue:s.contractor,"onUpdate:modelValue":o[4]||(o[4]=n=>s.contractor=n),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",it,[ct,p(U,{modelValue:s.phone,"onUpdate:modelValue":o[5]||(o[5]=n=>s.phone=n),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),e("div",dt,[pt,p(r,{modelValue:s.email,"onUpdate:modelValue":o[6]||(o[6]=n=>s.email=n),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"])]),e("div",ut,[mt,p(r,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[7]||(o[7]=n=>t.muni=n),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",gt,[ft,p(r,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[8]||(o[8]=n=>t.folio=n),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",vt,[bt,p(r,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[9]||(o[9]=n=>t.permit=n),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",ht,[yt,p(r,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[10]||(o[10]=n=>t.processNumber=n),type:"text",placeholder:"process number"},null,8,["modelValue"])]),_t,p(C),s.responseMessage?(x(),k("p",wt,fe(s.responseMessage),1)):O("",!0),p(f,{type:"submit",label:"Submit",severity:"contrast",raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=n=>s.addItemAndClear(t.formData,s.selectedApplication)),onChange:s.generatePdf},null,8,["onChange"])],32)])])])])])])])],512)}const Ot=$(Ge,[["render",St],["__scopeId","data-v-51eab2a3"]]);export{Ot as default};
