import{_ as W}from"./FileSaver-ZXGendfj.js";import{H as K,e as m,f as L,D as X,g as N,o as c,c as f,i as e,F as G,x as P,t as w,n as J,J as z,k as y,I as E,Y as Z,v as ee,K as te,a as se,S as U,j as g,d as j,T as oe,p as ae,q as le,A as ne}from"./index-Xp8LqGSK.js";import{s as Y}from"./index-BEWT7FrD.js";import{u as ie}from"./usePostGeneralpageLambda-BZbK05qI.js";import{u as ce}from"./generalpageStore-DuBk4k9-.js";import{u as Q}from"./permitapp-DEumGf4H.js";import{u as O}from"./roofList-BnHBPrpV.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as H}from"./index-DkwsLAHV.js";import{s as re}from"./index-BnLRbTOR.js";import{s as de}from"./index-OoH0tyJA.js";import{s as pe}from"./index-CVJ94zE_.js";import"./useAxios-xZtDjFwy.js";import"./index-BEiRIOy0.js";import"./index-DCupWfhf.js";import"./index-D3bdmp_q.js";import"./index-B-k5lgVk.js";import"./index-B6oFzrKq.js";function ue(){var A,M,I;const h=O(),{roofList:b}=K(h),x=Q(),k=m((I=(M=(A=x.$state.permitapp)==null?void 0:A[0])==null?void 0:M.formdt)==null?void 0:I.processNumber);m(!1);const r=ce(),{postGeneral:l}=ie(),d=m(null),p=m(r.$state.generalpdfinput),S=m(!1),s=L({checkedmtile:!1,checkedmetal:!1,checkedslp:!1,checkedadtile:!1,checkedshingle:!1}),o=L({steep1:0,steep2:0,steep3:0,steep4:0,low1:0}),u=L({steep:0,lowslope:0,total:0}),n=L({steepData:"",slopeData:"",totalData:"",checkedmtile:!1,checkedmetal:!1,checkedslp:!1,checkedadtile:!1,checkedshingle:!1,roofCheck:"",area:"",processnumber:""});function D(F){d.value=F.value,console.log(d.value);const B={"Asphalt Shingle":{dim:"dim1",flag:"checkedshingle",steepKey:"steep1"},"Adhesive Set Tile":{dim:"dim4",flag:"checkedadtile",steepKey:"steep2"},"Mechanical Fastened Tile":{dim:"dim3",flag:"checkedmtile",steepKey:"steep3"},"Metal Panel":{dim:"dim5",flag:"checkedmetal",steepKey:"steep4"},"Low Slope":{dim:"dim2",flag:"checkedslp"}};console.log(s,o),Object.keys(s).forEach(_=>s[_]=!1),Object.keys(o).forEach(_=>o[_]=0),b.value.forEach(_=>{console.log(_,B[_.item]);const v=B[_.item];if(v){console.log(v);const V=Number(_[v.dim])||0;s[v.flag]=!0,n[`${v.flag}`]=!0,console.log(v.flag,n),v.flag==="slope"?o.low1=V:o[v.steepKey]=V}}),R()}async function R(){u.steep=o.steep1+o.steep2+o.steep3+o.steep4,u.lowslope=o.low1,u.total=u.steep+u.lowslope,n.area=u.total,n.steepData=u.steep,n.slopeData=u.lowslope,n.totalData=u.total,n.roofCheck=d.value,n.processnumber=k.value,r.addgeneralpdfData(n),await l(n),S.value=!0}return{addRoof:D,roofArea:R,dataGeneral:n,generalType:p,isGeneralPageValid:S}}const me=X("roofinput",{state:()=>({roofinput:[],id:0}),actions:{addCheck(h){this.roofinput.push({roofCheckdata:h,completed:!1})},reset(){this.roofinput=[]},persist:!0}}),fe={class:"terminal"},he={class:"terminal-content"},_e={class:"content"},ve=["onClick"],ge=20,ke={__name:"RoofSystemList",setup(h){const b=O(),{roofList:x}=K(b),{toggleCompleted:k}=K(b),r=["Initializing system...","Loading modules...","Connecting to server...","Server connection established.","Awaiting Roof System Selection..."],l=m([]);function d(){let p=0;const S=setInterval(()=>{p<r.length?(l.value.length>=ge&&l.value.shift(),l.value.push(r[p]),console.log(r[p]),p++):clearInterval(S)},500)}return N(()=>{d()}),(p,S)=>(c(),f("div",fe,[e("div",he,[(c(!0),f(G,null,P(l.value,(s,o)=>(c(),f("div",{key:o,class:"terminal-line"},w(s),1))),128)),(c(!0),f(G,null,P(y(x),s=>(c(),f("div",{key:s.id,class:"item"},[e("div",_e,[e("span",{class:J({completed:s.completed}),style:{color:"green"}},w(s.item)+" "+w(s.dim1)+" "+w(s.dim2)+" "+w(s.dim3)+" "+w(s.dim4)+" "+w(s.dim5),3),e("span",{onClick:z(o=>y(k)(s.id),["stop"])},"âœ”",8,ve)])]))),128))])]))}},Se=q(ke,[["__scopeId","data-v-0eaf742f"]]),$=h=>(ae("data-v-227b6320"),h=h(),le(),h),ye={class:"page"},be={class:"card"},we={class:"card__header"},$e=$(()=>e("h2",null,"Roof System",-1)),xe=$(()=>e("i",{class:"pi pi-refresh"},null,-1)),Re={class:"form"},Ce={class:"field"},Te=$(()=>e("label",{for:"sqft"},"Square Footage",-1)),Ve={class:"field"},Le=$(()=>e("label",{for:"system"},"Roof System",-1)),De={key:0,class:"hint"},Ae={class:"field row"},Me={class:"check"},Ie=$(()=>e("label",{for:"kind-new"},"New Roof",-1)),Be={class:"check"},Fe=$(()=>e("label",{for:"kind-reroof"},"Re-Roof",-1)),Ke={class:"actions"},Ge={class:"side"},Pe=$(()=>e("p",{class:"dz-title"},"Blueprints & images",-1)),ze=$(()=>e("p",{class:"dz-sub"},"Drag & drop files here, or click to select",-1)),Ne={key:0,class:"dz-list"},Oe={__name:"RoofSystemForm",setup(h){var _,v,V;const b=Q(),x=me(),k=O(),r=m(""),l=m(null),d=m(""),p=m(!1),S=m([]),{addRoof:s}=ue(),o=L({roofCheck:""}),u=[{name:"Asphalt Shingle"},{name:"Low Slope"},{name:"Mechanical Fastened Tile"},{name:"Adhesive Set Tile"},{name:"Metal Panel"}],n=m((V=(v=(_=b.$state.permitapp)==null?void 0:_[0])==null?void 0:v.formdt)==null?void 0:V.checkIfBeach),D=E(()=>Z(n.value).value===2),R=E(()=>D.value?u.slice(1):u);function A(C){var a;if(!C||r.value==0)return;const t=l.value.name,i=Number(r.value),T={"Asphalt Shingle":()=>k.addSystemShingle(t,i),"Low Slope":()=>k.addSystemBur(t,i),"Mechanical Fastened Tile":()=>k.addSystemMTile(t,i),"Adhesive Set Tile":()=>k.addSystemATile(t,i),"Metal Panel":()=>k.addSystemMetal(t,i)};console.log(T),(a=T[t])==null||a.call(T),o.roofCheck=d.value,x.addCheck({...o}),r.value="",l.value=null}function M(){s(d)}function I(){k.$reset()}function F(C){var i;p.value=!1;const t=[...((i=C.dataTransfer)==null?void 0:i.files)||[]];t.length&&(S.value=t)}function B(C){var i;const t=[...((i=C.target)==null?void 0:i.files)||[]];t.length&&(S.value=t)}return N(()=>{!l.value&&R.value.length&&(l.value=R.value[0])}),(C,t)=>{const i=ee("RouterLink"),T=oe;return c(),f("main",ye,[e("section",be,[e("header",we,[$e,te((c(),se(y(H),{class:"icon",text:"",plain:"",onClick:I},{default:U(()=>[xe]),_:1})),[[T,"Reset list",void 0,{bottom:!0}]])]),e("div",Re,[e("div",Ce,[Te,g(y(de),{id:"sqft",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),type:"number",inputmode:"numeric",placeholder:"e.g. 1200"},null,8,["modelValue"])]),e("div",Ve,[Le,g(y(pe),{id:"system",class:"w-full",options:R.value,optionLabel:"name",modelValue:l.value,"onUpdate:modelValue":[t[1]||(t[1]=a=>l.value=a),A],placeholder:"Select roof system"},null,8,["options","modelValue"]),D.value?(c(),f("small",De,"Miami Beach restrictions apply.")):j("",!0)]),e("div",Ae,[e("div",Me,[g(y(Y),{inputId:"kind-new",name:"roofKind",value:"newroof",modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=a=>d.value=a)},null,8,["modelValue"]),Ie]),e("div",Be,[g(y(Y),{inputId:"kind-reroof",name:"roofKind",value:"reroof",modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=a=>d.value=a)},null,8,["modelValue"]),Fe])]),e("div",Ke,[g(i,{to:"/dynamicstepper"},{default:U(()=>[g(y(H),{severity:"contrast",label:"Continue",onClick:M})]),_:1})])]),g(y(re)),g(Se)]),e("section",Ge,[e("div",{class:J(["dropzone",{over:p.value}]),onDragover:t[4]||(t[4]=z(a=>p.value=!0,["prevent"])),onDragleave:t[5]||(t[5]=a=>p.value=!1),onDrop:z(F,["prevent"])},[Pe,ze,e("input",{type:"file",class:"dz-input",multiple:"",onChange:B},null,32),S.value.length?(c(),f("ul",Ne,[(c(!0),f(G,null,P(S.value,a=>(c(),f("li",{key:a.name},w(a.name),1))),128))])):j("",!0)],34)])])}}},qe=q(Oe,[["__scopeId","data-v-227b6320"]]),Ee={id:"id",class:"grid grid-cols-3 gap-6"},Ue={class:"roof-app",style:{"margin-left":"250px","margin-top":"20px",border:"none","border-radius":"12px","box-shadow":"4px 4px 16px rgb(22, 183, 183)","padding-bottom":"10px",position:"center","max-height":"600px",width:"600px",top:"10vh"}},je={__name:"RoofSystemApp",setup(h){return N(()=>{ne.init({duration:4500,easing:"ease-in-out",once:!1})}),(b,x)=>(c(),f("div",Ee,[e("div",Ue,[g(qe)])]))}},Ye=q(je,[["__scopeId","data-v-aebd1914"]]),He={class:"grid grid-cols-2 gap-0"},Je={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}},ft={__name:"RoofSystem",setup(h){return(b,x)=>(c(),f("div",He,[g(Ye),e("div",Je,[g(W)])]))}};export{ft as default};
