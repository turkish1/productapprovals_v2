import{e as a,u as ae,j as ne,ab as re,ap as ie,at as q,O as G,L as ce,o as w,c as H,a as X,d as D,g as e,h as i,R as z,l as de,t as ue,F as me,au as pe,aa as fe,q as ve,W as be,X as ye,_ as ge}from"./index-BQ16W8W2.js";import{s as he}from"./index-z9K4exAr.js";import{s as _e}from"./index-CSFxie2V.js";import{s as xe}from"./index-TuBUrfat.js";import{s as Ve}from"./index-d04763W6.js";import{s as we}from"./index-DanOpx_8.js";import{u as Pe,a as Se,b as J,_ as ke}from"./use-createProcessnumber-Cj1dCvL0.js";import{u as Ne}from"./accountsStore-6BzKsn11.js";import{u as Ue}from"./permitapp-IoqpslLh.js";import{_ as Me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DrY15Osd.js";import"./index-DhKiuGCu.js";import"./index-CzGGiffm.js";import"./index-CTHw4v1u.js";import"./index-we1DOMLZ.js";import"./index-CkcBSTd-.js";import"./index-DHiur5Qo.js";import"./useAxios-EVMdl4uZ.js";import"./processStore-DIR_G4Nb.js";const Ie={setup(){const t=a(!1),l=a(""),B=ae(),s=a(!1),E=a(),{procData:K,procReceive:b}=Pe(),{accountUsers:m,getUser:u,addUser:y}=Ne(),g=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),P=a("me"),h=Ue(),o=a(""),L=a(""),r=ne({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),Q=a(!0),S=a(""),k=a(!1),R=a(""),N=a(""),_=a(""),U=a(""),M=a(""),f=a([]);re(()=>{x(),s.value=!0});async function x(){var n,d,p,v,V;f.value=await m.value[0],S.value=(n=f.value)==null?void 0:n.bphone,R.value=(d=f.value)==null?void 0:d.name,N.value=(p=f.value)==null?void 0:p.email,U.value=(v=f.value)==null?void 0:v.secondary_status,M.value=(V=f.value)==null?void 0:V.dba}ie(x,()=>{}),q(async()=>{await pe(x).toBe(!0)});const T=G(()=>Q.value===!0?g.value[0]:""),Y=G(()=>{var n,d,p,v;return((n=m.value[0])==null?void 0:n.bphone)!==""&&(console.log("not free"),k.value=!0,_.value=(d=m.value[0])==null?void 0:d.bphone,console.log("not free",S.value,(p=m.value[0])==null?void 0:p.bphone,k.value)),k.value===!0?_.value:(v=m.value[0])==null?void 0:v.bphone});Se();const{lastNum:Z,resNum:j}=J(),I=a(""),A=a(""),F=a(null),C=a(""),O=a(null);a("");const $=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},1e3),L.value=o.value;const p=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${a(r.address).value}`;W(p),r.license=U.value,r.contractor=M.value,r.emails=N.value,r.muniProc=o.value,r.phNumber=_.value;let V=String(j.value).substring(3,19),se=fe(V).value+1,te=String(se);r.processNumber=P.value.concat(te),b(r)}catch(n){alert(n)}},W=async n=>{t.value=!0,O.value=null;try{const d=await fetch(n);F.value=await d.json(),C.value=F.value.MinimumPropertyInfos[0],r.muni=C.value.Municipality,r.folio=C.value.Strap,A.value=r.folio,I.value=A.value.substring(1,2)}catch(d){O.value=d.message}finally{t.value=!1}},ee=async()=>{b(r)},oe=()=>{B.push("/roofsystem")};function le(n,d){n=r,d=T.value,console.log(n),n.length!==0&&h.addSystem(n,d,I.value,o.value,L.value)}return{isDialog:s,fetchData:W,onSubmit:ee,accountUsers:m,getUser:u,email:N,dba:M,invoke:q,phone:_,name:R,cellPhn:Y,cellPhone:S,licenseStatus:U,muniProcess:o,addUser:y,navigateNext:oe,addItemAndClear:le,selectedApplication:T,type:g,resNum:j,setProperties:x,localStorage,...ce(r),responseMessage:l,lastNum:Z,useLast:J,load:$,checkMB:I,checkV:A,content:E}}},c=t=>(be("data-v-369ca272"),t=t(),ye(),t),Ae={class:"container md:w-1/3",style:{"margin-left":"650px"}},Ce={class:"flex flex-row"},De={class:"flex mt-4 space-y-2 flex-col gap-2"},Be=c(()=>e("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Ee={class:"flex justify-center"},Le={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Re=c(()=>e("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Te={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Fe=c(()=>e("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Oe={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},We=c(()=>e("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),qe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Ge=c(()=>e("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),He={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Xe=c(()=>e("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Je=c(()=>e("label",{id:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Ke={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Qe=c(()=>e("label",{id:"Email",style:{color:"#122620"}},"Email",-1)),Ye={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ze=c(()=>e("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),$e={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},eo=c(()=>e("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),oo={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},lo=c(()=>e("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),so={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},to=c(()=>e("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),ao={key:0},no=c(()=>e("br",null,null,-1)),ro=c(()=>e("br",null,null,-1));function io(t,l,B,s,E,K){const b=ke,m=we,u=Ve,y=xe,g=_e,P=he,h=ge;return w(),H(me,null,[s.isDialog?(w(),X(b,{key:0})):D("",!0),e("div",Ae,[e("form",null,[e("div",Ce,[e("div",De,[Be,e("div",Ee,[i(m,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=o=>s.selectedApplication=o),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),e("div",Le,[Re,i(u,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=o=>s.licenseStatus=o),type:"text",placeholder:"status"},null,8,["modelValue"])]),e("div",Te,[e("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...o)=>s.onSubmit&&s.onSubmit(...o))},[e("div",je,[Fe,z(i(u,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=o=>s.muniProcess=o),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[h,"Enter Municipality Process Number",void 0,{top:!0}]])]),e("div",Oe,[We,z(i(u,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=o=>t.address=o),placeholder:"address"},null,8,["modelValue"]),[[h,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),i(y,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),e("div",qe,[Ge,i(u,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=o=>s.dba=o),type:"text",placeholder:"dba"},null,8,["modelValue"])]),e("div",He,[Xe,i(u,{id:"name",modelValue:s.name,"onUpdate:modelValue":l[5]||(l[5]=o=>s.name=o),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",ze,[Je,i(g,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=o=>s.phone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999"},null,8,["modelValue"])]),e("div",Ke,[Qe,i(u,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=o=>s.email=o),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(w(),X(P,{key:0,severity:"error"},{default:de(()=>[ve("Email is required")]),_:1})):D("",!0)]),e("div",Ye,[Ze,i(u,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=o=>t.muni=o),type:"text",placeholder:"municipality",style:{color:"green"}},null,8,["modelValue"])]),e("div",$e,[eo,i(u,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=o=>t.folio=o),type:"text",placeholder:"folio",onInput:t.updatemEProcess,style:{color:"green"}},null,8,["modelValue","onInput"])]),e("div",oo,[lo,i(u,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=o=>t.permit=o),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",so,[to,i(u,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=o=>t.processNumber=o),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(w(),H("p",ao,ue(s.responseMessage),1)):D("",!0),no,i(y,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=o=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),ro])])])])])],64)}const Io=Me(Ie,[["render",io],["__scopeId","data-v-369ca272"]]);export{Io as default};
