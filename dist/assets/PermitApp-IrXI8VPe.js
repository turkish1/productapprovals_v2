import{i as a,u as Z,j as $,e as B,A as ee,X as oe,Y as le,ah as se,y as te,o as _,c as L,a as T,d as S,f as o,g as n,O as j,l as ae,t as ne,F as re,W as ie,q as ce,H as de,I as ue,T as me}from"./index-ica-XrX1.js";import{s as pe}from"./index-f0V0MTqX.js";import{s as fe}from"./index-yQLCsMfK.js";import{s as ve}from"./index-CRN4wDlg.js";import{s as be}from"./index-BSFleK-T.js";import{s as ge}from"./index-JKwWL2J5.js";import{u as ye,a as _e,b as F,_ as he}from"./use-createProcessnumber-BgGjb3Nu.js";import{u as xe}from"./accountsStore-Q1bUw0wQ.js";import{u as Ve}from"./permitapp-U3IoHNxK.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BlSj7jYj.js";import"./index-n67Y_iAk.js";import"./index-B9c7N6x2.js";import"./index-BLVOg8Gt.js";import"./index-CvulJOuE.js";import"./index-D1QCqYVn.js";import"./index-CcGlE2WX.js";import"./index-BedKw1uu.js";import"./index-Ci-jvISh.js";import"./useAxios-DjJqJdY8.js";import"./processStore-DN7OFi9K.js";const Pe={setup(){const t=a(!1),l=a(""),h=Z(),s=a(!1),k=a(),{procData:O,procReceive:v}=ye(),{accountUsers:i,getUser:c,addUser:b}=xe();console.log(i._value[0]);const g=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),x=a("me"),p=Ve(),e=a(""),V=a(""),d=$({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phone:"",email:"",muniProcess:"",date:new Date}),W=a(!0),N=a(""),U=a(""),w=a(""),M=a(""),I=a("");B(()=>{ee.init({duration:800,easing:"ease-in-out",once:!0})}),oe(()=>{if(i._value[0].name==="")return h.push("/");s.value=!0,N.value=i._value[0].name,U.value=i._value[0].email,w.value=i._value[0].phone,M.value=i._value[0].secondary_status,I.value=i._value[0].dba});const A=le(()=>W.value===!0?g.value[0]:"");_e();const{lastNum:q,resNum:C}=F();w.value=i._value[0].phone,a(null);const y=a(""),P=a(""),D=a(null),f=a(""),E=a(null);B(()=>{s.value=!0});const H=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},1e3),V.value=e.value,console.log(e.value,V.value);const u=a(d.address);console.log(u.value);const z=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${encodeURIComponent(u.value)}&to=200`;R(z),console.log(e.value),d.license=i._value[0].license,d.contractor=i._value[0].name;let J=String(C.value).substring(3,19),K=ie(J).value+1,Q=String(K);d.processNumber=x.value.concat(Q),v(d)}catch(u){alert(u)}},R=async u=>{t.value=!0,E.value=null;try{const m=await fetch(u);D.value=await m.json(),f.value=D.value.MinimumPropertyInfos[0],console.log(f.value),d.muni=f.value.Municipality,console.log(f.value.Strap),d.folio=f.value.Strap,P.value=d.folio,y.value=P.value.substring(1,2),console.log(y.value)}catch(m){E.value=m.message}finally{t.value=!1}},G=async()=>{v(d)},X=()=>{h.push("/roofsystem")};function Y(u,m){u=d,m=A.value,console.log(u),u.length!==0&&(p.addSystem(u,m,y.value,e.value,V.value),console.log(p))}return{isDialog:s,fetchData:R,onSubmit:G,accountUsers:i,getUser:c,email:U,dba:I,invoke:se,phone:w,contractor:N,licenseStatus:M,muniProcess:e,addUser:b,navigateNext:X,addItemAndClear:Y,selectedApplication:A,type:g,resNum:C,...te(d),responseMessage:l,lastNum:q,useLast:F,load:H,checkMB:y,checkV:P,content:k}}},r=t=>(de("data-v-02570a56"),t=t(),ue(),t),Se={class:"container md:w-1/3",style:{"margin-left":"650px"}},ke={class:"flex flex-row"},Ne={class:"flex mt-4 space-y-2 flex-col gap-2"},Ue=r(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Me={class:"flex justify-center"},Ie={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Ae=r(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ce={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},De={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Ee=r(()=>o("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Re={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Be=r(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Le={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Te=r(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),je={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Fe=r(()=>o("label",{for:"contractor",style:{color:"#122620"}},"Contractor Name",-1)),Oe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},We=r(()=>o("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=r(()=>o("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Xe=r(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Ye={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=r(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ke=r(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),Qe={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},Ze=r(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),$e={key:0},eo=r(()=>o("br",null,null,-1)),oo=r(()=>o("br",null,null,-1));function lo(t,l,h,s,k,O){const v=he,i=ge,c=be,b=ve,g=fe,x=pe,p=me;return _(),L(re,null,[s.isDialog?(_(),T(v,{key:0})):S("",!0),o("div",Se,[o("form",null,[o("div",ke,[o("div",Ne,[Ue,o("div",Me,[n(i,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=e=>s.selectedApplication=e),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",Ie,[Ae,n(c,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=e=>s.licenseStatus=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Ce,[o("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...e)=>s.onSubmit&&s.onSubmit(...e))},[o("div",De,[Ee,j(n(c,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=e=>s.muniProcess=e),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[p,"Enter Municipality Process Number",void 0,{top:!0}]])]),o("div",Re,[Be,j(n(c,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=e=>t.address=e),placeholder:"address"},null,8,["modelValue"]),[[p,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),n(b,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),o("div",Le,[Te,n(c,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=e=>s.dba=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",je,[Fe,n(c,{id:"contractor",modelValue:s.contractor,"onUpdate:modelValue":l[5]||(l[5]=e=>s.contractor=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Oe,[We,n(g,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>s.phone=e),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),o("div",qe,[He,n(c,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=e=>s.email=e),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(_(),T(x,{key:0,severity:"error"},{default:ae(()=>[ce("Email is required")]),_:1})):S("",!0)]),o("div",Ge,[Xe,n(c,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=e=>t.muni=e),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),o("div",Ye,[ze,n(c,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=e=>t.folio=e),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),o("div",Je,[Ke,n(c,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=e=>t.permit=e),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",Qe,[Ze,n(c,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=e=>t.processNumber=e),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(_(),L("p",$e,ne(s.responseMessage),1)):S("",!0),eo,n(b,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=e=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),oo])])])])])],64)}const No=we(Pe,[["render",lo],["__scopeId","data-v-02570a56"]]);export{No as default};
