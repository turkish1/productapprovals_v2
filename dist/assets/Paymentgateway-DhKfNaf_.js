import{e as s,Z as _,ac as F,y as Y,o as N,a as D,v as R,x as V,k as g,f as k,G as O,I as $,h as A,ad as P,ae as G,c as Q,L as Z,af as I,j as B,i as b,ag as M,ah as U}from"./index-CtiUX7-i.js";import{u as C,a as L,b as j}from"./pdfsignStore-BxYFdJe7.js";import{u as E}from"./permitapp-BFA-v7ir.js";import{u as X}from"./useAxios-5_n2LMHB.js";import{c as z}from"./countStore-vR65MSK0.js";const H={__name:"BuyButton",setup(n){var i,c;const r=E(),e=s(((c=(i=r.$state.permitapp[0])==null?void 0:i.formdt)==null?void 0:c.muniProc)||""),l="pk_test_51PDPFeE9FsYF7D6YfBrV7kYvnDYIAR5QQfaR8ba5TGnoQAbEQgSeY7DLwhOZafrl8ZXJOPsbZN9tYl5HMLlhkxB100cmCtoWo7",{secondFetch:o}=C(),d="buy_btn_1RVdS4E9FsYF7D6YupNeXupi",p=s(!1);_(()=>{setTimeout(()=>{p.value=!0},1e3),o(e.value),p.value=!1,m()}),F("my-storage",{processNumber:e.value});const m=async u=>{console.log("Entered CaptureSession",u),new URL(window.location.href)};return(u,f)=>{const t=Y("stripe-buy-button");return N(),D(t,{"buy-button-id":g(d),"publishable-key":g(l),onUpdate:m},{default:R(()=>[V("Pay")]),_:1},8,["buy-button-id","publishable-key"])}}};function J(){const n=s(""),r=k({status:"",message:"",isFinished:"",isLoading:""}),e=k({status:"",message:"",isFinished:"",isLoading:""}),l=s("");let o="https://4cgf7owinctxji4vx56hnisxh40iskps.lambda-url.us-east-1.on.aws/";const{execute:d,then:p,data:m}=X(o,{method:"GET"},{immediate:!1}),{confirmResponse:i,addResponse:c}=L();function u(t){console.log(t),n.value=t+"/",f()}const f=async()=>{try{const t=await d({params:{processnumber:n.value}}).then(a=>{console.log(a),e.status=a.response.value.status,e.message=a.data.value,e.isFinished=a.isFinished,e.isLoading=a.isLoading});c(e)}catch(t){console.log("Error, fectching data",t)}};return{error:l,sendProc:n,getSignpdf:u,fetchSignPdf:f,result:e,confirmResponse:i,results:r}}const K=O("sessioninput",{state:()=>({sessioninput:[],id:0}),actions:{addSession(n){this.sessioninput.push({sessionData:n,completed:!1})}}}),W={class:"card-system"},q={class:"flex flex-col w-1/2 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"300px","margin-top":"200px"}},ee={class:"payment-widget"},se=b("h2",{style:{color:"black"}},"Credit Card Payment",-1),ue={__name:"Paymentgateway",setup(n){var w,x;const r=E();K();const e=z(),l=s(0),o=s(((x=(w=r.$state.permitapp[0])==null?void 0:w.formdt)==null?void 0:x.muniProc)||"");s(!1);const d=s(!1),p=s(!1),m=s(!1),i=s(!1),c=s(!1),{getSignpdf:u}=J(),f=_(()=>{setTimeout(()=>{c.value=!0},2e3),u(y.value.processNumber),console.log(o.value)}),t=j();$(t.$state);const{resp:a}=L();A(()=>{var h,v;l.value=1,((v=(h=a.value)==null?void 0:h.status)==null?void 0:v.status)===200&&(m.value=!0,console.log(a.value.status.status))});const y=F("my-storage",{processNumber:o.value}),{getNumber:te,secondFetch:T}=C(),S=_(()=>{T(y.value.processNumber),e.addCount(o.value),console.log(e.$state),setTimeout(()=>{i.value=!0},1e3),console.log(o.value),p.value=!0});return P(S,()=>{}),P(f,()=>{}),G(async()=>{await M(c).toBe(!0)}),(h,v)=>(N(),Q("div",W,[Z(B(g(U),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[I,d.value]]),b("div",q,[b("div",ee,[se,B(H,{onClick:g(S)},null,8,["onClick"])])])]))}};export{ue as default};
