import{s as $}from"./index-BB1n6XUK.js";import{u as j}from"./useDripedge-CtDCmjbu.js";import{D as V,e as r,f as y,Z as F,g as I,V as _,w as B,ae as C,af as H,o as L,c as A,j as T,k as w,ak as N,i as k,I as O,al as P}from"./index-pqNwS_-i.js";import{u as G}from"./roofList-CehpBH8n.js";import{u as Z,a as J}from"./useAxios-6w6702Uf.js";const K=V("dripinputmaterial",{state:()=>({dripinputmaterial:[],dripMTileMaterial:[],dripinputsize:[],inputselectedUserDripEdge:[],selectedDripSize:[],id:2}),actions:{addMTileDrip(e){this.dripinputmaterial.push({dripMTileData:e,completed:!1})},addSTileDrip(e){this.dripinputsize.push({selectedDripSizenew:e,completed:!1})},insertDripAtIndex(e,s){this.dripinputmaterial.splice(e,0,{dripMTileMaterial:s,completed:!1})},addUseritems(e){this.inputselectedUserDripEdge.push({dripSelection:e,completed:!1})},resetState(){console.log("reset was called: ",this.inputselectedUserDripEdge),this.inputselectedUserDripEdge=[],console.log("reset was called: ",this.inputselectedUserDripEdge)}}}),Q={class:"flex flex-col w-96 mb-4 gap-3",style:{"margin-left":"20px"}},W=k("label",{style:{color:"#122620"}},"Drip Edge Material",-1),X=k("label",{style:{color:"#122620"}},"Drip Edge Size",-1),oe={__name:"DripEdMechTile",emits:["update-valuesize"],setup(e,{emit:s}){const{selectDripEdge:a,selectDripEdgeSize:t,type:c,sizeTypeMetal:i}=j(),o=G(),m=r(o.$state.roofList),d=r(),g=r(null),p=K(),n=s;let l=r(!1);const f=r(),M=y({DripEdgeMaterial:"",DripEdgeSize:""}),q=F(()=>{if(m.value.length===0)return"";for(let u=0;u<m.value.length;u++)m.value[u].item==="Mechanical Fastened Tile"&&(l.value=!0,d.value=c.value);h()}),E=y({DripEdgeMaterial:"",DripEdgeSize:""}),U=()=>{n("update-valuesize",t.value),E.DripEdgeSize=t.value,S()};I(()=>{b()});function h(){for(let u=0;u<m.value.length;u++)m.value[u].item==="Mechanical Fastened Tile"&&console.log(m.value[u].item);x()}function b(){d.value=c.value}async function S(){a.value?(a.value==="Galvanized Steel Metal ¹"&&(f.value=i.galvanized,h()),a.value==="Stainless Steel Metal ²"&&(f.value=i.stainless,h()),a.value==="Aluminum Metal ³"&&(f.value=i.aluminum,h()),a.value==="Copper Metal ⁴"&&(f.value=i.copper,h())):console.log("The element not mounted yet"),M.DripEdgeMaterial=a.value,M.DripEdgeSize=t.value,h()}function x(){E.DripEdgeMaterial=a.value,R()}const R=async u=>{p.resetState(),p.addUseritems(M),console.log(p)};return _(d,f,c),B(b,S),C(async()=>{await H(q).toBe(!0)}),(u,v)=>{const z=$;return L(),A("div",Q,[W,T(z,{modelValue:w(a),"onUpdate:modelValue":[v[0]||(v[0]=D=>N(a)?a.value=D:null),b],options:d.value,placeholder:"make selection"},null,8,["modelValue","options"]),X,T(z,{ref_key:"selectSizeRef",ref:g,modelValue:w(t),"onUpdate:modelValue":v[1]||(v[1]=D=>N(t)?t.value=D:null),options:f.value,onClick:S,onChange:U,placeholder:"make selection"},null,8,["modelValue","options"])])}}},Y="https://myfawca4fj3ewpg5usmepe6toi0wuvlw.lambda-url.us-east-1.on.aws/";function ne(){const e=r(null),s=r(!1),{data:a,error:t,isFetching:c,execute:i}=Z(Y,{method:"POST",headers:{"Content-Type":"application/json"}},J,{immediate:!1}),o=async(d,g)=>{var p,n;s.value=!0,e.value=null;try{const l=await i({data:d});return(l==null?void 0:l.data)??a.value}catch(l){throw console.error(`Lambda ${g} failed:`,{message:l==null?void 0:l.message,code:l==null?void 0:l.code,status:(p=l==null?void 0:l.response)==null?void 0:p.status,data:(n=l==null?void 0:l.response)==null?void 0:n.data}),e.value=(l==null?void 0:l.message)||"Request failed",l}finally{s.value=!1}};return{data:a,errors:e,isFetching:c,loading:s,postMech:d=>o(d,"postMech")}}function re({min:e=null,max:s=null,required:a=!1}){const t=r(null);return{errorHeightMessage:t,validateTileHeight:i=>{const o=i;return e!==null&&o<e?(t.value=`Number must be greater than or equal to ${e}`,console.log("min",o,e),!1):s!==null&&o>=e&&o>=s?(t.value=`Number must be less than or equal to ${s}`,console.log("max",o),!1):a&&(i==null||i==="")?(t.value="This field is required",console.log("required"),!1):(t.value=null,!0)}}}function ue({min:e=null,max:s=null,required:a=!1}){const t=r(null);return{errorMessage:t,validateNumber:i=>{const o=i;return e!==null&&o<e?(t.value=`Number must be greater than or equal to ${e}`,!1):s!==null&&o>=e&&o>=s?(t.value=`Number must be less than or equal to ${s}`,console.log("max",o),!1):a&&(i==null||i==="")?(t.value="This field is required",console.log("required"),!1):(t.value=null,!0)}}}const ee=V("tileMechInput",{state:()=>({tileMechInput:[],id:0}),actions:{addSystem(e){this.tileMechInput.push({tileMechNumber:e,completed:!1})},reset(){this.$reset()}},getters:{tileMechNumber:e=>e.tileMechNumber}});function ce(){let e=r([]);const s=ee(),a=r(""),t=y({noa:[]});function c(){p()}const i=O(()=>"https://mczqlparb6o6umu7j4ct7pv4vi0jrnat.lambda-url.us-east-1.on.aws/"),{data:o,error:m,isFetching:d,execute:g}=P(i,{immediate:!1,mode:"cors",credentials:"omit"}).get().json(),p=async()=>{a.value="",await g()};return _(o,n=>{n!=null&&n.body&&(t.noa=n.body,console.log(n.body),s.addSystem({noa:n.body}))}),{tileMechNumber:t,fetchData:p,callNumber:c,errors:a,results:e,mechanicalStore:s}}export{oe as _,ne as a,ue as b,re as c,K as d,ee as e,ce as u};
