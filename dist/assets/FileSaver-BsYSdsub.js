import{s as T,a as B}from"./index-qzor81jZ.js";import{r as l,ba as C,v as M,b as d,c as p,e as o,F as N,m as P,d as u,t as v,y as _}from"./index-C159Mc21.js";import{u as U}from"./permitapp-DwQLey3_.js";const E={class:"flex items-center justify-center flex-col"},V=o("label",{for:"muni",style:{color:"#eeebe5"}},[o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"For PDF Documents")])],-1),j=o("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"},null,-1),I=o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"Drag and drop files to here to upload.")],-1),L=[I],O={class:"flex flex-wrap gap-4"},q={class:"font-semibold text-ellipsis max-w-250 whitespace-nowrap overflow-hidden"},K={__name:"FileSaver",setup(A){var m,f;const g=U(),h=l(((f=(m=g.$state.permitapp[0])==null?void 0:m.formdt)==null?void 0:f.processNumber)||""),a=l([]),b=C();M();const x=l(0),y=l(0),c=l([]),S=e=>{e.dataTransfer.dropEffect="copy"},$=e=>{const r=b.config.locale.fileSizeTypes;if(e===0)return`0 ${r[0]}`;const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(3))} ${r[t]}`},k=async e=>{a.value=[...e.dataTransfer.files];for(const s of a.value)console.log(s),c.value.push(s),console.log(c.value);F()},z=e=>{a.value.splice(e,1)},w=e=>{y.value=x.value/1,e()};l(""),l(""),l("");const F=async()=>{for(const e of c.value){console.log("Uploading file:",e);const s=`https://dsr-pdfupload.s3.us-east-1.amazonaws.com/${h.value}/${e.name}`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/pdf"},body:e});if(!n.ok){console.error(`Failed to upload ${e.name}. Status: ${n.status}`);continue}console.log(`Successfully uploaded ${e.name} to S3.`)}};return(e,s)=>{const n=T,r=B;return d(),p("div",{class:"dropzone",onDragover:_(S,["prevent"]),onDrop:_(k,["prevent"])},[o("div",E,[V,j,o("p",{class:"mt-6 mb-0",onUpload:s[0]||(s[0]=t=>e.onTemplatedUpload(t)),style:{color:"#eeebe5"}},L,32)]),o("div",O,[(d(!0),p(N,null,P(a.value,(t,i)=>(d(),p("div",{key:i+t.url+t.size,class:"p-8 rounded-border flex flex-col border border-surface items-center gap-4"},[o("div",null,[u(n,{onClick:s[1]||(s[1]=D=>w()),icon:"pi pi-cloud-upload",rounded:"",outlined:"",severity:"success",disabled:!a.value||a.value.length===0},null,8,["disabled"])]),o("span",q,v(t.name),1),o("div",null,v($(t.size)),1),u(r,{value:"Completed",class:"mt-4",severity:"success"}),u(n,{icon:"pi pi-times",onClick:D=>z(i),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])],32)}}};export{K as _};
