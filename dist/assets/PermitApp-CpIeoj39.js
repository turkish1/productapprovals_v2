import{e as a,u as le,j as se,f as M,A as te,O as ae,at as ne,L as ie,o as y,c as q,a as O,d as U,g as o,h as c,R as G,l as re,t as ce,F as de,aa as ue,aC as me,q as pe,W as fe,X as ve,_ as be}from"./index-RcNKE_b0.js";import{s as ge}from"./index-96e9NX85.js";import{s as ye}from"./index-Dn01UJKN.js";import{s as he}from"./index-ClNW4T8F.js";import{s as _e}from"./index-bni6A8GC.js";import{s as xe}from"./index-lxTwjgCd.js";import{u as Ve,a as we,b as H,_ as Pe}from"./use-createProcessnumber-CaiJmwQc.js";import{u as ke}from"./accountsStore-C40cYFdL.js";import{u as Se}from"./permitapp-DuqFbsNI.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Crp4jmUR.js";import"./index-DVzwVLmF.js";import"./index-Cw0f2NAl.js";import"./index-JtGkyth6.js";import"./index-DU1_WnMq.js";import"./index-D-uxHVHx.js";import"./index-CG_FMBry.js";import"./useAxios-Df7bHI4y.js";import"./processStore-CTMYb1Pv.js";const Me={setup(){const t=a(!1),l=a(""),C=le(),s=a(!1),I=a(),{procData:X,procReceive:v}=Ve(),{accountUsers:i,getUser:u,addUser:b}=ke(),g=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),h=a("me"),p=Se(),e=a(""),_=a(""),r=se({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),z=a(!0),A=a(""),D=a(""),E=a(""),B=a(""),R=a("");M(()=>{te.init({duration:800,easing:"ease-in-out",once:!0})});const L=ae(()=>z.value===!0?g.value[0]:"");we();const{lastNum:J,resNum:x}=H(),V=a(""),w=a(""),T=a(null),P=a(""),j=a(null);M(()=>{s.value=!0});const k=a("");M(()=>{var n,m,S,f;s.value=!0,A.value=(n=i.value[0])==null?void 0:n.name,D.value=(m=i.value[0])==null?void 0:m.email,B.value=(S=i.value[0])==null?void 0:S.secondary_status,R.value=(f=i.value[0])==null?void 0:f.dba});const K=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},1e3),_.value=e.value,console.log(e.value,_.value);const n=a(r.address);console.log(n.value);const m=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${n.value}`;console.log(m),F(m),console.log(e.value),r.license=i.value[0].license,r.contractor=i.value[0].name,r.emails=i.value[0].email,r.muniProc=e.value,r.phNumber=i.value[0].bphone,console.log(x.value);let f=String(x.value);console.log(f);let W=f.substring(3,19);console.log(W);const N=ue(W);console.log(typeof N,N.value);let ee=N.value+1,oe=String(ee);r.processNumber=h.value.concat(oe),(i.value[0].bphone||i.value[0].cphone)&&Q(),v(r)}catch(n){alert(n)}},Q=()=>{var n;k.value=(n=i.value)==null?void 0:n[0].bphone,console.log(k.value),me(()=>{(i.value[0].bphone||i.value[0].cphone)&&(E.value=k.value)})},F=async n=>{t.value=!0,j.value=null;try{const m=await fetch(n);console.log(n),T.value=await m.json(),P.value=T.value.MinimumPropertyInfos[0],r.muni=P.value.Municipality,r.folio=P.value.Strap,w.value=r.folio,V.value=w.value.substring(1,2)}catch(m){j.value=m.message}finally{t.value=!1}},Y=async()=>{v(r)},Z=()=>{C.push("/roofsystem")};function $(n,m){n=r,m=L.value,console.log(n),n.length!==0&&(p.addSystem(n,m,V.value,e.value,_.value),console.log(p))}return{isDialog:s,fetchData:F,onSubmit:Y,accountUsers:i,getUser:u,email:D,dba:R,invoke:ne,phone:E,name:A,licenseStatus:B,muniProcess:e,addUser:b,navigateNext:Z,addItemAndClear:$,selectedApplication:L,type:g,resNum:x,...ie(r),responseMessage:l,lastNum:J,useLast:H,load:K,checkMB:V,checkV:w,content:I}}},d=t=>(fe("data-v-a92914f0"),t=t(),ve(),t),Ue={class:"container md:w-1/3",style:{"margin-left":"650px"}},Ce={class:"flex flex-row"},Ie={class:"flex mt-4 space-y-2 flex-col gap-2"},Ae=d(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),De={class:"flex justify-center"},Ee={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Be=d(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Re={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Le={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Te=d(()=>o("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),je={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Fe=d(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),We={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},qe=d(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),Oe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Ge=d(()=>o("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),He={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Xe=d(()=>o("label",{id:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Je=d(()=>o("label",{id:"Email",style:{color:"#122620"}},"Email",-1)),Ke={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Qe=d(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Ye={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ze=d(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),$e={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},eo=d(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),oo={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},lo=d(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),so={key:0},to=d(()=>o("br",null,null,-1)),ao=d(()=>o("br",null,null,-1));function no(t,l,C,s,I,X){const v=Pe,i=xe,u=_e,b=he,g=ye,h=ge,p=be;return y(),q(de,null,[s.isDialog?(y(),O(v,{key:0})):U("",!0),o("div",Ue,[o("form",null,[o("div",Ce,[o("div",Ie,[Ae,o("div",De,[c(i,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=e=>s.selectedApplication=e),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",Ee,[Be,c(u,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=e=>s.licenseStatus=e),type:"text",placeholder:"status"},null,8,["modelValue"])]),o("div",Re,[o("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...e)=>s.onSubmit&&s.onSubmit(...e))},[o("div",Le,[Te,G(c(u,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=e=>s.muniProcess=e),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[p,"Enter Municipality Process Number",void 0,{top:!0}]])]),o("div",je,[Fe,G(c(u,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=e=>t.address=e),placeholder:"address"},null,8,["modelValue"]),[[p,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),c(b,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),o("div",We,[qe,c(u,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=e=>s.dba=e),type:"text",placeholder:"dba"},null,8,["modelValue"])]),o("div",Oe,[Ge,c(u,{id:"name",modelValue:s.name,"onUpdate:modelValue":l[5]||(l[5]=e=>s.name=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",He,[Xe,c(g,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>s.phone=e),mask:"(999) 999-9999"},null,8,["modelValue"])]),o("div",ze,[Je,c(u,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=e=>s.email=e),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(y(),O(h,{key:0,severity:"error"},{default:re(()=>[pe("Email is required")]),_:1})):U("",!0)]),o("div",Ke,[Qe,c(u,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=e=>t.muni=e),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),o("div",Ye,[Ze,c(u,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=e=>t.folio=e),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),o("div",$e,[eo,c(u,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=e=>t.permit=e),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",oo,[lo,c(u,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=e=>t.processNumber=e),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(y(),q("p",so,ce(s.responseMessage),1)):U("",!0),to,c(b,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=e=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),ao])])])])])],64)}const No=Ne(Me,[["render",no],["__scopeId","data-v-a92914f0"]]);export{No as default};
