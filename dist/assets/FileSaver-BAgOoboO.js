import{s as P,a as T}from"./index-BPFPhdba.js";import{e as l,be as B,G as C,o as d,c as p,i as o,F as M,x as U,j as u,t as v,J as _}from"./index-BD8zqOrX.js";import{u as N}from"./permitapp-CAxBdX67.js";const E={class:"flex items-center justify-center flex-col"},V=o("label",{for:"muni",style:{color:"#eeebe5"}},[o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"For PDF Documents")])],-1),j=o("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"},null,-1),G=o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"Drag and drop files to here to upload.")],-1),I=[G],J={class:"flex flex-wrap gap-4"},L={class:"font-semibold text-ellipsis max-w-250 whitespace-nowrap overflow-hidden"},K={__name:"FileSaver",setup(O){var m,f;const g=N(),h=l(((f=(m=g.$state.permitapp[0])==null?void 0:m.formdt)==null?void 0:f.muniProc)||""),n=l([]),x=B();C();const y=l(0),b=l(0),c=l([]),S=e=>{e.dataTransfer.dropEffect="copy"},$=e=>{const r=x.config.locale.fileSizeTypes;if(e===0)return`0 ${r[0]}`;const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(3))} ${r[t]}`},k=async e=>{n.value=[...e.dataTransfer.files];for(const s of n.value)console.log(s),c.value.push(s),console.log(c.value);F()},z=e=>{n.value.splice(e,1)},w=e=>{b.value=y.value/1,e()};l(""),l(""),l("");const F=async()=>{for(const e of c.value){console.log("Uploading file:",e);const s=`https://dsr-pdfupload.s3.us-east-1.amazonaws.com/${h.value}/${e.name}`,a=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/pdf"},body:e});if(!a.ok){console.error(`Failed to upload ${e.name}. Status: ${a.status}`);continue}console.log(`Successfully uploaded ${e.name} to S3.`)}};return(e,s)=>{const a=P,r=T;return d(),p("div",{class:"dropzone",onDragover:_(S,["prevent"]),onDrop:_(k,["prevent"])},[o("div",E,[V,j,o("p",{class:"mt-6 mb-0",onUpload:s[0]||(s[0]=t=>e.onTemplatedUpload(t)),style:{color:"#eeebe5"}},I,32)]),o("div",J,[(d(!0),p(M,null,U(n.value,(t,i)=>(d(),p("div",{key:i+t.url+t.size,class:"p-8 rounded-border flex flex-col border border-surface items-center gap-4"},[o("div",null,[u(a,{onClick:s[1]||(s[1]=D=>w()),icon:"pi pi-cloud-upload",rounded:"",outlined:"",severity:"success",disabled:!n.value||n.value.length===0},null,8,["disabled"])]),o("span",L,v(t.name),1),o("div",null,v($(t.size)),1),u(r,{value:"Completed",class:"mt-4",severity:"success"}),u(a,{icon:"pi pi-times",onClick:D=>z(i),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])],32)}}};export{K as _};
