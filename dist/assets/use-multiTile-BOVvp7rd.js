import{s as U}from"./index-BOZh_74X.js";import{E as T,e as s,f as D,Y as j,h as B,w as F,g as H,ad as G,ae as O,o as P,c as Y,j as V,k,aj as x,i as L,I as J,ak as K,D as Q}from"./index-CgqPmceL.js";import{u as R,a as q}from"./useAxios-DmH4bscf.js";import{u as W}from"./useDripedge-Cddk4-Av.js";import{u as X}from"./roofList-CCsFWQ-O.js";import{a as Z}from"./use-tileMechanical-CpXhjaoq.js";const A=T("dripinputmecht",{state:()=>({dripinputmecht:[],dripMTileMaterial:[],selectDripEdges:"",selectDripEdgeSizes:"",id:2}),actions:{addMTileDrip(t){this.dripinputmecht.push({dripMTileData:t,completed:!1})},insertDripAtIndex(t,e){this.dripinputmecht.splice(t,0,{dripMTileMaterial:e,completed:!1})},resetState(){this.$reset(),this.dripMTileMaterial=[]}}});function ee(){const t=s([]),e=s([]),a=s([]),l=s([]),n=s(!1),o=s(null),u=s([]);n.value=!0;const r=A();let m="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/dripmaterials";const{execute:v,then:M,data:f}=R(m,{method:"GET"},{immediate:!1});return a.value=v().then(_=>{e.value=f.value.result,t.value=f.value.result.Drip_Edge_Material_Type;for(let g=0;g<t.value.length;g++)u.value.push(t.value[g]);return l.value.push(e.value.size1,e.value.size2,e.value.size3,e.value.size4),r.addMTileDrip(e),r.addMTileDrip(l),t.value}),n.value=!1,{dtype:u,error:o,loading:n,hold:t,results:a,typeSize:l,holdSized:e}}const le="https://myfawca4fj3ewpg5usmepe6toi0wuvlw.lambda-url.us-east-1.on.aws/";function te(){const t=s(null),e=s(!1);var a=s(null),l=s(null);s(null);var n=s(null),o=s(null);const{data:u,error:r,isFetching:m,execute:v}=R(le,{method:"POST",headers:{"Content-Type":"application/json"}},q,{immediate:!1});return{data:u,errors:t,isFetching:m,loading:e,postMech:async d=>{n.value=d,console.log(n.value),e.value=!0,r.value=null;try{return await v({data:n.value})}catch(c){r.value=c.massage,console.error("Lambda post failed:",c)}finally{e.value=!1}},postUDLMech:async d=>{a.value=d,console.log(a.value),e.value=!0,r.value=null;try{return await v({data:a.value})}catch(c){r.value=c.massage,console.error("Lambda post failed:",c)}finally{e.value=!1}},postSAMech:async d=>{l.value=d,console.log(l.value),e.value=!0,r.value=null;try{return await v({data:l.value})}catch(c){r.value=c.massage,console.error("Lambda post failed:",c)}finally{e.value=!1}},dripEdge:async d=>{var c,S;o.value=d,e.value=!0,r.value=null;try{return await v({data:o.value})}catch(i){if((S=(c=q).isCancel)!=null&&S.call(c,i)||(i==null?void 0:i.code)==="ERR_CANCELED"||(i==null?void 0:i.name)==="CanceledError")return console.debug("postMech aborted:",i.message),null;throw console.error("Lambda post failed:",i),i}finally{e.value=!1}}}}const ae={class:"flex flex-col w-96 mb-4 gap-3",style:{"margin-left":"20px"}},se=L("label",{style:{color:"#122620"}},"Drip Edge Material",-1),oe=L("label",{style:{color:"#122620"}},"Drip Edge Size",-1),ve={__name:"DripEdMechTile",emits:["update-valuesize"],setup(t,{emit:e}){const{selectDripEdge:a,selectDripEdgeSize:l,holdSize:n,type:o}=W(),{dripEdge:u}=te(),r=X(),m=s(r.$state.roofList),v=s();ee();const M=s(null),f=A();console.log(f);const _=e;let g=s(!1);const d=s(),c=D({DripEdgeMaterial:"",DripEdgeSize:""}),S=j(()=>{if(console.log(m.value),m.value.length===0)return"";for(let p=0;p<m.value.length;p++)m.value[p].item==="Mechanical Fastened Tile"&&(console.log(m.value[p].item),g.value=!0,v.value=o.value);h()}),i=D({DripEdgeMaterial:"",DripEdgeSize:""}),C=()=>{_("update-valuesize",l.value),i.DripEdgeSize=l.value,console.log(l.value),E()};B(()=>{console.log("Select element:",M.value),y()});function h(){for(let p=0;p<m.value.length;p++)m.value[p].item==="Mechanical Fastened Tile"&&(console.log(m.value[p].item),$())}function y(p){v.value=o.value,console.log(v.value,p)}function E(){console.log(a.value),a.value?(a.value==="Galvanized Steel Metal ¹"&&(d.value=n.value.size1,h()),a.value==="Stainless Steel Metal ²"&&(d.value=n.value.size2,h()),a.value==="Aluminum Metal ³"&&(d.value=n.value.size3,h()),a.value==="Copper Metal ⁴"&&(d.value=n.value.size4,h())):console.log("The element not mounted yet"),c.DripEdgeMaterial=a.value,c.DripEdgeSize=l.value,I(),h()}function $(){console.log(a.value),i.DripEdgeMaterial=a.value,console.log(i.DripEdgeMaterial),w()}const w=async p=>{console.log(i.DripEdgeSize),g.value===!0&&(i.DripEdgeSize=l.value,console.log(i.DripEdgeSize),f.insertDripAtIndex(5,i.DripEdgeMaterial),f.insertDripAtIndex(7,i.DripEdgeSize),console.log(f))},I=async()=>{await u(c)};return F(v,d,o),H(y,E),G(async()=>{await O(S).toBe(!0)}),(p,b)=>{const N=U;return P(),Y("div",ae,[se,V(N,{modelValue:k(a),"onUpdate:modelValue":[b[0]||(b[0]=z=>x(a)?a.value=z:null),y],options:v.value,placeholder:"make selection"},null,8,["modelValue","options"]),oe,V(N,{ref_key:"selectSizeRef",ref:M,modelValue:k(l),"onUpdate:modelValue":b[1]||(b[1]=z=>x(l)?l.value=z:null),options:d.value,onClick:E,onChange:C,onUpdateValuesize:w,placeholder:"make selection"},null,8,["modelValue","options"])])}}};function fe({min:t=null,max:e=null,required:a=!1}){const l=s(null);return{errorHeightMessage:l,validateTileHeight:o=>{const u=o;return t!==null&&u<t?(l.value=`Number must be greater than or equal to ${t}`,console.log("min",u,t),!1):e!==null&&u>=t&&u>=e?(l.value=`Number must be less than or equal to ${e}`,console.log("max",u),!1):a&&(o==null||o==="")?(l.value="This field is required",console.log("required"),!1):(l.value=null,!0)}}}function ge({min:t=null,max:e=null,required:a=!1}){const l=s(null);return{errorMessage:l,validateNumber:o=>{const u=o;return t!==null&&u<t?(l.value=`Number must be greater than or equal to ${t}`,!1):e!==null&&u>=t&&u>=e?(l.value=`Number must be less than or equal to ${e}`,console.log("max",u),!1):a&&(o==null||o==="")?(l.value="This field is required",console.log("required"),!1):(l.value=null,!0)}}}const ue=T("tileMechInput",{state:()=>({tileMechInput:[],id:0}),actions:{addSystem(t){this.tileMechInput.push({tileMechNumber:t,completed:!1})},reset(){this.$reset()}},getters:{tileMechNumber:t=>t.tileMechNumber}});function he(){let t=s([]);const e=ue(),a=s(""),l=D({noa:[]});function n(){r()}const o=J(()=>"https://h3gd9z0q32.execute-api.us-east-1.amazonaws.com/mechanicaltileNumberstaging"),{data:u}=K(o).get().json(),r=async()=>{l.noa=u,e.addSystem(l),console.log("System added")};return{tileMechNumber:l,fetchData:r,callNumber:n,errors:a,results:t,...Q(l),mechanicalStore:e}}const ne=T("multiinput",{state:()=>({multiinput:[],id:0}),actions:{addData(t){this.multiinput.push({multiData:t,completed:!1})},reset(){this.$reset()}}});function Me(){const t=s([]),e=s([]),a=D({select_tile:[],tile_map:[],table2_map:[],table2:"",noa:"",manufacturer:"",material:"",description:"",Table2:[],Table3:[],expiration_date:"",resistance:[],selection:"",select_tile:[],tile_map:[],tileType:"",table2_map:[],two_ten_d_RS_Nails:null,one_number_eight_screw:null,two_number_eight_screw:null,savedfastener:"",fastenerValues:[],height:null,area:null,slope:null,perimeter:null,decktype:null}),l=Z(),n=ne();function o(u,r){e.value=u.value,t.value=r,console.log(u,r),console.log(l),console.log(e.value[0].Table2.content),a.table2=e.value[0].Table2.content,a.select_tile=e.value[0].select_tile,a.table2_map=e.value[0].table2_map,a.tile_map=e.value[0].tile_map,console.log(a),n.addData(a)}return{multiTiles:a,workoutData:o,multiStore:n,getmechStore:l}}export{ve as _,he as a,te as b,ge as c,fe as d,Me as u};
