import{s as S}from"./index-DuUeQiQe.js";import{q as C,r as a,c as g,d as x,f as o,g as i,ao as z,e as P,y as U,ap as f,t as N,z as q}from"./index-CewCcbPS.js";import{u as B}from"./useAxios-CHeHjr5c.js";import{u as E}from"./permitapp-pVLixpiG.js";import"./index-C0fFiqeS.js";const D=C("downloadinput",{state:()=>({downloadinput:[],id:0}),actions:{addDownload(c){this.downloadinput.push({downloadData:c,completed:!1})},reset(){this.$reset()}}});function M(){const c=a(),p=a("");a([]);const l=a(),n=a("");let e="https://9sg5obrcp0.execute-api.us-east-1.amazonaws.com/downloadpdf/downloadpdf";const{execute:m,then:y,data:h}=B(e,{method:"GET"},{immediate:!1}),d=D();function v(r){c.value=r,p.value=c.value+"/",_()}const _=async()=>{try{const r=await m({params:{processnumber:p.value}}).then(w=>{l.value=h.value.download_url,console.log(h.value.download_url),console.log(l.value)});return d.addDownload(l.value),r}catch(r){console.log("Error, fectching data",r)}};return{error:n,getNumber:v,zip_download_url:l,store:d,fetchData:_}}const T={class:"card"},$={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"850px","margin-top":"440px"}},Y={class:"payment-widget"},G=o("h2",{style:{color:"black"}},"Credit Card Payment",-1),L={class:"form-group"},j=o("label",{for:"cardholder-name"},"Cardholder Name",-1),A={class:"form-group"},F=o("label",{for:"card-number"},"Card Number",-1),H={class:"form-group small-inputs"},I=o("label",{for:"expiry-date"},"Expiry Date",-1),J=o("label",{for:"cvv"},"CVV",-1),K=o("button",{type:"submit"},"Pay",-1),O={key:0,class:"confirmation"},Q=49.99,oe={__name:"Paymentgateway",setup(c){const p=E(),l=a(p.$state.permitapp[0].formdt.processNumber),n=l.value.length!==0?l.value:"files";console.log(n);const e=a({cardholderName:"",cardNumber:"",expiryDate:"",cvv:""}),m=a(!1),{getNumber:y,zip_download_url:h}=M(),d=a(!1),v=a(!1);console.log(n.value);const r=D(),w=a(""),k=()=>{if(y(n),console.log(n),!e.value.cardholderName||!e.value.cardNumber||!e.value.expiryDate||!e.value.cvv){alert("Please fill out all fields.");return}w.value=r.$state.downloadinput[0].downloadData,d.value=!0,m.value=!0,v.value=!0,setTimeout(()=>{e.value.cardholderName="",e.value.cardNumber="",e.value.expiryDate="",e.value.cvv="",d.value=!1},2e3),v.value=!1},V=()=>{const b=w.value;console.log(b);const t="processnumber.zip",u=document.createElement("a");u.href=b,u.download=t,u.click(),u.remove()};return(b,t)=>{const u=S;return g(),x("div",T,[o("div",$,[i(P(u,{icon:"pi-arrow-circle-down",label:"Link",variant:"Link",style:{color:"whitesmoke","background-color":"#020507"},onClick:V},null,512),[[z,m.value]]),o("div",Y,[G,o("form",{onSubmit:U(k,["prevent"])},[o("div",L,[j,i(o("input",{type:"text",id:"cardholder-name","onUpdate:modelValue":t[0]||(t[0]=s=>e.value.cardholderName=s),placeholder:"Boris Gomez",required:""},null,512),[[f,e.value.cardholderName]])]),o("div",A,[F,i(o("input",{type:"text",id:"card-number","onUpdate:modelValue":t[1]||(t[1]=s=>e.value.cardNumber=s),maxlength:"19",placeholder:"1234 5678 9012 3456",required:""},null,512),[[f,e.value.cardNumber]])]),o("div",H,[o("div",null,[I,i(o("input",{type:"text",id:"expiry-date","onUpdate:modelValue":t[2]||(t[2]=s=>e.value.expiryDate=s),maxlength:"5",placeholder:"MM/YY",required:""},null,512),[[f,e.value.expiryDate]])]),o("div",null,[J,i(o("input",{type:"text",id:"cvv","onUpdate:modelValue":t[3]||(t[3]=s=>e.value.cvv=s),maxlength:"4",placeholder:"123",required:""},null,512),[[f,e.value.cvv]])])]),K],32),d.value?(g(),x("div",O,[o("p",null,"Thank you, "+N(e.value.cardholderName)+"! Your payment of $"+N(Q)+" was processed.",1)])):q("",!0)])])])}}};export{oe as default};
