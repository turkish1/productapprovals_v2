import{s as B,a as C}from"./index-DE1lEZuq.js";import{e as l,bd as M,G as N,o as d,c as p,i as o,F as U,x as E,j as u,t as h,J as x}from"./index-j-3Mtl8U.js";import{u as V}from"./permitapp-C4qAN0Hc.js";const j={class:"flex items-center justify-center flex-col"},G=o("label",{for:"muni",style:{color:"#eeebe5"}},[o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"For PDF Documents")])],-1),I=o("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"},null,-1),J=o("a",{class:"underline decoration-sky-500"},[o("p",{class:"text-2xl ... font-bold ..."},"Drag and drop files to here to upload.")],-1),L=[J],O={class:"flex flex-wrap gap-4"},q={class:"font-semibold text-ellipsis max-w-250 whitespace-nowrap overflow-hidden"},R={__name:"FileSaver",setup(A){var f,v,_,g;const m=V();l(((v=(f=m.$state.permitapp[0])==null?void 0:f.formdt)==null?void 0:v.processNumber)||"");const b=l(((g=(_=m.$state.permitapp[0])==null?void 0:_.formdt)==null?void 0:g.muniProc)||""),a=l([]),y=M();N();const $=l(0),S=l(0),c=l([]),k=e=>{e.dataTransfer.dropEffect="copy"},z=e=>{const r=y.config.locale.fileSizeTypes;if(e===0)return`0 ${r[0]}`;const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(3))} ${r[t]}`},w=async e=>{a.value=[...e.dataTransfer.files];for(const s of a.value)console.log(s),c.value.push(s),console.log(c.value);P()},F=e=>{a.value.splice(e,1)},D=e=>{S.value=$.value/1,e()};l(""),l(""),l("");const P=async()=>{for(const e of c.value){console.log("Uploading file:",e);const s=`https://dsr-pdfupload.s3.us-east-1.amazonaws.com/${b.value}/${e.name}`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/pdf"},body:e});if(!n.ok){console.error(`Failed to upload ${e.name}. Status: ${n.status}`);continue}console.log(`Successfully uploaded ${e.name} to S3.`)}};return(e,s)=>{const n=B,r=C;return d(),p("div",{class:"dropzone",onDragover:x(k,["prevent"]),onDrop:x(w,["prevent"])},[o("div",j,[G,I,o("p",{class:"mt-6 mb-0",onUpload:s[0]||(s[0]=t=>e.onTemplatedUpload(t)),style:{color:"#eeebe5"}},L,32)]),o("div",O,[(d(!0),p(U,null,E(a.value,(t,i)=>(d(),p("div",{key:i+t.url+t.size,class:"p-8 rounded-border flex flex-col border border-surface items-center gap-4"},[o("div",null,[u(n,{onClick:s[1]||(s[1]=T=>D()),icon:"pi pi-cloud-upload",rounded:"",outlined:"",severity:"success",disabled:!a.value||a.value.length===0},null,8,["disabled"])]),o("span",q,h(t.name),1),o("div",null,h(z(t.size)),1),u(r,{value:"Completed",class:"mt-4",severity:"success"}),u(n,{icon:"pi pi-times",onClick:T=>F(i),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])],32)}}};export{R as _};
