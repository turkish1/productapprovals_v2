import{r as v,b as w,c as _,e as u,f,aq as S,v as g,bh as R,d as I}from"./index-AIAbxts-.js";import{a as T}from"./axios-I_wKO6Q1.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";var V="v3",U=function(e){return e===3?"v3":e},P="https://js.stripe.com",C="".concat(P,"/v3"),N=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,M=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,y="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",D=function(e){return N.test(e)||M.test(e)},A=function(){for(var e=document.querySelectorAll('script[src^="'.concat(P,'"]')),r=0;r<e.length;r++){var t=e[r];if(D(t.src))return t}return null},h=function(e){var r="",t=document.createElement("script");t.src="".concat(C).concat(r);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},G=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:r})},c=null,p=null,m=null,q=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},B=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},F=function(e){return c!==null?c:(c=new Promise(function(r,t){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(y),window.Stripe){r(window.Stripe);return}try{var n=A();if(n&&e)console.warn(y);else if(!n)n=h(e);else if(n&&m!==null&&p!==null){var i;n.removeEventListener("load",m),n.removeEventListener("error",p),(i=n.parentNode)===null||i===void 0||i.removeChild(n),n=h(e)}m=B(r,t),p=q(t),n.addEventListener("load",m),n.addEventListener("error",p)}catch(a){t(a);return}}),c.catch(function(r){return c=null,Promise.reject(r)}))},J=function(e,r,t){if(e===null)return null;var n=r[0],i=n.match(/^pk_test/),a=U(e.version),s=V;i&&a!==s&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=e.apply(void 0,r);return G(d,t),d},l,x=!1,b=function(){return l||(l=F(null).catch(function(e){return l=null,Promise.reject(e)}),l)};Promise.resolve().then(function(){return b()}).catch(function(o){x||console.warn(o)});var W=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];x=!0;var n=Date.now();return b().then(function(i){return J(i,r,n)})};const $=async o=>(await T.post("/api/create-payment-intent",{amount:o})).data.clientSecret,k={setup(){const o=v(""),e=v(""),r=v("");return{cardNumber:o,expiryDate:e,cvc:r,handlePayment:async()=>{const n=await W("your-publishable-key-here"),i=await $(1e3),a={number:o.value,exp_month:parseInt(e.value.split("/")[0]),exp_year:parseInt(e.value.split("/")[1]),cvc:r.value},{error:s,paymentIntent:d}=await n.createPaymentMethod({type:"card",card:a}).then(j=>n.confirmCardPayment(i,{payment_method:j.paymentMethod.id}));s?console.error(s):d.status==="succeeded"?alert("Payment successful!"):alert("Payment failed.")}}}},X=u("button",{type:"submit"},"Pay",-1);function O(o,e,r,t,n,i){return w(),_("div",null,[u("form",{onSubmit:e[3]||(e[3]=g((...a)=>t.handlePayment&&t.handlePayment(...a),["prevent"]))},[f(u("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.cardNumber=a),type:"text",placeholder:"Card Number"},null,512),[[S,t.cardNumber]]),f(u("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.expiryDate=a),type:"text",placeholder:"Expiry Date (MM/YY)"},null,512),[[S,t.expiryDate]]),f(u("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.cvc=a),type:"text",placeholder:"CVC"},null,512),[[S,t.cvc]]),X],32)])}const L=E(k,[["render",O]]),Y=R({components:{PaymentForm:L}}),z={id:"app"};function K(o,e,r,t,n,i){const a=L;return w(),_("div",z,[I(a)])}const ee=E(Y,[["render",K]]);export{ee as default};
