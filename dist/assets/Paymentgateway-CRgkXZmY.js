import{e,_ as w,ad as C,z as D,o as E,a as R,v as V,x as O,k as _,f as N,H as $,J as A,h as M,ae as B,af as Q,c as G,M as I,ag as Z,j as F,i as x,ah as j,ai as z}from"./index-PV4IfQic.js";import{u as L,a as T,b as H}from"./pdfsignStore-Dmc_NDa8.js";import{u as Y}from"./permitapp-CuLdRTV7.js";import{u as J}from"./useAxios-60L-vhiw.js";import{c as U}from"./countStore-Dhr2OSGN.js";const X={__name:"BuyButton",setup(c){var r,l;const d=Y(),o=e(((l=(r=d.$state.permitapp[0])==null?void 0:r.formdt)==null?void 0:l.muniProc)||""),u="pk_test_51PDPFeE9FsYF7D6YfBrV7kYvnDYIAR5QQfaR8ba5TGnoQAbEQgSeY7DLwhOZafrl8ZXJOPsbZN9tYl5HMLlhkxB100cmCtoWo7",{secondFetch:a}=L(),s="buy_btn_1RVdS4E9FsYF7D6YupNeXupi",i=e(!1);w(()=>{setTimeout(()=>{i.value=!0},1e3),a(o.value),i.value=!1,p()}),C("my-storage",{processNumber:o.value});const p=async m=>{console.log("Entered CaptureSession",m),new URL(window.location.href)};return(m,g)=>{const f=D("stripe-buy-button");return E(),R(f,{"buy-button-id":_(s),"publishable-key":_(u)},{default:V(()=>[O("Pay")]),_:1},8,["buy-button-id","publishable-key"])}}};function K(){const c=e(),d=e(""),o=e(""),u=e(""),a=N({status:"",message:"",isFinished:"",isLoading:""}),s=N({status:"",message:"",isFinished:"",isLoading:""}),i=e("");let p="https://4cgf7owinctxji4vx56hnisxh40iskps.lambda-url.us-east-1.on.aws/";const{execute:r,then:l,data:m}=J(p,{method:"GET"},{immediate:!1});function g(t){if(c.value=t,o.value=c.value+"/",o.value==="undefined/")return""}const{confirmResponse:f,addResponse:h}=T();function v(t){console.log(t),u.value=t+"/",b()}const b=async()=>{try{const t=await r({params:{processnumber:u.value}}).then(n=>{console.log(n),s.status=n.response.value.status,s.message=n.data.value,s.isFinished=n.isFinished,s.isLoading=n.isLoading});h(s)}catch(t){console.log("Error, fectching data",t)}};return{error:i,getNumbers:g,sendProc:u,getSignpdf:v,fetchSignPdf:b,sentInput:d,result:s,confirmResponse:f,results:a}}const W=$("sessioninput",{state:()=>({sessioninput:[],id:0}),actions:{addSession(c){this.sessioninput.push({sessionData:c,completed:!1})}}}),q={class:"card-system"},ee={class:"flex flex-col w-1/2 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"300px","margin-top":"200px"}},se={class:"payment-widget"},te=x("h2",{style:{color:"black"}},"Credit Card Payment",-1),ie={__name:"Paymentgateway",setup(c){var P,k;const d=Y();W();const o=U(),u=e(0),a=e(((k=(P=d.$state.permitapp[0])==null?void 0:P.formdt)==null?void 0:k.muniProc)||"");e(!1);const s=e(!1),i=e(!1),p=e(!1),r=e(!1),l=e(!1),{getSignpdf:m}=K(),g=w(()=>{setTimeout(()=>{l.value=!0},2e3),m(v.value.processNumber),console.log(a.value)}),f=H();A(f.$state);const{resp:h}=T();M(()=>{var y,S;u.value=1,((S=(y=h.value)==null?void 0:y.status)==null?void 0:S.status)===200&&(p.value=!0,console.log(h.value.status.status))});const v=C("my-storage",{processNumber:a.value}),{getNumber:b,secondFetch:t}=L(),n=w(()=>{t(v.value.processNumber),o.addCount(a.value),console.log(o.$state),setTimeout(()=>{r.value=!0},1e3),console.log(a.value),i.value=!0});return B(n,()=>{}),B(g,()=>{}),Q(async()=>{await j(l).toBe(!0)}),(y,S)=>(E(),G("div",q,[I(F(_(z),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[Z,s.value]]),x("div",ee,[x("div",se,[te,F(X,{onClick:_(n)},null,8,["onClick"])])])]))}};export{ie as default};
