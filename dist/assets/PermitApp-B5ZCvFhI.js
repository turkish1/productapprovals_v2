import{T as Q}from"./index-vwj9G8Jb.js";import{s as X}from"./index-DuTs0ifl.js";import{s as Y}from"./index-BAgmcMjX.js";import{s as Z}from"./index-CYYWrO-X.js";import{s as $}from"./index-DnGreqLG.js";import{s as ee}from"./index-CM5QBXxM.js";import{u as oe,a as se,b as B,_ as le}from"./use-createProcessnumber-C-w_vft7.js";import{u as te}from"./accountsStore-CB8Lzx5g.js";import{u as ae}from"./permitapp-Bl5YahaJ.js";import{r as a,u as ne,a as re,o as E,A as ie,a8 as ce,a9 as L,as as T,n as de,c as u,d as A,l as N,z as U,f as e,e as c,g as me,i as ue,t as pe,F as fe,a7 as ve,am as ye,p as ge,j as be}from"./index-CgNQnJ6L.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Dyb14ImA.js";import"./index-D6IC_tKW.js";import"./index-B2u7HEDz.js";import"./index-DL8GpLhZ.js";import"./index-CF-4BZst.js";import"./index-CvRNTRHp.js";import"./index-DiEwfU-M.js";import"./index-aKk477FY.js";import"./useAxios-BA6bsTvR.js";import"./processStore-BNBIdHQr.js";a(1);const he={setup(){const t=a(""),o=ne(),v=a(!1),l=a(),{procData:j,procReceive:g}=oe(),{accountUsers:r,getUser:b,addUser:d}=te();console.log(r._value[0]);const p=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),_=a("me"),h=ae(),n=re({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),s=a(!0),I=a(""),M=a(""),V=a(""),C=a(""),D=a("");E(()=>{ie.init({duration:800,easing:"ease-in-out",once:!0})}),ce(()=>{if(r._value[0].name==="")return o.push("/");v.value=!0,I.value=r._value[0].name,M.value=r._value[0].email,V.value=r._value[0].phone,C.value=r._value[0].secondary_status,D.value=r._value[0].dba});const x=L(()=>s.value===!0?p.value[0]:""),w=a(!1);se();const{lastNum:S,resNum:F}=B();V.value=r._value[0].phone,a(null);const f=a(""),P=a("");E(()=>{v.value=!0});const R=L(()=>n.permit.slice(0,3));console.log(R),s.value=R.value==="ccc",console.log(s),a(!1);const O=async()=>{try{w.value=!0,console.log(w.value);const m=a(n.address),q=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,k=await(await fetch(q)).json();console.log(k),n.muni=k.MinimumPropertyInfos[0].Municipality,n.license=r._value[0].license,n.contractor=r._value[0].name,n.folio=k.MinimumPropertyInfos[0].Strap,console.log(S.value);let H=String(S.value).substring(2,13);n.permit=x.value;let J=ve(H).value+1,K=String(J);n.processNumber=_.value.concat(K),console.log(n.processNumber),P.value=n.folio,f.value=P.value.substring(1,2),console.log(f.value),g(n),setTimeout(()=>{w.value=!1},2e3)}catch(m){alert(m)}},z=async()=>{g(n)},G=()=>{o.push("/roofsystem")};function W(m,y){m=n,y=x.value,m.length!==0&&(h.addSystem(m,y,f.value),console.log(m,y,f.value,"System added"))}return T(async()=>{}),{isDialog:v,onSubmit:z,accountUsers:r,getUser:b,email:M,dba:D,invoke:T,phone:V,contractor:I,licenseStatus:C,addUser:d,navigateNext:G,addItemAndClear:W,selectedApplication:x,type:p,resNum:F,...de(n),responseMessage:t,lastNum:S,useLast:B,load:O,checkMB:f,checkV:P,content:l}}},i=t=>(ge("data-v-734f17c9"),t=t(),be(),t),Ve={class:"grid grid-cols-2 gap-0"},xe={class:"container md:w-2/3",style:{"margin-left":"130px"}},we={class:"row"},Se={class:"flex mt-4 space-y-2 flex-col gap-1"},Pe=i(()=>e("div",{class:"font-semibold text-xl",style:{color:"#eae7e2"}},"Permit Application",-1)),ke={class:"flex justify-center"},Ae={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Ne=i(()=>e("label",{for:"license",style:{color:"#eae7e2"}},"License Status",-1)),Ue={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Ie={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-2"},Me=i(()=>e("label",{for:"addr",style:{color:"#eae7e2"}},"Property Address",-1)),Ce={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},De={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Re=i(()=>e("label",{for:"dba",style:{color:"#eae7e2"}},"DBA ",-1)),Be={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ee=i(()=>e("label",{for:"contractor",style:{color:"#eae7e2"}},"Contractor Name",-1)),Le={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Te=i(()=>e("label",{for:"phone",style:{color:"#eae7e2"}},"Cell Phone Number",-1)),je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Fe=i(()=>e("label",{for:"Email",style:{color:"#eae7e2"}},"Email",-1)),Oe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=i(()=>e("label",{for:"muni",style:{color:"#eae7e2"}},"Municipality",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},We=i(()=>e("label",{for:"folio",style:{color:"#eae7e2"}},"Folio",-1)),qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=i(()=>e("label",{for:"permit",style:{color:"#eae7e2"}},"Master Permit",-1)),Je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ke=i(()=>e("label",{for:"processnum",style:{color:"#eae7e2"}},"mEProcess Number",-1)),Qe={key:0},Xe=i(()=>e("br",null,null,-1)),Ye=i(()=>e("br",null,null,-1));function Ze(t,o,v,l,j,g){const r=le,b=ee,d=$,p=Z,_=Y,h=X,n=Q;return u(),A(fe,null,[l.isDialog?(u(),N(r,{key:0})):U("",!0),e("div",Ve,[e("div",xe,[e("form",null,[e("div",we,[e("div",Se,[Pe,e("div",ke,[c(b,{modelValue:l.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=s=>l.selectedApplication=s),options:l.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",Ae,[Ne,c(d,{id:"license",modelValue:l.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=s=>l.licenseStatus=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ue,[e("form",{class:"w-2/3",onSubmit:o[12]||(o[12]=(...s)=>l.onSubmit&&l.onSubmit(...s))},[e("div",Ie,[Me,me(c(d,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=s=>t.address=s),placeholder:"address"},null,8,["modelValue"]),[[n,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),t.loading?(u(),A("i",Ce)):(u(),N(p,{key:0,id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:l.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",De,[Re,c(d,{id:"dba",modelValue:l.dba,"onUpdate:modelValue":o[3]||(o[3]=s=>l.dba=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Be,[Ee,c(d,{id:"contractor",modelValue:l.contractor,"onUpdate:modelValue":o[4]||(o[4]=s=>l.contractor=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Le,[Te,c(_,{modelValue:l.phone,"onUpdate:modelValue":o[5]||(o[5]=s=>l.phone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:l.phone===""},null,8,["modelValue","invalid"])]),e("div",je,[Fe,c(d,{modelValue:l.email,"onUpdate:modelValue":o[6]||(o[6]=s=>l.email=s),invalid:l.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(u(),N(h,{key:0,severity:"error"},{default:ue(()=>[ye("Email is required")]),_:1})):U("",!0)]),e("div",Oe,[ze,c(d,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[7]||(o[7]=s=>t.muni=s),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",Ge,[We,c(d,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[8]||(o[8]=s=>t.folio=s),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",qe,[He,c(d,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[9]||(o[9]=s=>t.permit=s),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",Je,[Ke,c(d,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[10]||(o[10]=s=>t.processNumber=s),type:"text",placeholder:"process number"},null,8,["modelValue"])]),l.responseMessage?(u(),A("p",Qe,pe(l.responseMessage),1)):U("",!0),Xe,c(p,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=s=>l.addItemAndClear(t.formData,l.selectedApplication))})],32),Ye])])])])])])],64)}const So=_e(he,[["render",Ze],["__scopeId","data-v-734f17c9"]]);export{So as default};
