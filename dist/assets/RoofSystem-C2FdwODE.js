import{_ as W}from"./FileSaver-mWgIr5Vx.js";import{H as K,e as m,f as L,D as X,g as N,o as i,c as f,i as e,F as G,x as P,t as w,n as J,J as z,k,I as E,Y as Z,v as ee,K as te,a as se,S as U,j as h,d as j,T as oe,p as ae,q as le,A as ne}from"./index-DKVSdg1j.js";import{s as Y}from"./index-DO4r6JvV.js";import{u as ie}from"./usePostGeneralpageLambda-BHr0m7mB.js";import{u as re}from"./generalpageStore-DNyhUMdE.js";import{u as Q}from"./permitapp-jOTQvmn0.js";import{u as O}from"./roofList-D1QPC6g3.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as H}from"./index-CWYbw1RK.js";import{s as ce}from"./index-DrlnFe7b.js";import{s as de}from"./index-BTWWFby1.js";import{s as pe}from"./index-HicS1qql.js";import"./useAxios-DrqbPnrz.js";import"./index-CT1CVUKW.js";import"./index-C9xIShlR.js";import"./index-Bmu6IduS.js";import"./index-DGTb9GdE.js";import"./index-D0J4_w7N.js";function ue(){var A,M,I;const _=O(),{roofList:b}=K(_),x=Q(),v=m((I=(M=(A=x.$state.permitapp)==null?void 0:A[0])==null?void 0:M.formdt)==null?void 0:I.processNumber);m(!1);const r=re(),{postGeneral:l}=ie(),c=m(null),d=m(r.$state.generalpdfinput),g=m(!1),s=L({mtile:!1,adtile:!1,shingle:!1,metal:!1,slope:!1}),o=L({steep1:0,steep2:0,steep3:0,steep4:0,low1:0}),p=L({steep:0,lowslope:0,total:0}),u=L({steepData:"",slopeData:"",totalData:"",checkedmtile:!1,checkedmetal:!1,checkedslp:!1,checkedadtile:!1,checkedshingle:!1,roofCheck:"",area:"",processnumber:""});function D(B){c.value=B.value,console.log(c.value);const F={"Asphalt Shingle":{dim:"dim1",flag:"shingle",steepKey:"steep1"},"Adhesive Set Tile":{dim:"dim4",flag:"adtile",steepKey:"steep2"},"Mechanical Fastened Tile":{dim:"dim3",flag:"mtile",steepKey:"steep3"},"Metal Panel":{dim:"dim5",flag:"metal",steepKey:"steep4"},"Low Slope":{dim:"dim2",flag:"slope"}};Object.keys(s).forEach(y=>s[y]=!1),Object.keys(o).forEach(y=>o[y]=0),b.value.forEach(y=>{const S=F[y.item];if(S){const T=Number(y[S.dim])||0;s[S.flag]=!0,u[`${S.flag}Chk`]=!0,console.log(S.flag),S.flag==="slope"?o.low1=T:o[S.steepKey]=T}}),C()}async function C(){p.steep=o.steep1+o.steep2+o.steep3+o.steep4,p.lowslope=o.low1,p.total=p.steep+p.lowslope,u.area=p.total,u.steepData=p.steep,u.slopeData=p.lowslope,u.totalData=p.total,u.roofCheck=c.value,u.processnumber=v.value,r.addgeneralpdfData(u),await l(u),g.value=!0}return{addRoof:D,roofArea:C,dataGeneral:u,generalType:d,isGeneralPageValid:g}}const me=X("roofinput",{state:()=>({roofinput:[],id:0}),actions:{addCheck(_){this.roofinput.push({roofCheckdata:_,completed:!1})},reset(){this.roofinput=[]},persist:!0}}),fe={class:"terminal"},_e={class:"terminal-content"},he={class:"content"},ve=["onClick"],ge=20,Se={__name:"RoofSystemList",setup(_){const b=O(),{roofList:x}=K(b),{toggleCompleted:v}=K(b),r=["Initializing system...","Loading modules...","Connecting to server...","Server connection established.","Awaiting Roof System Selection..."],l=m([]);function c(){let d=0;const g=setInterval(()=>{d<r.length?(l.value.length>=ge&&l.value.shift(),l.value.push(r[d]),console.log(r[d]),d++):clearInterval(g)},500)}return N(()=>{c()}),(d,g)=>(i(),f("div",fe,[e("div",_e,[(i(!0),f(G,null,P(l.value,(s,o)=>(i(),f("div",{key:o,class:"terminal-line"},w(s),1))),128)),(i(!0),f(G,null,P(k(x),s=>(i(),f("div",{key:s.id,class:"item"},[e("div",he,[e("span",{class:J({completed:s.completed}),style:{color:"green"}},w(s.item)+" "+w(s.dim1)+" "+w(s.dim2)+" "+w(s.dim3)+" "+w(s.dim4)+" "+w(s.dim5),3),e("span",{onClick:z(o=>k(v)(s.id),["stop"])},"âœ”",8,ve)])]))),128))])]))}},ye=q(Se,[["__scopeId","data-v-0eaf742f"]]),$=_=>(ae("data-v-7023ec3c"),_=_(),le(),_),ke={class:"page"},be={class:"card"},we={class:"card__header"},$e=$(()=>e("h2",null,"Roof System",-1)),xe=$(()=>e("i",{class:"pi pi-refresh"},null,-1)),Ce={class:"form"},Re={class:"field"},Te=$(()=>e("label",{for:"sqft"},"Square Footage",-1)),Ve={class:"field"},Le=$(()=>e("label",{for:"system"},"Roof System",-1)),De={key:0,class:"hint"},Ae={class:"field row"},Me={class:"check"},Ie=$(()=>e("label",{for:"kind-new"},"New Roof",-1)),Be={class:"check"},Fe=$(()=>e("label",{for:"kind-reroof"},"Re-Roof",-1)),Ke={class:"actions"},Ge={class:"side"},Pe=$(()=>e("p",{class:"dz-title"},"Blueprints & images",-1)),ze=$(()=>e("p",{class:"dz-sub"},"Drag & drop files here, or click to select",-1)),Ne={key:0,class:"dz-list"},Oe={__name:"RoofSystemForm",setup(_){var y,S,T;const b=Q(),x=me(),v=O(),r=m(""),l=m(null),c=m(""),d=m(!1),g=m([]),{addRoof:s}=ue(),o=L({roofCheck:""}),p=[{name:"Asphalt Shingle"},{name:"Low Slope"},{name:"Mechanical Fastened Tile"},{name:"Adhesive Set Tile"},{name:"Metal Panel"}],u=m((T=(S=(y=b.$state.permitapp)==null?void 0:y[0])==null?void 0:S.formdt)==null?void 0:T.checkIfBeach),D=E(()=>Z(u.value).value===2),C=E(()=>D.value?p.slice(1):p);function A(R){var a;if(!R||r.value==0)return;const t=l.value.name,n=Number(r.value),V={"Asphalt Shingle":()=>v.addSystemShingle(t,n),"Low Slope":()=>v.addSystemBur(t,n),"Mechanical Fastened Tile":()=>v.addSystemMTile(t,n),"Adhesive Set Tile":()=>v.addSystemATile(t,n),"Metal Panel":()=>v.addSystemMetal(t,n)};(a=V[t])==null||a.call(V),o.roofCheck=c.value,x.addCheck({...o}),r.value="",l.value=null}function M(){s(c)}function I(){v.$reset()}function B(R){var n;d.value=!1;const t=[...((n=R.dataTransfer)==null?void 0:n.files)||[]];t.length&&(g.value=t)}function F(R){var n;const t=[...((n=R.target)==null?void 0:n.files)||[]];t.length&&(g.value=t)}return N(()=>{!l.value&&C.value.length&&(l.value=C.value[0])}),(R,t)=>{const n=ee("RouterLink"),V=oe;return i(),f("main",ke,[e("section",be,[e("header",we,[$e,te((i(),se(k(H),{class:"icon",text:"",plain:"",onClick:I},{default:U(()=>[xe]),_:1})),[[V,"Reset list",void 0,{bottom:!0}]])]),e("div",Ce,[e("div",Re,[Te,h(k(de),{id:"sqft",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),type:"number",inputmode:"numeric",placeholder:"e.g. 1200"},null,8,["modelValue"])]),e("div",Ve,[Le,h(k(pe),{id:"system",class:"w-full",options:C.value,optionLabel:"name",modelValue:l.value,"onUpdate:modelValue":[t[1]||(t[1]=a=>l.value=a),A],placeholder:"Select roof system"},null,8,["options","modelValue"]),D.value?(i(),f("small",De,"Miami Beach restrictions apply.")):j("",!0)]),e("div",Ae,[e("div",Me,[h(k(Y),{inputId:"kind-new",name:"roofKind",value:"newroof",modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=a=>c.value=a)},null,8,["modelValue"]),Ie]),e("div",Be,[h(k(Y),{inputId:"kind-reroof",name:"roofKind",value:"reroof",modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=a=>c.value=a)},null,8,["modelValue"]),Fe])]),e("div",Ke,[h(n,{to:"/dynamicstepper"},{default:U(()=>[h(k(H),{severity:"contrast",label:"Continue",onClick:M})]),_:1})])]),h(k(ce)),h(ye)]),e("section",Ge,[e("div",{class:J(["dropzone",{over:d.value}]),onDragover:t[4]||(t[4]=z(a=>d.value=!0,["prevent"])),onDragleave:t[5]||(t[5]=a=>d.value=!1),onDrop:z(B,["prevent"])},[Pe,ze,e("input",{type:"file",class:"dz-input",multiple:"",onChange:F},null,32),g.value.length?(i(),f("ul",Ne,[(i(!0),f(G,null,P(g.value,a=>(i(),f("li",{key:a.name},w(a.name),1))),128))])):j("",!0)],34)])])}}},qe=q(Oe,[["__scopeId","data-v-7023ec3c"]]),Ee={id:"id",class:"grid grid-cols-3 gap-6"},Ue={class:"roof-app",style:{"margin-left":"250px","margin-top":"20px",border:"none","border-radius":"12px","box-shadow":"4px 4px 16px rgb(22, 183, 183)","padding-bottom":"10px",position:"center","max-height":"600px",width:"600px",top:"10vh"}},je={__name:"RoofSystemApp",setup(_){return N(()=>{ne.init({duration:4500,easing:"ease-in-out",once:!1})}),(b,x)=>(i(),f("div",Ee,[e("div",Ue,[h(qe)])]))}},Ye=q(je,[["__scopeId","data-v-aebd1914"]]),He={class:"grid grid-cols-2 gap-0"},Je={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}},ft={__name:"RoofSystem",setup(_){return(b,x)=>(i(),f("div",He,[h(Ye),e("div",Je,[h(W)])]))}};export{ft as default};
