import{s as R}from"./index-Dhfs9yn5.js";import{u as $}from"./useDripedge-xC7NxJDU.js";import{D as V,e as n,f as E,Z as C,g as I,V as j,w as B,ae as F,af as H,o as L,c as A,j as T,k as w,ak as N,i as _,I as O,al as P,C as G}from"./index-Cha2vzJU.js";import{u as Z}from"./roofList-BleggKZJ.js";import{u as J,a as K}from"./useAxios-zAhj7I5e.js";const Q=V("dripinputmaterial",{state:()=>({dripinputmaterial:[],dripMTileMaterial:[],dripinputsize:[],inputselectedUserDripEdge:[],selectedDripSize:[],id:2}),actions:{addMTileDrip(e){this.dripinputmaterial.push({dripMTileData:e,completed:!1})},addSTileDrip(e){this.dripinputsize.push({selectedDripSizenew:e,completed:!1})},insertDripAtIndex(e,s){this.dripinputmaterial.splice(e,0,{dripMTileMaterial:s,completed:!1})},addUseritems(e){this.inputselectedUserDripEdge.push({dripSelection:e,completed:!1})},resetState(){console.log("reset was called: ",this.inputselectedUserDripEdge),this.inputselectedUserDripEdge=[],console.log("reset was called: ",this.inputselectedUserDripEdge)}}}),W={class:"flex flex-col w-96 mb-4 gap-3",style:{"margin-left":"20px"}},X=_("label",{style:{color:"#122620"}},"Drip Edge Material",-1),Y=_("label",{style:{color:"#122620"}},"Drip Edge Size",-1),ne={__name:"DripEdMechTile",emits:["update-valuesize"],setup(e,{emit:s}){const{selectDripEdge:a,selectDripEdgeSize:l,type:d,sizeTypeMetal:i}=$(),o=Z(),r=n(o.$state.roofList),u=n(),h=n(null),p=Q(),g=s;let t=n(!1);const m=n(),M=E({DripEdgeMaterial:"",DripEdgeSize:""}),k=C(()=>{if(r.value.length===0)return"";for(let c=0;c<r.value.length;c++)r.value[c].item==="Mechanical Fastened Tile"&&(t.value=!0,u.value=d.value);f()}),y=E({DripEdgeMaterial:"",DripEdgeSize:""}),q=()=>{g("update-valuesize",l.value),y.DripEdgeSize=l.value,D()};I(()=>{S()});function f(){for(let c=0;c<r.value.length;c++)r.value[c].item==="Mechanical Fastened Tile"&&console.log(r.value[c].item);x()}function S(){u.value=d.value}async function D(){a.value?(a.value==="Galvanized Steel Metal ¹"&&(m.value=i.galvanized,f()),a.value==="Stainless Steel Metal ²"&&(m.value=i.stainless,f()),a.value==="Aluminum Metal ³"&&(m.value=i.aluminum,f()),a.value==="Copper Metal ⁴"&&(m.value=i.copper,f())):console.log("The element not mounted yet"),M.DripEdgeMaterial=a.value,M.DripEdgeSize=l.value,f()}function x(){y.DripEdgeMaterial=a.value,U()}const U=async c=>{p.resetState(),p.addUseritems(M),console.log(p)};return j(u,m,d),B(S,D),F(async()=>{await H(k).toBe(!0)}),(c,v)=>{const z=R;return L(),A("div",W,[X,T(z,{modelValue:w(a),"onUpdate:modelValue":[v[0]||(v[0]=b=>N(a)?a.value=b:null),S],options:u.value,placeholder:"make selection"},null,8,["modelValue","options"]),Y,T(z,{ref_key:"selectSizeRef",ref:h,modelValue:w(l),"onUpdate:modelValue":v[1]||(v[1]=b=>N(l)?l.value=b:null),options:m.value,onClick:D,onChange:q,placeholder:"make selection"},null,8,["modelValue","options"])])}}},ee="https://myfawca4fj3ewpg5usmepe6toi0wuvlw.lambda-url.us-east-1.on.aws/";function re(){const e=n(null),s=n(!1),{data:a,error:l,isFetching:d,execute:i}=J(ee,{method:"POST",headers:{"Content-Type":"application/json"}},K,{immediate:!1}),o=async(u,h)=>{var p,g;s.value=!0,e.value=null,console.log(u,h);try{const t=await i({data:u});return console.log(t==null?void 0:t.data,a==null?void 0:a.value),(t==null?void 0:t.data)??a.value}catch(t){throw console.error(`Lambda ${h} failed:`,{message:t==null?void 0:t.message,code:t==null?void 0:t.code,status:(p=t==null?void 0:t.response)==null?void 0:p.status,data:(g=t==null?void 0:t.response)==null?void 0:g.data,...existing,body:u}),e.value=(t==null?void 0:t.message)||"Request failed",t}finally{s.value=!1}};return{data:a,errors:e,isFetching:d,loading:s,postMech:u=>o(u,"postMech")}}function ue({min:e=null,max:s=null,required:a=!1}){const l=n(null);return{errorHeightMessage:l,validateTileHeight:i=>{const o=i;return e!==null&&o<e?(l.value=`Number must be greater than or equal to ${e}`,console.log("min",o,e),!1):s!==null&&o>=e&&o>=s?(l.value=`Number must be less than or equal to ${s}`,console.log("max",o),!1):a&&(i==null||i==="")?(l.value="This field is required",console.log("required"),!1):(l.value=null,!0)}}}function ce({min:e=null,max:s=null,required:a=!1}){const l=n(null);return{errorMessage:l,validateNumber:i=>{const o=i;return e!==null&&o<e?(l.value=`Number must be greater than or equal to ${e}`,!1):s!==null&&o>=e&&o>=s?(l.value=`Number must be less than or equal to ${s}`,console.log("max",o),!1):a&&(i==null||i==="")?(l.value="This field is required",console.log("required"),!1):(l.value=null,!0)}}}const te=V("tileMechInput",{state:()=>({tileMechInput:[],id:0}),actions:{addSystem(e){this.tileMechInput.push({tileMechNumber:e,completed:!1})},reset(){this.$reset()}},getters:{tileMechNumber:e=>e.tileMechNumber}});function de(){let e=n([]);const s=te(),a=n(""),l=E({noa:[]});function d(){r()}const i=O(()=>"https://h3gd9z0q32.execute-api.us-east-1.amazonaws.com/mechanicaltileNumberstaging"),{data:o}=P(i).get().json(),r=async()=>{l.noa=o,s.addSystem(l),console.log("System added")};return{tileMechNumber:l,fetchData:r,callNumber:d,errors:a,results:e,...G(l),mechanicalStore:s}}export{ne as _,re as a,ce as b,ue as c,Q as d,de as u};
