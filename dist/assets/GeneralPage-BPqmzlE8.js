import{s as Ax}from"./index-DrLIm6gS.js";import{q as Lx,o as na,c as fs,v as _o,d as Qn,B as Zh,am as jm,av as Hm,aw as Fx,E as Ey,I as Xh,J as Ay,b as Hi,P as zx,ax as Dx,K as qa,L as ud,M as dd,ay as pd,m as E1,az as Bx,_ as Ly,s as Gm,u as Ox,r as Ur,i as _x,N as jr,a0 as Ra,e as Zl,aA as Vx,Y as Zm,p as Wx,f as Nx}from"./index-BQAun09o.js";import{s as Ux}from"./index-DxNz93sC.js";import{s as Fy}from"./index-BdruNpiC.js";import{u as jx}from"./permitapp-D2DlEW15.js";import{u as Hx}from"./roofList-DaGUL6Al.js";import{s as fl}from"./index-CfkBSuRj.js";import"./index-gNz4HRqs.js";var zy={name:"AngleUpIcon",extends:Lx},Gx=Qn("path",{d:"M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z",fill:"currentColor"},null,-1),Zx=[Gx];function Xx(t,e,n,i,r,o){return na(),fs("svg",_o({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),Zx,16)}zy.render=Xx;var Yx=function(e){var n=e.dt;return`
.p-inputnumber {
    display: inline-flex;
    position: relative;
}

.p-inputnumber-button {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    cursor: pointer;
    background: `.concat(n("inputnumber.button.background"),`;
    color: `).concat(n("inputnumber.button.color"),`;
    width: `).concat(n("inputnumber.button.width"),`;
    transition: background `).concat(n("inputnumber.transition.duration"),", color ").concat(n("inputnumber.transition.duration"),", border-color ").concat(n("inputnumber.transition.duration"),", outline-color ").concat(n("inputnumber.transition.duration"),`;
}

.p-inputnumber-button:hover {
    background: `).concat(n("inputnumber.button.hover.background"),`;
    color: `).concat(n("inputnumber.button.hover.color"),`;
}

.p-inputnumber-button:active {
    background: `).concat(n("inputnumber.button.active.background"),`;
    color: `).concat(n("inputnumber.button.active.color"),`;
}

.p-inputnumber-stacked .p-inputnumber-button {
    position: relative;
    border: 0 none;
}

.p-inputnumber-stacked .p-inputnumber-button-group {
    display: flex;
    flex-direction: column;
    position: absolute;
    top: 1px;
    right: 1px;
    height: calc(100% - 2px);
}

.p-inputnumber-stacked .p-inputnumber-increment-button {
    padding: 0;
    border-top-right-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-decrement-button {
    padding: 0;
    border-bottom-right-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-button {
    flex: 1 1 auto;
    border: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-increment-button {
    order: 3;
    border-top-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-bottom-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-left: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-input {
    order: 2;
    border-radius: 0;
}

.p-inputnumber-horizontal .p-inputnumber-decrement-button {
    order: 1;
    border-top-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-bottom-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-right: 0 none;
}

.p-inputnumber-vertical {
    flex-direction: column;
}

.p-inputnumber-vertical .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
    padding: `).concat(n("inputnumber.button.vertical.padding"),`; 0;
}

.p-inputnumber-vertical .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-increment-button {
    order: 1;
    border-top-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-top-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-bottom: 0 none;
}

.p-inputnumber-vertical .p-inputnumber-input {
    order: 2;
    border-radius: 0;
    text-align: center;
}

.p-inputnumber-vertical .p-inputnumber-decrement-button {
    order: 3;
    border-bottom-left-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-bottom-right-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-top: 0 none;
}

.p-inputnumber-input {
    flex: 1 1 auto;
}

.p-inputnumber-fluid {
    width: 100%;
}

.p-inputnumber-fluid .p-inputnumber-input {
    width: 1%;
}

.p-inputnumber-fluid.p-inputnumber-vertical .p-inputnumber-input {
    width: 100%;
}
`)},Kx={root:function(e){var n=e.instance,i=e.props;return["p-inputnumber p-component p-inputwrapper",{"p-inputwrapper-filled":n.filled||i.allowEmpty===!1,"p-inputwrapper-focus":n.focused,"p-inputnumber-stacked":i.showButtons&&i.buttonLayout==="stacked","p-inputnumber-horizontal":i.showButtons&&i.buttonLayout==="horizontal","p-inputnumber-vertical":i.showButtons&&i.buttonLayout==="vertical","p-inputnumber-fluid":n.hasFluid}]},pcInput:"p-inputnumber-input",buttonGroup:"p-inputnumber-button-group",incrementButton:function(e){var n=e.instance,i=e.props;return["p-inputnumber-button p-inputnumber-increment-button",{"p-disabled":i.showButtons&&i.max!==null&&n.maxBoundry()}]},decrementButton:function(e){var n=e.instance,i=e.props;return["p-inputnumber-button p-inputnumber-decrement-button",{"p-disabled":i.showButtons&&i.min!==null&&n.minBoundry()}]}},qx=Zh.extend({name:"inputnumber",theme:Yx,classes:Kx}),Jx={name:"BaseInputNumber",extends:Xh,props:{modelValue:{type:Number,default:null},format:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!1},buttonLayout:{type:String,default:"stacked"},incrementButtonClass:{type:String,default:null},decrementButtonClass:{type:String,default:null},incrementButtonIcon:{type:String,default:void 0},incrementIcon:{type:String,default:void 0},decrementButtonIcon:{type:String,default:void 0},decrementIcon:{type:String,default:void 0},locale:{type:String,default:void 0},localeMatcher:{type:String,default:void 0},mode:{type:String,default:"decimal"},prefix:{type:String,default:null},suffix:{type:String,default:null},currency:{type:String,default:void 0},currencyDisplay:{type:String,default:void 0},useGrouping:{type:Boolean,default:!0},minFractionDigits:{type:Number,default:void 0},maxFractionDigits:{type:Number,default:void 0},roundingMode:{type:String,default:"halfExpand",validator:function(e){return["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"].includes(e)}},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:1},allowEmpty:{type:Boolean,default:!0},highlightOnFocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},variant:{type:String,default:null},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},fluid:{type:Boolean,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:qx,provide:function(){return{$pcInputNumber:this,$parentInstance:this}}};function eu(t){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(t)}function Xm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ym(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xm(Object(n),!0).forEach(function(i){Qx(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xm(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Qx(t,e,n){return(e=tv(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tv(t){var e=ev(t,"string");return eu(e)=="symbol"?e:e+""}function ev(t,e){if(eu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(eu(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nv(t){return av(t)||ov(t)||rv(t)||iv()}function iv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rv(t,e){if(t){if(typeof t=="string")return bh(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bh(t,e):void 0}}function ov(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function av(t){if(Array.isArray(t))return bh(t)}function bh(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var Dy={name:"InputNumber",extends:Jx,inheritAttrs:!1,emits:["update:modelValue","input","focus","blur"],inject:{$pcFluid:{default:null}},numberFormat:null,_numeral:null,_decimal:null,_group:null,_minusSign:null,_currency:null,_suffix:null,_prefix:null,_index:null,groupChar:"",isSpecialChar:null,prefixChar:null,suffixChar:null,timer:null,data:function(){return{d_modelValue:this.modelValue,focused:!1}},watch:{modelValue:function(e){this.d_modelValue=e},locale:function(e,n){this.updateConstructParser(e,n)},localeMatcher:function(e,n){this.updateConstructParser(e,n)},mode:function(e,n){this.updateConstructParser(e,n)},currency:function(e,n){this.updateConstructParser(e,n)},currencyDisplay:function(e,n){this.updateConstructParser(e,n)},useGrouping:function(e,n){this.updateConstructParser(e,n)},minFractionDigits:function(e,n){this.updateConstructParser(e,n)},maxFractionDigits:function(e,n){this.updateConstructParser(e,n)},suffix:function(e,n){this.updateConstructParser(e,n)},prefix:function(e,n){this.updateConstructParser(e,n)}},created:function(){this.constructParser()},methods:{getOptions:function(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits,roundingMode:this.roundingMode}},constructParser:function(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());var e=nv(new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)).reverse(),n=new Map(e.map(function(i,r){return[i,r]}));this._numeral=new RegExp("[".concat(e.join(""),"]"),"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=function(i){return n.get(i)}},updateConstructParser:function(e,n){e!==n&&this.constructParser()},escapeRegExp:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},getDecimalExpression:function(){var e=new Intl.NumberFormat(this.locale,Ym(Ym({},this.getOptions()),{},{useGrouping:!1}));return new RegExp("[".concat(e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,""),"]"),"g")},getGroupingExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp("[".concat(this.groupChar,"]"),"g")},getMinusSignExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp("[".concat(e.format(-1).trim().replace(this._numeral,""),"]"),"g")},getCurrencyExpression:function(){if(this.currency){var e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});return new RegExp("[".concat(e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,""),"]"),"g")}return new RegExp("[]","g")},getPrefixExpression:function(){if(this.prefix)this.prefixChar=this.prefix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp("".concat(this.escapeRegExp(this.prefixChar||"")),"g")},getSuffixExpression:function(){if(this.suffix)this.suffixChar=this.suffix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});this.suffixChar=e.format(1).split("1")[1]}return new RegExp("".concat(this.escapeRegExp(this.suffixChar||"")),"g")},formatValue:function(e){if(e!=null){if(e==="-")return e;if(this.format){var n=new Intl.NumberFormat(this.locale,this.getOptions()),i=n.format(e);return this.prefix&&(i=this.prefix+i),this.suffix&&(i=i+this.suffix),i}return e.toString()}return""},parseValue:function(e){var n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if(n==="-")return n;var i=+n;return isNaN(i)?null:i}return null},repeat:function(e,n,i){var r=this;if(!this.readonly){var o=n||500;this.clearTimer(),this.timer=setTimeout(function(){r.repeat(e,40,i)},o),this.spin(e,i)}},spin:function(e,n){if(this.$refs.input){var i=this.step*n,r=this.parseValue(this.$refs.input.$el.value)||0,o=this.validateValue(r+i);this.updateInput(o,null,"spin"),this.updateModel(e,o),this.handleOnInput(e,r,o)}},onUpButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,1),e.preventDefault())},onUpButtonMouseUp:function(){this.disabled||this.clearTimer()},onUpButtonMouseLeave:function(){this.disabled||this.clearTimer()},onUpButtonKeyUp:function(){this.disabled||this.clearTimer()},onUpButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,1)},onDownButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,-1),e.preventDefault())},onDownButtonMouseUp:function(){this.disabled||this.clearTimer()},onDownButtonMouseLeave:function(){this.disabled||this.clearTimer()},onDownButtonKeyUp:function(){this.disabled||this.clearTimer()},onDownButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,-1)},onUserInput:function(){this.isSpecialChar&&(this.$refs.input.$el.value=this.lastValue),this.isSpecialChar=!1},onInputKeyDown:function(e){if(!this.readonly){if(e.altKey||e.ctrlKey||e.metaKey){this.isSpecialChar=!0,this.lastValue=this.$refs.input.$el.value;return}this.lastValue=e.target.value;var n=e.target.selectionStart,i=e.target.selectionEnd,r=e.target.value,o=null;switch(e.code){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":this.isNumeralChar(r.charAt(n-1))||e.preventDefault();break;case"ArrowRight":this.isNumeralChar(r.charAt(n))||e.preventDefault();break;case"Tab":case"Enter":case"NumpadEnter":o=this.validateValue(this.parseValue(r)),this.$refs.input.$el.value=this.formatValue(o),this.$refs.input.$el.setAttribute("aria-valuenow",o),this.updateModel(e,o);break;case"Backspace":{if(e.preventDefault(),n===i){var a=r.charAt(n-1),s=this.getDecimalCharIndexes(r),l=s.decimalCharIndex,c=s.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(a)){var u=this.getDecimalLength(r);if(this._group.test(a))this._group.lastIndex=0,o=r.slice(0,n-2)+r.slice(n-1);else if(this._decimal.test(a))this._decimal.lastIndex=0,u?this.$refs.input.$el.setSelectionRange(n-1,n-1):o=r.slice(0,n-1)+r.slice(n);else if(l>0&&n>l){var d=this.isDecimalMode()&&(this.minFractionDigits||0)<u?"":"0";o=r.slice(0,n-1)+d+r.slice(n)}else c===1?(o=r.slice(0,n-1)+"0"+r.slice(n),o=this.parseValue(o)>0?o:""):o=r.slice(0,n-1)+r.slice(n)}this.updateValue(e,o,null,"delete-single")}else o=this.deleteRange(r,n,i),this.updateValue(e,o,null,"delete-range");break}case"Delete":if(e.preventDefault(),n===i){var p=r.charAt(n),h=this.getDecimalCharIndexes(r),f=h.decimalCharIndex,g=h.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(p)){var $=this.getDecimalLength(r);if(this._group.test(p))this._group.lastIndex=0,o=r.slice(0,n)+r.slice(n+2);else if(this._decimal.test(p))this._decimal.lastIndex=0,$?this.$refs.input.$el.setSelectionRange(n+1,n+1):o=r.slice(0,n)+r.slice(n+1);else if(f>0&&n>f){var y=this.isDecimalMode()&&(this.minFractionDigits||0)<$?"":"0";o=r.slice(0,n)+y+r.slice(n+1)}else g===1?(o=r.slice(0,n)+"0"+r.slice(n+1),o=this.parseValue(o)>0?o:""):o=r.slice(0,n)+r.slice(n+1)}this.updateValue(e,o,null,"delete-back-single")}else o=this.deleteRange(r,n,i),this.updateValue(e,o,null,"delete-range");break;case"Home":e.preventDefault(),jm(this.min)&&this.updateModel(e,this.min);break;case"End":e.preventDefault(),jm(this.max)&&this.updateModel(e,this.max);break}}},onInputKeyPress:function(e){if(!this.readonly){var n=e.key,i=this.isDecimalSign(n),r=this.isMinusSign(n);e.code!=="Enter"&&e.preventDefault(),(Number(n)>=0&&Number(n)<=9||r||i)&&this.insert(e,n,{isDecimalSign:i,isMinusSign:r})}},onPaste:function(e){e.preventDefault();var n=(e.clipboardData||window.clipboardData).getData("Text");if(n){var i=this.parseValue(n);i!=null&&this.insert(e,i.toString())}},allowMinusSign:function(){return this.min===null||this.min<0},isMinusSign:function(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1},isDecimalSign:function(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1},isDecimalMode:function(){return this.mode==="decimal"},getDecimalCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var i=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,""),r=i.search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:r}},getCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var i=e.search(this._minusSign);this._minusSign.lastIndex=0;var r=e.search(this._suffix);this._suffix.lastIndex=0;var o=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:i,suffixCharIndex:r,currencyCharIndex:o}},insert:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isDecimalSign:!1,isMinusSign:!1},r=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!(!this.allowMinusSign()&&r!==-1)){var o=this.$refs.input.$el.selectionStart,a=this.$refs.input.$el.selectionEnd,s=this.$refs.input.$el.value.trim(),l=this.getCharIndexes(s),c=l.decimalCharIndex,u=l.minusCharIndex,d=l.suffixCharIndex,p=l.currencyCharIndex,h;if(i.isMinusSign)o===0&&(h=s,(u===-1||a!==0)&&(h=this.insertText(s,n,0,a)),this.updateValue(e,h,n,"insert"));else if(i.isDecimalSign)c>0&&o===c?this.updateValue(e,s,n,"insert"):c>o&&c<a?(h=this.insertText(s,n,o,a),this.updateValue(e,h,n,"insert")):c===-1&&this.maxFractionDigits&&(h=this.insertText(s,n,o,a),this.updateValue(e,h,n,"insert"));else{var f=this.numberFormat.resolvedOptions().maximumFractionDigits,g=o!==a?"range-insert":"insert";if(c>0&&o>c){if(o+n.length-(c+1)<=f){var $=p>=o?p-1:d>=o?d:s.length;h=s.slice(0,o)+n+s.slice(o+n.length,$)+s.slice($),this.updateValue(e,h,n,g)}}else h=this.insertText(s,n,o,a),this.updateValue(e,h,n,g)}}},insertText:function(e,n,i,r){var o=n==="."?n:n.split(".");if(o.length===2){var a=e.slice(i,r).search(this._decimal);return this._decimal.lastIndex=0,a>0?e.slice(0,i)+this.formatValue(n)+e.slice(r):this.formatValue(n)||e}else return r-i===e.length?this.formatValue(n):i===0?n+e.slice(r):r===e.length?e.slice(0,i)+n:e.slice(0,i)+n+e.slice(r)},deleteRange:function(e,n,i){var r;return i-n===e.length?r="":n===0?r=e.slice(i):i===e.length?r=e.slice(0,n):r=e.slice(0,n)+e.slice(i),r},initCursor:function(){var e=this.$refs.input.$el.selectionStart,n=this.$refs.input.$el.value,i=n.length,r=null,o=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e=e-o;var a=n.charAt(e);if(this.isNumeralChar(a))return e+o;for(var s=e-1;s>=0;)if(a=n.charAt(s),this.isNumeralChar(a)){r=s+o;break}else s--;if(r!==null)this.$refs.input.$el.setSelectionRange(r+1,r+1);else{for(s=e;s<i;)if(a=n.charAt(s),this.isNumeralChar(a)){r=s+o;break}else s++;r!==null&&this.$refs.input.$el.setSelectionRange(r,r)}return r||0},onInputClick:function(){var e=this.$refs.input.$el.value;!this.readonly&&e!==Hm()&&this.initCursor()},isNumeralChar:function(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1},resetRegex:function(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0},updateValue:function(e,n,i,r){var o=this.$refs.input.$el.value,a=null;n!=null&&(a=this.parseValue(n),a=!a&&!this.allowEmpty?0:a,this.updateInput(a,i,r,n),this.handleOnInput(e,o,a))},handleOnInput:function(e,n,i){this.isValueChanged(n,i)&&this.$emit("input",{originalEvent:e,value:i,formattedValue:n})},isValueChanged:function(e,n){if(n===null&&e!==null)return!0;if(n!=null){var i=typeof e=="string"?this.parseValue(e):e;return n!==i}return!1},validateValue:function(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e},updateInput:function(e,n,i,r){n=n||"";var o=this.$refs.input.$el.value,a=this.formatValue(e),s=o.length;if(a!==r&&(a=this.concatValues(a,r)),s===0){this.$refs.input.$el.value=a,this.$refs.input.$el.setSelectionRange(0,0);var l=this.initCursor(),c=l+n.length;this.$refs.input.$el.setSelectionRange(c,c)}else{var u=this.$refs.input.$el.selectionStart,d=this.$refs.input.$el.selectionEnd;this.$refs.input.$el.value=a;var p=a.length;if(i==="range-insert"){var h=this.parseValue((o||"").slice(0,u)),f=h!==null?h.toString():"",g=f.split("").join("(".concat(this.groupChar,")?")),$=new RegExp(g,"g");$.test(a);var y=n.split("").join("(".concat(this.groupChar,")?")),v=new RegExp(y,"g");v.test(a.slice($.lastIndex)),d=$.lastIndex+v.lastIndex,this.$refs.input.$el.setSelectionRange(d,d)}else if(p===s)i==="insert"||i==="delete-back-single"?this.$refs.input.$el.setSelectionRange(d+1,d+1):i==="delete-single"?this.$refs.input.$el.setSelectionRange(d-1,d-1):(i==="delete-range"||i==="spin")&&this.$refs.input.$el.setSelectionRange(d,d);else if(i==="delete-back-single"){var w=o.charAt(d-1),S=o.charAt(d),R=s-p,M=this._group.test(S);M&&R===1?d+=1:!M&&this.isNumeralChar(w)&&(d+=-1*R+1),this._group.lastIndex=0,this.$refs.input.$el.setSelectionRange(d,d)}else if(o==="-"&&i==="insert"){this.$refs.input.$el.setSelectionRange(0,0);var B=this.initCursor(),C=B+n.length+1;this.$refs.input.$el.setSelectionRange(C,C)}else d=d+(p-s),this.$refs.input.$el.setSelectionRange(d,d)}this.$refs.input.$el.setAttribute("aria-valuenow",e)},concatValues:function(e,n){if(e&&n){var i=n.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?i!==-1?e.replace(this.suffixChar,"").split(this._decimal)[0]+n.replace(this.suffixChar,"").slice(i)+this.suffixChar:e:i!==-1?e.split(this._decimal)[0]+n.slice(i):e}return e},getDecimalLength:function(e){if(e){var n=e.split(this._decimal);if(n.length===2)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0},updateModel:function(e,n){this.d_modelValue=n,this.$emit("update:modelValue",n)},onInputFocus:function(e){this.focused=!0,!this.disabled&&!this.readonly&&this.$refs.input.$el.value!==Hm()&&this.highlightOnFocus&&e.target.select(),this.$emit("focus",e)},onInputBlur:function(e){this.focused=!1;var n=e.target,i=this.validateValue(this.parseValue(n.value));this.$emit("blur",{originalEvent:e,value:n.value}),n.value=this.formatValue(i),n.setAttribute("aria-valuenow",i),this.updateModel(e,i),!this.disabled&&!this.readonly&&this.highlightOnFocus&&Fx()},clearTimer:function(){this.timer&&clearInterval(this.timer)},maxBoundry:function(){return this.d_modelValue>=this.max},minBoundry:function(){return this.d_modelValue<=this.min}},computed:{filled:function(){return this.modelValue!=null&&this.modelValue.toString().length>0},upButtonListeners:function(){var e=this;return{mousedown:function(i){return e.onUpButtonMouseDown(i)},mouseup:function(i){return e.onUpButtonMouseUp(i)},mouseleave:function(i){return e.onUpButtonMouseLeave(i)},keydown:function(i){return e.onUpButtonKeyDown(i)},keyup:function(i){return e.onUpButtonKeyUp(i)}}},downButtonListeners:function(){var e=this;return{mousedown:function(i){return e.onDownButtonMouseDown(i)},mouseup:function(i){return e.onDownButtonMouseUp(i)},mouseleave:function(i){return e.onDownButtonMouseLeave(i)},keydown:function(i){return e.onDownButtonKeyDown(i)},keyup:function(i){return e.onDownButtonKeyUp(i)}}},formattedValue:function(){var e=!this.modelValue&&!this.allowEmpty?0:this.modelValue;return this.formatValue(e)},getFormatter:function(){return this.numberFormat},hasFluid:function(){return Ey(this.fluid)?!!this.$pcFluid:this.fluid}},components:{InputText:Fy,AngleUpIcon:zy,AngleDownIcon:Ux}},sv=["disabled"],lv=["disabled"],cv=["disabled"],uv=["disabled"];function dv(t,e,n,i,r,o){var a=Ay("InputText");return na(),fs("span",_o({class:t.cx("root")},t.ptmi("root")),[Hi(a,{ref:"input",id:t.inputId,role:"spinbutton",class:zx([t.cx("pcInput"),t.inputClass]),style:Dx(t.inputStyle),value:o.formattedValue,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,inputmode:t.mode==="decimal"&&!t.minFractionDigits?"numeric":"decimal",disabled:t.disabled,readonly:t.readonly,placeholder:t.placeholder,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,invalid:t.invalid,variant:t.variant,onInput:o.onUserInput,onKeydown:o.onInputKeyDown,onKeypress:o.onInputKeyPress,onPaste:o.onPaste,onClick:o.onInputClick,onFocus:o.onInputFocus,onBlur:o.onInputBlur,pt:t.ptm("pcInput"),unstyled:t.unstyled},null,8,["id","class","style","value","aria-valuemin","aria-valuemax","aria-valuenow","inputmode","disabled","readonly","placeholder","aria-labelledby","aria-label","invalid","variant","onInput","onKeydown","onKeypress","onPaste","onClick","onFocus","onBlur","pt","unstyled"]),t.showButtons&&t.buttonLayout==="stacked"?(na(),fs("span",_o({key:0,class:t.cx("buttonGroup")},t.ptm("buttonGroup")),[qa(t.$slots,"incrementbutton",{listeners:o.upButtonListeners},function(){return[Qn("button",_o({class:[t.cx("incrementButton"),t.incrementButtonClass]},pd(o.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[qa(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(na(),ud(dd(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),_o({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,sv)]}),qa(t.$slots,"decrementbutton",{listeners:o.downButtonListeners},function(){return[Qn("button",_o({class:[t.cx("decrementButton"),t.decrementButtonClass]},pd(o.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[qa(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(na(),ud(dd(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),_o({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,lv)]})],16)):E1("",!0),qa(t.$slots,"incrementbutton",{listeners:o.upButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(na(),fs("button",_o({key:0,class:[t.cx("incrementButton"),t.incrementButtonClass]},pd(o.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[qa(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(na(),ud(dd(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),_o({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,cv)):E1("",!0)]}),qa(t.$slots,"decrementbutton",{listeners:o.downButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(na(),fs("button",_o({key:0,class:[t.cx("decrementButton"),t.decrementButtonClass]},pd(o.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[qa(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(na(),ud(dd(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),_o({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,uv)):E1("",!0)]})],16)}Dy.render=dv;var pv=function(e){var n=e.dt;return`
.p-inputgroup {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroupaddon {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    background: `.concat(n("inputgroup.addon.background"),`;
    color: `).concat(n("inputgroup.addon.color"),`;
    border-top: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
    border-left: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
    border-bottom: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
    padding: 0.5rem 0.75rem;
    min-width: 2.5rem;
}

.p-inputgroup .p-floatlabel {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup .p-inputtext,
.p-inputgroup-fluid .p-inputtext,
.p-inputgroup .p-inputwrapper,
.p-inputgroup-fluid .p-input {
    flex: 1 1 auto;
    width: 1%;
}

.p-inputgroupaddon:last-child {
    border-right: 1px solid `).concat(n("inputgroup.addon.border.color"),`;
}

.p-inputgroup > .p-component,
.p-inputgroup > .p-inputwrapper > .p-inputtext,
.p-inputgroup > .p-floatlabel > .p-component {
    border-radius: 0;
    margin: 0;
}

.p-inputgroup > .p-component + .p-inputgroupaddon,
.p-inputgroup > .p-inputwrapper > .p-inputtext + .p-inputgroupaddon,
.p-inputgroup > .p-floatlabel > .p-component + .p-inputgroupaddon {
    border-left: 0 none;
}

.p-inputgroup > .p-component:focus,
.p-inputgroup > .p-inputwrapper > .p-inputtext:focus,
.p-inputgroup > .p-floatlabel > .p-component:focus {
    z-index: 1;
}

.p-inputgroup > .p-component:focus ~ label,
.p-inputgroup > .p-inputwrapper > .p-inputtext:focus~label,
.p-inputgroup > .p-floatlabel > .p-component:focus~label {
    z-index: 1;
}

.p-inputgroupaddon:first-child,
.p-inputgroup button:first-child,
.p-inputgroup input:first-child,
.p-inputgroup > .p-inputwrapper:first-child,
.p-inputgroup > .p-inputwrapper:first-child > .p-inputtext {
    border-top-left-radius: `).concat(n("inputgroup.addon.border.radius"),`;
    border-bottom-left-radius: `).concat(n("inputgroup.addon.border.radius"),`;
}

.p-inputgroup .p-floatlabel:first-child input {
    border-top-left-radius: `).concat(n("inputgroup.addon.border.radius"),`;
    border-bottom-left-radius: `).concat(n("inputgroup.addon.border.radius"),`;
}

.p-inputgroupaddon:last-child,
.p-inputgroup button:last-child,
.p-inputgroup input:last-child,
.p-inputgroup > .p-inputwrapper:last-child,
.p-inputgroup > .p-inputwrapper:last-child > .p-inputtext {
    border-top-right-radius: `).concat(n("inputgroup.addon.border.radius"),`;
    border-bottom-right-radius: `).concat(n("inputgroup.addon.border.radius"),`;
}

.p-inputgroup .p-floatlabel:last-child input {
    border-top-right-radius: `).concat(n("inputgroup.addon.border.radius"),`;
    border-bottom-right-radius: `).concat(n("inputgroup.addon.border.radius"),`;
}

.p-inputgroup-fluid .p-button {
    width: auto;
}

.p-inputgroup-fluid .p-button.p-button-icon-only {
    width: 2.5rem;
}
`)},hv={root:function(e){var n=e.instance;return["p-inputgroup",{"p-inputgroup-fluid":n.hasFluid}]}},mv=Zh.extend({name:"inputgroup",theme:pv,classes:hv}),gv={name:"BaseInputGroup",extends:Xh,props:{fluid:{type:Boolean,default:null}},style:mv,provide:function(){return{$pcInputGroup:this,$parentInstance:this}}},By={name:"InputGroup",extends:gv,inheritAttrs:!1,inject:{$pcFluid:{default:null}},computed:{hasFluid:function(){return Ey(this.fluid)?!!this.$pcFluid:this.fluid}}};function fv(t,e,n,i,r,o){return na(),fs("div",_o({class:t.cx("root")},t.ptmi("root")),[qa(t.$slots,"default")],16)}By.render=fv;var $v={root:"p-inputgroupaddon"},yv=Zh.extend({name:"inputgroupaddon",classes:$v}),bv={name:"BaseInputGroupAddon",extends:Xh,style:yv,provide:function(){return{$pcInputGroupAddon:this,$parentInstance:this}}},Oy={name:"InputGroupAddon",extends:bv,inheritAttrs:!1};function xv(t,e,n,i,r,o){return na(),fs("div",_o({class:t.cx("root")},t.ptmi("root")),[qa(t.$slots,"default")],16)}Oy.render=xv;/*!
 * Pintura v8.82.18 - Test version
 * (c) 2018-2024 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 * 
 * This version of Pintura is for testing purposes only.
 * Visit https://pqina.nl/pintura/ to obtain a commercial license.
 */const vv=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"},{value:65506,name:"app2"}];var Yh=(t,e,n)=>{if(!t)return;const i=new DataView(t),r=(a=>{if(a.getUint16(0)!==65496)return;const s=a.byteLength;let l,c=2,u;for(;c<s&&a.getUint8(c)===255;){l=a.getUint16(c);const d=vv.find(p=>p.value===l&&(!p.subvalue||p.subvalue===a.getUint16(c+2+2)));if(d){const{name:p}=d;u||(u={}),u[p]||(u[p]={offset:c,size:a.getUint16(c+2)})}if(l===65498)break;c+=2+a.getUint16(c+2)}return u})(i);if(!r||!r.exif)return;const o=((a,s)=>{if(a.getUint16(s)!==65505)return;const l=a.getUint16(s+2);if(s+=4,a.getUint32(s)!==1165519206)return;s+=6;const c=a.getUint16(s);if(c!==18761&&c!==19789)return;const u=c===18761;if(s+=2,a.getUint16(s,u)!==42)return;s+=a.getUint32(s+2,u);const d=p=>{const h=[];let f=s;const g=Math.min(a.byteLength,s+l-16);for(;f<g;f+=12){const $=f;a.getUint16($,u)===p&&h.push($)}return h};return{read:p=>{const h=d(p);if(h.length)return a.getUint16(h[0]+8,u)},write:(p,h)=>{const f=d(p);return!!f.length&&(f.forEach(g=>a.setUint16(g+8,h,u)),!0)}}})(i,r.exif.offset);return o?n===void 0?o.read(e):o.write(e,n):void 0},Kh=t=>window.__pqina_webapi__?window.__pqina_webapi__[t]:window[t],pe=(...t)=>{};const wv={ArrayBuffer:"readAsArrayBuffer"};var qh=(t,e=pe,n={})=>new Promise((i,r)=>{const{dataFormat:o=wv.ArrayBuffer}=n,a=new(Kh("FileReader"));a.onload=()=>i(a.result),a.onerror=()=>r(a.error),a.onprogress=e,a[o](t)}),Sv=async(t,e)=>{const n=await(async(i,r=[0,i.size],o)=>await qh(i.slice(...r),o))(t,[0,262144],e);return Yh(n,274)||1};let A1=null;var Mr=()=>(A1===null&&(A1=typeof window<"u"&&window.document!==void 0),A1);let hd=null;var ip=()=>new Promise(t=>{if(hd===null){const e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let n=Mr()?new Image:{};return n.onload=()=>{hd=n.naturalWidth===1,n=void 0,t(hd)},void(n.src=e)}return t(hd)}),pu=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),Ne=t=>typeof t=="string";function _y(t,e){e.split(";").forEach(n=>{const[i,r]=n.split(":");if(!i.length||!r)return;const[o,a]=r.split("!important");t.style.setProperty(i,o,Ne(a)?"important":void 0)})}var Ci=(t,e,n=[])=>{const i=document.createElement(t),r=Object.getOwnPropertyDescriptors(i.__proto__);for(const o in e)o==="style"?_y(i,e[o]):r[o]&&r[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?i[o]=e[o]:i.setAttribute(o,e[o]);return n.forEach(o=>i.appendChild(o)),i};const kv={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var ar=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},oc=t=>"data"in t,Jh=t=>Mr()?RegExp(t).test(window.navigator.userAgent):void 0;let L1=null;var rp=()=>(L1===null&&(L1=Jh(/Android/)),L1),Vy=(t,e)=>{const n=Ci("canvas",{width:t.width,height:t.height});return n.getContext("2d",e).drawImage(t,0,0),n},pc=async(t,e=1)=>{const n=await ip(),[i,r]=n||e<5?[t.width,t.height]:[t.height,t.width],o=Ci("canvas",{width:i,height:r}),a=o.getContext("2d",{willReadFrequently:!0});if(oc(t)&&!n&&e>1){const s=Ci("canvas",{width:t.width,height:t.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=s}if(!n&&e>1&&a.transform.apply(a,((s,l,c=-1)=>(c===-1&&(c=1),kv[c](s,l)))(t.width,t.height,e)),oc(t)){if(a.putImageData(t,0,0),rp())return Vy(o)}else a.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&ar(t),o},Wy=async(t,e=1)=>e===1||await ip()?t:pu(await pc(t,e)),Ks=t=>typeof t=="object";const Km=t=>t instanceof HTMLElement?t:Ks(t)?Ny(t):t,Ny=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((n,i)=>{e[i]=Km(n)})):(e={},t!==null&&Object.keys(t).forEach(n=>{const i=t[n];e[n]=Km(i)})),e};var Yn=t=>typeof t=="function",Cv=(t,e)=>new Promise((n,i)=>{const r=()=>n(((o,{width:a,height:s,canvasMemoryLimit:l,contextOptions:c})=>{let u=a||o.naturalWidth,d=s||o.naturalHeight;u||d||(u=300,d=150);const p=u*d;if(l&&p>l){const f=Math.sqrt(l)/Math.sqrt(p);u=Math.floor(u*f),d=Math.floor(d*f)}const h=Ci("canvas");return h.width=u,h.height=d,h.getContext("2d",c).drawImage(o,0,0,u,d),h})(t,e));t.complete&&t.width?r():(t.onload=r,t.onerror=()=>i(new Error("Failed to load image")))}),Uy=()=>"createImageBitmap"in window,jy=t=>/svg/.test(t.type),ya=()=>Math.random().toString(36).substring(2,9);const F1=new Map;var hu=(t,e,n)=>new Promise((i,r)=>{const o=t.toString();let a=F1.get(o);if(!a){const l=(p=>`function () {self.onmessage = function (message) {(${p.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(t),c=URL.createObjectURL((p=>new Blob(["(",typeof p=="function"?p.toString():p,")()"],{type:"application/javascript"}))(l)),u=new Map,d=new Worker(c);a={url:c,worker:d,messages:u,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(c),F1.delete(o)}},d.onmessage=function(p){const{id:h,content:f,error:g}=p.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout(()=>{u.size>0||a.terminate()},500),!u.has(h))return;const $=u.get(h);u.delete(h),g!=null?$.reject(g):$.resolve(f)},F1.set(o,a)}const s=ya();a.messages.set(s,{resolve:i,reject:r}),a.worker.postMessage({id:s,content:e},n)});let z1=null;var Ba=()=>(z1===null&&(z1=Jh(/Firefox/)),z1);const qm=async(t,e)=>{const n=await(async(r,o)=>{const a=Ci("img",{src:URL.createObjectURL(r)}),s=await Cv(a,o);return URL.revokeObjectURL(a.src),s})(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),i=pu(n);return ar(n),i};var Hy=async(t,e)=>{if(rp()&&!Ba())return await qm(t,e);let n;if(Uy()&&!jy(t)&&"OffscreenCanvas"in window)try{n=await hu((i,r,o)=>{createImageBitmap(i).then(a=>{let s=a.width,l=a.height;const c=s*l;if(r&&c>r){const h=Math.sqrt(r)/Math.sqrt(c);s=Math.floor(s*h),l=Math.floor(l*h)}const u=new OffscreenCanvas(s,l),d=u.getContext("2d",{willReadFrequently:!0});d.drawImage(a,0,0,s,l);const p=d.getImageData(0,0,u.width,u.height);o(null,p)}).catch(a=>{o(a)})},[t,e])}catch{}return n&&n.width?n:await qm(t,e)},Qh=(t,e,n)=>new Promise((i,r)=>{try{t.toBlob(o=>{if(!o)return r(new Error("Failed to create blob"));i(o)},e,n)}catch(o){r(o)}}),Tv=async(t,e,n)=>{const i=await pc(t),r=await Qh(i,e,n);return ar(i),r};const Mv={matroska:"mkv"};var Gy=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,n=""]=t.split("/x-");return Mv[n]}return e},Zy=t=>t.substring(0,t.lastIndexOf("."))||t;const Pv=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var t0=t=>{return t&&(e=(n=t,n.split(".").pop()).toLowerCase(),Pv.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"");var e,n},nu=(t,e,n)=>{const i=new Date().getTime(),r=t.type.length&&!/null|text/.test(t.type),o=r?t.type:n,a=((s,l)=>{const c=t0(s);if(c===l)return s;const u=Gy(l)||c;return`${Zy(s)}.${u}`})(e,o);try{return new(Kh("File"))([t],a,{lastModified:i,type:r?t.type:o})}catch{const l=r?t.slice():t.slice(0,t.size,o);return l.lastModified=i,l.name=a,l}},ha=(t,e)=>t/e,ri=t=>t;const D1=Math.PI,oa=Math.PI/2,ma=oa/2;var Ja=t=>{const e=Math.abs(t)%Math.PI;return e>ma&&e<Math.PI-ma};const xh={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:Hs,Right:Gs,Bottom:Zs,Left:Xs,TopLeft:xa,TopRight:va,BottomRight:wa,BottomLeft:Sa}=xh;var iu={[Hs]:[.5,0],[Gs]:[1,.5],[Zs]:[.5,1],[Xs]:[0,.5],[xa]:[0,0],[va]:[1,0],[wa]:[1,1],[Sa]:[0,1]},un=(t,e=12)=>parseFloat(t.toFixed(e));const Nd=(t,e,n)=>n+(t-n)*e,Jm=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),ui=()=>ot(0,0),ot=(t,e)=>({x:t,y:e}),Qm=t=>ot(t.pageX,t.pageY),We=t=>ot(t.x,t.y),ec=t=>(t.x=-t.x,t.y=-t.y,t),Gr=(t,e,n=ui())=>{const i=Math.cos(e),r=Math.sin(e),o=t.x-n.x,a=t.y-n.y;return t.x=n.x+i*o-r*a,t.y=n.y+r*o+i*a,t},_s=t=>Math.sqrt(t.x*t.x+t.y*t.y),go=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?ui():(t.x/=e,t.y/=e,t)},md=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),Bs=(t,e)=>t.x===e.x&&t.y===e.y,Uo=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),Wi=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Ni=(t,e)=>(t.x-=e.x,t.y-=e.y,t),tg=(t,e)=>(t.x/=e,t.y/=e,t),Br=(t,e)=>(t.x*=e,t.y*=e,t),Ad=(t,e)=>t.x*e.x+t.y*e.y,Ld=(t,e)=>t.x*e.y-t.y*e.x,Vo=(t,e=ui())=>{const n=t.x-e.x,i=t.y-e.y;return n*n+i*i},Po=(t,e=ui())=>Math.sqrt(Vo(t,e)),Iv=(t,e,n)=>(t.x=Nd(t.x,e,n.x),t.y=Nd(t.y,e,n.y),t),ia=t=>{let e=0,n=0;return t.forEach(i=>{e+=i.x,n+=i.y}),ot(e/t.length,n/t.length)},nc=(t,e,n,i,r)=>(t.forEach(o=>{o.x=e?i-(o.x-i):o.x,o.y=n?r-(o.y-r):o.y}),t),Tl=(t,e,n,i)=>{const r=Math.sin(e),o=Math.cos(e);return t.forEach(a=>{a.x-=n,a.y-=i;const s=a.x*o-a.y*r,l=a.x*r+a.y*o;a.x=n+s,a.y=i+l}),t},hc=(t,e)=>({width:t,height:e}),mo=t=>hc(t.width,t.height),es=t=>hc(t.width,t.height),Ml=t=>hc(t.width,t.height),Xy=t=>hc(t[0],t[1]),qc=t=>{return/img/i.test(t.nodeName)?hc((e=t).naturalWidth,e.naturalHeight):es(t);var e},Zi=(t,e)=>hc(t,e),ru=(t,e,n=ri)=>n(t.width)===n(e.width)&&n(t.height)===n(e.height),gd=(t,e)=>(t.width*=e,t.height*=e,t),ac=t=>ot(.5*t.width,.5*t.height),Yy=(t,e)=>{const n=Math.abs(e),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=i*t.width+r*t.height,a=r*t.width+i*t.height;return t.width=o,t.height=a,t},Ud=(t,e)=>t.width>=e.width&&t.height>=e.height,ys=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),Ys=(t,e)=>({start:t,end:e}),Ky=t=>Ys(We(t.start),We(t.end)),e0=(t,e)=>{if(e===0)return t;const n=ot(t.start.x-t.end.x,t.start.y-t.end.y),i=go(n),r=Br(i,e);return t.start.x+=r.x,t.start.y+=r.y,t.end.x-=r.x,t.end.y-=r.y,t},Rv=[ot(-1,-1),ot(-1,1),ot(1,1),ot(1,-1)],ka=(t,e,n,i)=>({x:t,y:e,width:n,height:i}),Ln=t=>ka(t.x,t.y,t.width,t.height),Vs=()=>ka(0,0,0,0),Xr=t=>ka(0,0,t.width,t.height),Ev=t=>ka(t[3],t[0],t[1]-t[3],t[2]-t[0]),Ds=t=>ka(t.x||0,t.y||0,t.width||0,t.height||0),or=t=>{let e=t[0].x,n=t[0].x,i=t[0].y,r=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),n=Math.max(n,o.x),i=Math.min(i,o.y),r=Math.max(r,o.y)}),ka(e,i,n-e,r-i)},Fd=t=>Bi(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),eg=(t,e)=>ka(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),Bi=(t,e,n,i)=>ka(t,e,n,i),Fn=t=>ot(t.x+.5*t.width,t.y+.5*t.height),ga=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Dr=(t,e,n)=>(n=n||Fn(t),t.x=e*(t.x-n.x)+n.x,t.y=e*(t.y-n.y)+n.y,t.width=e*t.width,t.height=e*t.height,t),ng=(t,e,n,i)=>{const r=(i.x-t.x)/t.width,o=(i.y-t.y)/t.height;let a=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return a=Math.min(n.width,a),s=Math.min(n.height,s),t.x=i.x-r*a,t.y=i.y-o*s,t.width=a,t.height=s,t},ig=(t,e)=>{const[n,i]=iu[e],r=n*t.width,o=i*t.height;return ot(t.x+r,t.y+o)},Ws=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),fa=(t,e,n=ri)=>n(t.x)===n(e.x)&&n(t.y)===n(e.y)&&n(t.width)===n(e.width)&&n(t.height)===n(e.height),pr=t=>ha(t.width,t.height),qy=(t,e,n,i,r)=>(t.x=e,t.y=n,t.width=i,t.height=r,t),op=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),kr=(t,e,n)=>(n||(n=Fn(t)),Wo(t).map(i=>Gr(i,e,n))),zd=(t,e)=>ka(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),jd=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),xs=(t,e,n=ui())=>{if(t.width===0||t.height===0)return Vs();const i=pr(t);e||(e=i);let r=t.width,o=t.height;return e>i?r=o*e:o=r/e,ka(n.x+.5*(t.width-r),n.y+.5*(t.height-o),r,o)},oo=(t,e=pr(t),n=ui())=>{if(t.width===0||t.height===0)return Vs();let i=t.width,r=i/e;return r>t.height&&(r=t.height,i=r*e),ka(n.x+.5*(t.width-i),n.y+.5*(t.height-r),i,r)},Pl=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],Wo=t=>[ot(t.x,t.y),ot(t.x+t.width,t.y),ot(t.x+t.width,t.y+t.height),ot(t.x,t.y+t.height)],ra=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},Jy=(t,e,n=Fn(t))=>Wo(t).map((i,r)=>{const o=Rv[r];return ot(Nd(i.x,1+o.x*e.x,n.x),Nd(i.y,1+o.y*e.y,n.y))}),ou=t=>(t.x=0,t.y=0,t),rg=t=>{const e=t[0],n=t[t.length-1];t=Bs(e,n)?t:[...t,e];const i=e.x,r=e.y;let o,a,s,l=0,c=0,u=0,d=0;const p=t.length;for(;c<p;c++)o=t[c],a=t[c+1>p-1?0:c+1],s=(o.y-r)*(a.x-i)-(a.y-r)*(o.x-i),l+=s,u+=(o.x+a.x-2*i)*s,d+=(o.y+a.y-2*r)*s;return s=3*l,ot(i+u/s,r+d/s)},n0=(t,e)=>Qy(t.start,t.end,e.start,e.end),Qy=(t,e,n,i)=>{const r=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(r===0)return;const o=((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x))/r,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/r;return o<0||o>1||a<0||a>1?void 0:ot(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))},t2=(t,e,{ignoreIdenticalLines:n=!1,breakOnIntersection:i=!1}={})=>{const r=e.length,o=[];for(let a=0;a<r-1;a++){if(n&&(Bs(t.start,e[a])||Bs(t.start,e[a+1])||Bs(t.end,e[a])||Bs(t.end,e[a+1])))continue;const s=Qy(t.start,t.end,e[a],e[a+1]);if(s){if(i)return[s];o.push(s)}}return o.length?o:void 0},vh=(t,e)=>{let n=0,i=0,r=!1;const o=e.length;for(n=0,i=o-1;n<o;i=n++)e[n].y>t.y!=e[i].y>t.y&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r},e2=t=>{const e=[];for(let n=0;n<t.length;n++){let i=n+1;i===t.length&&(i=0),e.push(Ys(We(t[n]),We(t[i])))}return e},n2=(t,e=0)=>e2(t).map(n=>e0(n,e)),Hd=(t,e,n,i=0,r=!1,o=!1,a=12)=>{const s=[];for(let l=0;l<a;l++)s.push(ot(t.x+e*Math.cos(l*(2*Math.PI)/a),t.y+n*Math.sin(l*(2*Math.PI)/a)));return(r||o)&&nc(s,r,o,t.x,t.y),i&&Tl(s,i,t.x,t.y),s},Gd=(t,e,n,i)=>{const r=ot(t.x-n.x,t.y-n.y),o=ot(i.x-n.x,i.y-n.y),a=Ad(o,o);let s=Ad(r,o)/a;s=s<0?0:s,s=s>1?1:s;const l=ot(o.x*s+n.x-t.x,o.y*s+n.y-t.y);return Ad(l,l)<=e*e},i2=(t,e,n)=>{const i=n.length;for(let r=0;r<i-1;r++)if(Gd(t,e,n[r],n[r+1]))return!0;return!1},wh=(t,e,n)=>!!vh(t,n)||!!i2(t,e,n)||Gd(t,e,n[0],n[n.length-1]),B1=(t,e,n,i,r)=>wh(t,e,kr(n,i,r||Fn(n)));var Av=(t,e)=>{const n=Xr(t),i=Fn(n),r=kr(n,e,i);return ou(or(r))},sc=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),mu=t=>t instanceof File,og=async(t,e,n)=>{const i=await Qh(t,e,n);return nu(i,"canvas")},i0=t=>t.split("/").pop().split(/\?|\#/).shift();const Lv=Mr()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},fd=Mr()&&Ci("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let ag;var r0=t=>(Lv(fd,t),fd.parentNode||document.body.append(fd),clearTimeout(ag),ag=setTimeout(()=>{fd.remove()},500),t);let O1=null;var Oa=()=>(O1===null&&(O1=Mr()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),O1),r2=t=>new Promise((e,n)=>{let i=!1;!t.parentNode&&Oa()&&(i=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",r0(t));const r=()=>{const a=t.naturalWidth,s=t.naturalHeight;a&&s&&(i&&t.remove(),clearInterval(o),e({width:a,height:s}))};t.onerror=a=>{clearInterval(o),n(a)};const o=setInterval(r,1);r()}),o2=t=>new Promise((e,n)=>{const i=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return i();t.onloadedmetadata=i,t.onerror=()=>n(t.error)}),ap=t=>/^image/.test(t.type),o0=t=>new Promise(e=>{const n=Ne(t)?t:URL.createObjectURL(t),i=()=>{const o=new Image;o.src=n,e(o)};if(t instanceof Blob&&ap(t))return i();const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>e(r),r.onerror=i,r.src=n}),Zd=t=>t.nodeName==="VIDEO",a2=async t=>{let e,n;e=t.src?t:await o0(t);try{n=Zd(e)?await o2(e):await r2(e)}finally{mu(t)&&URL.revokeObjectURL(e.src)}return n},Fv=async t=>{const e=await a2(t),n=await(o=>new Promise((a,s)=>{if(o.complete)return a(o);o.onload=()=>a(o),o.onerror=()=>s(new Error("Failed to load image"))}))(t),i=Ci("canvas",e);i.getContext("2d",{willReadFrequently:!0}).drawImage(n,0,0);const r=await Qh(i);return nu(r,i0(n.src))},Jl=(t=0,e=!0)=>new(Kh("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),sg=(t,e,n=i=>i)=>t.getAllResponseHeaders().indexOf(e)>=0?n(t.getResponseHeader(e)):void 0,zv=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null};const Dv="URL_REQUEST";class Jc extends Error{constructor(e,n,i){super(e),this.name="EditorError",this.code=n,this.metadata=i}}var s2=(t,e)=>{const{headers:n={},credentials:i}=e||{};Object.entries(n).forEach(([r,o])=>t.setRequestHeader(r,o)),i&&(t.withCredentials=i!=="omit")},Bv=(t,e,n)=>/^data:/.test(t)?(async(i,r="data-uri",o=pe)=>{o(Jl(0));const a=await fetch(i);o(Jl(.33));const s=await a.blob();let l;ap(s)||(l="image/"+(i.includes(",/9j/")?"jpeg":"png")),o(Jl(.66));const c=nu(s,r,l);return o(Jl(1)),c})(t,void 0,e):((i,r,o)=>new Promise((a,s)=>{const l=()=>s(new Jc("Error fetching image",Dv,c)),c=new XMLHttpRequest;c.onprogress=r,c.onerror=l,c.onload=()=>{if(!c.response||c.status>=300||c.status<200)return l();const d=sg(c,"Content-Type"),p=sg(c,"Content-Disposition",zv)||i0(i);a(nu(c.response,p,d||t0(p)))};const{willRequest:u}=o;Promise.resolve(u&&u(i,{resourceType:"image"})).then(d=>{if(d===!1)return s("Image load rejected");c.open("GET",i,!0),s2(c,d),c.responseType="blob",c.send()}).catch(console.error)}))(t,e,n),a0=t=>t instanceof Blob&&!(t instanceof File),l2=t=>"close"in t,Ov=async(t,e,n)=>{if(mu(t)||a0(t))return t;if(Ne(t))return await Bv(t,e,n);if(sc(t,"canvas"))return await og(t);if(sc(t,"img"))return await Fv(t);if(oc(t)||l2(t))return await og(await pc(t));throw new Jc("Invalid image source","invalid-image-source")};let _1=null;var sp=()=>(_1===null&&(_1=Mr()&&/^mac/i.test(navigator.platform)),_1);let V1=null;var ba=()=>(V1===null&&(V1=Mr()&&(Jh(/iPhone|iPad|iPod/)||sp()&&navigator.maxTouchPoints>=1)),V1),_v=async(t,e=1)=>await ip()||ba()||e<5?t:Zi(t.height,t.width),c2=t=>/jpeg/.test(t.type),Vv=t=>{return typeof(e=t)!="object"||e.constructor!=Object?t:JSON.stringify(t);var e},s0=(t,e=0,n)=>(e===0||(t.translate(n.x,n.y),t.rotate(e),t.translate(-n.x,-n.y)),t),u2=(t,e,n)=>(t.scale(e,n),t),Wv=async(t,e={})=>{const{flipX:n,flipY:i,rotation:r,crop:o}=e,a=es(t),s=n||i,l=!!r,c=o&&(o.x||o.y||o.width||o.height),u=c&&fa(o,Xr(a)),d=c&&!u;if(!s&&!l&&!d)return t;let p,h=Ci("canvas",{width:t.width,height:t.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),s){const f=Ci("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});u2(f,n?-1:1,i?-1:1),f.drawImage(h,n?-h.width:0,i?-h.height:0),f.restore(),ar(h),h=f.canvas}if(l){const f=ys(Ml(or(kr(Ds(h),r))),Math.floor),g=Ci("canvas",{width:o.width,height:o.height}).getContext("2d",{willReadFrequently:!0});(($,y,v)=>{$.translate(y,v)})(g,-o.x,-o.y),s0(g,r,ac(f)),g.drawImage(h,.5*(f.width-h.width),.5*(f.height-h.height)),g.restore(),ar(h),h=g.canvas}else if(d)return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(o.x,o.y,o.width,o.height),ar(h),p;return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),ar(h),p},Nv=(t,e)=>{const{imageData:n,width:i,height:r}=t,o=n.width,a=n.height,s=Math.round(i),l=Math.round(r),c=n.data,u=new Uint8ClampedArray(s*l*4),d=o/s,p=a/l,h=Math.ceil(.5*d),f=Math.ceil(.5*p);for(let g=0;g<l;g++)for(let $=0;$<s;$++){const y=4*($+g*s);let v=0,w=0,S=0,R=0,M=0,B=0,C=0;const D=(g+.5)*p;for(let O=Math.floor(g*p);O<(g+1)*p;O++){const P=Math.abs(D-(O+.5))/f,b=($+.5)*d,W=P*P;for(let nt=Math.floor($*d);nt<($+1)*d;nt++){let k=Math.abs(b-(nt+.5))/h;const N=Math.sqrt(W+k*k);if(N<-1||N>1||(v=2*N*N*N-3*N*N+1,v<=0))continue;k=4*(nt+O*o);const j=c[k+3];C+=v*j,S+=v,j<255&&(v=v*j/250),R+=v*c[k],M+=v*c[k+1],B+=v*c[k+2],w+=v}}u[y]=R/w,u[y+1]=M/w,u[y+2]=B/w,u[y+3]=C/S}e(null,{data:u,width:s,height:l})},l0=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch{e=Ci("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},Uv=async(t,e={},n)=>{const{width:i,height:r,fit:o,upscale:a}=e;if(!i&&!r)return t;let s=i,l=r;if(i?r||(l=i):s=r,o!=="force"){const c=s/t.width,u=l/t.height;let d=1;if(o==="cover"?d=Math.max(c,u):o==="contain"&&(d=Math.min(c,u)),d>1&&a===!1)return t;s=Math.round(t.width*d),l=Math.round(t.height*d)}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:n?n(t,s,l):(t=await hu(Nv,[{imageData:t,width:s,height:l}],[t.data.buffer]),l0(t))},jv=(t,e)=>{const{imageData:n,matrix:i}=t;if(!i)return e(null,n);const r=n.data,o=r.length,a=i[0],s=i[1],l=i[2],c=i[3],u=i[4],d=i[5],p=i[6],h=i[7],f=i[8],g=i[9],$=i[10],y=i[11],v=i[12],w=i[13],S=i[14],R=i[15],M=i[16],B=i[17],C=i[18],D=i[19];let O=0,P=0,b=0,W=0,nt=0,k=0,N=0,j=0,ut=0,Z=0,ft=0,q=0;for(;O<o;O+=4)P=r[O]/255,b=r[O+1]/255,W=r[O+2]/255,nt=r[O+3]/255,k=P*a+b*s+W*l+nt*c+u,N=P*d+b*p+W*h+nt*f+g,j=P*$+b*y+W*v+nt*w+S,ut=P*R+b*M+W*B+nt*C+D,Z=Math.max(0,k*ut)+(1-ut),ft=Math.max(0,N*ut)+(1-ut),q=Math.max(0,j*ut)+(1-ut),r[O]=255*Math.max(0,Math.min(1,Z)),r[O+1]=255*Math.max(0,Math.min(1,ft)),r[O+2]=255*Math.max(0,Math.min(1,q)),r[O+3]=255*nt;e(null,{data:r,width:n.width,height:n.height})},d2=(t,e)=>{const{imageData:n,matrix:i}=t;if(!i)return e(null,n);let r=i.reduce((C,D)=>C+D);r=r<=0?1:r;const o=n.width,a=n.height,s=n.data;let l=0,c=0,u=0;const d=Math.round(Math.sqrt(i.length)),p=Math.floor(d/2);let h=0,f=0,g=0,$=0,y=0,v=0,w=0,S=0,R=0,M=0;const B=new Uint8ClampedArray(o*a*4);for(u=0;u<a;u++)for(c=0;c<o;c++){for(h=0,f=0,g=0,$=0,v=0;v<d;v++)for(y=0;y<d;y++)w=u+v-p,S=c+y-p,w<0&&(w=a-1),w>=a&&(w=0),S<0&&(S=o-1),S>=o&&(S=0),R=4*(w*o+S),M=i[v*d+y],h+=s[R]*M,f+=s[R+1]*M,g+=s[R+2]*M,$+=s[R+3]*M;B[l]=h/r,B[l+1]=f/r,B[l+2]=g/r,B[l+3]=$/r,l+=4}e(null,{data:B,width:o,height:a})},Hv=(t,e)=>{let{imageData:n,strength:i}=t;if(!i)return e(null,n);const r=n.width,o=n.height,a=n.data,s=(b,W)=>(l=b-R,c=W-M,Math.sqrt(l*l+c*c));let l,c,u,d,p,h,f,g,$,y,v,w=0,S=0,R=.5*r,M=.5*o,B=s(0,0);for(i>0?(u=0,d=0,p=0):(i=Math.abs(i),u=1,d=1,p=1),S=0;S<o;S++)for(w=0;w<r;w++)C=4*(w+S*r),D=a,O=a,P=s(w,S)*i/B,h=D[C]/255,f=D[C+1]/255,g=D[C+2]/255,$=D[C+3]/255,y=1-P,v=y*$+P,O[C]=(y*$*h+P*u)/v*255,O[C+1]=(y*$*f+P*d)/v*255,O[C+2]=(y*$*g+P*p)/v*255,O[C+3]=255*v;var C,D,O,P;e(null,{data:a,width:n.width,height:n.height})},Gv=(t,e)=>{const{imageData:n,level:i,monochrome:r=!1}=t;if(!i)return e(null,n);const o=n.data,a=o.length;let s,l,c,u=0;const d=()=>255*(2*Math.random()-1)*i,p=r?()=>{const h=d();return[h,h,h]}:()=>[d(),d(),d()];for(;u<a;u+=4)[s,l,c]=p(),o[u]=o[u]+s,o[u+1]=o[u+1]+l,o[u+2]=o[u+2]+c;e(null,{data:o,width:n.width,height:n.height})},Zv=(t,e)=>{const{imageData:n,level:i}=t;if(!i)return e(null,n);const r=n.data,o=r.length;let a,s,l,c=0;for(;c<o;c+=4)a=r[c]/255,s=r[c+1]/255,l=r[c+2]/255,r[c]=255*Math.pow(a,i),r[c+1]=255*Math.pow(s,i),r[c+2]=255*Math.pow(l,i);e(null,{data:r,width:n.width,height:n.height})},Xv=async(t,e={})=>{const{colorMatrix:n,convolutionMatrix:i,gamma:r,noise:o,vignette:a}=e,s=[];if(i&&s.push([d2,{matrix:i.clarity}]),r>0&&s.push([Zv,{level:1/r}]),n&&!(u=>{const d=u.length;let p;const h=d>=20?6:d>=16?5:3;for(let f=0;f<d;f++)if(p=u[f],p===1&&f%h!=0||p!==0&&p!==1)return!1;return!0})(n)&&s.push([jv,{matrix:n}]),(o>0||o<0)&&s.push([Gv,{level:o}]),(a>0||a<0)&&s.push([Hv,{strength:a}]),!s.length)return t;const l=(u,d)=>`(err, imageData) => {
            (${u[d][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${d}]), 
                ${u[d+1]?l(u,d+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l(s,0)})(null, imageData)
    }`;return t=await hu(c,[{imageData:t,filterInstructions:s.map(u=>u[1])}],[t.data.buffer]),l0(t)},Ze=t=>typeof t=="number",Xd=t=>Ne(t)&&t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)!==null,Ee=(t,e)=>t.hasOwnProperty(e),Mi=t=>Array.isArray(t);let lg=64,W1=102,cg=112,ug=!1;var p2=(t,e)=>(!ug&&Mr()&&(/^win/i.test(navigator.platform)&&(W1=103),(ba()||sp())&&(lg=63.5,W1=110,cg=123),ug=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${lg}" y="${W1}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${cg}px">${t}</text></svg>`),lc=t=>t instanceof Blob,Hr=(t,e)=>t/e*100+"%",Cr=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${Ze(t[3])?t[3]:1})`,Dd=t=>Object.values(t).join("_");const h2=async(t,e=0)=>{const n=Ci("canvas",{width:80,height:80}).getContext("2d");return await((i=0)=>new Promise(r=>{setTimeout(r,i)}))(e),n.drawImage(t,0,0,80,80),!((i=>!new Uint32Array(i.getImageData(0,0,i.canvas.width,i.canvas.height).data.buffer).some(r=>r!==0))(n)&&e<=256)||await h2(t,e+16)},dg=new Map;var Yv=t=>new Promise((e,n)=>{const i=new FileReader;i.onerror=()=>n(i.error),i.onload=()=>e(i.result),i.readAsDataURL(t)}),bs=()=>{let t=[];return{sub:(e,n)=>(t.push({event:e,callback:n}),()=>t=t.filter(i=>i.event!==e||i.callback!==n)),pub:(e,n)=>{t.filter(i=>i.event===e).forEach(i=>i.callback(n))}}};const Qa=32,c0=({color:t=[0,0,0],fontSize:e=16,fontFamily:n="sans-serif",fontVariant:i="normal",fontWeight:r="normal",fontStyle:o="normal",textAlign:a="left",letterSpacing:s="normal",lineHeight:l=20},c=1)=>`font-size:${e*c}px;font-style:${o};font-weight:${r};font-family:${n};font-variant:${i};line-height:${l*c}px;text-align:${a};letter-spacing:${Ze(s)?s+"px":"normal"};color:${Cr(t)};`,u0=(t,e,n=1)=>{const{width:i,height:r,disableNewline:o}=e,a=!i,s=o===!1?((u="")=>u.split(`
`).length)(t):void 0,l=a?"normal":"break-word",c=a&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${a?"auto":i*n+"px"};height:${r?r*n+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:u=16,lineHeight:d=20}={})=>.5*Math.max(0,u-d))(e)*n}px;word-break:${l};word-wrap:normal;white-space:${c};`},pg=new Map,m2=t=>{const e=[];for(const n of Array.from(t.childNodes))n.nodeType===Node.TEXT_NODE?e.push(Kv(n)):e.push(...m2(n));return e},g2="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",Kv=t=>{const e=t.nodeValue;if(!e)return[];const n=e.length,i=document.createRange();i.selectNodeContents(t);const r=[];for(let a=0;a<n;a++){i.setStart(t,0),i.setEnd(t,a+1);const s=i.getClientRects().length-1,l=e.charAt(a);r[s]?r[s]+=l:r.push(l)}const o=i.getClientRects();return r.map((a,s)=>({rect:o[s],text:a}))},hg=new Map,ea=(t="",e)=>{const{width:n=0,height:i=0}=e;if(n&&i)return Zi(n,i);let{fontSize:r=16,fontFamily:o,lineHeight:a=20,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:u}=e;const d=Dd({text:t,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:r,letterSpacing:u,lineHeight:a,width:n});let p=hg.get(d);if(p)return p;let h=1;r>1e3&&Ba()&&(h=r/1e3,r=1e3,a/=h);const f=r0(Ci("pre",{contenteditable:"true",spellcheck:"false",style:`${g2}${c0({...e,fontSize:r,lineHeight:a})};${u0(t,e)}"`,innerHTML:t})).getBoundingClientRect();return p=es(f),p=ys(p,g=>g*h),n&&(p.width=n),hg.set(d,p),p},mg=new Map,qv=(t,e)=>new Promise((n,i)=>{let r=mg.get(t);r===void 0&&(r=((o,a)=>{const{sub:s,pub:l}=bs();let c,u;return Promise.resolve(a&&a(o,{resourceType:"stylesheet"})).then(d=>{if(d===!1)return u="requestPrevented",l("error",u);const{headers:p,credentials:h}=d||{};fetch(o,{headers:p,credentials:h}).then(f=>f.text()).then(f=>{c=f,l("load",c)}).catch(f=>{u=f,l("error",u)})}),{sub:(d,p)=>d==="load"&&c?p(c):d==="error"&&u?p(u):void s(d,p)}})(t,e),mg.set(t,r)),r.sub("load",n),r.sub("error",i)}),gg=async(t,e,n)=>{let i;try{i=await qv(t,e)}catch{return[]}const r={innerHTML:i,id:ya()};n&&(r.nonce=n);const o=Ci("style",r);document.head.append(o);const a=Array.from(document.styleSheets).find(s=>s.ownerNode.id===o.id);return o.remove(),Array.from(a.cssRules)},Xl=new Map,Jv=async(t,e,n)=>{if(Xl.has(t.href))return Xl.get(t.href);let i;try{i=Array.from(t.cssRules);for(const r of(o=>o.filter(a=>a instanceof CSSImportRule))(i)){const o=r.href;if(Xl.has(o)){const s=Xl.get(o);i=[...i,...s];continue}const a=await gg(o,e,n);Xl.set(o,a),i=[...i,...a]}}catch{const o=t.href;i=await gg(o,e,n),Xl.set(o,i)}return(r=>r.filter(o=>o instanceof CSSFontFaceRule))(i)},f2=(t,e)=>t.style.getPropertyValue(e),Qv=(t,e)=>t.style?f2(t,"font-family").replace(/^"|"$/g,"")==e:!1,t4=async(t,e,n)=>{const i=((r,o)=>{const a=[];for(const s of r)Qv(s,o)&&a.push(s);return a})(await(async(r,o)=>{const a=Array.from(document.styleSheets).map(c=>Jv(c,r,o)),s=await Promise.all(a),l=[];return s.forEach(c=>l.push(...c)),l})(e,n),t);return i.length?i.map(r=>{const o=r.parentStyleSheet&&r.parentStyleSheet.href&&new URL(r.parentStyleSheet.href),a=o?o.origin+(c=>c.pathname.split("/").slice(0,-1).join("/"))(o)+"/":"",s=r.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],l=Array.from(r.style).filter(c=>c!="src").reduce((c,u)=>c+=u+":"+f2(r,u)+";","");return[/^http/.test(s)?s:a+s,l]}):[]},fg=new Map,$g=new Map;var $2=async(t="",e)=>{if(!t.length)return;let{color:n,imageWidth:i=300,imageHeight:r=150,paddingTop:o=0,paddingRight:a=Qa,paddingBottom:s=0,paddingLeft:l=Qa,fontFamily:c,fontSize:u,pixelRatio:d=1,willRequest:p,outline:h,blur:f,styleNonce:g}=e,$=1,y="";u>1e3&&Ba()&&($=u/1e3,y=`transform-origin:0 0;transform:scale(${$})`);const v=d/$,w=(i+l+a)*d,S=(r+s+o)*d,R=await(async(b,W,nt)=>{if(fg.get(b))return;let k=$g.get(b);if(!k){const j=await t4(b,W,nt);if(!j.length)return void fg.set(b,!0);const ut=[];for(const[Z,ft]of j){const q=await fetch(Z).then(lt=>lt.blob()),ht=!(N=q.type)||/woff2/.test(N)?"woff2":/woff/.test(N)?"woff":/ttf|truetype/.test(N)?"truetype":/otf|opentype/.test(N)?"opentype":/svg/.test(N)?"svg":"woff2",xt=await Yv(q);ut.push(`@font-face { src:url(${xt}) format('${ht}');${ft};font-display:block; }`)}k=ut.join(""),$g.set(b,k)}var N;return k})(c,p,g);let M="";R&&(M=`<style${g?` nonce="${g}"`:""}>${R}</style>`);const B=t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),C=`top:${o*v}px;right:${a*v}px;bottom:${s*v}px;left:${l*v}px`;let D=n,O="",P="";if(h||f){const b=Cr(n);h&&(D=[0,0,0,0],O=`-webkit-text-stroke: ${2*h*v}px ${b}`),f&&(Oa()?P=`filter:blur(${f*v*.4}px)`:(D=[0,0,0,0],P=`text-shadow: 0 0 ${f*v}px ${b}`))}return((b,{safariCacheKey:W="*"}={})=>new Promise((nt,k)=>{const N=new Image;N.onerror=()=>k(new Error("Failed to load SVG")),N.onload=()=>{if(!Oa()||!b.includes("@font-face")||dg.has(W))return nt(N);h2(N).then(()=>{dg.set(W,!0),nt(N)})},N.src="data:image/svg+xml,"+b}))(`<svg xmlns="http://www.w3.org/2000/svg" width="${w}" height="${S}" viewBox="0 0 ${w} ${S}"><foreignObject x="0" y="0" width="${w}" height="${S}"><div xmlns="http://www.w3.org/1999/xhtml">${M}<pre contenteditable="true" spellcheck="false" style="position:absolute;${C};${c0({...e,color:D,fontSize:u},v)};${u0(t,e,v)};${y};${O};${P}">${B}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};const Di=t=>{const e={...t};return Ny(e)},yg=(t,e={})=>{const n=pr(t);let i,r;const o=e.width||e.rx,a=e.height||e.ry;if(o&&a)return mo(e);if(o||a){i=parseFloat(o||Number.MAX_SAFE_INTEGER),r=parseFloat(a||Number.MAX_SAFE_INTEGER);const s=Math.min(i,r);Ne(o)||Ne(a)?(i=s+"%",r=s*n+"%"):(i=s,r=s)}else i="10%",r=10*n+"%";return{[(e.width?"width":e.rx?"rx":void 0)||"width"]:i,[(e.width?"height":e.rx?"ry":void 0)||"height"]:r}},bg=(t,e={})=>{return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:(n=p2(t),"data:image/svg+xml,"+n.replace("<","%3C").replace(">","%3E"))};var n},xg=(t,e={})=>({backgroundColor:[0,0,0,0],...rr(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...e,backgroundImage:Ne(t)?t:lc(t)?URL.createObjectURL(t):t}),vg=(t,e)=>{let n;if(Ne(t)||lc(t)){const i={...yg(e),backgroundSize:"contain"};n=Xd(t)?bg(t,i):xg(t,i)}else if(t.src){const i=yg(e,t.shape||t),r={...t.shape,...i};if(t.width&&t.height&&!Ee(r,"aspectRatio")){const o=Ph(i,"width",e),a=Ph(i,"height",e);r.aspectRatio=ha(o,a)}r.backgroundSize||t.shape||t.width&&t.height||(r.backgroundSize="contain"),n=Xd(t.src)?bg(t.src,r):xg(t.src,r)}else t.shape&&(n=Di(t.shape));return Ee(n,"backgroundImage")&&(Ee(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),Ee(n,"disableStyle")||(n.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?Vi(n,e):n},ms=t=>ot(t.x1,t.y1),gs=t=>ot(t.x2,t.y2),ir=t=>Ee(t,"text"),Yd=t=>ir(t)&&!(lp(t)||Ee(t,"width")),Bd=t=>ir(t)&&(lp(t)||Ee(t,"width")),No=t=>!ir(t)&&e4(t),rr=t=>Ee(t,"rx"),dr=t=>Ee(t,"x1"),Gi=t=>Ee(t,"points"),hs=t=>ir(t)&&t.isEditing,$d=t=>!Ee(t,"opacity")||t.opacity>0,La=t=>t.isSelected,N1=t=>t.isEditing,ho=t=>t._isDraft,wl=t=>Ee(t,"width")&&Ee(t,"height"),y2=t=>{const e=Ee(t,"right"),n=Ee(t,"bottom");return e||n},lp=t=>(Ee(t,"x")||Ee(t,"left"))&&Ee(t,"right")||(Ee(t,"y")||Ee(t,"top"))&&Ee(t,"bottom"),e4=t=>wl(t)||lp(t),Sh=t=>(t._isDraft=!0,t),wg=t=>(t._isDraft=!1,t),kh=(t,e)=>t.disableStyle!==!0&&(!Mi(t.disableStyle)||!e||!t.disableStyle.includes(e)),Ea=t=>t.disableSelect!==!0,U1=t=>t.disableRemove!==!0,Sg=t=>t.disableDuplicate!==!0&&Cl(t),n4=t=>!t.disableFlip&&!ho(t)&&!y2(t)&&(e=>Ee(e,"backgroundImage")||Ee(e,"text"))(t),Yl=(t,e)=>!!ir(t)&&t.disableInput!==!0&&(Yn(t.disableInput)?t.disableInput(e??t.text):e||!0),$l=(t,e)=>t.disableTextLayout!==!0&&(!Mi(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e)),j1=t=>b2(t)&&t.points.length>3,b2=t=>!!Gi(t)&&t.disableAddPoints!==void 0&&t.disableAddPoints!==!0,Ch=t=>t.disableManipulate!==!0&&!ho(t)&&!y2(t),Cl=t=>Ch(t)&&t.disableMove!==!0,Th=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),kg=t=>(delete t.rotation,t),Cg=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),Tg=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),Mg=t=>{let e=t.text;e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(n,i)=>`___${i}___`),e=e.replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(n,i)=>`&${i};`)},i4=t=>{if(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format=t.format==="html"?"html":"text",t.textShadow){const[e,n,i,r]=t.textShadow;t.textShadowX=e,t.textShadowY=n,t.textShadowBlur=i,t.textShadowColor=r,delete t.textShadow}if(t.textOutline){const[e,n]=t.textOutline;t.textOutlineWidth=e,t.textOutlineColor=n,delete t.textOutline}return t.format==="html"?Mg(t):(e=>{Mg(e);let n=e.text;n=n.replace(/</g,"&gt;"),n=n.replace(/>/g,"&lt;"),e.text=n})(t),Yd(t)?r4(t):o4(t)},r4=t=>(t.disableNewline!==!1&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),Th(t)),o4=t=>(t.textAlign=t.textAlign||"left",t),x2=t=>((e=>{Ne(e.id)||(e.id=ya()),Ee(e,"rotation")||(e.rotation=0),Ee(e,"opacity")||(e.opacity=1),Ee(e,"disableErase")||(e.disableErase=!0)})(t),ir(t)?i4(t):No(t)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Tg(e)})(t):Gi(t)?(e=>{Cg(e),kg(e),Ee(e,"pathClose")||(e.disableResize=!0,Ee(e,"disableMove")||(e.disableMove=!0)),Th(e)})(t):dr(t)?(e=>{Cg(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,kg(e),Th(e)})(t):rr(t)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Tg(e)})(t),t),a4=t=>ir(t)?"text":No(t)?"rectangle":Gi(t)?"path":dr(t)?"line":rr(t)?"ellipse":void 0,Kd=(t,e)=>parseFloat(t)/100*e,s4=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),l4=new RegExp(/^y|top|bottom|^height|ry/,"i"),d0=(t,e,{width:n,height:i})=>{if(Array.isArray(e))return e.map(o=>(Ks(o)&&v2(o,{width:n,height:i}),Ne(o)&&(o=d0(t,o,{width:n,height:i})),o));if(typeof e!="string"||!e.endsWith("%"))return e;const r=parseFloat(e)/100;return s4.test(t)?un(n*r,6):l4.test(t)?un(i*r,6):e},c4=d0,u4=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],v2=(t,e)=>{Object.entries(t).map(([n,i])=>{t[n]=d0(n,i,e)}),t.text&&u4.filter(n=>Ne(t[n])).forEach(n=>{var i,r;t[n]=(i=t[n],r=t.fontSize,Math.round(r*(parseFloat(i)/100)))})},Vi=(t,e)=>(v2(t,e),k2(t,e),t),Mh=(t,e)=>{let n;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?n=e.width:/^y|height|ry/.test(t)&&(n=e.height),n},Ph=(t,e,n)=>Array.isArray(t[e])?t[e].map(i=>Object.entries(i).reduce((r,[o,a])=>(r[o]=Ne(a)?Kd(a,Mh(o,n)):a,r),{})):Ne(t[e])?Kd(t[e],Mh(e,n)):t[e],ic=(t,e,n)=>e.reduce((i,r)=>{const o=Ph(t,r,n);return i[r]=o,i},{}),za=(t,e,n)=>(Object.keys(e).forEach(i=>((r,o,a,s)=>{if(!Ne(r[o]))return r[o]=a,r;const l=Mh(o,s);return r[o]=l===void 0?a:Hr(a,l),r})(t,i,e[i],n)),t),w2=(t,e)=>{const n=t.filter(i=>i.x<0||i.y<0||i.x1<0||i.y1<0).reduce((i,r)=>{const[o,a,s,l]=(c=>{const u=Vs(),d=c.strokeWidth||0;if(No(c))u.x=c.x-.5*d,u.y=c.y-.5*d,u.width=c.width+d,u.height=c.height+d;else if(dr(c)){const{x1:p,y1:h,x2:f,y2:g}=c,$=Math.abs(Math.min(p,f)),y=Math.abs(Math.max(p,f)),v=Math.abs(Math.min(h,g)),w=Math.abs(Math.min(h,g));u.x=$+.5*d,u.y=y+.5*d,u.width=y-$+d,u.height=w-v+d}else rr(c)&&(u.x=c.x-c.rx+.5*d,u.y=c.y-c.ry+.5*d,u.width=2*c.rx+d,u.height=2*c.ry+d);return u&&Ee(c,"rotation")&&kr(u,c.rotation),Pl(u)})(r);return i.top=Math.min(o,i.top),i.left=Math.min(l,i.left),i.bottom=Math.max(s,i.bottom),i.right=Math.max(a,i.right),i},{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=e.width),n.bottom>0&&(n.bottom-=e.height),n},S2=(t,e,n)=>{const i=Di(t);Vi(i,e);const r=n(i);return Array.isArray(r)?r:[r]},k2=(t,e)=>{if(Ee(t,"left")&&(t.x=t.left),Ee(t,"right")&&!Ne(t.right)){const n=e.width-t.right;Ee(t,"left")?(t.x=t.left,t.width=Math.max(0,n-t.left)):Ee(t,"width")&&(t.x=n-t.width)}if(Ee(t,"top")&&(t.y=t.top),Ee(t,"bottom")&&!Ne(t.bottom)){const n=e.height-t.bottom;Ee(t,"top")?(t.y=t.top,t.height=Math.max(0,n-t.top)):Ee(t,"height")&&(t.y=n-t.height)}return t},C2=(t,e)=>(Gi(t)&&t.points.filter(n=>Ze(n.x)).forEach(n=>{n.x*=e,n.y*=e}),dr(t)&&Ze(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),Ze(t.x)&&Ze(t.y)&&(t.x*=e,t.y*=e),Ze(t.width)&&Ze(t.height)&&(t.width*=e,t.height*=e),Ze(t.rx)&&Ze(t.ry)&&(t.rx*=e,t.ry*=e),(n=>Ze(n.strokeWidth)&&n.strokeWidth>0)(t)&&(t.strokeWidth*=e),ir(t)&&(t._scale=e,Ze(t.fontSize)&&(t.fontSize*=e),Ze(t.lineHeight)&&(t.lineHeight*=e),Ze(t.width)&&!Ze(t.height)&&(t.width*=e)),Ee(t,"cornerRadius")&&Ze(t.cornerRadius)&&(t.cornerRadius*=e),t),T2=t=>{if(No(t))return ot(t.x+.5*t.width,t.y+.5*t.height);if(rr(t))return ot(t.x,t.y);if(t.text){if(Bd(t)){const n=t.height||ea(t.text,t).height;return ot(t.x+.5*t.width,t.y+.5*n)}const e=ea(t.text,t);return ot(t.x+.5*e.width,t.y+.5*e.height)}return Gi(t)?ia(t.points):dr(t)?ia([ms(t),gs(t)]):void 0};var gu=t=>/canvas/i.test(t.nodeName),d4=(t,e)=>new Promise((n,i)=>{let r=t,o=!1;const a=()=>{o||(o=!0,Yn(e)&&Promise.resolve().then(()=>e(Zi(r.naturalWidth,r.naturalHeight))))};if(r.src||(r=new Image,Ne(t)&&new URL(t,location.href).origin!==location.origin&&(r.crossOrigin="anonymous"),r.src=Ne(t)?t:URL.createObjectURL(t)),r.complete)return a(),n(r);Yn(e)&&r2(r).then(a).catch(i),r.onload=()=>{a(),n(r)},r.onerror=()=>i(new Error("Failed to load image"))});const Pg=new Map([]),p0=(t,e={})=>new Promise((n,i)=>{const{onMetadata:r=pe,onLoad:o=n,onError:a=i,onComplete:s=pe}=e;let l=Pg.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:bs()},Pg.set(t,l)),l.bus.sub("meta",r),l.bus.sub("load",o),l.bus.sub("error",a),l.bus.sub("complete",s),gu(t)){const c=t,u=c.cloneNode();l.complete=!0,l.image=u,l.size=qc(c)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=bs());l.loading||(l.loading=!0,d4(t,c=>{l.size=c,l.bus.pub("meta",{size:c})}).then(c=>{l.image=c,l.bus.pub("load",c)}).catch(c=>{l.error=c,l.bus.pub("error",c)}).finally(()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=bs()}))}),p4=(t,e,n,i)=>t.drawImage(e,n.x,n.x,n.width,n.height,i.x,i.y,i.width,i.height);var M2=async(t,e,n,i,r=p4,o)=>{t.save(),t.clip(),await r(t,e,n,i,o),t.restore()};const qd=(t,e,n,i,r)=>{const o=Ln(t);if(i){const s=ra(or(i),un);return s.x*=n.width,s.width*=n.width,s.y*=n.height,s.height*=n.height,{srcRect:s,destRect:o}}const a=Bi(0,0,n.width,n.height);if(e==="contain"){const s=oo(t,pr(a));o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else if(e==="cover"){const s=xs(o,a.width/a.height);o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else e?(o.width=e.width,o.height=e.height,r&&(o.x+=r.x,o.y+=r.y)):r&&(o.width=n.width,o.height=n.height,o.x+=r.x,o.y+=r.y);return{srcRect:a,destRect:o}},H1=(t,e)=>(e.cornerRadius>0?((n,i,r,o,a,s)=>{o<2*s&&(s=o/2),a<2*s&&(s=a/2),n.beginPath(),n.moveTo(i+s,r),n.arcTo(i+o,r,i+o,r+a,s),n.arcTo(i+o,r+a,i,r+a,s),n.arcTo(i,r+a,i,r,s),n.arcTo(i,r,i+o,r,s),n.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Ig=(t,e)=>(e.backgroundColor&&t.fill(),t),Rg=(t,e)=>(e.strokeWidth&&t.stroke(),t);var h0=async(t,e,n={})=>{const{drawImage:i}=n;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?Cr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Cr(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let r;if(r=gu(e.backgroundImage)?e.backgroundImage:await p0(e.backgroundImage),H1(t,e),Ig(t,e),e.backgroundRepeat==="repeat"){const o=e.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:s}=qd(e,e.backgroundSize||qc(r),qc(r),e.backgroundCorners,{x:0,y:0}),l=document.createElement("canvas");l.width=s.width,l.height=s.height;const c=l.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await i(c,r,a,{...s,x:0,y:0});const u=t.createPattern(l,"repeat");t.fillStyle=u,t.save(),t.beginPath(),t.rect(e.x+o.x,e.y+o.y,e.width-o.x,e.height-o.y),t.clip(),t.translate(s.x+o.x,s.y+o.y),t.fill(),ar(l),t.restore()}else{const{srcRect:o,destRect:a}=qd(e,e.backgroundSize,qc(r),e.backgroundCorners,e.backgroundPosition);await M2(t,r,o,a,i,{feather:e.feather})}return t.beginPath(),H1(t,e),Rg(t,e),[]}return H1(t,e),Ig(t,e),Rg(t,e),[]},m0=async(t,e,n={})=>new Promise(async(i,r)=>{const{drawImage:o}=n;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Cr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Cr(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let a;try{a=await p0(e.backgroundImage)}catch(u){r(u)}const s=Bi(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:l,destRect:c}=qd(s,e.backgroundSize,qc(a),e.backgroundCorners,e.backgroundPosition);await M2(t,a,l,c,o),e.strokeWidth&&t.stroke(),i([])}else e.strokeWidth&&t.stroke(),i([])}),h4=async(t,e,n)=>{const i=Ze(e.width)?Math.floor(e.width):void 0,r=Ze(e.height)?Math.floor(e.height):void 0,o=i&&r?es(e):ea(e.text,{...e,width:i,height:r}),a={x:e.x,y:e.y,width:o.width,height:o.height};if(h0(t,{...e,...a,options:n}),!e.text.length)return[];const{textOutlineWidth:s=0,textShadowX:l=0,textShadowY:c=0,textShadowBlur:u=0,textShadowColor:d,outline:p,blur:h,...f}=e,g=!!e.height;if(g&&(t.rect(a.x,a.y,a.width,a.height),t.save(),t.clip()),l||c||u){t.save(),t.translate(l,c);const $={...a};g||($.height+=Qa+u),await G1(t,$,{...e,width:i,height:r},{...n,paddingLeft:Qa+u,paddingRight:Qa+u,paddingTop:u,paddingBottom:u+(g?-1*c:e.fontSize),shapeExtendedProps:{color:d,blur:u}}),t.restore()}if(s){const $={...a};g||($.height+=Qa+s),await G1(t,$,{...e,width:i,height:r},{...n,paddingLeft:Qa+s,paddingRight:Qa+s,paddingTop:s,paddingBottom:s+g?0:e.fontSize,shapeExtendedProps:{color:e.textOutlineColor,outline:s}})}return g&&t.restore(),await G1(t,a,{...f,width:i,height:r},{...n,paddingLeft:Qa,paddingRight:Qa,paddingTop:0,paddingBottom:g?0:e.fontSize}),[]};const G1=async(t,e,n,i)=>{const{willRequest:r,shapeExtendedProps:o,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,styleNonce:u}=i,d=Ze(n.width)?Math.floor(e.width):void 0,p=Ze(n.height)?Math.floor(e.height):void 0,h=Math.ceil(e.width),f=Math.ceil(e.height),g=await $2(n.text,{...n,...o,...e,width:d,height:p,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,imageWidth:h,imageHeight:f,willRequest:r,styleNonce:u});t.drawImage(g,n.x-a,n.y-l,g.width,g.height)};var m4=async(t,e)=>new Promise(async n=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Cr(e.strokeColor):"none",t.globalAlpha=e.opacity,e.bitmap&&(t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[]));let i=ms(e),r=gs(e);t.moveTo(i.x,i.y),t.lineTo(r.x,r.y),e.strokeWidth&&t.stroke(),n([])}),Ih=async(t,e)=>new Promise((n,i)=>{if(e.bitmap&&e.points.length===1)return void m0(t,{x:e.points[0].x,y:e.points[0].y,rx:.5*e.strokeWidth,ry:.5*e.strokeWidth,backgroundColor:e.strokeColor}).then(()=>n([]));t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Cr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Cr(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:r}=e;e.bitmap&&(t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[])),e.pathClose&&t.beginPath(),t.moveTo(r[0].x,r[0].y);const o=r.length;for(let a=1;a<o;a++)t.lineTo(r[a].x,r[a].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),n([])}),P2=(t,e,n,i)=>((e||n)&&(t.translate(i.x,i.y),t.scale(e?-1:1,n?-1:1),t.translate(-i.x,-i.y)),t);const g4=async(t,e,n)=>{t.globalCompositeOperation=e.drawMode==="subtract"?"destination-out":"source-over";const i=T2(e);let r;if(s0(t,e.rotation,i),P2(t,e.flipX,e.flipY,i),No(e)?r=h0:rr(e)?r=m0:dr(e)?r=m4:Gi(e)?r=Ih:ir(e)&&(r=h4),r){const o=await r(t,e,n);return o.length?[e,...await I2(t,o,n)]:[]}return[]};var I2=async(t,e,n)=>{let i=[];for(const r of e)t.save(),t.beginPath(),i=[...i,...await g4(t,r,n)],t.restore();return i},g0=async(t,e={})=>{const{shapes:n=[],contextBounds:i=t,transform:r=pe,drawImage:o,willRequest:a,styleNonce:s,canvasMemoryLimit:l,computeShape:c=ri,preprocessShape:u=ri}=e;if(!n.length)return t;const d=Ci("canvas");d.width=i.width,d.height=i.height;const p=d.getContext("2d",{willReadFrequently:!0});p.putImageData(t,i.x||0,i.y||0);const h=n.map(Di).map(c).map(u).flat().filter(Boolean);r(p),await I2(p,h,{drawImage:o,canvasMemoryLimit:l,willRequest:a,styleNonce:s});const f=p.getImageData(0,0,d.width,d.height);return ar(d),f},f4=async(t,e={})=>{const{backgroundColor:n,backgroundImage:i}=e,r=!(!n||n&&n[3]===0);if(!i&&!r)return t;const o=Ci("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d",{willReadFrequently:!0});if(a.putImageData(t,0,0),a.globalCompositeOperation="destination-over",r&&(a.fillStyle=Cr(n),a.fillRect(0,0,o.width,o.height)),i){let l;l=gu(i)?i:await p0(i);const{srcRect:c,destRect:u}=qd({x:0,y:0,width:t.width,height:t.height},"cover",{width:l.width,height:l.height});a.drawImage(l,c.x,c.y,c.width,c.height,u.x,u.y,u.width,u.height)}const s=a.getImageData(0,0,o.width,o.height);return ar(o),s},f0=t=>t.length?t.reduce((e,n)=>((i,r)=>{const o=new Array(20);return o[0]=i[0]*r[0]+i[1]*r[5]+i[2]*r[10]+i[3]*r[15],o[1]=i[0]*r[1]+i[1]*r[6]+i[2]*r[11]+i[3]*r[16],o[2]=i[0]*r[2]+i[1]*r[7]+i[2]*r[12]+i[3]*r[17],o[3]=i[0]*r[3]+i[1]*r[8]+i[2]*r[13]+i[3]*r[18],o[4]=i[0]*r[4]+i[1]*r[9]+i[2]*r[14]+i[3]*r[19]+i[4],o[5]=i[5]*r[0]+i[6]*r[5]+i[7]*r[10]+i[8]*r[15],o[6]=i[5]*r[1]+i[6]*r[6]+i[7]*r[11]+i[8]*r[16],o[7]=i[5]*r[2]+i[6]*r[7]+i[7]*r[12]+i[8]*r[17],o[8]=i[5]*r[3]+i[6]*r[8]+i[7]*r[13]+i[8]*r[18],o[9]=i[5]*r[4]+i[6]*r[9]+i[7]*r[14]+i[8]*r[19]+i[9],o[10]=i[10]*r[0]+i[11]*r[5]+i[12]*r[10]+i[13]*r[15],o[11]=i[10]*r[1]+i[11]*r[6]+i[12]*r[11]+i[13]*r[16],o[12]=i[10]*r[2]+i[11]*r[7]+i[12]*r[12]+i[13]*r[17],o[13]=i[10]*r[3]+i[11]*r[8]+i[12]*r[13]+i[13]*r[18],o[14]=i[10]*r[4]+i[11]*r[9]+i[12]*r[14]+i[13]*r[19]+i[14],o[15]=i[15]*r[0]+i[16]*r[5]+i[17]*r[10]+i[18]*r[15],o[16]=i[15]*r[1]+i[16]*r[6]+i[17]*r[11]+i[18]*r[16],o[17]=i[15]*r[2]+i[16]*r[7]+i[17]*r[12]+i[18]*r[17],o[18]=i[15]*r[3]+i[16]*r[8]+i[17]*r[13]+i[18]*r[18],o[19]=i[15]*r[4]+i[16]*r[9]+i[17]*r[14]+i[18]*r[19]+i[19],o})([...e],n),t.shift()):[],R2=(t,e)=>{const n=t.width*t.height,i=e.reduce((o,a)=>(a.width>o.width&&a.height>o.height&&(o.width=a.width,o.height=a.height),o),{width:0,height:0}),r=i.width*i.height;return((o,a=2)=>Math.round(o*a)/a)(Math.max(.5,.5+(1-r/n)/2),5)};function Xe(){}const E2=t=>t;function Fi(t,e){for(const n in e)t[n]=e[n];return t}function A2(t){return t()}function Eg(){return Object.create(null)}function Kn(t){t.forEach(A2)}function Mn(t){return typeof t=="function"}function ln(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let yd;function Ag(t,e){return yd||(yd=document.createElement("a")),yd.href=e,t===yd.href}function Zr(t,...e){if(t==null)return Xe;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Da(t){let e;return Zr(t,n=>e=n)(),e}function F(t,e,n){t.$$.on_destroy.push(Zr(e,n))}function hr(t,e,n,i){if(t){const r=L2(t,e,n,i);return t[0](r)}}function L2(t,e,n,i){return t[1]&&i?Fi(n.ctx.slice(),t[1](i(e))):n.ctx}function mr(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],a=Math.max(e.dirty.length,r.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function gr(t,e,n,i,r,o){if(r){const a=L2(e,n,i,o);t.p(a,r)}}function fr(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function au(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Lg(t,e){const n={};e=new Set(e);for(const i in t)e.has(i)||i[0]==="$"||(n[i]=t[i]);return n}function kt(t,e,n){return t.set(n),e}function Pn(t){return t&&Mn(t.destroy)?t.destroy:Xe}const F2=typeof window<"u";let z2=F2?()=>window.performance.now():()=>Date.now(),$0=F2?t=>requestAnimationFrame(t):Xe;const rc=new Set;function D2(t){rc.forEach(e=>{e.c(t)||(rc.delete(e),e.f())}),rc.size!==0&&$0(D2)}function y0(t){let e;return rc.size===0&&$0(D2),{promise:new Promise(n=>{rc.add(e={c:t,f:n})}),abort(){rc.delete(e)}}}function St(t,e){t.appendChild(e)}function B2(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function $4(t){const e=dt("style");return function(n,i){St(n.head||n,i),i.sheet}(B2(t),e),e.sheet}function et(t,e,n){t.insertBefore(e,n||null)}function Q(t){t.parentNode.removeChild(t)}function dt(t){return document.createElement(t)}function Tr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function vi(t){return document.createTextNode(t)}function he(){return vi(" ")}function Ii(){return vi("")}function At(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function y4(t){return function(e){return e.preventDefault(),t.call(this,e)}}function b4(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function T(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Fg(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:T(t,i,e[i])}function zg(t,e){Object.keys(e).forEach(n=>{(function(i,r,o){r in i?i[r]=typeof i[r]=="boolean"&&o===""||o:T(i,r,o)})(t,n,e[n])})}function Oi(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Dg(t,e){t.value=e??""}function Et(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function O2(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}class b0{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Tr(n.nodeName):this.e=dt(n.nodeName),this.t=n,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)et(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Q)}}function Jd(t,e){return new t(e)}const Qd=new Map;let su,Od=0;function Bg(t,e,n,i,r,o,a,s=0){const l=16.666/i;let c=`{
`;for(let $=0;$<=1;$+=l){const y=e+(n-e)*o($);c+=100*$+`%{${a(y,1-y)}}
`}const u=c+`100% {${a(n,1-n)}}
}`,d=`__svelte_${function($){let y=5381,v=$.length;for(;v--;)y=(y<<5)-y^$.charCodeAt(v);return y>>>0}(u)}_${s}`,p=B2(t),{stylesheet:h,rules:f}=Qd.get(p)||function($,y){const v={stylesheet:$4(y),rules:{}};return Qd.set($,v),v}(p,t);f[d]||(f[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${d} ${i}ms linear ${r}ms 1 both`,Od+=1,d}function x4(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),Od-=r,Od||$0(()=>{Od||(Qd.forEach(o=>{const{ownerNode:a}=o.stylesheet;a&&Q(a)}),Qd.clear())}))}function Qc(t){su=t}function Il(){if(!su)throw new Error("Function called outside component initialization");return su}function qs(t){Il().$$.on_mount.push(t)}function v4(t){Il().$$.after_update.push(t)}function aa(t){Il().$$.on_destroy.push(t)}function _a(){const t=Il();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=O2(e,n,{cancelable:i});return r.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function Mo(t,e){return Il().$$.context.set(t,e),e}function mi(t){return Il().$$.context.get(t)}function Kr(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Gc=[],jn=[],_d=[],Rh=[],_2=Promise.resolve();let Eh=!1;function V2(){Eh||(Eh=!0,_2.then(E))}function W2(){return V2(),_2}function cc(t){_d.push(t)}function jo(t){Rh.push(t)}const Z1=new Set;let Oc,bd=0;function E(){const t=su;do{for(;bd<Gc.length;){const e=Gc[bd];bd++,Qc(e),w4(e.$$)}for(Qc(null),Gc.length=0,bd=0;jn.length;)jn.pop()();for(let e=0;e<_d.length;e+=1){const n=_d[e];Z1.has(n)||(Z1.add(n),n())}_d.length=0}while(Gc.length);for(;Rh.length;)Rh.pop()();Eh=!1,Z1.clear(),Qc(t)}function w4(t){if(t.fragment!==null){t.update(),Kn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(cc)}}function X1(t,e,n){t.dispatchEvent(O2(`${e?"intro":"outro"}${n}`))}const Vd=new Set;let $s;function Ie(){$s={r:0,c:[],p:$s}}function Re(){$s.r||Kn($s.c),$s=$s.p}function I(t,e){t&&t.i&&(Vd.delete(t),t.i(e))}function z(t,e,n,i){if(t&&t.o){if(Vd.has(t))return;Vd.add(t),$s.c.push(()=>{Vd.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const S4={duration:0};function Og(t,e,n,i){let r=e(t,n),o=i?0:1,a=null,s=null,l=null;function c(){l&&x4(t,l)}function u(p,h){const f=p.b-o;return h*=Math.abs(f),{a:o,b:p.b,d:f,duration:h,start:p.start,end:p.start+h,group:p.group}}function d(p){const{delay:h=0,duration:f=300,easing:g=E2,tick:$=Xe,css:y}=r||S4,v={start:z2()+h,b:p};p||(v.group=$s,$s.r+=1),a||s?s=v:(y&&(c(),l=Bg(t,o,p,f,h,g,y)),p&&$(0,1),a=u(v,f),cc(()=>X1(t,p,"start")),y0(w=>{if(s&&w>s.start&&(a=u(s,f),s=null,X1(t,a.b,"start"),y&&(c(),l=Bg(t,o,a.b,a.duration,0,g,r.css))),a){if(w>=a.end)$(o=a.b,1-o),X1(t,a.b,"end"),s||(a.b?c():--a.group.r||Kn(a.group.c)),a=null;else if(w>=a.start){const S=w-a.start;o=a.a+a.d*g(S/a.duration),$(o,1-o)}}return!(!a&&!s)}))}return{run(p){Mn(r)?(Oc||(Oc=Promise.resolve(),Oc.then(()=>{Oc=null})),Oc).then(()=>{r=r(),d(p)}):d(p)},end(){c(),a=s=null}}}const N2=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function U2(t,e){t.d(1),e.delete(t.key)}function Js(t,e){z(t,1,1,()=>{e.delete(t.key)})}function ns(t,e,n,i,r,o,a,s,l,c,u,d){let p=t.length,h=o.length,f=p;const g={};for(;f--;)g[t[f].key]=f;const $=[],y=new Map,v=new Map;for(f=h;f--;){const M=d(r,o,f),B=n(M);let C=a.get(B);C?C.p(M,e):(C=c(B,M),C.c()),y.set(B,$[f]=C),B in g&&v.set(B,Math.abs(f-g[B]))}const w=new Set,S=new Set;function R(M){I(M,1),M.m(s,u),a.set(M.key,M),u=M.first,h--}for(;p&&h;){const M=$[h-1],B=t[p-1],C=M.key,D=B.key;M===B?(u=M.first,p--,h--):y.has(D)?!a.has(C)||w.has(C)?R(M):S.has(D)?p--:v.get(C)>v.get(D)?(S.add(C),R(M)):(w.add(D),p--):(l(B,a),p--)}for(;p--;){const M=t[p];y.has(M.key)||l(M,a)}for(;h;)R($[h-1]);return $}function Pr(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(i[l]=1);for(const l in s)r[l]||(n[l]=s[l],r[l]=1);t[o]=s}else for(const l in a)r[l]=1}for(const a in i)a in n||(n[a]=void 0);return n}function Or(t){return typeof t=="object"&&t!==null?t:{}}function Io(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Ot(t){t&&t.c()}function zt(t,e,n,i){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),i||cc(()=>{const a=t.$$.on_mount.map(A2).filter(Mn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Kn(a),t.$$.on_mount=[]}),o.forEach(cc)}function Dt(t,e){const n=t.$$;n.fragment!==null&&(Kn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dn(t,e,n,i,r,o,a,s=[-1]){const l=su;Qc(t);const c=t.$$={fragment:null,ctx:[],props:o,update:Xe,not_equal:r,bound:Eg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Eg(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(d,p,...h)=>{const f=h.length?h[0]:p;return c.ctx&&r(c.ctx[d],c.ctx[d]=f)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](f),u&&function(g,$){g.$$.dirty[0]===-1&&(Gc.push(g),V2(),g.$$.dirty.fill(0)),g.$$.dirty[$/31|0]|=1<<$%31}(t,d)),p}):[],c.update(),u=!0,Kn(c.before_update),c.fragment=!!i&&i(c.ctx),e.target){if(e.hydrate){const d=function(p){return Array.from(p.childNodes)}(e.target);c.fragment&&c.fragment.l(d),d.forEach(Q)}else c.fragment&&c.fragment.c();e.intro&&I(t.$$.fragment),zt(t,e.target,e.anchor,e.customElement),E()}Qc(l)}class pn{$destroy(){Dt(this,1),this.$destroy=Xe}$on(e,n){if(!Mn(n))return Xe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){var n;this.$$set&&(n=e,Object.keys(n).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kl=[];function Ql(t,e){return{subscribe:fe(t,e).subscribe}}function fe(t,e=Xe){let n;const i=new Set;function r(o){if(ln(t,o)&&(t=o,n)){const a=!Kl.length;for(const s of i)s[1](),Kl.push(s,t);if(a){for(let s=0;s<Kl.length;s+=2)Kl[s][0](Kl[s+1]);Kl.length=0}}}return{set:r,update:function(o){r(o(t))},subscribe:function(o,a=Xe){const s=[o,a];return i.add(s),i.size===1&&(n=e(r)||Xe),o(t),()=>{i.delete(s),i.size===0&&(n(),n=null)}}}}function Vn(t,e,n){const i=!Array.isArray(t),r=i?[t]:t,o=e.length<2;return Ql(n,a=>{let s=!1;const l=[];let c=0,u=Xe;const d=()=>{if(c)return;u();const h=e(i?l[0]:l,a);o?a(h):u=Mn(h)?h:Xe},p=r.map((h,f)=>Zr(h,g=>{l[f]=g,c&=~(1<<f),s&&d()},()=>{c|=1<<f}));return s=!0,d(),function(){Kn(p),u()}})}var j2=t=>t.reduce((e,n)=>Object.assign(e,n),{});const ql=t=>({updateValue:t}),ta=t=>({defaultValue:t}),H2=t=>({store:t}),xd=t=>({store:(e,n)=>Vn(...t(n))}),vd=t=>({store:(e,n)=>{const[i,r,o=()=>!1]=t(n);let a,s=!0;return Vn(i,(l,c)=>{r(l,u=>{!s&&o(a,u)||(a=u,s=!1,c(u))})})}}),_c=t=>({store:(e,n)=>{const[i,r={},o]=t(n);let a=[];const s={},l=h=>i(h,s),c=h=>{(a.length||h.length)&&(a=h,u())},u=()=>{const h=a.map(l);o&&h.sort(o),a=[...h],p(h)};Object.entries(r).map(([h,f])=>f.subscribe(g=>{s[h]=g,g&&u()}));const{subscribe:d,set:p}=fe(e||[]);return{set:c,update:h=>c(h(a)),subscribe:d}}});var _g=t=>{const e={},n={};return t.forEach(([i,...r])=>{const o=j2(r),a=e[i]=((l,c,u)=>{const{store:d=S=>fe(S),defaultValue:p=pe,updateValue:h}=u,f=d(p(),c,l),{subscribe:g,update:$=pe}=f;let y;const v=S=>{let R=!0;y&&y(),y=g(M=>{if(R)return R=!1;S(M),y(),y=void 0})},w=h?h(l):ri;return f.set=S=>$(R=>w(S,R,v)),f.defaultValue=p,f})(n,e,o),s={get:()=>Da(a),set:a.set};Object.defineProperty(n,i,s)}),{stores:e,accessors:n}},k4=[["src",H2(()=>{let t;const{subscribe:e,set:n}=fe(),i=r=>{t!==r&&(t=r,n(t))};return{set:i,subscribe:e,update:r=>i(r(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",ta(()=>"pixelated")],["images",ta(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"],["csp"]],G2=t=>t.charAt(0).toUpperCase()+t.slice(1),tp=(t,e)=>{Object.keys(e).forEach(n=>{const i=Yn(e[n])?{value:e[n],writable:!1}:e[n];Object.defineProperty(t,n,i)})};const Vg=(t,e)=>{let n,i,r,o,a,s,l,c,u,d;const p=e.length;for(n=0;n<p;n++)if(i=e[n],r=e[n+1>p-1?0:n+1],o=i.x-t.x,a=i.y-t.y,s=r.x-t.x,l=r.y-t.y,c=o-s,u=a-l,d=c*a-u*o,d<-1e-5)return!1;return!0};var Wg=(t,e)=>{const n=e2(e),i=ui();Wo(t).forEach(o=>{Wi(o,i),Vg(o,e)||n.forEach(a=>{const s=Math.atan2(a.start.y-a.end.y,a.start.x-a.end.x),l=1e4*Math.sin(Math.PI-s),c=1e4*Math.cos(Math.PI-s),u=ot(o.x+l,o.y+c),d=e0(Ky(a),1e4),p=n0(Ys(o,u),d);p&&Wi(i,Ni(We(p),o))})});const r=Ln(t);return Wi(r,i),!!Wo(r).every(o=>Vg(o,e))&&(op(t,r),!0)},Z2=(t,e)=>{const n=Wo(t),i=n2(e,5),r=Fn(t),o=[];n.forEach(l=>{const c=((d,p)=>{const h=ot(d.start.x-d.end.x,d.start.y-d.end.y),f=go(h),g=Br(f,p);return d.end.x+=g.x,d.end.y+=g.y,d})(Ys(We(r),We(l)),1e6);let u=!1;i.map(Ky).forEach(d=>{const p=n0(c,d);p&&!u&&(o.push(p),u=!0)})});const a=Po(o[0],o[2])<Po(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],s=or(a);return s.width<t.width&&(op(t,s),!0)},X2=(t,e,n={x:0,y:0})=>{const i=Xr(t),r=Fn(i),o=Jy(i,n,r).map(s=>Gr(s,e,r)),a=or(o);return o.map(s=>Ni(s,a))},tc=(t,e=0,n=pr(t))=>{let i,r;if(e!==0){const o=Math.atan2(1,n),a=Math.sign(e)*e,s=a%Math.PI,l=a%oa;let c;c=s>ma&&s<oa+ma?l>ma?a:oa-l:l>ma?oa-l:a;const u=Math.min(Math.abs(t.height/Math.sin(o+c)),Math.abs(t.width/Math.cos(o-c)));i=Math.cos(o)*u,r=i/n}else i=t.width,r=i/n,r>t.height&&(r=t.height,i=r*n);return Zi(i,r)},C4=(t,e,n,i,r,o,a,s)=>{const l=mo(a),c=mo(s),u=un(Math.max(e.width/c.width,e.height/c.height)),d=un(Math.min(e.width/l.width,e.height/l.height)),p=Ln(e);if(d<1||u>1){const h=Fn(t),f=Fn(e),g=d<1?d:u,$=(f.x+h.x)/2,y=(f.y+h.y)/2,v=p.width/g,w=p.height/g;qy(p,$-.5*v,y-.5*w,v,w)}return o?(((h,f,g=0,$=ui(),y)=>{if(Ze(g)&&g!==0||$.x||$.y){const v=pr(h),w=X2(f,g,$),S=tc(f,g,v);if(!(h.width<S.width&&h.height<S.height)){const R=.5*h.width-.5*S.width,M=.5*h.height-.5*S.height;h.width>S.width&&(h.width=S.width,h.x+=R),h.height>S.height&&(h.height=S.height,h.y+=M)}Wg(h,w),Z2(h,w)&&Wg(h,w)}else{const v=pr(h);h.width=Math.min(h.width,f.width),h.height=Math.min(h.height,f.height),h.x=Math.max(h.x,0),h.x+h.width>f.width&&(h.x-=h.x+h.width-f.width),h.y=Math.max(h.y,0),h.y+h.height>f.height&&(h.y-=h.y+h.height-f.height);const w=Fn(h),S=oo(h,v);S.width=Math.max(y.width,S.width),S.height=Math.max(y.height,S.height),S.x=w.x-.5*S.width,S.y=w.y-.5*S.height,op(h,S)}})(p,n,i,r,l),{crop:p}):{crop:p}},x0=(t,e,n)=>{const i=Xr(t),r=Fn(i),o=kr(i,n,r),a=Fn(ou(or(o))),s=Fn(e),l=Gr(s,-n,a),c=Ni(l,a),u=Uo(Wi(r,c),un);return Bi(u.x-.5*e.width,u.y-.5*e.height,e.width,e.height)},si=(t,e,n)=>Math.max(e,Math.min(t,n));const Y1=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration","currentTime"],Ah=t=>Mi(t)?t.map(Ah):a0(t)||mu(t)?t:Ks(t)?{...t}:t,Vc=t=>t.map(e=>Object.entries(e).reduce((n,[i,r])=>(i.startsWith("_")||(n[i]=r),n),{})),T4=(t,e)=>t===e;var vs=(t,e,n=T4)=>{if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0};const Ng=(t,e,n)=>{const i=Uo(Fn(t),u=>un(u,8)),r=Xr(e),o=Fn(r),a=kr(r,n,o),s=Uo(ac(or(a)),u=>un(u,8)),l=Math.abs(s.x-i.x),c=Math.abs(s.y-i.y);return l<1&&c<1},M4=(t,e,n,i,r)=>{if(!r)return[-1/0,1/0];const o=Math.max(n.width/i.width,n.height/i.height),a=Zi(i.width*o,i.height*o),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,u=e?t.width:t.height,d=Math.acos(a.height/s),p=d-Math.acos(u/s),h=Math.asin(c/s)-d;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const f=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-f,f]},Zc=(t,e)=>{const{context:n,props:i}=e;return t._isFormatted||((t=x2(t))._isFormatted=!0,Object.assign(t,i)),t._isDraft||!lp(t)||t._context&&fa(n,t._context)||(k2(t,n),t._context={...n}),t},P4=(t,e)=>(t._isFormatted||(t.disableMove=!0,t.disableSelect=!0,t.disableResize=!0,t.disableRotate=!0),Zc(t,e));var v0=[["file"],["size"],["loadState"],["processState"],["aspectRatio",xd(({size:t})=>[t,e=>e?pr(e):void 0])],["perspectiveX",ta(()=>0)],["perspectiveY",ta(()=>0)],["perspective",xd(({perspectiveX:t,perspectiveY:e})=>[[t,e],([n,i])=>({x:n,y:i})])],["rotation",ta(()=>0),ql(t=>(e,n,i)=>{if(e===n)return e;const{loadState:r,size:o,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:u,cropLimitToImage:d,cropOrigin:p}=t;if(!c||!r||!r.beforeComplete)return e;const h=d&&(($,y,v)=>{const w=tc(y,v,pr($));return ru(ys(w,Math.round),ys(mo($),Math.round))})(c,o,n),f=d&&Ng(c,o,n),g=(($,y,v,w,S,R,M,B,C,D)=>{const O=mo(C),P=mo(D);M&&(P.width=Math.min(D.width,S.width),P.height=Math.min(D.height,S.height));let b=!1;const W=(N,j)=>{const ut=x0(S,w,N),Z=Xr(S),ft=Fn(Z),q=Jy(Z,R,ft),ht=Ni(We(ft),rg(q)),xt=Gr(Fn(ut),j,ft),lt=Ni(We(ft),xt);q.forEach(Lt=>Gr(Lt,j,ft));const Ct=or(q),it=rg(q),vt=Wi(Ni(Ni(it,lt),Ct),ht),K=Bi(vt.x-.5*ut.width,vt.y-.5*ut.height,ut.width,ut.height);if(B&&Dr(K,B.width/K.width),M){const Lt=X2(S,j,R);Z2(K,Lt)}const Ft=un(Math.min(K.width/O.width,K.height/O.height),8),Ht=un(Math.max(K.width/P.width,K.height/P.height),8);return(Ft<1||Ht>1)&&un(Math.abs(j-N))===un(Math.PI/2)&&!b?(b=!0,W($,$+Math.sign(j-N)*Math.PI)):{rotation:j,crop:ra(K,Lt=>un(Lt,8))}},nt=Math.sign(y)*Math.round(Math.abs(y)/oa)*oa,k=si(y,nt+v[0],nt+v[1]);return W($,k)})(n,e,a,c,o,u,d,p,s,l);if(h&&f){const $=tc(o,e,pr(g.crop));g.crop.x+=.5*g.crop.width,g.crop.y+=.5*g.crop.height,g.crop.x-=.5*$.width,g.crop.y-=.5*$.height,g.crop.width=$.width,g.crop.height=$.height}return i(()=>{t.crop=ra(g.crop,$=>un($,8))}),g.rotation})],["flipX",ta(()=>!1)],["flipY",ta(()=>!1)],["flip",xd(({flipX:t,flipY:e})=>[[t,e],([n,i])=>({x:n,y:i})])],["isRotatedSideways",vd(({rotation:t})=>[[t],([e],n)=>n(Ja(e)),(e,n)=>e!==n])],["crop",ql(t=>(e,n=e)=>{const{loadState:i,size:r,cropMinSize:o,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:u}=t;if(!e&&!n||!i||!i.beforeComplete)return e;e||(e=Xr(tc(r,c,l||pr(r))));const d=C4(n,e,r,c,u,s,o,a),p=ra(d.crop,h=>un(h,8));return fa(n,p)?n:p})],["cropAspectRatio",ql(t=>(e,n)=>{const{loadState:i,crop:r,size:o,rotation:a,cropLimitToImage:s}=t,l=(u=>{if(u){if(/:/.test(u)){const[d,p]=u.split(":");return d/p}return parseFloat(u)}})(e);if(!l)return;if(!r||!i||!i.beforeComplete)return l;const c=n?Math.abs(e-n):1;if(Ng(r,o,a)&&s&&c>=.1){const u=((d,p)=>{const h=d.width,f=d.height;return Ja(p)&&(d.width=f,d.height=h),d})(mo(o),a);t.crop=ra(oo(Xr(u),e),un)}else{const u={width:r.height*l,height:r.height},d=.5*(r.width-u.width),p=.5*(r.height-u.height);t.crop=ra(Bi(r.x+d,r.y+p,u.width,u.height),un)}return l})],["cropOrigin"],["cropMinSize",ta(()=>({width:1,height:1}))],["cropMaxSize",ta(()=>({width:32768,height:32768}))],["cropLimitToImage",ta(()=>!0),ql(t=>(e,n,i)=>{const{crop:r}=t;return r&&!n&&e&&i(()=>t.crop=Ln(t.crop)),e})],["cropSize",vd(({crop:t})=>[[t],([e],n)=>{e&&n(Zi(e.width,e.height))},(e,n)=>ru(e,n)])],["cropRectAspectRatio",xd(({cropSize:t})=>[[t],([e],n)=>{e&&n(un(pr(e),5))}])],["cropRange",vd(({size:t,rotation:e,cropRectAspectRatio:n,cropMinSize:i,cropMaxSize:r,cropLimitToImage:o})=>[[t,e,n,i,r,o],([a,s,l,c,u,d],p)=>{a&&p(((h,f,g,$,y,v)=>{const w=mo($),S=mo(y);return v?[w,ys(tc(h,f,g),Math.round)]:[w,S]})(a,s,l,c,u,d))},(a,s)=>vs(a,s)])],["rotationRange",vd(({size:t,isRotatedSideways:e,cropMinSize:n,cropSize:i,cropLimitToImage:r})=>[[t,e,n,i,r],([o,a,s,l,c],u)=>{!o||!l||u(M4(o,a,s,l,c))},(o,a)=>vs(o,a)])],["backgroundColor",ql(()=>t=>((e=[0,0,0,0],n=1)=>e.length===4?e:[...e,n])(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["currentTime"],["minDuration",ta(()=>1/24)],["maxDuration",ta(()=>1/0)],["volume",ta(()=>1)],["trim"],["redaction",_c(({size:t})=>[Zc,{context:t}])],["manipulation",_c(({size:t})=>[Zc,{context:t}])],["annotation",_c(({size:t})=>[Zc,{context:t}])],["decoration",_c(({crop:t})=>[Zc,{context:t}])],["selection",_c(({size:t})=>[P4,{context:t}])],["frame",ql(()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return Ne(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",H2((t,e,n)=>{const i=Y1.map(l=>e[l]);let r=!1;const o=fe({}),{subscribe:a}=Vn([...i,o],(l,c)=>{if(r)return;const u=Y1.reduce((d,p,h)=>(d[p]=Ah(l[h]),d),{});u.crop&&ra(u.crop,Math.round),u.manipulation=u.manipulation&&Vc(u.manipulation),u.redaction=u.redaction&&Vc(u.redaction),u.annotation=u.annotation&&Vc(u.annotation),u.decoration=u.decoration&&Vc(u.decoration),u.selection=u.selection&&Vc(u.selection),c(u)}),s=l=>{l&&(r=!0,n.cropOrigin=void 0,Y1.filter(c=>Ee(l,c)).forEach(c=>{const u=l[c];n[c]=u===null?void 0:Ah(u)}),r=!1,o.set({}))};return{set:s,update:l=>s(l(null)),subscribe:a}})]],Ug=async(t,e,n={},i)=>{const{ontaskstart:r,ontaskprogress:o,ontaskend:a,token:s}=i;let l=!1;const c={cancel:pe};s.cancel=()=>{l=!0,c.cancel()};for(const[u,d]of e.entries()){if(l)return;const[p,h]=d;r(u,h);try{t=await p(t,{...n,taskCancelToken:c},f=>o(u,h,f))}catch(f){throw l=!0,f}a(u,h)}return t};const Y2=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],I4=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],R4=v0.map(([t])=>t).filter(t=>!I4.includes(t)),K1=t=>"image"+G2(t),jg=t=>Ee(t,"crop");var K2=()=>{const{stores:t,accessors:e}=_g(k4),{sub:n,pub:i}=bs(),r=()=>e.images?e.images[0]:{};let o={};const a={};R4.forEach(g=>{Object.defineProperty(e,K1(g),{get:()=>{const $=r();if($)return $.accessors[g]},set:$=>{o[K1(g)]=$,a[K1(g)]=$;const y=r();y&&(y.accessors[g]=$)}})});const s=()=>e.images&&e.images[0],l=t.src.subscribe(g=>{if(!g)return e.images=[];e.imageReader&&(e.images.length&&(o={}),u(g))}),c=t.imageReader.subscribe(g=>{g&&(e.images.length||e.src&&u(e.src))}),u=g=>{Promise.resolve().then(()=>p(g,o)).catch(()=>{})};let d;const p=(g,$={})=>new Promise((y,v)=>{let w=s();const S=!($.cropLimitToImage===!1||$.imageCropLimitToImage===!1||a.imageCropLmitedToImage===!1),R=$.cropMinSize||$.imageCropMinSize||a.imageCropMinSize,M=S?R:w&&w.accessors.cropMinSize,B=$.minDuration||$.imageMinDuration;w&&f(),w=(({minSize:O={width:1,height:1},minDuration:P=0}={})=>{const{stores:b,accessors:W}=_g(v0),{pub:nt,sub:k}=bs(),N=(j,ut)=>{const Z=()=>W[j]||{},ft=xt=>{W[j]={...Z(),...xt,timeStamp:Date.now()}},q=()=>Z().error,ht=xt=>{q()||(ft({error:xt}),nt(ut+"error",{...Z()}))};return{start(){nt(ut+"start")},onabort(){ft({abort:!0}),nt(ut+"abort",{...Z()})},ontaskstart(xt,lt){q()||(ft({index:xt,task:lt,taskProgress:void 0,taskLengthComputable:void 0}),nt(ut+"taskstart",{...Z()}))},ontaskprogress(xt,lt,Ct){q()||(ft({index:xt,task:lt,taskProgress:Ct.loaded/Ct.total,taskLengthComputable:Ct.lengthComputable}),nt(ut+"taskprogress",{...Z()}),nt(ut+"progress",{...Z()}))},ontaskend(xt,lt){q()||(ft({index:xt,task:lt}),nt(ut+"taskend",{...Z()}))},ontaskerror(xt){ht(xt)},error(xt){ht(xt)},beforeComplete(xt){q()||(ft({beforeComplete:!0}),nt("before"+ut,xt))},complete(xt){q()||(ft({complete:!0}),nt(ut,xt))}}};return tp(W,{read:(j,{reader:ut},Z={})=>{if(!ut)return;Object.assign(W,{file:void 0,size:void 0,loadState:void 0});let ft={cancel:pe},q=!1;const ht=N("loadState","load"),xt={token:ft,...ht},lt={src:j,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(ht.start(),q)return ht.onabort();const Ct=await Ug(lt,ut,Z,xt);if(q)return ht.onabort();const{size:it,duration:vt,dest:K}=Ct||{};if(!it||!it.width||!it.height)throw new Jc("Image size missing","IMAGE_SIZE_MISSING",Ct);if(vt>0&&vt<P)throw new Jc("Video too short","VIDEO_TOO_SHORT",{...Ct,minDuration:P});if(it.width<O.width||it.height<O.height)throw new Jc("Image too small","IMAGE_TOO_SMALL",{...Ct,minWidth:O.width,minHeight:O.height});Object.assign(W,{file:K,size:it,duration:vt}),ht.beforeComplete(Ct),ht.complete(Ct)}catch(Ct){ht.error(Ct)}finally{ft=void 0}}),()=>{q=!0,ft&&ft.cancel(),ht.onabort()}},write:(j,ut)=>{if(!W.loadState.complete)return;W.processState=void 0;const Z=N("processState","process"),ft={src:W.file,imageState:W.state,dest:void 0};if(Yn(j)&&(j=j(W.file,W.state)),!j)return Z.start(),void Z.complete(ft);let q={cancel:pe},ht=!1;const xt=ut,lt={token:q,...Z};return Promise.resolve().then(async()=>{try{if(Z.start(),ht)return Z.onabort();const Ct=await Ug(ft,j,xt,lt);if(ht)return Z.onabort();Z.complete(Ct)}catch(Ct){Z.error(Ct)}finally{q=void 0}}),()=>{ht=!0,q&&q.cancel()}},on:k}),{accessors:W,stores:b}})({minSize:M,minDuration:B}),Y2.map(O=>{return w.accessors.on(O,(P=O,b=>i(P,b)));var P});const C=()=>{o={},D.forEach(O=>O())},D=[];D.push(w.accessors.on("loaderror",O=>{C(),v(O)})),D.push(w.accessors.on("loadabort",()=>{C(),v({name:"AbortError"})})),D.push(w.accessors.on("load",O=>{d=void 0,C(),y(O)})),D.push(w.accessors.on("beforeload",()=>((O,P)=>{if(jg(P))return void(e.imageState=P);if(!P.imageCrop){const nt=O.accessors.size,k=P.imageRotation||0,N=Yy(mo(nt),k),j=Xr(N);j.width=un(Math.abs(j.width),6),j.height=un(Math.abs(j.height),6);const ut=P.imageCropAspectRatio||(P.imageCropLimitToImage?pr(nt):pr(j));let Z;P.imageCropLimitToImage?Z=oo(j,ut):(Z=xs(j,ut),Z.x=(nt.width-Z.width)/2,Z.y=(nt.height-Z.height)/2),P.imageCrop=Z}if(O.accessors.duration&&!P.imageTrim&&P.imageMaxDuration){const{duration:nt}=O.accessors;P.imageTrim=[[0,Math.min(P.imageMaxDuration/nt,1)]]}const b=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];b.filter(nt=>Ee(P,nt)).forEach(nt=>{e[nt]=P[nt],delete P[nt]});const W=Object.keys(P).filter(nt=>!b.includes(nt)).reduce((nt,k)=>(nt[k]=P[k],nt),{});Object.assign(e,W)})(w,$))),e.images=[w],$.imageReader&&(e.imageReader=$.imageReader),$.imageWriter&&(e.imageWriter=$.imageWriter),d=w.accessors.read(g,{reader:e.imageReader},{willRequest:e.willRequest})});let h;const f=()=>{const g=s();g&&(d&&d(),g.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),tp(e,{on:n,loadImage:p,abortLoadImage:()=>{d&&d(),e.images=[]},editImage:(g,$)=>new Promise((y,v)=>{p(g,$).then(()=>{const{images:w}=e,S=w[0],R=()=>{M(),B()},M=S.accessors.on("processerror",C=>{R(),v(C)}),B=S.accessors.on("process",C=>{R(),y(C)})}).catch(v)}),removeImage:f,processImage:(g,$)=>new Promise((y,v)=>{try{const w=[],S=()=>{h=void 0,w.forEach(R=>R())};(async()=>{if((M=>Ne(M)||lc(M)||sc(M))(g))try{await p(g,$)}catch(M){v(M)}else g&&(jg(g)?e.imageState=g:Object.assign(e,g));const R=s();if(!R)return v("no image");w.push(R.accessors.on("processerror",M=>{S(),v(M)})),w.push(R.accessors.on("processabort",()=>{S(),v({name:"AbortError"})})),w.push(R.accessors.on("process",M=>{S(),y(M)})),h=R.accessors.write(e.imageWriter,{redactionRenderStyle:e.imageRedactionRendering,shapePreprocessor:e.shapePreprocessor||ri,imageScrambler:e.imageScrambler,willRequest:e.willRequest,csp:e.csp||{},willRequestResource:e.willRequestResource})})()}catch(w){v(w)}}),abortProcessImage:()=>{const g=s();g&&(h&&h(),g.accessors.processState=void 0)},destroy:()=>{l&&l(),c&&c()}}),e};const E4=(t,e)=>{const{processImage:n}=K2();return n(t,e)};var q2=()=>Oa()?ba()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,J2=(t,e)=>Object.keys(t).filter(n=>!e.includes(n)).reduce((n,i)=>(n[i]=t[i],n),{}),Q2=t=>new Promise(e=>{if(t.duration===1/0)return t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)});const A4=t=>new Promise(e=>{const n=new FileReader;n.onload=()=>e(n.result),n.readAsArrayBuffer(t)}),q1=(t,e=0,n=t.byteLength)=>{const i=[],r=e+n;for(;e<r;){const o=t.getUint32(e);if(o<0)break;const a=t.getUint32(e+4);if(i.push({type:a,size:o,offset:e,bodyOffset:e+8,bodySize:o-8}),o<8)break;e+=o}return i},L4=(t,{limit:e=1024}={})=>{let n=0;if(n+=4,t.getUint32(n)!==1718909296)return 0;n+=4;const i=t.getUint32(n);return i===1836069938?((r,o,a)=>{let s=!1,l=-1;for(let h=o;h<a;h++)if(s||r.getUint32(h)!==1953653099||(s=!0,h+=4),s&&r.getUint8(h)==64){l=h;break}if(l<0)return 0;const c=r.getUint32(l-28),u=r.getUint32(l-20),d=r.getUint32(l-32),p=r.getUint32(l-16);return c===65536&&u===4294901760?90:d===4294901760&&p===4294901760?180:c===4294901760&&u===65536?270:0})(t,n,e):i===1903435808?(r=>{const o=q1(r).find(c=>c.type===1836019574);if(!o)return 0;const a=q1(r,o.bodyOffset,o.bodySize);a.filter(c=>c.type===1953653099).forEach(c=>{a.push(...q1(r,c.bodyOffset,c.bodySize))});const s=[1836476516,1953196132],l=a.filter(c=>s.includes(c.type));for(const{type:c,bodyOffset:u}of l){const d=r.getUint8(u);let p=u+4;p+=c===1836476516?32:36,p+=d===1?12:0;const h=r.getInt32(p),f=r.getInt32(p+4);if(h===0&&f>0)return 90;if(h<0&&f===0)return 180;if(h===0&&f<0)return 270}return 0})(t):0};var tb=t=>new Promise((e,n)=>{(Ba()?(async i=>{const r=await A4(i),o=new DataView(r);return L4(o)})(t):Promise.resolve(0)).then(i=>{const r=document.createElement("video");r.onerror=()=>n(r.error),r.playsInline=!0,r.preload="auto",r.onseeked=()=>{r.onseeked=void 0,e(r)},r.onloadeddata=()=>{r.onloadeddata=void 0,r.dataset.rotation=i?""+i:"0",Q2(r).then(e),r.currentTime=0},r.src=URL.createObjectURL(t)+(ba()&&Oa()?"#t=0.00001":"")})}),eb=(t,e)=>new Promise(n=>{if(t.currentTime===e)return n(t);let i=t.onseeked;t.onseeked=()=>{t.onseeked=i,n(t)},t.currentTime=si(e,0,t.duration)}),nb=(t,e=0)=>new Promise((n,i)=>{tb(t).then(r=>{eb(r,e).then(o=>{const a=Ci("canvas");o2(o).then(({width:s,height:l})=>{a.width=s,a.height=l;const c=a.getContext("2d",{willReadFrequently:!0}),u=()=>{c.drawImage(o,0,0,a.width,a.height);const d=c.getImageData(0,0,a.width,a.height);ar(a),URL.revokeObjectURL(o.src),n(d)};Oa()?setTimeout(u,16):u()})})})}),mc=t=>/video/.test(t.type);const w0=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(n,i,r,o,a)=>{r.width=Math.max(r.width,1),r.height=Math.max(r.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);const{dest:s}=await E4(i,{imageReader:lb(),imageWriter:cb({format:"canvas",targetSize:{...o,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:r}),{feather:l=0}=a||{};if(l>0){const c=Ci("canvas");c.width=s.width,c.height=s.height;const u=c.getContext("2d",{willReadFrequently:!0}),d=1/l;let p=0;for(p=0;p<l;p++){const f=p*d;u.strokeStyle=`rgba(0,0,0,${f*f})`,u.strokeRect(p+.5,p+.5,s.width-2*p-1,s.height-2*p-1)}u.fillStyle="#000",u.fillRect(p,p,s.width+.5-2*p,s.height+.5-2*p);const h=s.getContext("2d");h.globalCompositeOperation="destination-in",h.drawImage(c,0,0),ar(c)}n.drawImage(s,o.x,o.y,o.width,o.height),ar(s)},Pi=(t,e=(...i)=>i,n)=>async(i,r,o)=>{o(Jl(0,!1));let a=!1;const s=await t(...e(i,r,l=>{a=!0,o(l)}));return n&&n(i,s),a||o(Jl(1,!1)),i},F4=({willRequest:t,srcProp:e="src",destProp:n="dest"}={})=>[Pi(Ov,(i,r,o)=>[i[e],o,{...r,willRequest:t}],(i,r)=>i[n]=r),"any-to-file"],z4=({srcProp:t="dest",destProp:e="dest"}={})=>[Pi(async n=>{if(/octet-stream/.test(n.type)){console.warn(`Pintura: File has unknown mime type "${n.type}", make sure your server sets the correct Content-Type header.`);let i="image";const r=await o0(n);/video/i.test(r.nodeName)&&(i="video");const o={type:i+"/unknown"};return mu(n)?new File([n],n.name,{...o,lastModified:n.lastModified}):new Blob([n],o)}return n},n=>[n[t]],(n,i)=>n[e]=i),"any-to-file"],ib=({srcProp:t="src",destProp:e="size"}={})=>[Pi(a2,n=>[n[t]],(n,i)=>n[e]=i),"read-image-size"],D4=async t=>{const e=await o0(t);if(Zd(e))return await(n=>new Promise((i,r)=>{const o=()=>{Q2(n).then(()=>{i(n.duration)})};if(n.readyState>=1)return o();n.onloadedmetadata=o,n.onerror=()=>r(n.error)}))(e)},B4=({srcProp:t="src",destProp:e="duration"}={})=>[Pi(D4,n=>[n[t]],(n,i)=>n[e]=i),"read-media-duration"],rb=({srcSize:t="size",srcOrientation:e="orientation",destSize:n="size"}={})=>[Pi(_v,i=>[i[t],i[e]],(i,r)=>i[n]=r),"image-size-match-orientation"],ob=({srcProp:t="src",destProp:e="copy"}={})=>[Pi((n,i)=>c2(n)?qh(n,i):void 0,n=>[n[t],onprogress],(n,i)=>n[e]=i),"read-image-head"],ab=({srcProp:t="copy",destProp:e="orientation"}={})=>[Pi(Yh,n=>[n[t],274],(n,i=1)=>n[e]=i),"read-exif-orientation-tag"],O4=({srcProp:t="copy"}={})=>[Pi(Yh,e=>[e[t],274,1]),"clear-exif-orientation-tag"],_4=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:n="imageState",destImageSize:i="size",destScalar:r="scalar"}={})=>[Pi((o,a)=>[Math.min(a.width/o.width,a.height/o.height),es(a)],o=>[o[t],o[e],o[n]],(o,[a,s])=>{o[r]=a,o[i]=s}),"calculate-canvas-scalar"],V4=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:n,srcImageState:i="imageState"}={})=>[Pi((r,o,a)=>mc(r)?nb(r,a.currentTime):Hy(r,o),r=>[r[t],n,r[i]],(r,o)=>r[e]=o),"blob-to-image-data"],W4=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[Pi(Wy,n=>[n[t],n[e]],(n,i)=>n.imageData=i),"image-data-match-orientation"],N4=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[Pi(f4,n=>[n[t],{backgroundColor:n[e].backgroundColor,backgroundImage:n[e].backgroundImage}],(n,i)=>n.imageData=i),"image-data-fill"],U4=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:n="scalar"}={})=>[Pi(Wv,i=>{const r=i[n];let{crop:o}=i[e];return o&&r!==1&&(o=Dr(Ln(o),r,ui())),[i[t],{crop:o,rotation:i[e].rotation,flipX:i[e].flipX,flipY:i[e].flipY}]},(i,r)=>i.imageData=r),"image-data-crop"],j4=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:n="imageData",srcImageState:i="imageState",destImageScaledSize:r="imageScaledSize"})=>[Pi(Uv,o=>{const a=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[i].targetSize&&o[i].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[i].targetSize&&o[i].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[n],{width:a,height:s,fit:t.fit||"contain",upscale:(l=o[i],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},e];var l},(o,a)=>{ru(o.imageData,a)||(o[r]=es(a)),o.imageData=a}),"image-data-resize"],H4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData"}={})=>[Pi(Xv,i=>{const{colorMatrix:r}=i[e],o=r&&Object.keys(r).map(a=>r[a]).filter(Boolean);return[i[t],{colorMatrix:o&&f0(o),convolutionMatrix:i[e].convolutionMatrix,gamma:i[e].gamma,noise:i[e].noise,vignette:i[e].vignette}]},(i,r)=>i[n]=r),"image-data-filter"],G4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destScalar:i="scalar"}={})=>[Pi(async(r,o,a,s,l,c)=>{if(!o||!s.length)return r;let u;try{const g={dataSizeScalar:R2(r,s)};a&&a[3]>0&&(g.backgroundColor=[...a]),u=await o(r,g)}catch{}const d=Ci("canvas");d.width=r.width,d.height=r.height;const p=d.getContext("2d",{willReadFrequently:!0});if(p.putImageData(r,0,0),c==="auto"){const g=Math.sqrt(r.width*r.height);p.filter=`blur(${Math.round(g/100)}px)`}const h=new Path2D;s.forEach(g=>{const $=Bi(g.x,g.y,g.width,g.height);Ws($,l);const y=kr(Ln($),g.rotation),v=new Path2D;y.forEach((w,S)=>{if(S===0)return v.moveTo(w.x,w.y);v.lineTo(w.x,w.y)}),h.addPath(v)}),p.clip(h,"nonzero"),p.imageSmoothingEnabled=!1,p.drawImage(u,0,0,d.width,d.height),ar(u);const f=p.getImageData(0,0,d.width,d.height);return ar(d),f},(r,{imageScrambler:o,redactionRenderStyle:a})=>[r[t],o,r[e].backgroundColor,r[e].redaction,r[i],a],(r,o)=>r[n]=o),"image-data-redact"],J1=({srcImageData:t="imageData",srcSize:e="size",srcImageState:n="imageState",srcShapes:i="annotation",destImageData:r="imageData",destImageScaledSize:o="imageScaledSize",destScalar:a="scalar",imageDataResizer:s,canvasMemoryLimit:l,shapeFilter:c=ri,shapeClip:u=!0,destImageContext:d="imageContext"}={})=>[Pi(g0,(p,{shapePreprocessor:h,willRequestResource:f,csp:g,willRequest:$})=>{const y=p[n][i].filter(c);if(!y.length)return[p[t]];const v=p[a],{crop:w}=p[n],S=p[e];let R=v;const M=p[o];M&&(R=Math.min(M.width/w.width,M.height/w.height));const B={width:S.width/v,height:S.height/v};return[p[t],{shapes:y,computeShape:C=>(C=Vi(C,B),C=J2(C,["left","right","top","bottom"]),C=C2(C,R)),transform:C=>{const D=p[e],{rotation:O=0,flipX:P,flipY:b,cropLimitToImage:W}=p[n],{crop:nt=Xr(D)}=p[n];let k=1;k=p[o]?R:v;const N={width:D.width/v*k,height:D.height/v*k},j=Av(N,O),ut=j.width,Z=j.height,ft=.5*N.width-.5*ut,q=.5*N.height-.5*Z,ht=ac(N);C.translate(-ft,-q),C.translate(-nt.x*k,-nt.y*k),C.translate(ht.x,ht.y),C.rotate(O),C.translate(-ht.x,-ht.y);const xt=p[d]||{x:0,y:0};C.translate(xt.x,xt.y),C.scale(P?-1:1,b?-1:1),C.translate(P?-N.width*v:0,b?-N.height*v:0),W&&u&&(C.rect(0,0,N.width,N.height),C.clip())},drawImage:w0({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:C=>h(C,{isPreview:!1,...p[n]}),canvasMemoryLimit:l,willRequest:$||f,styleNonce:g.styleNonce}]},(p,h)=>p[r]=h),"image-data-annotate"],Hg=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:i="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",shapeFilter:s=ri,destImageContext:l="imageContext"}={})=>[Pi(g0,(c,{shapePreprocessor:u,willRequestResource:d,willRequest:p,csp:h})=>{let f=c[e].decoration.filter(s);if(typeof window<"u"&&(v=>{if(v&&v._zcari2y)return;const[w]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map(B=>B.map(C=>String.fromCharCode(C)).join("")),{width:S,height:R}=c[e].crop,M=R/15;f=[...f,{x:.5*-M,y:.5*-M,width:1.5*S,height:1.25*R,text:Array(50).fill(w).join(""),fontWeight:900,lineHeight:M,fontSize:M,color:[1,1,1,.05]}]})(window),!f.length)return[c[t]];let g=c[a];const{crop:$}=c[e],y=c[i];return y&&(g=Math.min(y.width/$.width,y.height/$.height)),[c[t],{shapes:f,drawImage:w0({imageDataResizer:r,canvasMemoryLimit:o}),computeShape:v=>(v=Vi(v,$),v=J2(v,["left","right","top","bottom"]),v=C2(v,g)),preprocessShape:v=>u(v,{isPreview:!1,...c[e]}),canvasMemoryLimit:o,willRequest:p||d,styleNonce:h.styleNonce,transform:v=>{const w=c[l]||{x:0,y:0};v.translate(w.x,w.y)}}]},(c,u)=>c[n]=u),"image-data-decorate"],Z4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:i="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",destImageContext:s="imageContext"}={})=>[Pi((l,c)=>new Promise(u=>{if(!c)return u([l]);g0(l,c).then(d=>{u([d,c.contextBounds])})}),(l,{shapePreprocessor:c,willRequestResource:u,willRequest:d,csp:p})=>{const h=l[e].frame;if(!h)return[l[t]];const f=l[a];let{crop:g}=l[e];g&&f!==1&&(g=Dr(Ln(g),f,ui()));const $={...g},y=w2(S2(h,$,c),$);$.x=Math.abs(y.left),$.y=Math.abs(y.top),$.width+=Math.abs(y.left)+Math.abs(y.right),$.height+=Math.abs(y.top)+Math.abs(y.bottom);const v=l[i],w=v?Math.min(v.width/g.width,v.height/g.height):1;return Ws($,w),$.x=Math.floor($.x),$.y=Math.floor($.y),$.width=Math.floor($.width),$.height=Math.floor($.height),[l[t],{shapes:[h],contextBounds:$,computeShape:S=>Vi(S,l[t]),transform:S=>{S.translate($.x,$.y)},drawImage:w0({imageDataResizer:r,canvasMemoryLimit:o}),preprocessShape:S=>c(S,{isPreview:!1,...l[e]}),canvasMemoryLimit:o,willRequest:d||u,styleNonce:p.styleNonce}]},(l,[c,u])=>{l[s]=u,l[n]=c}),"image-data-frame"],X4=({mimeType:t,quality:e,srcImageData:n="imageData",srcFile:i="src",destBlob:r="blob"}={})=>[Pi(Tv,o=>[o[n],t||t0(o[i].name)||o[i].type,e],(o,a)=>o[r]=a),"image-data-to-blob"],Y4=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:n="dest"}={})=>[Pi(pc,i=>[i[t],i[e]],(i,r)=>i[n]=r),"image-data-to-canvas"],K4=async(t,e)=>{if(!c2(t)||!e)return t;const n=(a,s)=>{let l=2;const c=new DataView(a),u=c.byteLength;for(s(c.getUint8(0),0,2,u);l<u&&c.getUint8(l)==255;){const d=c.getUint8(l+1),p=c.getUint16(l+2)+2;if(s(d,l,p,u)===!1)break;l+=p}},i=a=>a>=224&&a<=237,r=(a=>{const s=[];return n(a,(l,c,u)=>{if(l===218)return!1;i(l)&&s.push(new Uint8Array(a,c,u))}),s})(e),o=((a,s)=>{const l=[];n(a,(p,h,f,g)=>h===0?(l.push(new Uint8Array(a,h,f)),void l.push(...s)):p===218?(l.push(new Uint8Array(a,h,g-h)),!1):void(i(p)||l.push(new Uint8Array(a,h,f))));let c=l.reduce((p,h)=>p+h.length,0),u=new Uint8Array(c),d=0;return l.forEach(p=>{u.set(p,d),d+=p.length}),u})(await qh(t),r);return new Blob([o],{type:"image/jpeg"})},q4=(t="blob",e="copy",n="blob")=>[Pi(K4,i=>[i[t],i[e]],(i,r)=>i[n]=r),"blob-write-image-head"],J4=({renameFile:t,srcBlob:e="blob",srcFile:n="src",destFile:i="dest",defaultFilename:r}={})=>[Pi(nu,o=>[o[e],t?t(o[n]):o[n].name||`${r}.${Gy(o[e].type)}`],(o,a)=>o[i]=a),"blob-to-file"],Gg=({url:t="./",dataset:e=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:n="store",credentials:i,headers:r={}})=>[Pi(async(o,a)=>await((s,l,c)=>new Promise((u,d)=>{const{token:p={},beforeSend:h=pe,onprogress:f=pe}=c;p.cancel=()=>g.abort();const g=new XMLHttpRequest;g.upload.onprogress=f,g.onload=()=>g.status>=200&&g.status<300?u(g):d(g),g.onerror=()=>d(g),g.ontimeout=()=>d(g),g.open("POST",encodeURI(s)),h(g),g.send(l instanceof FormData?l:l.reduce(($,y)=>($.append(...y.map(Vv)),$),new FormData))}))(t,o,{onprogress:a,beforeSend:s=>s2(s,{headers:r,credentials:i})}),(o,a,s)=>[e(o),s],(o,a)=>o[n]=a),"store"],sb=t=>[Pi(e=>(t&&t.length&&Object.keys(e).forEach(n=>{t.includes(n)||delete e[n]}),e)),"prop-filter"],lb=(t={})=>{const{orientImage:e=!0,outputProps:n=["src","dest","size","duration"],preprocessImageFile:i,request:r={}}=t;return[F4({willRequest:()=>r}),z4(),i&&[Pi(i,(o,a,s)=>[o.dest,a,s],(o,a)=>o.dest=a),"preprocess-image-file"],ib({srcProp:"dest"}),B4({srcProp:"dest"}),e&&ob({srcProp:"dest"}),e&&ab(),e&&rb(),sb(n)].filter(Boolean)},Q4=t=>t&&(Ne(t)?Gg({url:t}):Yn(t)?[t,"store"]:Gg(t)),cb=(t={})=>(e,n,i={})=>{let{canvasMemoryLimit:r=q2(),orientImage:o=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:u,imageDataResizer:d,store:p,format:h="file",outputProps:f=["src","dest","imageState","store"],preprocessImageSource:g,preprocessImageState:$,postprocessImageData:y,postprocessImageBlob:v,testSrcSupport:w=!1}={...t,...i};if(!w||ap(e))return h==="blob"&&(h="file"),[g&&[Pi(g,(S,R,M)=>[S.src,R,M,S.imageState],(S,R)=>S.src=R),"preprocess-image-source"],(o||a)&&ob(),o&&ab(),ib(),$&&[Pi($,(S,R,M,B)=>[S.imageState,R,M,{size:S.size,orientation:S.orientation}],(S,R)=>S.imageState=R),"preprocess-image-state"],V4({canvasMemoryLimit:r}),o&&rb(),o&&W4(),_4(),G4(),U4(),j4({imageDataResizer:d,targetSize:u}),J1({imageDataResizer:d,canvasMemoryLimit:r,srcShapes:"manipulation"}),H4(),N4(),J1({imageDataResizer:d,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:S=>!S.aboveFrame}),Hg({imageDataResizer:d,canvasMemoryLimit:r,shapeFilter:S=>!S.aboveFrame}),Z4({imageDataResizer:d,canvasMemoryLimit:r}),J1({imageDataResizer:d,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:S=>S.aboveFrame,shapeClip:!1}),Hg({imageDataResizer:d,canvasMemoryLimit:r,shapeFilter:S=>S.aboveFrame}),y&&[Pi(y,(S,R,M)=>[S.imageData,R,M],(S,R)=>S.imageData=R),"postprocess-image-data"],h==="file"?X4({mimeType:s,quality:l}):h==="canvas"?Y4():[S=>(S.dest=S.imageData,S)],h==="file"&&o&&O4(),h==="file"&&a&&q4(),v&&[Pi(v,({blob:S,imageData:R,src:M},B,C)=>[{blob:S,imageData:R,src:M},B,C],(S,R)=>S.blob=R),"postprocess-image-file"],h==="file"&&J4({defaultFilename:"image",renameFile:c}),h==="file"?Q4(p):Yn(p)&&[p,"store"],sb(f)].filter(Boolean)};var t3=(t,e,n,i,r,o,a,s,l,c,u)=>{if(!(t&&e&&n&&i&&s))return;s*=o;const d=ou(Ln(e)),p=Fn(d),h=Fn(t),f=Xr(n),g=Fn(f),$=x0(n,i,l),y=Fn($),v=Ni(We(g),y),w=Ni(We(h),p);v.x+=w.x,v.y+=w.y;const S=ec(We(v));S.x+=w.x,S.y+=w.y;const R=Fn(ga(ga(Ln(r),a),t)),M=Ni(R,h);return Wi(v,M),{origin:S,translation:v,rotation:{x:u?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let Wc=null;var S0=()=>{if(Wc===null)if("WebGL2RenderingContext"in window){let t;try{t=Ci("canvas"),Wc=!!t.getContext("webgl2")}catch{Wc=!1}t&&ar(t),t=void 0}else Wc=!1;return Wc},Zg=t=>(t&t-1)==0,Ns=(t,e={},n="",i="")=>Object.keys(e).filter(r=>!Ks(e[r])).reduce((r,o)=>r.replace(new RegExp(n+o+i),e[o]),t);const e3={head:`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,text:`
in vec2 aTexCoord;out vec2 vTexCoord;`,matrix:`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`},n3={head:`#version 300 es
precision highp float;

out vec4 fragColor;`,mask:`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,init:`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);`,colorize:`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,maskapply:`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,maskfeatherapply:`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,rectaa:`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);`,cornerradius:`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,fragcolor:`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`},Xg=(t,e,n)=>{const i=t.createShader(n),r=((o,a,s)=>(a=Ns(a,s===o.VERTEX_SHADER?e3:n3,"##").trim(),S0()?a:(a=(a=a.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),s===o.VERTEX_SHADER&&(a=a.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),s===o.FRAGMENT_SHADER&&(a=a.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+a)))(t,e,n);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(i)),i},Nc=(t,e,n,i,r)=>{const o=Xg(t,e,t.VERTEX_SHADER),a=Xg(t,n,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s);const l={};return i.forEach(c=>{l[c]=t.getAttribLocation(s,c)}),r.forEach(c=>{l[c]=t.getUniformLocation(s,c)}),{program:s,locations:l,destroy(){t.detachShader(s,o),t.detachShader(s,a),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(s)}}},Yg=t=>t.nodeName!=="VIDEO"&&(!!S0()||Zg(t.width)&&Zg(t.height)),i3=(t,e,n,i)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),((r,o,a)=>{r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,Yg(o)?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a.filterParam),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,a.wrapParam),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,a.wrapParam),Yg(o)&&r.generateMipmap(r.TEXTURE_2D)})(t,n,i),t.bindTexture(t.TEXTURE_2D,null),e),yl=(t,e=1)=>t?[t[0],t[1],t[2],Ze(t[3])?e*t[3]:e]:[0,0,0,0],Q1=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},th=(t,e,n,i,r,o,a)=>{const s=1/(e-n),l=1/(i-r),c=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*c,t[15]=1},bl=(t,e,n,i)=>{t[12]=t[0]*e+t[4]*n+t[8]*i+t[12],t[13]=t[1]*e+t[5]*n+t[9]*i+t[13],t[14]=t[2]*e+t[6]*n+t[10]*i+t[14],t[15]=t[3]*e+t[7]*n+t[11]*i+t[15]},Kg=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},qg=(t,e)=>{const n=Math.sin(e),i=Math.cos(e),r=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],u=t[10],d=t[11];t[4]=r*i+l*n,t[5]=o*i+c*n,t[6]=a*i+u*n,t[7]=s*i+d*n,t[8]=l*i-r*n,t[9]=c*i-o*n,t[10]=u*i-a*n,t[11]=d*i-s*n},Jg=(t,e)=>{const n=Math.sin(e),i=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],u=t[10],d=t[11];t[0]=r*i-l*n,t[1]=o*i-c*n,t[2]=a*i-u*n,t[3]=s*i-d*n,t[8]=r*n+l*i,t[9]=o*n+c*i,t[10]=a*n+u*i,t[11]=s*n+d*i},Qg=(t,e)=>{const n=Math.sin(e),i=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],u=t[6],d=t[7];t[0]=r*i+l*n,t[1]=o*i+c*n,t[2]=a*i+u*n,t[3]=s*i+d*n,t[4]=l*i-r*n,t[5]=c*i-o*n,t[6]=u*i-a*n,t[7]=d*i-s*n};var r3=t=>t*Math.PI/180,cp=(t,e)=>S0()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const eh=(t,e)=>{const n=t.length;return e>=n?t[e%n]:e<0?t[e%n+n]:t[e]},o3=(t,e,n,i)=>{const r=ot(n.x-e.x,n.y-e.y),o=ot(i.x-n.x,i.y-n.y),a=ot(e.x-i.x,e.y-i.y),s=ot(t.x-e.x,t.y-e.y),l=ot(t.x-n.x,t.y-n.y),c=ot(t.x-i.x,t.y-i.y),u=Ld(r,s),d=Ld(o,l),p=Ld(a,c);return u<=0&&d<=0&&p<=0},a3=t=>{if(t.length<3)return[];if((y=>{const v=y.length;for(let w=0;w<v;w++){const S=Ys(y[w],eh(y,w+1));if(t2(S,y,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(y=>{let v,w,S,R,M,B=0;const C=y.length;for(v=0;v<C;v++)w=y[v],S=y[(v+1)%C],R=S.x-w.x,M=(S.y+w.y)/2,B+=R*M;return B})(t)<0&&t.reverse();const e=t.length,n=[...Array(e).keys()],i=[];let r,o,a,s,l,c,u,d,p,h,f,g,$=1024;for(;n.length>3;){if($<=0)return[];for($--,r=0;r<n.length;r++)if(a=n[r],s=eh(n,r-1),l=eh(n,r+1),c=t[a],u=t[s],d=t[l],p=ot(u.x-c.x,u.y-c.y),h=ot(d.x-c.x,d.y-c.y),!(Ld(p,h)<0)){for(f=!0,o=0;o<e;o++)if(o!==a&&o!==s&&o!==l&&(g=t[o],o3(g,u,c,d))){f=!1;break}if(f){i.push([u,c,d]),n.splice(r,1);break}}}return i.push([t[n[0]],t[n[1]],t[n[2]]]),i},tf=(t,e,n,i,r)=>{const o=go(ot(i.x-n.x,i.y-n.y)),a=go(ot(r.x-i.x,r.y-i.y)),s=go(ot(o.x+a.x,o.y+a.y)),l=ot(-s.y,s.x),c=ot(-o.y,o.x),u=Math.min(1/Ad(l,c),5);t[e]=i.x,t[e+1]=i.y,t[e+2]=l.x*u,t[e+3]=l.y*u,t[e+4]=-1,t[e+5]=i.x,t[e+6]=i.y,t[e+7]=l.x*u,t[e+8]=l.y*u,t[e+9]=1},ef=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},nf=(t,e=0,n,i)=>{const r=Wo(t),o=t.x+.5*t.width,a=t.y+.5*t.height;return(n||i)&&nc(r,n,i,o,a),e!==0&&Tl(r,e,o,a),r},wd=(t,e,n,i,r)=>{const o=Math.min(20,Math.max(4,Math.round(i/2)));let a=0,s=0,l=0,c=0,u=0;for(;u<o;u++)a=u/o,s=r*oa+a*oa,l=i*Math.cos(s),c=i*Math.sin(s),t.push(ot(e+l,n+c))};let Sd=null;var k0=()=>{if(Sd!==null)return Sd;let t=Ci("canvas");const e=cp(t);return Sd=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,ar(t),t=void 0,Sd},C0=()=>Mr()&&!!window.chrome;const Xc=new Float32Array([0,1,0,0,1,1,1,0]),s3=new Float32Array([1,0,0,0,1,1,0,1]),l3=Mr()&&Ba(),rf=[0,0,0,0,1,0,0,0,0],c3=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],nh=[0,0,0,0],u3=[0,0,0,0],of=(t,e,n,i,r)=>{if(!n||!i)return Xc;let o=i.x/n.width,a=i.y/n.height,s=t/n.width/r,l=e/n.height/r;return s-=o,l-=a,new Float32Array([-o,l,-o,-a,s,l,s,-a])};var d3=(t,e={})=>{const{alpha:n=!1}=e,i={width:0,height:0},r={width:0,height:0},o=k0()||1024;let a,s,l;const c=Q1(),u=Q1();let d,p,h,f,g,$,y,v,w,S=0,R=0,M=0,B=1;const C=new Map([]),D=()=>{b.stencilOp(b.KEEP,b.KEEP,b.KEEP),b.stencilFunc(b.ALWAYS,1,255),b.stencilMask(255)},O=r3(30),P=Math.tan(O/2),b=cp(t,{alpha:n,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!b)return;b.getExtension("OES_standard_derivatives"),b.disable(b.DEPTH_TEST),b.enable(b.STENCIL_TEST),b.enable(b.BLEND),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!n&&Ba())),D();const W=b.createTexture();b.bindTexture(b.TEXTURE_2D,W),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array(nh)),C.set(0,W);const nt=b.createTexture();C.set(2,nt);const k=b.createFramebuffer(),N=b.createTexture();C.set(1,N);const j=b.createFramebuffer(),ut=Nc(b,`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 res=(c*m)+(o*c.a);res=clamp(res,0.0,1.0);return res;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}`,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),Z=b.createBuffer(),ft=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,ft),b.bufferData(b.ARRAY_BUFFER,Xc,b.STATIC_DRAW);const q=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,q),b.bufferData(b.ARRAY_BUFFER,s3,b.STATIC_DRAW);const ht=Nc(b,`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),xt=b.createBuffer();C0()&&(b.bindBuffer(b.ARRAY_BUFFER,xt),b.bufferData(b.ARRAY_BUFFER,1,b.DYNAMIC_DRAW));const lt=($t,te,le,Wt=!1)=>{const{program:we,locations:yt}=ht;b.useProgram(we),b.enableVertexAttribArray(yt.aPosition),b.enableVertexAttribArray(yt.aNormal),b.enableVertexAttribArray(yt.aMiter);const ie=((qt,$e)=>{let Me,Be,mn,wt=0;const re=qt.length,on=new Float32Array(10*($e?re+1:re)),Ue=qt[0],en=qt[re-1];for(wt=0;wt<re;wt++)Me=qt[wt-1],Be=qt[wt],mn=qt[wt+1],Me||(Me=$e?en:ot(Be.x+(Be.x-mn.x),Be.y+(Be.y-mn.y))),mn||(mn=$e?Ue:ot(Be.x+(Be.x-Me.x),Be.y+(Be.y-Me.y))),tf(on,10*wt,Me,Be,mn);return $e&&tf(on,10*re,en,Ue,qt[1]),on})($t,Wt),V=5*Float32Array.BYTES_PER_ELEMENT,De=2*Float32Array.BYTES_PER_ELEMENT,Le=4*Float32Array.BYTES_PER_ELEMENT;b.uniform1f(yt.uWidth,te),b.uniform1f(yt.uSharpness,l),b.uniform4fv(yt.uColor,le),b.uniformMatrix4fv(yt.uMatrix,!1,d),b.uniform4f(yt.uCanvasColor,S,R,M,B),b.uniform1fv(yt.uMaskBounds,y),b.uniform1f(yt.uMaskOpacity,$),b.bindBuffer(b.ARRAY_BUFFER,xt),b.bufferData(b.ARRAY_BUFFER,ie,b.STATIC_DRAW),b.vertexAttribPointer(yt.aPosition,2,b.FLOAT,!1,V,0),b.vertexAttribPointer(yt.aNormal,2,b.FLOAT,!1,V,De),b.vertexAttribPointer(yt.aMiter,1,b.FLOAT,!1,V,Le),b.drawArrays(b.TRIANGLE_STRIP,0,ie.length/5),b.disableVertexAttribArray(yt.aPosition),b.disableVertexAttribArray(yt.aNormal),b.disableVertexAttribArray(yt.aMiter)},Ct=Nc(b,`
##head
void main(){
##matrix
}`,`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),it=b.createBuffer(),vt=Nc(b,`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){
##init
##colorize
##rectaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),K=b.createBuffer(),Ft=b.createBuffer(),Ht=b.createBuffer(),Lt=Nc(b,`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uTextureAdjust;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uTextureAdjust.x*uRadius.x)*(vTexCoordDouble.x*uTextureAdjust.x*uRadius.x),(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y)*(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uTextureAdjust","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),bt=b.createBuffer(),_t=b.createBuffer(),rt=new Map,Tt={2:{width:0,height:0},1:{width:0,height:0}},Vt=($t,te,le,Wt=1)=>{const we=Math.min(Math.min(4096,o)/le.width,Math.min(4096,o)/le.height,Wt),yt=Math.floor(we*le.width),ie=Math.floor(we*le.height);ru(le,Tt[$t])?b.bindFramebuffer(b.FRAMEBUFFER,te):(b.bindTexture(b.TEXTURE_2D,C.get($t)),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,yt,ie,0,b.RGBA,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.bindFramebuffer(b.FRAMEBUFFER,te),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,C.get($t),0),Tt[$t]=le);const V=le.width*s,De=le.height*s;var Le,qt;th(u,0,V,De,0,-1,1),bl(u,0,De,0),qt=1,(Le=u)[0]*=qt,Le[1]*=qt,Le[2]*=qt,Le[3]*=qt,(($e,Me)=>{$e[4]*=Me,$e[5]*=Me,$e[6]*=Me,$e[7]*=Me})(u,-1),d=u,b.viewport(0,0,yt,ie),b.colorMask(!0,!0,!0,!0),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),w=[1,0,1,0,1,Math.max(i.width,le.width),1,Math.max(i.width,le.width)]},mt=($t,te)=>{const{forceRelease:le=!1}=te||{},{src:Wt}=rt.get($t);Wt instanceof HTMLCanvasElement&&(le||Wt.dataset.retain||ar(Wt)),rt.delete($t),b.deleteTexture($t)},at=$t=>rt.get($t).isRotatedVideo;return{drawPath:($t,te=0,le=!1,Wt=!1,we,yt,ie,V,De)=>{if($t.length<2)return;const Le=$t.map(Be=>({x:Be.x*s,y:Be.y*s})),qt=we*s;if(qt>0&&lt(Le,qt,yl(yt,De),ie),Le.length<3||!V||V[3]===0||!ie)return;const $e=a3(Le),Me=new Float32Array(6*$e.length);$e.forEach(([Be,mn,wt],re)=>{const on=6*re;Me[on+0]=Be.x,Me[on+1]=Be.y,Me[on+2]=mn.x,Me[on+3]=mn.y,Me[on+4]=wt.x,Me[on+5]=wt.y}),((Be,mn)=>{const{program:wt,locations:re}=Ct;b.useProgram(wt),b.enableVertexAttribArray(re.aPosition),b.uniform4fv(re.uColor,mn),b.uniformMatrix4fv(re.uMatrix,!1,d),b.uniform1fv(re.uMaskBounds,y),b.uniform1f(re.uMaskOpacity,$),b.uniform4f(re.uCanvasColor,S,R,M,B),b.bindBuffer(b.ARRAY_BUFFER,it),b.bufferData(b.ARRAY_BUFFER,Be,b.STATIC_DRAW),b.vertexAttribPointer(re.aPosition,2,b.FLOAT,!1,0,0),b.drawArrays(b.TRIANGLES,0,Be.length/2),b.disableVertexAttribArray(re.aPosition)})(Me,yl(V,De))},drawRect:($t,te=0,le=!1,Wt=!1,we,yt,ie,V,De,Le=!1,qt,$e,Me,Be,mn,wt=1/s,re,on)=>{const Ue=Ws(Ln($t),s),en=we.map(ke=>((qe,vn)=>Math.floor(si(qe,0,Math.min(.5*(vn.width-1),.5*(vn.height-1)))))(ke||0,$t)).map(ke=>ke*s);if(yt||ie){const ke=Ln(Ue);ke.x-=.5,ke.y-=.5,ke.width+=1,ke.height+=1;const qe=nf(ke,te,le,Wt),vn=ef(qe);let In;re&&(In=yl(re),In[3]===0&&(In[3]=.001));const Hn=V&&Le?[ke.width/V.width,ke.height/V.height]:[1,1];((Jt,He,Y,Pt,H,Bt=W,ue,Ce=1,me=nh,It=Xc,Oe=w,cn=1,rn)=>{const{program:J,locations:jt}=vt;b.useProgram(J),b.enableVertexAttribArray(jt.aPosition),b.enableVertexAttribArray(jt.aTexCoord),b.enableVertexAttribArray(jt.aRectCoord),b.uniform4fv(jt.uColor,H),b.uniform2fv(jt.uSize,[He,Y]),b.uniform2fv(jt.uPosition,[Jt[2],Jt[3]]),b.uniform2fv(jt.uRepeat,ue),b.uniform1i(jt.uInverted,rn?1:0),b.uniform1fv(jt.uCornerRadius,Pt),b.uniform4f(jt.uCanvasColor,S,R,M,B),b.uniform1fv(jt.uMaskFeather,Oe.map((Ae,Se)=>Se%2==0?Ae:Ae*s)),b.uniform1fv(jt.uMaskBounds,y),b.uniform1f(jt.uMaskOpacity,$),b.uniform1f(jt.uEdgeFeather,Math.max(0,cn)),b.uniformMatrix4fv(jt.uMatrix,!1,d),b.uniform1i(jt.uTexture,4),b.uniform4fv(jt.uTextureColor,me),b.uniform1f(jt.uTextureOpacity,Ce),b.activeTexture(b.TEXTURE0+4),b.bindTexture(b.TEXTURE_2D,Bt),b.bindBuffer(b.ARRAY_BUFFER,Ft),b.bufferData(b.ARRAY_BUFFER,It,b.STATIC_DRAW),b.vertexAttribPointer(jt.aTexCoord,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,Ht),b.bufferData(b.ARRAY_BUFFER,Xc,b.STATIC_DRAW),b.vertexAttribPointer(jt.aRectCoord,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,K),b.bufferData(b.ARRAY_BUFFER,Jt,b.STATIC_DRAW),b.vertexAttribPointer(jt.aPosition,2,b.FLOAT,!1,0,0),b.drawArrays(b.TRIANGLE_STRIP,0,Jt.length/2),b.disableVertexAttribArray(jt.aPosition),b.disableVertexAttribArray(jt.aTexCoord),b.disableVertexAttribArray(jt.aRectCoord)})(vn,ke.width,ke.height,en,yl(yt,Be),ie,Hn,Be,In,qt?new Float32Array(qt):of(ke.width,ke.height,V,De,s),mn,wt*s,on)}$e&&($e=Math.min($e,Ue.width,Ue.height),lt(((ke,qe,vn,In,Hn,Jt,He,Y)=>{const Pt=[];if(Jt.every(H=>H===0))Pt.push(ot(ke,qe),ot(ke+vn,qe),ot(ke+vn,qe+In),ot(ke,qe+In));else{const[H,Bt,ue,Ce]=Jt,me=ke,It=ke+vn,Oe=qe,cn=qe+In;Pt.push(ot(me+H,Oe)),wd(Pt,It-Bt,Oe+Bt,Bt,-1),Pt.push(ot(It,Oe+Bt)),wd(Pt,It-Ce,cn-Ce,Ce,0),Pt.push(ot(It-Ce,cn)),wd(Pt,me+ue,cn-ue,ue,1),Pt.push(ot(me,cn-ue)),wd(Pt,me+H,Oe+H,H,2)}return(He||Y)&&nc(Pt,He,Y,ke+.5*vn,qe+.5*In),Hn&&Tl(Pt,Hn,ke+.5*vn,qe+.5*In),Pt})(Ue.x,Ue.y,Ue.width,Ue.height,te,en,le,Wt),$e*s,yl(Me,Be),!0))},drawEllipse:($t,te,le,Wt,we,yt,ie,V,De,Le,qt,$e,Me,Be,mn)=>{const wt=Ws(Bi($t.x-te,$t.y-le,2*te,2*le),s);if(ie||V){const re=Ln(wt);mn||(re.x-=.5,re.y-=.5,re.width+=1,re.height+=1);const on=nf(re,Wt,we,yt);((Ue,en,ke,qe,vn=W,In,Hn=Xc,Jt=1,He=!1)=>{const{program:Y,locations:Pt}=Lt;b.useProgram(Y),b.enableVertexAttribArray(Pt.aPosition),b.enableVertexAttribArray(Pt.aTexCoord),b.uniformMatrix4fv(Pt.uMatrix,!1,d),b.uniform2fv(Pt.uRadius,[.5*en,.5*ke]),b.uniform2fv(Pt.uTextureAdjust,[In.width/(en/s),In.height/(ke/s)]),b.uniform1i(Pt.uInverted,He?1:0),b.uniform4fv(Pt.uColor,qe),b.uniform4f(Pt.uCanvasColor,S,R,M,B),b.uniform2fv(Pt.uRepeat,[1,1]),b.uniform1fv(Pt.uMaskBounds,y),b.uniform1f(Pt.uMaskOpacity,$),b.uniform1i(Pt.uTexture,4),b.uniform1f(Pt.uTextureOpacity,Jt),b.activeTexture(b.TEXTURE0+4),b.bindTexture(b.TEXTURE_2D,vn),b.bindBuffer(b.ARRAY_BUFFER,_t),b.bufferData(b.ARRAY_BUFFER,Hn,b.STATIC_DRAW),b.vertexAttribPointer(Pt.aTexCoord,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,bt),b.bufferData(b.ARRAY_BUFFER,Ue,b.STATIC_DRAW),b.vertexAttribPointer(Pt.aPosition,2,b.FLOAT,!1,0,0),b.drawArrays(b.TRIANGLE_STRIP,0,Ue.length/2),b.disableVertexAttribArray(Pt.aPosition),b.disableVertexAttribArray(Pt.aTexCoord)})(ef(on),re.width,re.height,yl(ie,Be),V,De||Zi(re.width/s,re.height/s),qt?new Float32Array(qt):of(re.width,re.height,De,Le,s),Be,mn)}$e&&lt(((re,on,Ue,en,ke,qe,vn)=>{const In=.5*Math.abs(Ue),Hn=.5*Math.abs(en),Jt=Math.abs(Ue)+Math.abs(en),He=Math.max(20,Math.round(Jt/6));return Hd(ot(re+In,on+Hn),In,Hn,ke,qe,vn,He)})(wt.x,wt.y,wt.width,wt.height,Wt,we,yt),$e*s,yl(Me,Be),!0)},drawImage:($t,te,le,Wt,we,yt,ie,V,De,Le,qt=c3,$e=1,Me,Be=1,mn=0,wt=v,re=u3,on=nh,Ue=!1,en=!1,ke=!0)=>{const qe=te.width*s,vn=te.height*s,In=-.5*qe,Hn=.5*vn,Jt=.5*qe,He=-.5*vn,Y=new Float32Array([In,He,0,In,Hn,0,Jt,He,0,Jt,Hn,0]);b.bindBuffer(b.ARRAY_BUFFER,Z),b.bufferData(b.ARRAY_BUFFER,Y,b.STATIC_DRAW);const Pt=te.height/2/P*(i.height/te.height)*-1;we*=s,yt*=s,le*=s,Wt*=s;const{program:H,locations:Bt}=ut,ue=Q1();((J,jt,Ae,Se,X)=>{const oe=1/Math.tan(jt/2),Zt=1/(Se-X);J[0]=oe/Ae,J[1]=0,J[2]=0,J[3]=0,J[4]=0,J[5]=oe,J[6]=0,J[7]=0,J[8]=0,J[9]=0,J[10]=(X+Se)*Zt,J[11]=-1,J[12]=0,J[13]=0,J[14]=2*X*Se*Zt,J[15]=0})(ue,O,a,1,2*-Pt),bl(ue,we,-yt,Pt),bl(ue,le,-Wt,0),Qg(ue,-De),Kg(ue,Le),bl(ue,-le,Wt,0),Jg(ue,V),qg(ue,ie),b.useProgram(H),b.enableVertexAttribArray(Bt.aPosition),b.enableVertexAttribArray(Bt.aTexCoord),b.uniform1i(Bt.uTexture,3),b.uniform2f(Bt.uTextureSize,te.width,te.height),b.activeTexture(b.TEXTURE0+3),b.bindTexture(b.TEXTURE_2D,$t);const Ce=en?1:0,me=C.get(Ce);b.uniform1i(Bt.uTextureBlend,Ce),b.activeTexture(b.TEXTURE0+Ce),b.bindTexture(b.TEXTURE_2D,me);const It=Ue?2:0,Oe=C.get(It);b.uniform1i(Bt.uTextureOverlay,It),b.activeTexture(b.TEXTURE0+It),b.bindTexture(b.TEXTURE_2D,Oe),b.bindBuffer(b.ARRAY_BUFFER,Z),b.vertexAttribPointer(Bt.aPosition,3,b.FLOAT,!1,0,0);const cn=l3&&at($t);let rn;b.bindBuffer(b.ARRAY_BUFFER,cn?q:ft),b.vertexAttribPointer(Bt.aTexCoord,2,b.FLOAT,!1,0,0),b.uniformMatrix4fv(Bt.uMatrix,!1,ue),b.uniform4fv(Bt.uOverlayColor,on),!Me||vs(Me,rf)?(Me=rf,rn=-1):(rn=Me.reduce((J,jt)=>J+jt,0),rn=rn<=0?1:rn),b.uniform1fv(Bt.uClarityKernel,Me),b.uniform1f(Bt.uClarityKernelWeight,rn),b.uniform1f(Bt.uColorGamma,1/Be),b.uniform1f(Bt.uColorVignette,mn),b.uniform1i(Bt.uAntialias,ke?1:0),b.uniform4f(Bt.uColorOffset,qt[4],qt[9],qt[14],qt[19]),b.uniformMatrix4fv(Bt.uColorMatrix,!1,[qt[0],qt[1],qt[2],qt[3],qt[5],qt[6],qt[7],qt[8],qt[10],qt[11],qt[12],qt[13],qt[15],qt[16],qt[17],qt[18]]),b.uniform1f(Bt.uOpacity,$e),b.uniform1f(Bt.uMaskOpacity,$),b.uniform1fv(Bt.uMaskBounds,y),b.uniform1fv(Bt.uMaskCornerRadius,re.map(J=>J*s)),b.uniform1fv(Bt.uMaskFeather,wt.map((J,jt)=>jt%2==0?J:J*s)),b.drawArrays(b.TRIANGLE_STRIP,0,4),b.disableVertexAttribArray(Bt.aPosition),b.disableVertexAttribArray(Bt.aTexCoord)},textureFilterNearest:b.NEAREST,textureFilterLinear:b.LINEAR,textureClamp:b.CLAMP_TO_EDGE,textureRepeat:b.REPEAT,textureCreate:()=>b.createTexture(),textureUpdate:($t,te,le)=>(rt.set($t,{src:te,options:le,isRotatedVideo:te.nodeName==="VIDEO"&&(te.dataset&&te.dataset.rotation==90||te.dataset.rotation==270)}),i3(b,$t,te,le)),textureGetSize:$t=>{const{src:te,options:le}=rt.get($t),Wt=es(te);return le.scalar?ys(Wt,we=>we/le.scalar):Wt},textureDelete:mt,enablePreviewStencil:()=>{b.stencilOp(b.KEEP,b.KEEP,b.REPLACE),b.stencilFunc(b.ALWAYS,1,255),b.stencilMask(255)},applyPreviewStencil:()=>{b.stencilFunc(b.EQUAL,1,255),b.stencilMask(0)},disablePreviewStencil:D,setCanvasColor($t){S=$t[0],R=$t[1],M=$t[2],B=n?$t[3]:1,b.clear(b.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{th(c,0,i.width,i.height,0,-1,1)},updateCanvasMatrix($t,te,le,Wt,we){const yt=$t.width,ie=$t.height,V=i.width*(.5/s),De=i.height*(.5/s),Le={x:V+(le.x+te.x),y:De+(le.y+te.y)},qt={x:Le.x-te.x,y:Le.y-te.y},$e=.5*yt,Me=.5*ie;Gr(qt,we.z,Le),Iv(qt,Wt,Le),bl(c,(qt.x-$e)*s,(qt.y-Me)*s,0),bl(c,$e*s,Me*s,0),Qg(c,we.z);const Be=we.x>Math.PI/2;qg(c,Be?Math.PI:0);const mn=we.y>Math.PI/2;Jg(c,mn?Math.PI:0),Kg(c,Wt),bl(c,-$e*s,-Me*s,0)},drawToCanvas(){b.bindFramebuffer(b.FRAMEBUFFER,null),d=c,b.viewport(0,0,b.drawingBufferWidth,b.drawingBufferHeight),b.colorMask(!0,!0,!0,!0),b.clearColor(S,R,M,B),b.clear(b.COLOR_BUFFER_BIT),w=[1,0,1,0,1,i.width,1,i.width]},drawToImageBlendBuffer($t,te){Vt(1,j,$t,te)},drawToImageOverlayBuffer($t,te){Vt(2,k,$t,te)},enableMask($t,te){const le=$t.x*s,Wt=$t.y*s,we=$t.width*s,yt=$t.height*s;g=le,h=g+we,p=i.height-Wt,f=i.height-(Wt+yt),$=1-te,y=[p,h,f,g]},disableMask(){g=0,h=i.width,p=i.height,f=0,$=1,y=[p,h,f,g]},resize:($t,te,le)=>{s=Math.max(1,le),l=s===1?.75:1,r.width=$t,r.height=te,i.width=$t*s,i.height=te*s,a=ha(i.width,i.height),t.width=i.width,t.height=i.height,th(c,0,i.width,i.height,0,-1,1),v=[1,0,1,0,1,r.width,1,r.width]},release(){Array.from(rt.keys()).forEach($t=>mt($t,{forceRelease:!0})),rt.clear(),C.forEach($t=>{b.deleteTexture($t)}),C.clear(),ut.destroy(),ht.destroy(),Ct.destroy(),vt.destroy(),Lt.destroy(),t.width=1,t.height=1,t=void 0}}},p3=(t,e)=>{const{imageData:n,amount:i=1}=t,r=Math.round(2*Math.max(1,i)),o=Math.round(.5*r),a=n.width,s=n.height,l=new Uint8ClampedArray(a*s*4),c=n.data;let u,d,p,h,f,g=0,$=0,y=0;const v=a*s*4-4;for(p=0;p<s;p++)for(u=crypto.getRandomValues(new Uint8ClampedArray(s)),d=0;d<a;d++)h=u[p]/255,$=0,y=0,h<.5&&($=4*(-o+Math.round(Math.random()*r))),h>.5&&(y=(-o+Math.round(Math.random()*r))*(4*a)),f=Math.min(Math.max(0,g+$+y),v),l[g]=c[f],l[g+1]=c[f+1],l[g+2]=c[f+2],l[g+3]=c[f+3],g+=4;e(null,{data:l,width:n.width,height:n.height})};const h3=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function m3(t){return Math.sqrt(1- --t*t)}function af(t){return Object.prototype.toString.call(t)==="[object Date]"}function Lh(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((r,o)=>Lh(t[o],r));return r=>i.map(o=>o(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(af(t)&&af(e)){t=t.getTime();const o=(e=e.getTime())-t;return a=>new Date(t+a*o)}const i=Object.keys(e),r={};return i.forEach(o=>{r[o]=Lh(t[o],e[o])}),o=>{const a={};return i.forEach(s=>{a[s]=r[s](o)}),a}}if(n==="number"){const i=e-t;return r=>t+r*i}throw new Error(`Cannot interpolate ${n} values`)}function T0(t,e={}){const n=fe(t);let i,r=t;function o(a,s){if(t==null)return n.set(t=a),Promise.resolve();r=a;let l=i,c=!1,{delay:u=0,duration:d=400,easing:p=E2,interpolate:h=Lh}=Fi(Fi({},e),s);if(d===0)return l&&(l.abort(),l=null),n.set(t=r),Promise.resolve();const f=z2()+u;let g;return i=y0($=>{if($<f)return!0;c||(g=h(t,a),typeof d=="function"&&(d=d(t,a)),c=!0),l&&(l.abort(),l=null);const y=$-f;return y>d?(n.set(t=a),!1):(n.set(t=g(p(y/d))),!0)}),i.promise}return{set:o,update:(a,s)=>o(a(r,t),s),subscribe:n.subscribe}}function Fh(t,e,n,i){if(typeof n=="number"){const r=i-n,o=(n-e)/(t.dt||1/60),a=(o+(t.opts.stiffness*r-t.opts.damping*o)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,n+a)}if(Mi(n))return n.map((r,o)=>Fh(t,e[o],n[o],i[o]));if(typeof n=="object"){const r={};for(const o in n)r[o]=Fh(t,e[o],n[o],i[o]);return r}throw new Error(`Cannot spring ${typeof n} values`)}function hn(t,e={}){const n=fe(t),{stiffness:i=.15,damping:r=.8,precision:o=.01}=e;let a,s,l,c=t,u=t,d=1,p=0,h=!1;function f($,y={}){u=$;const v=l={};if(t==null||y.hard||g.stiffness>=1&&g.damping>=1)return h=!0,a=null,c=$,n.set(t=u),Promise.resolve();if(y.soft&&(p=1/(60*(y.soft===!0?.5:+y.soft)),d=0),!s){a=null,h=!1;const w={inv_mass:void 0,opts:g,settled:!0,dt:void 0};s=y0(S=>{if(a===null&&(a=S),h)return h=!1,s=null,!1;d=Math.min(d+p,1),w.inv_mass=d,w.opts=g,w.settled=!0,w.dt=60*(S-a)/1e3;const R=Fh(w,c,t,u);return a=S,c=t,n.set(t=R),w.settled&&(s=null),!w.settled})}return new Promise(w=>{s.promise.then(()=>{v===l&&w()})})}const g={set:f,update:($,y)=>f($(u,t),y),subscribe:n.subscribe,stiffness:i,damping:r,precision:o};return g}var g3=Ql(!1,t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),n=()=>t(e.matches);return n(),e.addListener(n),()=>e.removeListener(n)}),sf=()=>"ResizeObserver"in window;const ih=Vs(),ub=(t,e,n,i,r)=>{t.rect||(t.rect=Vs());const o=t.rect;qy(ih,e,n,i,r),fa(o,ih)||(op(o,ih),t.dispatchEvent(new CustomEvent("measure",{detail:o})))},kd=Math.round,f3=t=>{const e=t.getBoundingClientRect();Fa&&ub(t,kd(e.x),kd(e.y),kd(e.width),kd(e.height))},rh=t=>{Fa&&ub(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},tu=[];let xl,Aa,Fa;function zh(){tu.length?(tu.forEach(t=>t.measure(t)),Fa=requestAnimationFrame(zh)):Fa=void 0}let Cd=new Map([]),Uc=0,oh=0;var Ir=(t,e={})=>{const{observePosition:n=!1,observeViewRect:i=!1,once:r=!1,disabled:o=!1,isMeasureRoot:a=!1}=e;if(sf()&&a&&(Aa||(Aa=new ResizeObserver(s=>{s.forEach(c=>{Cd.set(c.target,c.contentRect)});const l=Array.from(Cd.values()).some(({width:c,height:u})=>c>0&&u>0);l?l&&Fa===!1&&zh():(Fa&&cancelAnimationFrame(Fa),Fa=!1)})),Aa.observe(t),Uc++),!o)return!sf()||n||i?(t.measure=i?f3:rh,tu.push(t),Fa===void 0&&(Fa=requestAnimationFrame(zh)),t.measure(t),{destroy(){a&&Aa&&(Cd.delete(t),Aa.unobserve(t),Uc--,Uc===0&&(Aa.disconnect(),Aa=void 0));const s=tu.indexOf(t);tu.splice(s,1),delete t.measure}}):(xl||(xl=new ResizeObserver(s=>{s.forEach(l=>{Fa&&rh(l.target)})})),xl.observe(t),rh(t),r?xl.unobserve(t):oh++,{destroy(){a&&Aa&&(Cd.delete(t),Aa.unobserve(t),Uc--,Uc===0&&(Aa.disconnect(),Aa=void 0)),r||(xl.unobserve(t),oh--,oh===0&&(xl.disconnect(),xl=void 0))}})},$3=t=>{let e=!1;const n={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:i=>{e&&(i.target.dataset.focusVisible="")},blur:i=>{delete i.target.dataset.focusVisible}};return Object.keys(n).forEach(i=>t.addEventListener(i,n[i],!0)),{destroy(){Object.keys(n).forEach(i=>t.removeEventListener(i,n[i],!0))}}};const lf=t=>/^http/.test(t),y3=t=>new Promise((e,n)=>t.kind==="file"?e(t.getAsFile()):t.kind==="string"?t.getAsString(e):void n());var db=(t,e={})=>{const n=r=>{r.preventDefault()},i=async r=>{r.preventDefault(),r.stopPropagation();try{const o=await(a=>new Promise((s,l)=>{const{items:c}=a.dataTransfer;if(!c)return s([]);const u=Array.from(c).some(p=>p.type==="text/uri-list"),d=Array.from(c).filter(p=>(p.kind==="file"||p.kind==="string")&&p.type!=="text/x-moz-url").map(y3);Promise.all(d).then(p=>{if(u)return s([p.find(lf)].filter(Boolean));const h=p.filter(f=>lc(f)&&ap(f)||lf(f));s(h)}).catch(l)}))(r);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:r,resources:o},...e}))}catch{}};return t.addEventListener("drop",i),t.addEventListener("dragover",n),{destroy(){t.removeEventListener("drop",i),t.removeEventListener("dragover",n)}}};let Td=null;var M0=()=>{if(Td===null)if(Mr()){const t=Ci("canvas");Td=!cp(t,{failIfMajorPerformanceCaveat:!0}),ar(t)}else Td=!1;return Td},ah=t=>t instanceof WebGLTexture,cf=([t,e,n,i])=>[i.x,i.y,t.x,t.y,n.x,n.y,e.x,e.y];function b3(t){let e,n,i,r;return{c(){e=dt("div"),n=dt("canvas"),T(e,"class","PinturaCanvas")},m(o,a){et(o,e,a),St(e,n),t[37](n),i||(r=[At(n,"measure",t[38]),Pn(Ir.call(null,n))],i=!0)},p:Xe,i:Xe,o:Xe,d(o){o&&Q(e),t[37](null),i=!1,Kn(r)}}}function x3(t,e,n){let i,r,o,a,s,l,c;const u=[0,0,0,0],d=ui(),p=Mr()&&(Y=>{const Pt=.5*Y,H=Ci("canvas",{"data-retain":!0,width:Y,height:Y}),Bt=H.getContext("2d");return Bt.fillStyle="#f0f",Bt.fillRect(0,0,Pt,Pt),Bt.fillRect(Pt,Pt,Pt,Pt),H})(128),h=_a();let f,{isAnimated:g}=e,{isTransparent:$}=e,{maskRect:y}=e,{maskOpacity:v=1}=e,{maskFrameOpacity:w=.95}=e,{maskMarkupOpacity:S=1}=e,{clipAnnotationsToImage:R=!0}=e,{pixelRatio:M=1}=e,{textPixelRatio:B=M}=e,{backgroundColor:C}=e,{willRender:D=ri}=e,{didRender:O=ri}=e,{willRequest:P}=e,{csp:b}=e,{loadImageData:W=ri}=e,{enableGrid:nt=!1}=e,{gridColors:k}=e,{gridSize:N}=e,{gridOpacity:j=0}=e,{images:ut=[]}=e,{interfaceImages:Z=[]}=e,{selectionColor:ft}=e,q=null,ht=null,xt=null;const lt=(Y,Pt)=>Y.set(Pt,{hard:!g}),Ct={precision:1e-4*.01};let it=0;const vt=T0(void 0,{duration:0});F(t,vt,Y=>n(36,c=Y));const K=hn(1,Ct);F(t,K,Y=>n(35,s=Y));const Ft=hn(1,Ct);F(t,Ft,Y=>n(51,o=Y));const Ht=fe();F(t,Ht,Y=>n(53,l=Y));const Lt=fe();F(t,Lt,Y=>n(52,a=Y));const bt={},_t=(Y,Pt)=>{let H=bt[Y.id];const Bt=Math.min(1,2048/Pt.width);let ue=H?H.element:Ci("canvas",{width:Pt.width*Bt,height:Pt.height*Bt,"data-retain":!0});if(!H||((Ce,me)=>{if(Ce.total!==me.length)return!0;const It=Ce.last,Oe=me[me.length-1];return It.drawMode!==Oe.drawMode||!(!No(It)||No(Oe)&&fa(It,Oe))||!(!rr(It)||rr(Oe)&&It.x===Oe.x&&It.y===Oe.y&&It.rx===Oe.rx&&It.ry===Oe.ry)||!(!Gi(It)||Gi(Oe)&&Oe.points.length===It.points.length)})(H,Y.actions)){ue=ue.cloneNode(),((me,It,Oe)=>{const{selectionColor:cn=[1,1,1],scalar:rn=1}=Oe||{};let J=!1;for(const jt of It){const Ae=jt.drawMode==="subtract";if(Ae&&!J)continue;me.globalCompositeOperation=Ae?"destination-out":"source-over",me.save(),me.beginPath();const Se=T2(jt);u2(me,rn,rn),s0(me,jt.rotation,Se),P2(me,jt.flipX,jt.flipY,Se),jt.width?h0(me,{...jt,backgroundColor:cn}):jt.points?Ih(me,Object.assign({},jt,jt.pathClose?{backgroundColor:cn,strokeColor:[0,0,0,0]}:{strokeColor:cn,strokeJoin:"round",strokeCap:"round"})):jt.rx&&m0(me,{...jt,backgroundColor:cn,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),me.restore(),J=!0}})(ue.getContext("2d"),Y.actions,{selectionColor:[1,0,1],scalar:Bt});const Ce=Y.actions.length;bt[Y.id]={total:Ce,last:{...Y.actions[Ce-1]},element:ue}}return{x:0,y:0,...Pt,fillColor:Y.color||[1,1,1],backgroundImage:ue}};let rt;const Tt=()=>{cancelAnimationFrame(rt),rt=requestAnimationFrame(()=>{wt=!0,Jt=0,r()})},Vt=new Map([]),mt=new Map([]),at=(Y,Pt)=>({filterParam:Y==="pixelated"?q.textureFilterNearest:q.textureFilterLinear,wrapParam:Pt==="repeat"?q.textureRepeat:q.textureClamp}),$t=(Y,Pt,H)=>{if(!Vt.has(Y)){Vt.set(Y,Y);const Ce=at(Pt,H);if(!Ne(Bt=Y)&&(l2(Bt)||oc(Bt)||gu(Bt)||Zd(Bt))){const me=q.textureCreate();q.textureUpdate(me,Y,Ce),Vt.set(Y,me)}else W(Y).then(me=>{if(!q||!me)return;const It=q.textureCreate();q.textureUpdate(It,me,Ce),Vt.set(Y,It),Tt()}).catch(me=>{Vt.set(Y,me)})}var Bt,ue;if(Zd(Y)&&((ue=Y).currentTime>0&&!ue.paused&&!ue.ended&&ue.readyState>2||Y.dataset.redraw==="true")){const Ce=Vt.get(Y),me=at(Pt,H);return q.textureUpdate(Ce,Y,me),Y.dataset.redraw=!1,Ce}return Vt.get(Y)},te=(Y,Pt={})=>{const H=Pt.id||Y.id;if(Y.width&&Y.width<1||Y.height&&Y.height<1||!Y.text.length)return void mt.delete(H);let{text:Bt,textAlign:ue,fontFamily:Ce,fontSize:me=16,fontWeight:It,fontVariant:Oe,fontStyle:cn,letterSpacing:rn,lineHeight:J=me,width:jt,height:Ae}=Y,{outline:Se=0,blur:X=0,paddingTop:oe=0,paddingRight:Zt=0,paddingBottom:ee=0,paddingLeft:Je=0}=Pt;jt=Ze(jt)?Math.floor(jt):jt,Ae=Ze(Ae)?Math.floor(Ae):Ae;const{textSize:Fe,signature:be}=((Wn="",_e)=>{let{width:Ve=0,height:wn="auto",fontSize:An,fontFamily:ae,lineHeight:se,fontWeight:Rn,fontStyle:zn,fontVariant:Ei,letterSpacing:$i}=_e;const ti=Dd({text:Wn,fontFamily:ae,fontWeight:Rn,fontStyle:zn,fontVariant:Ei,fontSize:An,lineHeight:se,letterSpacing:$i,width:Ve,height:wn});let qn=pg.get(ti);if(qn)return qn;let kn=1;An>1e3&&Ba()&&(kn=An/1e3,An=1e3,se*=kn);const yi=r0(Ci("pre",{contenteditable:"true",spellcheck:"false",style:`${g2}${c0({fontFamily:ae,fontWeight:Rn,fontStyle:zn,fontVariant:Ei,fontSize:An,letterSpacing:$i,lineHeight:se})};${u0(Wn,_e)}"`,innerHTML:Wn})),$r=yi.getBoundingClientRect();return qn={signature:m2(yi).flat().map(Jr=>Jr.text).join("_;_"),textSize:ys(es($r),Jr=>Math.ceil(Jr*kn))},pg.set(ti,qn),yi.remove(),qn})(Bt,{...Y,width:jt,height:void 0}),di=Dd({text:Bt,textAlign:ue,fontFamily:Ce,fontSize:me,fontWeight:It,fontVariant:Oe,fontStyle:cn,lineHeight:J,letterSpacing:rn,outline:Se,blur:X,signature:be});if(!Vt.has(di)){Vt.set(di,Bt);const Wn=Math.ceil(Fe.width),_e=Math.ceil(Fe.height);if(Wn===0||_e===0)return;const Ve=k0(),wn=Math.min(1,(Ve-(Je+Zt)*B)/(Wn*B),(Ve-(oe+ee)*B)/(_e*B));$2(Bt,{fontSize:me,fontFamily:Ce,fontWeight:It,fontVariant:Oe,fontStyle:cn,letterSpacing:rn,textAlign:ue,lineHeight:J,width:jt,height:Ae,imageWidth:Wn,imageHeight:_e,paddingLeft:Je,paddingTop:oe,paddingRight:Zt,paddingBottom:ee,pixelRatio:B*wn,willRequest:P,outline:Se,blur:X,styleNonce:b.styleNonce,color:[1,0,1]}).then(An=>{if(!q)return;const ae=q.textureCreate();q.textureUpdate(ae,An,{filterParam:q.textureFilterLinear,wrapParam:q.textureClamp,scalar:wn}),Vt.set(di,ae),mt.set(H,ae),Tt()}).catch(console.error)}const Ri=Vt.get(di);return ah(Ri)?Ri:mt.get(H)},le=new Map,Wt=Y=>{let Pt;return Y.backgroundImage?Pt=$t(Y.backgroundImage,Y.backgroundImageRendering,Y.backgroundRepeat==="repeat"?"repeat":void 0):Y.bitmap&&Y.points&&(Pt=(H=>{const{id:Bt,points:ue,strokeWidth:Ce,strokeCap:me,strokeJoin:It,strokeColor:Oe,strokeDash:cn}=H;let rn=Vt.get(Bt),J=le.get(Bt);const jt=Dd({points:ue.map(be=>`${be.x},${be.y}`).join(","),strokeWidth:Ce,strokeCap:me,strokeJoin:It,strokeColor:Oe,strokeDash:(cn||[]).join(",")});if(J){const{hash:be}=J;if(Vt.has(Bt)){if(jt===be)return Vt.get(Bt)}else J=void 0}if(!J){const be=Ci("canvas",{width:1,height:1});J={canvas:be,hash:void 0},le.set(H.id,J),rn=q.textureCreate(),q.textureUpdate(rn,be,{filterParam:q.textureFilterLinear,wrapParam:q.textureClamp}),Vt.set(Bt,rn)}const{canvas:Ae}=J,Se=Math.ceil(H.strokeWidth),X=or(ue),oe=Math.floor(X.x)-.5*Se,Zt=Math.floor(X.y)-.5*Se,ee=Math.ceil(X.width+Se),Je=Math.ceil(X.height+Se);Ae.width=Math.max(ee,1),Ae.height=Math.max(Je,1);const Fe=Ae.getContext("2d");return Fe.clearRect(0,0,Ae.width,Ae.height),ee>=1&&Je>=1&&(Fe.translate(-oe,-Zt),Ih(Fe,H),Fe.resetTransform()),q.textureUpdate(rn,Ae,{filterParam:q.textureFilterLinear,wrapParam:q.textureClamp}),le.set(Bt,{canvas:Ae,hash:jt}),Vt.get(Bt)})(Y)),Pt},we=({texture:Y,size:Pt,origin:H,translation:Bt,rotation:ue,scale:Ce,colorMatrix:me,opacity:It,convolutionMatrix:Oe,gamma:cn,vignette:rn,maskFeather:J,maskCornerRadius:jt,overlayColor:Ae,enableOverlay:Se,enableManipulation:X,enableAntialiasing:oe})=>{let Zt=0,ee=0;if(M===1){const Je=Math.abs(1-Ce)<Number.EPSILON;Zt=Je&&ht%2!=0?.5:0,ee=Je&&xt%2!=0?.5:0}return q.drawImage(Y,Pt,H.x,H.y,Bt.x+Zt,Bt.y+ee,ue.x,ue.y,ue.z,Ce,me,si(It,0,1),Oe,cn,rn,J,jt,Ae,Se,X,oe),Y},yt=(Y,Pt,H)=>{const Bt=Fn(Pt),ue=Fn(Y),Ce=Bt.x-ue.x,me=Bt.y-ue.y,It=Gr(Bt,H,ue);return{x:It.x-ue.x-Ce,y:It.y-ue.y-me}},ie=(Y,Pt,H)=>{let Bt,ue;const Ce=ha(H.width,H.height);if(Y.backgroundRepeat==="repeat"&&(Bt={...H},ue={x:0,y:0}),Y.backgroundSize==="contain"){const me=oo(Pt,Ce,Pt);Bt=Ml(me),ue=Y.backgroundPosition?Y.backgroundPosition:ot(.5*(Pt.width-Bt.width),.5*(Pt.height-Bt.height))}else if(Y.backgroundSize==="cover"){const me=xs(Pt,Ce,Pt);Bt=Ml(me),Y.backgroundPosition?ue=Y.backgroundPosition:(ue=ot(me.x,me.y),ue=ot(.5*(Pt.width-Bt.width),.5*(Pt.height-Bt.height)))}else Y.backgroundSize?(Bt=Y.backgroundSize,ue=Y.backgroundPosition||{x:0,y:0}):Y.backgroundPosition&&(Bt={...H},ue=Y.backgroundPosition);return{backgroundSize:Bt,backgroundPosition:ue}},V=(Y=[],Pt)=>{Y.forEach(H=>{let Bt=Wt(H);const ue=H.status!=="complete"&&(H.status==="loading"||H.backgroundImage&&Bt===H.backgroundImage);ue&&Tt();const Ce=H.status==="error"||H.backgroundImage&&Bt instanceof Error;let me=ah(Bt)?Bt:void 0;const It=H._scale||1,Oe=H._translate||d,cn=H.strokeWidth&&H.strokeWidth*It,rn=H.cornerRadius?((X,oe)=>[X,X,X,X].map(Zt=>Zt*oe))(H.cornerRadius,It):u,J=!!H.width,jt=Ne(H.text),Ae=Mi(H.points),Se=rr(H);if(Ae){const X=H.points.map(oe=>ot(oe.x*It+Oe.x,oe.y*It+Oe.y));if(H.bitmap){Bt&&Pt.push(Bt);const oe=or(X),Zt=Math.ceil(H.strokeWidth*It);q.drawRect({x:Math.floor(oe.x)-.5*Zt,y:Math.floor(oe.y)-.5*Zt,width:Math.ceil(oe.width+Zt),height:Math.ceil(oe.height+Zt)},H.rotation,H.flipX,H.flipY,[0,0,0,0],void 0,me,void 0,void 0,void 0,void 0,void 0,void 0,H.opacity,void 0,void 0,!1,!1)}else q.drawPath(X,H.rotation,H.flipX,H.flipY,cn,H.strokeColor,H.pathClose,H.backgroundColor,H.opacity)}else if(Se){let X=H.x,oe=H.y;X*=It,oe*=It,X+=Oe.x,oe+=Oe.y;const Zt=Fd({x:X,y:oe,rx:H.rx*It,ry:H.ry*It}),ee=ot(X,oe),Je=me&&q.textureGetSize(me);let Fe,be;if(Je&&H.backgroundImage&&(H.backgroundSize||H.backgroundPosition||H.backgroundRepeat)){const di=ie(H,Zt,Je);Fe=di.backgroundSize,be=di.backgroundPosition}q.drawEllipse(ee,H.rx*It,H.ry*It,H.rotation,H.flipX,H.flipY,H.backgroundColor,me,Fe,be,H.backgroundCorners&&cf(H.backgroundCorners),cn,H.strokeColor,H.opacity,H.inverted),Bt&&Pt.push(Bt),(ue||Ce)&&(H.backgroundColor||H.strokeColor&&H.strokeWidth||q.drawEllipse(ee,H.rx*It,H.ry*It,H.rotation,H.flipX,H.flipY,Ce?[1,0,0,.25*H.opacity]:[0,0,0,.25*H.opacity]),Ce&&Be(ee),ue&&Me(ee))}else if(jt){const{fontSize:X=16}=H,oe=X>1e3&&Ba()?X/1e3:1,Zt=Math.max(16,Math.ceil(X/oe*.25)),ee=Math.abs(H.rotation)>0,Je=Ze(H.width)?Math.floor(H.width):H.width,Fe=Ze(H.height)?Math.floor(H.height):H.height,be=ea(H.text,{...H,width:Je,height:Fe}),di=Math.ceil(be.width),Ri=Math.ceil(be.height),Wn={x:H.x*It+Oe.x,y:H.y*It+Oe.y,width:di*It,height:Ri*It},_e=!!H.height;(H.backgroundColor||H.strokeColor)&&q.drawRect(Wn,H.rotation,H.flipX,H.flipY,rn,H.backgroundColor,void 0,void 0,void 0,!1,void 0,cn,H.strokeColor,H.opacity,void 0,void 0,void 0,H.inverted);const{textShadowX:Ve,textShadowY:wn,textShadowBlur:An}=H;if(Ve||wn||An){const se=Math.ceil(.5*An),Rn=Math.max(Zt,_e?0:se),zn=te(H,{id:H.id+"shadow",blur:An,paddingTop:Rn,paddingRight:Rn,paddingBottom:Rn,paddingLeft:Rn});if(zn&&!H._prerender){Pt.push(zn);const Ei=q.textureGetSize(zn),$i={x:0,y:0},ti={width:Ei.width/B*It,height:Ei.height/B*It},qn=Zt*It/oe;let kn;if(_e)kn={...Wn},$i.x=Ve-qn,$i.y=wn-qn;else if(kn={x:H.x*It+Oe.x-qn,y:H.y*It+Oe.y-qn,width:ti.width,height:ti.height},ee){const yi=yt(Wn,kn,H.rotation);kn.x+=yi.x,kn.y+=yi.y;const $r=Gr(ot(Ve,wn),H.rotation);kn.x+=$r.x,kn.y+=$r.y}else kn.x+=Ve,kn.y+=wn;q.drawRect(kn,H.rotation,H.flipX,H.flipY,[0,0,0,0],void 0,zn,ti,$i,!1,void 0,void 0,void 0,H.opacity,void 0,0,H.textShadowColor)}}if(H.textOutlineWidth){const se=Math.ceil(.5*H.textOutlineWidth),Rn=Zt+se,zn=te(H,{id:H.id+"outline",outline:H.textOutlineWidth,paddingTop:Rn,paddingRight:Rn,paddingBottom:Rn,paddingLeft:Rn});if(zn&&!H._prerender){Pt.push(zn);const Ei=q.textureGetSize(zn),$i={x:0,y:0},ti={width:Ei.width/B*It,height:Ei.height/B*It},qn=(Zt+se)*It/oe,kn={x:H.x*It+Oe.x-qn,y:H.y*It+Oe.y-qn,width:ti.width,height:H.height?Ri+qn:ti.height};if(ee){const yi=yt(Wn,kn,H.rotation);kn.x+=yi.x,kn.y+=yi.y}q.drawRect(kn,H.rotation,H.flipX,H.flipY,[0,0,0,0],void 0,zn,ti,$i,!1,void 0,void 0,void 0,H.opacity,void 0,0,H.textOutlineColor)}}const ae=te(H,{id:H.id+"text",paddingTop:Zt,paddingRight:Zt,paddingBottom:Zt,paddingLeft:Zt});if(ae&&!H._prerender){Pt.push(ae);const se=q.textureGetSize(ae),Rn={x:0,y:0},zn={width:se.width/B*It,height:se.height/B*It},Ei=Zt*It/oe,$i={x:H.x*It+Oe.x-Ei,y:H.y*It+Oe.y-Ei,width:zn.width,height:H.height?Ri+Ei:zn.height};if(ee){const qn=yt(Wn,$i,H.rotation);$i.x+=qn.x,$i.y+=qn.y}const ti=H.color||[0,0,0];H._prerender&&(ti[3]=0),q.drawRect($i,H.rotation,H.flipX,H.flipY,u,!1,ae,zn,Rn,!1,!1,void 0,void 0,H.opacity,void 0,H.feather,ti,H.inverted)}}else if(J){Bt&&Pt.push(Bt);const X=Ds(H);let oe,Zt;It&&Oe&&(X.x*=It,X.y*=It,X.x+=Oe.x,X.y+=Oe.y,X.width*=It,X.height*=It);const{backgroundRepeat:ee="no-repeat"}=H,Je=me&&q.textureGetSize(me);if(Je&&H.backgroundImage&&(H.backgroundSize||H.backgroundPosition||H.backgroundRepeat)){const Fe=ie(H,X,Je);oe=Fe.backgroundSize,Zt=Fe.backgroundPosition}if(q.drawRect(X,H.rotation,H.flipX,H.flipY,rn,H.backgroundColor,me,oe,Zt,ee==="repeat",H.backgroundCorners&&cf(H.backgroundCorners),cn,H.strokeColor,H.opacity,void 0,H.feather,H.fillColor,H.inverted),ue||Ce){H.backgroundColor&&H.backgroundColor[3]!==0||H.strokeColor&&H.strokeWidth||q.drawRect(X,H.rotation,H.flipX,H.flipY,rn,Ce?[1,.2549,.2118,.25*H.opacity]:[0,0,0,.25*H.opacity]);const Fe=Fn(X);Ce&&Be(Fe),ue&&Me(Fe)}}else Bt&&Pt.push(Bt)})};let De=0;const Le=[{x:-5,y:-5},{x:5,y:5}],qt=[{x:5,y:-5},{x:-5,y:5}],$e=Hd({x:0,y:0},10,10,0,!1,!1,16);$e.length=9;const Me=Y=>{De=Date.now()/50,q.drawEllipse(Y,15,15,0,!1,!1,[0,0,0,.5]);const Pt=Tl($e.map(H=>({x:H.x+Y.x,y:H.y+Y.y})),De,Y.x,Y.y);q.drawPath(Pt,0,!1,!1,2,[1,1,1])},Be=Y=>{q.drawEllipse(Y,13,13,0,!1,!1,[1,.2549,.2118,.75]);const Pt=Le.map(Bt=>({x:Bt.x+Y.x,y:Bt.y+Y.y})),H=qt.map(Bt=>({x:Bt.x+Y.x,y:Bt.y+Y.y}));q.drawPath(Pt,0,!1,!1,3,[1,1,1]),q.drawPath(H,0,!1,!1,3,[1,1,1])},mn=(Y,Pt,H,Bt,ue,Ce)=>q.drawRect(Pt,0,!1,!1,u,u,Y,Bt,H,!0,void 0,0,void 0,Ce,void 0,void 0,ue);let wt=!1,re=!0,on=!1;const Ue=[],en=[],ke=[],qe=Y=>!Y.aboveFrame,vn=Y=>Y.aboveFrame,In=()=>{ke.length=0;const Y=ut[0],{manipulationShapes:Pt,manipulationShapesDirty:H,annotationShapes:Bt,annotationShapesDirty:ue,interfaceShapes:Ce,decorationShapes:me,frameShapes:It,selectionShapes:Oe}=D({opacity:Y.opacity,rotation:Y.rotation,scale:Y.scale,images:ut,size:Zi(ht,xt),backgroundColor:[...c],selectionRect:l}),cn=[...c],rn=l,J=si(s,0,1),jt=a,Ae=Math.abs(Y.rotation.x/Math.PI*2-1),Se=Math.abs(Y.rotation.y/Math.PI*2-1),X=Ae<.99||Se<.99,oe={...Y.size},Zt=Y.backgroundColor,ee=Y.backgroundImage,Je=Pt.length>0,Fe=Bt.length>0,be=Bt.filter(vn).length>0,di=me.filter(vn).length>0,Ri=Zt[3]>0,Wn=!!R&&S>=1;if(J<1&&Ri){const _e=cn[0],Ve=cn[1],wn=cn[2],An=1-J,ae=Zt[0]*An,se=Zt[1]*An,Rn=Zt[2]*An,zn=1-An;cn[0]=ae+_e*zn,cn[1]=se+Ve*zn,cn[2]=Rn+wn*zn,cn[3]=1}if(q.setCanvasColor($?u:cn),Je&&(H||wt)?(q.disableMask(),q.drawToImageBlendBuffer(oe),Ue.length=0,V(Pt,Ue)):Je||(Ue.length=0),ke.push(...Ue),re&&(q.drawToImageOverlayBuffer(oe,B),re=!1),X){if(Fe&&(ue||wt)||!on){q.disableMask(),q.drawToImageOverlayBuffer(oe,B),en.length=0;const _e=be?Bt.filter(qe):Bt;V(_e,en)}else Fe||(en.length=0);on=!0}else on=!1;if(q.drawToCanvas(),q.enableMask(rn,J),nt&&N>=1&&k.length===2&&j&&((_e,Ve,wn,An,ae)=>{const se=Zi(Ve,Ve),Rn=$t(p,"pixelated","repeat"),zn=ot(-_e.x%Ve,-_e.y%Ve),Ei=ot(zn.x+.5*se.width,zn.y);mn(Rn,_e,zn,se,wn,ae),mn(Rn,_e,Ei,se,An,ae)})(rn,N,k[0],k[1],j),Ri&&q.drawRect(rn,0,!1,!1,u,Zt),ee){q.enableMask(rn,1);const _e=Math.max(y.width/ee.width,y.height/ee.height),Ve=ee.width*_e,wn=ee.height*_e,An={x:y.x+.5*y.width-.5*Ve,y:y.y+.5*y.height-.5*wn,width:Ve,height:wn};q.drawRect(An,0,!1,!1,u,u,$t(ee,"linear")),q.enableMask(rn,J)}if(Wn&&q.enablePreviewStencil(),ke.push(...[...ut].reverse().map(_e=>we({..._e,texture:$t(_e.data),enableOverlay:X&&Fe,enableManipulation:Je,enableAntialiasing:!0,mask:rn,maskOpacity:J,overlayColor:jt}))),q.enableMask(rn,S),!X){Wn&&q.applyPreviewStencil(),q.resetCanvasMatrix(),q.updateCanvasMatrix(oe,Y.origin,Y.translation,Y.scale,Y.rotation),en.length=0;const _e=be?Bt.filter(qe):Bt;V(_e,en),Wn&&q.disablePreviewStencil()}if(ke.push(...en),q.resetCanvasMatrix(),q.enableMask(rn,S),V(di?me.filter(qe):me,ke),It.length){q.enableMask(rn,1);const _e=It.filter(wn=>!wn.expandsCanvas),Ve=It.filter(wn=>wn.expandsCanvas);_e.length&&V(_e,ke),Ve.length&&(q.enableMask({x:rn.x+.5,y:rn.y+.5,width:rn.width-1,height:rn.height-1},o),V(Ve,ke))}if(be&&(q.resetCanvasMatrix(),q.updateCanvasMatrix(oe,Y.origin,Y.translation,Y.scale,Y.rotation),V(Bt.filter(vn),ke),q.resetCanvasMatrix()),di&&(q.resetCanvasMatrix(),V(me.filter(vn),ke),q.resetCanvasMatrix()),ft&&Oe.length&&!X){q.resetCanvasMatrix(),q.updateCanvasMatrix(oe,Y.origin,Y.translation,Y.scale,Y.rotation);const _e=[...ft];_e[3]=.5;const Ve=[{id:"selection",color:_e,actions:[...Oe]}].map(wn=>_t(wn,oe));V(Ve,ke),q.resetCanvasMatrix()}q.disableMask(),V(Ce,ke),Z.forEach(_e=>{if(q.enableMask(_e.mask,_e.maskOpacity),_e.backgroundColor){const wn=ee&&xs({..._e.mask},ee.width/ee.height),An=ee&&$t(ee,"linear");q.drawRect(_e.mask,0,!1,!1,_e.maskCornerRadius,_e.backgroundColor,An,wn,wn,void 0,void 0,void 0,void 0,_e.opacity,_e.maskFeather),An&&ke.push(An)}const Ve=we({..._e,texture:$t(_e.data),enableAntialiasing:!1,translation:{x:_e.translation.x+_e.offset.x-.5*ht,y:_e.translation.y+_e.offset.y-.5*xt}});ke.push(Ve)}),q.disableMask(),(_e=>{Vt.forEach((Ve,wn)=>{!_e.find(An=>An===Ve)&&ah(Ve)&&(Array.from(mt.values()).includes(Ve)||(Vt.delete(wn),q.textureDelete(Ve)))})})(ke),O(),wt=!1};let Hn,Jt=0;const He=()=>{clearTimeout(Hn);const Y=Date.now();Y-Jt<48?Hn=setTimeout(He,48):(Jt=Y,In())};return v4(()=>r()),qs(()=>n(31,q=d3(f,{alpha:$}))),aa(()=>{q&&(le.forEach(({canvas:Y})=>ar(Y)),le.clear(),q.release(),n(31,q=void 0),n(0,f=void 0))}),t.$$set=Y=>{"isAnimated"in Y&&n(9,g=Y.isAnimated),"isTransparent"in Y&&n(10,$=Y.isTransparent),"maskRect"in Y&&n(11,y=Y.maskRect),"maskOpacity"in Y&&n(12,v=Y.maskOpacity),"maskFrameOpacity"in Y&&n(13,w=Y.maskFrameOpacity),"maskMarkupOpacity"in Y&&n(14,S=Y.maskMarkupOpacity),"clipAnnotationsToImage"in Y&&n(15,R=Y.clipAnnotationsToImage),"pixelRatio"in Y&&n(16,M=Y.pixelRatio),"textPixelRatio"in Y&&n(17,B=Y.textPixelRatio),"backgroundColor"in Y&&n(18,C=Y.backgroundColor),"willRender"in Y&&n(19,D=Y.willRender),"didRender"in Y&&n(20,O=Y.didRender),"willRequest"in Y&&n(21,P=Y.willRequest),"csp"in Y&&n(22,b=Y.csp),"loadImageData"in Y&&n(23,W=Y.loadImageData),"enableGrid"in Y&&n(24,nt=Y.enableGrid),"gridColors"in Y&&n(25,k=Y.gridColors),"gridSize"in Y&&n(26,N=Y.gridSize),"gridOpacity"in Y&&n(27,j=Y.gridOpacity),"images"in Y&&n(28,ut=Y.images),"interfaceImages"in Y&&n(29,Z=Y.interfaceImages),"selectionColor"in Y&&n(30,ft=Y.selectionColor)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&f){const Y=getComputedStyle(f).getPropertyValue("--color-transition-duration");n(32,it=(Pt=>{let H=parseFloat(Pt);return/^[0-9]+s$/.test(Pt)?1e3*H:H})(Y))}262656&t.$$.dirty[0]|2&t.$$.dirty[1]&&C&&vt.set(C,{duration:g?it:0}),4096&t.$$.dirty[0]&&lt(K,Ze(v)?v:1),8192&t.$$.dirty[0]&&lt(Ft,Ze(w)?w:1),2048&t.$$.dirty[0]&&y&&Ht.set(y),48&t.$$.dirty[1]&&c&&Lt.set([c[0],c[1],c[2],si(s,0,1)]),268435462&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(34,i=!!(q&&ht&&xt&&ut.length)),65542&t.$$.dirty[0]|1&t.$$.dirty[1]&&ht&&xt&&q&&(Jt=0,q.resize(ht,xt,M)),8&t.$$.dirty[1]&&n(33,r=i?M0()?He:In:pe),12&t.$$.dirty[1]&&i&&r&&r()},[f,ht,xt,h,vt,K,Ft,Ht,Lt,g,$,y,v,w,S,R,M,B,C,D,O,P,b,W,nt,k,N,j,ut,Z,ft,q,it,r,i,s,c,function(Y){jn[Y?"unshift":"push"](()=>{f=Y,n(0,f)})},Y=>{n(1,ht=Y.detail.width),n(2,xt=Y.detail.height),h("measure",{width:ht,height:xt})}]}class v3 extends pn{constructor(e){super(),dn(this,e,x3,b3,ln,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,csp:22,loadImageData:23,enableGrid:24,gridColors:25,gridSize:26,gridOpacity:27,images:28,interfaceImages:29,selectionColor:30},null,[-1,-1,-1])}}var yn=(t,e=Boolean,n=" ")=>t.filter(e).join(n);function uf(t,e,n){const i=t.slice();return i[17]=e[n],i}const w3=t=>({tab:4&t}),df=t=>({tab:t[17]});function pf(t){let e,n,i,r=[],o=new Map,a=t[2];const s=l=>l[17].id;for(let l=0;l<a.length;l+=1){let c=uf(t,a,l),u=s(c);o.set(u,r[l]=hf(u,c))}return{c(){e=dt("ul");for(let l=0;l<r.length;l+=1)r[l].c();T(e,"class",n=yn(["PinturaTabList",t[0]])),T(e,"role","tablist"),T(e,"data-layout",t[1])},m(l,c){et(l,e,c);for(let u=0;u<r.length;u+=1)r[u].m(e,null);t[14](e),i=!0},p(l,c){1124&c&&(a=l[2],Ie(),r=ns(r,c,s,1,l,a,o,e,Js,hf,null,uf),Re()),(!i||1&c&&n!==(n=yn(["PinturaTabList",l[0]])))&&T(e,"class",n),(!i||2&c)&&T(e,"data-layout",l[1])},i(l){if(!i){for(let c=0;c<a.length;c+=1)I(r[c]);i=!0}},o(l){for(let c=0;c<r.length;c+=1)z(r[c]);i=!1},d(l){l&&Q(e);for(let c=0;c<r.length;c+=1)r[c].d();t[14](null)}}}function hf(t,e){let n,i,r,o,a,s,l,c,u,d,p;const h=e[11].default,f=hr(h,e,e[10],df);function g(...y){return e[12](e[17],...y)}function $(...y){return e[13](e[17],...y)}return{key:t,first:null,c(){n=dt("li"),i=dt("button"),f&&f.c(),a=he(),T(i,"type","button"),T(i,"title",r=e[17].label),i.disabled=o=e[17].disabled,T(n,"role","tab"),T(n,"aria-controls",s=e[17].href.substring(1)),T(n,"id",l=e[17].tabId),T(n,"aria-selected",c=e[17].selected),this.first=n},m(y,v){et(y,n,v),St(n,i),f&&f.m(i,null),St(n,a),u=!0,d||(p=[At(i,"keydown",g),At(i,"click",$)],d=!0)},p(y,v){e=y,f&&f.p&&(!u||1028&v)&&gr(f,h,e,e[10],u?mr(h,e[10],v,w3):fr(e[10]),df),(!u||4&v&&r!==(r=e[17].label))&&T(i,"title",r),(!u||4&v&&o!==(o=e[17].disabled))&&(i.disabled=o),(!u||4&v&&s!==(s=e[17].href.substring(1)))&&T(n,"aria-controls",s),(!u||4&v&&l!==(l=e[17].tabId))&&T(n,"id",l),(!u||4&v&&c!==(c=e[17].selected))&&T(n,"aria-selected",c)},i(y){u||(I(f,y),u=!0)},o(y){z(f,y),u=!1},d(y){y&&Q(n),f&&f.d(y),d=!1,Kn(p)}}}function S3(t){let e,n,i=t[4]&&pf(t);return{c(){i&&i.c(),e=Ii()},m(r,o){i&&i.m(r,o),et(r,e,o),n=!0},p(r,[o]){r[4]?i?(i.p(r,o),16&o&&I(i,1)):(i=pf(r),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(Ie(),z(i,1,1,()=>{i=null}),Re())},i(r){n||(I(i),n=!0)},o(r){z(i),n=!1},d(r){i&&i.d(r),r&&Q(e)}}}function k3(t,e,n){let i,r,o,{$$slots:a={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:u}=e,{tabs:d=[]}=e,{layout:p}=e;const h=_a(),f=y=>{const v=o.querySelectorAll('[role="tab"] button')[y];v&&v.focus()},g=(y,v)=>{y.preventDefault(),y.stopPropagation(),h("select",v)},$=({key:y},v)=>{if(!/arrow/i.test(y))return;const w=d.findIndex(S=>S.id===v);return/right|down/i.test(y)?f(w<d.length-1?w+1:0):/left|up/i.test(y)?f(w>0?w-1:d.length-1):void 0};return t.$$set=y=>{"class"in y&&n(0,l=y.class),"name"in y&&n(7,c=y.name),"selected"in y&&n(8,u=y.selected),"tabs"in y&&n(9,d=y.tabs),"layout"in y&&n(1,p=y.layout),"$$scope"in y&&n(10,s=y.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&n(2,i=d.map(y=>{const v=y.id===u;return{...y,tabId:`tab-${c}-${y.id}`,href:`#panel-${c}-${y.id}`,selected:v}})),4&t.$$.dirty&&n(4,r=i.length>1)},[l,p,i,o,r,g,$,c,u,d,s,a,(y,v)=>$(v,y.id),(y,v)=>g(v,y.id),function(y){jn[y?"unshift":"push"](()=>{o=y,n(3,o)})}]}class up extends pn{constructor(e){super(),dn(this,e,k3,S3,ln,{class:0,name:7,selected:8,tabs:9,layout:1})}}var ws=(t,e)=>{if(!e)return;const n=i=>{_y(t,i)};return n(e),{update:n}};const C3=t=>({panel:16&t}),mf=t=>({panel:t[4][0].id,panelIsActive:!0});function gf(t,e,n){const i=t.slice();return i[14]=e[n].id,i[15]=e[n].shouldDraw,i[16]=e[n].panelId,i[17]=e[n].tabindex,i[18]=e[n].labelledBy,i[19]=e[n].isActive,i[20]=e[n].hidden,i[3]=e[n].visible,i}const T3=t=>({panel:16&t,panelIsActive:16&t}),ff=t=>({panel:t[14],panelIsActive:t[19]});function M3(t){let e,n,i,r,o,a,s;const l=t[11].default,c=hr(l,t,t[10],mf);return{c(){e=dt("div"),n=dt("div"),c&&c.c(),T(n,"class",i=yn([t[1]])),T(e,"class",t[0])},m(u,d){et(u,e,d),St(e,n),c&&c.m(n,null),o=!0,a||(s=[Pn(r=ws.call(null,e,t[2])),At(e,"measure",t[13]),Pn(Ir.call(null,e))],a=!0)},p(u,d){c&&c.p&&(!o||1040&d)&&gr(c,l,u,u[10],o?mr(l,u[10],d,C3):fr(u[10]),mf),(!o||2&d&&i!==(i=yn([u[1]])))&&T(n,"class",i),(!o||1&d)&&T(e,"class",u[0]),r&&Mn(r.update)&&4&d&&r.update.call(null,u[2])},i(u){o||(I(c,u),o=!0)},o(u){z(c,u),o=!1},d(u){u&&Q(e),c&&c.d(u),a=!1,Kn(s)}}}function P3(t){let e,n,i,r,o,a,s=[],l=new Map,c=t[4];const u=d=>d[14];for(let d=0;d<c.length;d+=1){let p=gf(t,c,d),h=u(p);l.set(h,s[d]=yf(h,p))}return{c(){e=dt("div");for(let d=0;d<s.length;d+=1)s[d].c();T(e,"class",n=yn(["PinturaTabPanels",t[0]]))},m(d,p){et(d,e,p);for(let h=0;h<s.length;h+=1)s[h].m(e,null);r=!0,o||(a=[Pn(i=ws.call(null,e,t[2])),At(e,"measure",t[12]),Pn(Ir.call(null,e,{observePosition:!0}))],o=!0)},p(d,p){1042&p&&(c=d[4],Ie(),s=ns(s,p,u,1,d,c,l,e,Js,yf,null,gf),Re()),(!r||1&p&&n!==(n=yn(["PinturaTabPanels",d[0]])))&&T(e,"class",n),i&&Mn(i.update)&&4&p&&i.update.call(null,d[2])},i(d){if(!r){for(let p=0;p<c.length;p+=1)I(s[p]);r=!0}},o(d){for(let p=0;p<s.length;p+=1)z(s[p]);r=!1},d(d){d&&Q(e);for(let p=0;p<s.length;p+=1)s[p].d();o=!1,Kn(a)}}}function $f(t){let e;const n=t[11].default,i=hr(n,t,t[10],ff);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||1040&o)&&gr(i,n,r,r[10],e?mr(n,r[10],o,T3):fr(r[10]),ff)},i(r){e||(I(i,r),e=!0)},o(r){z(i,r),e=!1},d(r){i&&i.d(r)}}}function yf(t,e){let n,i,r,o,a,s,l,c,u,d=e[15]&&$f(e);return{key:t,first:null,c(){n=dt("div"),d&&d.c(),i=he(),T(n,"class",r=yn(["PinturaTabPanel",e[1]])),n.hidden=o=e[20],T(n,"id",a=e[16]),T(n,"tabindex",s=e[17]),T(n,"aria-labelledby",l=e[18]),T(n,"data-inert",c=!e[3]),this.first=n},m(p,h){et(p,n,h),d&&d.m(n,null),St(n,i),u=!0},p(p,h){(e=p)[15]?d?(d.p(e,h),16&h&&I(d,1)):(d=$f(e),d.c(),I(d,1),d.m(n,i)):d&&(Ie(),z(d,1,1,()=>{d=null}),Re()),(!u||2&h&&r!==(r=yn(["PinturaTabPanel",e[1]])))&&T(n,"class",r),(!u||16&h&&o!==(o=e[20]))&&(n.hidden=o),(!u||16&h&&a!==(a=e[16]))&&T(n,"id",a),(!u||16&h&&s!==(s=e[17]))&&T(n,"tabindex",s),(!u||16&h&&l!==(l=e[18]))&&T(n,"aria-labelledby",l),(!u||16&h&&c!==(c=!e[3]))&&T(n,"data-inert",c)},i(p){u||(I(d),u=!0)},o(p){z(d),u=!1},d(p){p&&Q(n),d&&d.d()}}}function I3(t){let e,n,i,r;const o=[P3,M3],a=[];function s(l,c){return l[5]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),i=Ii()},m(l,c){a[e].m(l,c),et(l,i,c),r=!0},p(l,[c]){let u=e;e=s(l),e===u?a[e].p(l,c):(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),I(n,1),n.m(i.parentNode,i))},i(l){r||(I(n),r=!0)},o(l){z(n),r=!1},d(l){a[e].d(l),l&&Q(i)}}}function R3(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:u}=e,{panels:d=[]}=e,{visible:p}=e,{style:h}=e;const f={};return t.$$set=g=>{"class"in g&&n(0,s=g.class),"name"in g&&n(6,l=g.name),"selected"in g&&n(7,c=g.selected),"panelClass"in g&&n(1,u=g.panelClass),"panels"in g&&n(8,d=g.panels),"visible"in g&&n(3,p=g.visible),"style"in g&&n(2,h=g.style),"$$scope"in g&&n(10,a=g.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&n(4,i=d.map(g=>{const $=g===c;$&&n(9,f[g]=!0,f);const y=p?p.indexOf(g)!==-1:$;return{id:g,panelId:`panel-${l}-${g}`,labelledBy:`tab-${l}-${g}`,isActive:$,hidden:!$,visible:y,tabindex:$?0:-1,shouldDraw:$||f[g]}})),16&t.$$.dirty&&n(5,r=i.length>1)},[s,u,h,p,i,r,l,c,d,f,a,o,function(g){Kr.call(this,t,g)},function(g){Kr.call(this,t,g)}]}class dp extends pn{constructor(e){super(),dn(this,e,R3,I3,ln,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var P0=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(n=>!!e[n].get)};function bf(t){let e,n,i,r;const o=[t[5],{locale:t[1]}];function a(c){t[22](c)}var s=t[10];function l(c){let u={};for(let d=0;d<o.length;d+=1)u=Fi(u,o[d]);return c[3]!==void 0&&(u.name=c[3]),{props:u}}return s&&(e=Jd(s,l(t)),jn.push(()=>Io(e,"name",a)),t[23](e),e.$on("measure",t[11])),{c(){e&&Ot(e.$$.fragment),i=Ii()},m(c,u){e&&zt(e,c,u),et(c,i,u),r=!0},p(c,u){const d=34&u[0]?Pr(o,[32&u[0]&&Or(c[5]),2&u[0]&&{locale:c[1]}]):{};if(!n&&8&u[0]&&(n=!0,d.name=c[3],jo(()=>n=!1)),s!==(s=c[10])){if(e){Ie();const p=e;z(p.$$.fragment,1,0,()=>{Dt(p,1)}),Re()}s?(e=Jd(s,l(c)),jn.push(()=>Io(e,"name",a)),c[23](e),e.$on("measure",c[11]),Ot(e.$$.fragment),I(e.$$.fragment,1),zt(e,i.parentNode,i)):e=null}else s&&e.$set(d)},i(c){r||(e&&I(e.$$.fragment,c),r=!0)},o(c){e&&z(e.$$.fragment,c),r=!1},d(c){t[23](null),c&&Q(i),e&&Dt(e,c)}}}function E3(t){let e,n,i,r=t[6]&&bf(t);return{c(){e=dt("div"),r&&r.c(),T(e,"data-util",t[3]),T(e,"class",n=yn(["PinturaUtilPanel",t[2]])),Et(e,"opacity",t[7])},m(o,a){et(o,e,a),r&&r.m(e,null),t[24](e),i=!0},p(o,a){o[6]?r?(r.p(o,a),64&a[0]&&I(r,1)):(r=bf(o),r.c(),I(r,1),r.m(e,null)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),(!i||8&a[0])&&T(e,"data-util",o[3]),(!i||4&a[0]&&n!==(n=yn(["PinturaUtilPanel",o[2]])))&&T(e,"class",n),128&a[0]&&Et(e,"opacity",o[7])},i(o){i||(I(r),i=!0)},o(o){z(r),i=!1},d(o){o&&Q(e),r&&r.d(),t[24](null)}}}function A3(t,e,n){let i,r,o,a,s;const l=_a();let{isActive:c=!0}=e,{stores:u}=e,{view:d}=e,{props:p}=e,{component:h}=e,{locale:f}=e,{class:g}=e;const $=mi("isAnimated");let y;F(t,$,N=>n(21,s=N));const v=hn(0),w=Vn(v,N=>si(N,0,1));F(t,w,N=>n(20,a=N));let S=!c;const R=fe(c),M={isActive:Vn(R,async(N,j)=>{if(!N)return j(N);await W2(),j(N)},!1),isActiveFraction:Vn(w,N=>N),isVisible:Vn(w,N=>N>0)},B=d,C=P0(B),D=Object.keys(p||{}).reduce((N,j)=>(C.includes(j)&&(N[j]=p[j]),N),{}),O=Object.keys(M).reduce((N,j)=>(C.includes(j)&&(N[j]=M[j]),N),{});let P,b;const W=N=>{n(17,y={...N.detail}),k&&c&&l("measure",{...y})};Mo("measurable",Ir);const nt=Il().$$.context;let k=!1;return qs(()=>{if(n(19,k=!0),o)return;n(0,h=new B({target:b,props:{...r,locale:f},context:nt})),n(3,P=h.name);const N=h.$on("measure",W);return()=>{N(),h.$destroy()}}),t.$$set=N=>{"isActive"in N&&n(12,c=N.isActive),"stores"in N&&n(13,u=N.stores),"view"in N&&n(14,d=N.view),"props"in N&&n(15,p=N.props),"component"in N&&n(0,h=N.component),"locale"in N&&n(1,f=N.locale),"class"in N&&n(2,g=N.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&y&&c&&h&&l("measure",y),2101248&t.$$.dirty[0]&&v.set(c?1:0,{hard:s===!1}),1310720&t.$$.dirty[0]&&(a<=0&&!S?n(18,S=!0):a>0&&S&&n(18,S=!1)),786432&t.$$.dirty[0]&&k&&l(S?"hide":"show"),1048576&t.$$.dirty[0]&&l("fade",a),1048576&t.$$.dirty[0]&&n(7,i=a),4096&t.$$.dirty[0]&&R.set(c),8192&t.$$.dirty[0]&&n(5,r={...D,...O,stores:u})},n(6,o=!C.includes("external")),[h,f,g,P,b,r,o,i,$,w,B,W,c,u,d,p,v,y,S,k,a,s,function(N){P=N,n(3,P)},function(N){jn[N?"unshift":"push"](()=>{h=N,n(0,h)})},function(N){jn[N?"unshift":"push"](()=>{b=N,n(4,b)})}]}class pb extends pn{constructor(e){super(),dn(this,e,A3,E3,ln,{isActive:12,stores:13,view:14,props:15,component:0,locale:1,class:2,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function L3(t){let e,n,i,r,o,a;const s=t[5].default,l=hr(s,t,t[4],null);return{c(){e=Tr("svg"),l&&l.c(),T(e,"class",t[3]),T(e,"width",t[0]),T(e,"height",t[1]),T(e,"viewBox",n="0 0 "+t[0]+`
    `+t[1]),T(e,"xmlns","http://www.w3.org/2000/svg"),T(e,"aria-hidden","true"),T(e,"focusable","false"),T(e,"stroke-linecap","round"),T(e,"stroke-linejoin","round")},m(c,u){et(c,e,u),l&&l.m(e,null),r=!0,o||(a=Pn(i=ws.call(null,e,t[2])),o=!0)},p(c,[u]){l&&l.p&&(!r||16&u)&&gr(l,s,c,c[4],r?mr(s,c[4],u,null):fr(c[4]),null),(!r||8&u)&&T(e,"class",c[3]),(!r||1&u)&&T(e,"width",c[0]),(!r||2&u)&&T(e,"height",c[1]),(!r||3&u&&n!==(n="0 0 "+c[0]+`
    `+c[1]))&&T(e,"viewBox",n),i&&Mn(i.update)&&4&u&&i.update.call(null,c[2])},i(c){r||(I(l,c),r=!0)},o(c){z(l,c),r=!1},d(c){c&&Q(e),l&&l.d(c),o=!1,a()}}}function F3(t,e,n){let{$$slots:i={},$$scope:r}=e,{width:o=24}=e,{height:a=24}=e,{style:s}=e,{class:l}=e;return t.$$set=c=>{"width"in c&&n(0,o=c.width),"height"in c&&n(1,a=c.height),"style"in c&&n(2,s=c.style),"class"in c&&n(3,l=c.class),"$$scope"in c&&n(4,r=c.$$scope)},[o,a,s,l,r,i]}class Ho extends pn{constructor(e){super(),dn(this,e,F3,L3,ln,{width:0,height:1,style:2,class:3})}}var hb=(t,e)=>e===t.target||e.contains(t.target),ep=(t,e,n)=>{const i=Ne(e)?e:t;return n?`${i} (${r=n,r.map(o=>o==="CMD"?sp()?"":"Ctrl":o).join("+")})`:i;var r};const{document:xf}=N2;function z3(t){let e,n,i,r;return{c(){e=he(),n=dt("button"),T(n,"class","PinturaImageButton"),T(n,"type","button"),T(n,"title",t[1]),n.disabled=t[2]},m(o,a){et(o,e,a),et(o,n,a),n.innerHTML=t[0],t[11](n),i||(r=[At(xf.body,"load",t[5],!0),At(xf.body,"error",t[6],!0),At(n,"pointerdown",t[4])],i=!0)},p(o,[a]){1&a&&(n.innerHTML=o[0]),2&a&&T(n,"title",o[1]),4&a&&(n.disabled=o[2])},i:Xe,o:Xe,d(o){o&&Q(e),o&&Q(n),t[11](null),i=!1,Kn(r)}}}function D3(t,e,n){let i,{html:r}=e,{title:o}=e,{onclick:a}=e,{disabled:s=!1}=e,{ongrab:l=pe}=e,{ondrag:c=pe}=e,{ondrop:u=pe}=e;const d=$=>Vo(p,ot($.pageX,$.pageY))<256;let p;const h=$=>{document.documentElement.removeEventListener("pointermove",f),document.documentElement.removeEventListener("pointerup",h);const y=ot($.pageX,$.pageY);if(Vo(p,y)<32)return a($);d($)||u($)},f=$=>{d($)||c($)},g=$=>i&&i.contains($)&&$.nodeName==="IMG";return t.$$set=$=>{"html"in $&&n(0,r=$.html),"title"in $&&n(1,o=$.title),"onclick"in $&&n(7,a=$.onclick),"disabled"in $&&n(2,s=$.disabled),"ongrab"in $&&n(8,l=$.ongrab),"ondrag"in $&&n(9,c=$.ondrag),"ondrop"in $&&n(10,u=$.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&i&&i.querySelector("img")&&n(3,i.dataset.loader=!0,i)},[r,o,s,i,$=>{p=ot($.pageX,$.pageY),l($),document.documentElement.addEventListener("pointermove",f),document.documentElement.addEventListener("pointerup",h)},({target:$})=>{g($)&&n(3,i.dataset.load=!0,i)},({target:$})=>{g($)&&n(3,i.dataset.error=!0,i)},a,l,c,u,function($){jn[$?"unshift":"push"](()=>{i=$,n(3,i)})}]}class mb extends pn{constructor(e){super(),dn(this,e,D3,z3,ln,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function vf(t,e,n){const i=t.slice();return i[13]=e[n],i}function wf(t,e){let n,i,r,o,a,s,l;function c(){return e[9](e[13])}function u(...h){return e[10](e[13],...h)}function d(...h){return e[11](e[13],...h)}function p(...h){return e[12](e[13],...h)}return i=new mb({props:{onclick:c,ongrab:u,ondrag:d,ondrop:p,disabled:e[1]||e[13].disabled,title:e[13].title,html:e[13].thumb}}),{key:t,first:null,c(){n=dt("li"),Ot(i.$$.fragment),r=he(),Et(n,"opacity",e[6]),this.first=n},m(h,f){et(h,n,f),zt(i,n,null),St(n,r),a=!0,s||(l=Pn(o=e[8].call(null,n,e[13])),s=!0)},p(h,f){e=h;const g={};5&f&&(g.onclick=c),9&f&&(g.ongrab=u),17&f&&(g.ondrag=d),33&f&&(g.ondrop=p),3&f&&(g.disabled=e[1]||e[13].disabled),1&f&&(g.title=e[13].title),1&f&&(g.html=e[13].thumb),i.$set(g),o&&Mn(o.update)&&1&f&&o.update.call(null,e[13]),64&f&&Et(n,"opacity",e[6])},i(h){a||(I(i.$$.fragment,h),a=!0)},o(h){z(i.$$.fragment,h),a=!1},d(h){h&&Q(n),Dt(i),s=!1,l()}}}function B3(t){let e,n,i=[],r=new Map,o=t[0];const a=s=>s[13].id;for(let s=0;s<o.length;s+=1){let l=vf(t,o,s),c=a(l);r.set(c,i[s]=wf(c,l))}return{c(){e=dt("ul");for(let s=0;s<i.length;s+=1)i[s].c();T(e,"class","PinturaImageButtonList")},m(s,l){et(s,e,l);for(let c=0;c<i.length;c+=1)i[c].m(e,null);n=!0},p(s,[l]){127&l&&(o=s[0],Ie(),i=ns(i,l,a,1,s,o,r,e,Js,wf,null,vf),Re())},i(s){if(!n){for(let l=0;l<o.length;l+=1)I(i[l]);n=!0}},o(s){for(let l=0;l<i.length;l+=1)z(i[l]);n=!1},d(s){s&&Q(e);for(let l=0;l<i.length;l+=1)i[l].d()}}}function O3(t,e,n){let i,{items:r}=e,{disabled:o}=e,{onclickitem:a}=e,{ongrabitem:s}=e,{ondragitem:l}=e,{ondropitem:c}=e;const u=hn(0,{stiffness:.25,damping:.9});return F(t,u,d=>n(6,i=d)),qs(()=>u.set(1)),t.$$set=d=>{"items"in d&&n(0,r=d.items),"disabled"in d&&n(1,o=d.disabled),"onclickitem"in d&&n(2,a=d.onclickitem),"ongrabitem"in d&&n(3,s=d.ongrabitem),"ondragitem"in d&&n(4,l=d.ondragitem),"ondropitem"in d&&n(5,c=d.ondropitem)},[r,o,a,s,l,c,i,u,(d,p)=>p.mount&&p.mount(d.firstChild,p),d=>a(d.id),(d,p)=>s&&s(d.id,p),(d,p)=>l&&l(d.id,p),(d,p)=>c&&c(d.id,p)]}class I0 extends pn{constructor(e){super(),dn(this,e,O3,B3,ln,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var Yc=()=>Mr()&&window.devicePixelRatio||1;let sh=null;var lu=t=>(sh===null&&(sh=Yc()===1?Math.round:e=>e),sh(t)),Dh=(t,e={})=>{if(t){if(e.preventScroll&&Oa()){const n=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=n)}t.focus(e)}},gb=t=>/date|email|number|search|text|url/.test(t.type),cu=t=>(e=>/textarea/i.test(e.nodeName))(t)||gb(t)||t.isContentEditable;const _3=t=>({}),Sf=t=>({}),V3=t=>({}),kf=t=>({});function W3(t){let e,n;const i=[t[7]];let r={$$slots:{default:[U3]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new ks({props:r}),t[53](e),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=128&a[0]?Pr(i,[Or(o[7])]):{};67108864&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){t[53](null),Dt(e,o)}}}function N3(t){let e,n;const i=[t[7]];let r={};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new ks({props:r}),t[52](e),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=128&a[0]?Pr(i,[Or(o[7])]):{};e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){t[52](null),Dt(e,o)}}}function U3(t){let e;const n=t[51].label,i=hr(n,t,t[57],kf);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||67108864&o[1])&&gr(i,n,r,r[57],e?mr(n,r[57],o,V3):fr(r[57]),kf)},i(r){e||(I(i,r),e=!0)},o(r){z(i,r),e=!1},d(r){i&&i.d(r)}}}function Cf(t){let e,n,i,r,o,a,s;const l=t[51].details,c=hr(l,t,t[57],Sf);return{c(){e=dt("div"),c&&c.c(),n=he(),i=dt("span"),T(i,"class","PinturaPanelTip"),T(i,"data-top",t[10]),Et(i,"opacity",t[14]),Et(i,"transform",t[13]),Et(i,"top",t[12]),Et(i,"left",t[11]),T(e,"class",r=yn(["PinturaPanel","pintura-editor-panel",t[2]])),T(e,"tabindex","-1"),Et(e,"opacity",t[18]),Et(e,"pointer-events",t[17]),Et(e,"transform",t[16]),Et(e,"max-height",t[15])},m(u,d){et(u,e,d),c&&c.m(e,null),St(e,n),St(e,i),t[54](e),o=!0,a||(s=[At(e,"close",t[55]),At(e,"keydown",t[25]),At(e,"measure",t[56]),Pn(Ir.call(null,e))],a=!0)},p(u,d){c&&c.p&&(!o||67108864&d[1])&&gr(c,l,u,u[57],o?mr(l,u[57],d,_3):fr(u[57]),Sf),(!o||1024&d[0])&&T(i,"data-top",u[10]),16384&d[0]&&Et(i,"opacity",u[14]),8192&d[0]&&Et(i,"transform",u[13]),4096&d[0]&&Et(i,"top",u[12]),2048&d[0]&&Et(i,"left",u[11]),(!o||4&d[0]&&r!==(r=yn(["PinturaPanel","pintura-editor-panel",u[2]])))&&T(e,"class",r),262144&d[0]&&Et(e,"opacity",u[18]),131072&d[0]&&Et(e,"pointer-events",u[17]),65536&d[0]&&Et(e,"transform",u[16]),32768&d[0]&&Et(e,"max-height",u[15])},i(u){o||(I(c,u),o=!0)},o(u){z(c,u),o=!1},d(u){u&&Q(e),c&&c.d(u),t[54](null),a=!1,Kn(s)}}}function j3(t){let e,n,i,r,o,a,s,l,c;const u=[N3,W3],d=[];function p(f,g){return f[1]?0:1}n=p(t),i=d[n]=u[n](t);let h=t[6]&&Cf(t);return{c(){e=he(),i.c(),r=he(),h&&h.c(),o=he(),a=Ii()},m(f,g){et(f,e,g),d[n].m(f,g),et(f,r,g),h&&h.m(f,g),et(f,o,g),et(f,a,g),s=!0,l||(c=[At(document.body,"pointerdown",function(){Mn(t[9])&&t[9].apply(this,arguments)}),At(document.body,"pointerup",function(){Mn(t[8])&&t[8].apply(this,arguments)})],l=!0)},p(f,g){let $=n;n=p(t=f),n===$?d[n].p(t,g):(Ie(),z(d[$],1,1,()=>{d[$]=null}),Re(),i=d[n],i?i.p(t,g):(i=d[n]=u[n](t),i.c()),I(i,1),i.m(r.parentNode,r)),t[6]?h?(h.p(t,g),64&g[0]&&I(h,1)):(h=Cf(t),h.c(),I(h,1),h.m(o.parentNode,o)):h&&(Ie(),z(h,1,1,()=>{h=null}),Re())},i(f){s||(I(i),I(h),I(!1),s=!0)},o(f){z(i),z(h),z(!1),s=!1},d(f){f&&Q(e),d[n].d(f),f&&Q(r),h&&h.d(f),f&&Q(o),f&&Q(a),l=!1,Kn(c)}}}function H3(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,{$$slots:W={},$$scope:nt}=e,{buttonClass:k}=e,{buttonLabel:N}=e,{buttonLabelClass:j}=e,{buttonHideLabel:ut}=e,{buttonIcon:Z}=e,{buttonTitle:ft}=e,{panelClass:q}=e,{isActive:ht=!1}=e,{onshow:xt=({panel:yt})=>Dh(yt,{preventScroll:!0})}=e,{onhide:lt=pe}=e;const Ct=mi("isAnimated");F(t,Ct,yt=>n(50,b=yt));const it=mi("rootPortal");F(t,it,yt=>n(45,B=yt));const vt=mi("rootRect");let K,Ft,Ht;F(t,vt,yt=>n(48,O=yt));const Lt=()=>n(33,Ht=i&&i.getBoundingClientRect());let bt=ui(),_t=hn(0);F(t,_t,yt=>n(47,D=yt));let rt=ui();const Tt=fe({x:0,y:0});F(t,Tt,yt=>n(46,C=yt));const Vt=hn(-5,{stiffness:.1,damping:.35,precision:.001});F(t,Vt,yt=>n(49,P=yt));let mt=!0;const at=yt=>hb(yt,B)||Ft.isEventTarget(yt);let $t,te,le=!1;const Wt=yt=>{cu(yt.target)||(ht||Lt(),n(38,te=yt),n(0,ht=!ht))},we=yt=>{/down/i.test(yt.key)&&(n(0,ht=!0),n(38,te=yt))};return aa(()=>{if(!B||!$t)return;const yt=$t;W2().then(()=>{yt.parentNode&&yt.remove()})}),t.$$set=yt=>{"buttonClass"in yt&&n(26,k=yt.buttonClass),"buttonLabel"in yt&&n(1,N=yt.buttonLabel),"buttonLabelClass"in yt&&n(27,j=yt.buttonLabelClass),"buttonHideLabel"in yt&&n(28,ut=yt.buttonHideLabel),"buttonIcon"in yt&&n(29,Z=yt.buttonIcon),"buttonTitle"in yt&&n(30,ft=yt.buttonTitle),"panelClass"in yt&&n(2,q=yt.panelClass),"isActive"in yt&&n(0,ht=yt.isActive),"onshow"in yt&&n(31,xt=yt.onshow),"onhide"in yt&&n(32,lt=yt.onhide),"$$scope"in yt&&n(57,nt=yt.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(i=Ft&&Ft.getElement()),1&t.$$.dirty[0]|64&t.$$.dirty[1]&&n(8,R=ht?yt=>{le&&(n(37,le=!1),at(yt)||n(0,ht=!1))}:void 0),1&t.$$.dirty[0]|524288&t.$$.dirty[1]&&_t.set(ht?1:0,{hard:b===!1}),1&t.$$.dirty[0]|524288&t.$$.dirty[1]&&Vt.set(ht?0:-5,{hard:b===!1}),262144&t.$$.dirty[1]&&n(42,r=1-P/-5),1&t.$$.dirty[0]|131072&t.$$.dirty[1]&&O&&ht&&Lt(),9&t.$$.dirty[0]|131076&t.$$.dirty[1]&&O&&K&&Ht&&ht){n(36,mt=!0);let yt=Ht.x-O.x+.5*Ht.width-.5*K.width,ie=Ht.y-O.y+Ht.height;const V=12,De=12,Le=O.width-12,qt=O.height-12,$e=yt,Me=ie,Be=$e+K.width,mn=Me+K.height;$e<V&&(n(35,rt.x=$e-V,rt),yt=V),Be>Le&&(n(35,rt.x=Be-Le,rt),yt=Le-K.width),mn>qt?(n(34,bt.y=-1,bt),De<ie-K.height-Ht.height?(n(35,rt.y=0,rt),ie-=K.height+Ht.height):(n(35,rt.y=ie-(mn-qt),rt),ie-=mn-qt-12,n(36,mt=!1))):n(34,bt.y=1,bt),kt(Tt,C=Uo(ot(yt,ie),lu),C)}65536&t.$$.dirty[1]&&n(6,o=D>0),294920&t.$$.dirty[1]&&n(44,a=`translateX(${Math.round(C.x)+12*bt.x}px) translateY(${Math.round(C.y)+12*bt.y+bt.y*P}px)`),131072&t.$$.dirty[1]&&n(43,s=`--panel-max-height:${O.height-24}px`),65536&t.$$.dirty[1]&&n(18,l=D),65536&t.$$.dirty[1]&&n(17,c=D<1?"none":"all"),8192&t.$$.dirty[1]&&n(16,u=a),4096&t.$$.dirty[1]&&n(15,d=s),2048&t.$$.dirty[1]&&n(40,p=.5+.5*r),2048&t.$$.dirty[1]&&n(41,h=r),8&t.$$.dirty[0]|32768&t.$$.dirty[1]&&n(39,f=K&&C),1312&t.$$.dirty[1]&&n(14,g=f&&mt?h:0),768&t.$$.dirty[1]&&n(13,$=f?`scaleX(${p})rotate(45deg)`:"none"),8&t.$$.dirty[0]|280&t.$$.dirty[1]&&n(12,y=f?(bt.y<0?rt.y+K.height:0)+"px":"0"),8&t.$$.dirty[0]|272&t.$$.dirty[1]&&n(11,v=f?rt.x+.5*K.width+"px":"0"),8&t.$$.dirty[1]&&n(10,w=bt.y>=0),1&t.$$.dirty[0]&&n(9,S=ht?yt=>{at(yt)||n(37,le=!0)}:void 0),96&t.$$.dirty[0]|16384&t.$$.dirty[1]&&o&&B&&$t&&$t.parentNode!==B&&B.append($t),1&t.$$.dirty[0]&&(ht||n(38,te=void 0)),97&t.$$.dirty[0]|129&t.$$.dirty[1]&&ht&&o&&$t&&xt({e:te,panel:$t}),65&t.$$.dirty[0]|2&t.$$.dirty[1]&&o&&!ht&&lt(),2080374786&t.$$.dirty[0]&&n(7,M={label:N,icon:Z,class:yn(["PinturaPanelButton",k]),onkeydown:we,onclick:Wt,hideLabel:ut,labelClass:j,title:ft})},[ht,N,q,K,Ft,$t,o,M,R,S,w,v,y,$,g,d,u,c,l,Ct,it,vt,_t,Tt,Vt,yt=>{/esc/i.test(yt.key)&&(n(0,ht=!1),i.focus())},k,j,ut,Z,ft,xt,lt,Ht,bt,rt,mt,le,te,f,p,h,r,s,a,B,C,D,O,P,b,W,function(yt){jn[yt?"unshift":"push"](()=>{Ft=yt,n(4,Ft)})},function(yt){jn[yt?"unshift":"push"](()=>{Ft=yt,n(4,Ft)})},function(yt){jn[yt?"unshift":"push"](()=>{$t=yt,n(5,$t)})},yt=>{yt.stopPropagation(),n(0,ht=!1)},yt=>n(3,K=es(yt.detail)),nt]}class pp extends pn{constructor(e){super(),dn(this,e,H3,j3,ln,{buttonClass:26,buttonLabel:1,buttonLabelClass:27,buttonHideLabel:28,buttonIcon:29,buttonTitle:30,panelClass:2,isActive:0,onshow:31,onhide:32},null,[-1,-1,-1])}}var G3={Up:38,Down:40,Left:37,Right:39};function Z3(t){let e,n,i,r,o,a,s,l;const c=t[15].default,u=hr(c,t,t[14],null);return{c(){e=dt("li"),n=dt("input"),i=he(),r=dt("label"),u&&u.c(),T(n,"type","radio"),T(n,"class","implicit"),T(n,"id",t[7]),T(n,"name",t[0]),n.value=t[3],n.disabled=t[6],n.hidden=t[5],n.checked=t[4],T(r,"for",t[7]),T(r,"title",t[2]),T(e,"class",o=yn(["PinturaRadioGroupOption",t[1]])),T(e,"data-hidden",t[5]),T(e,"data-disabled",t[6]),T(e,"data-selected",t[4])},m(d,p){et(d,e,p),St(e,n),St(e,i),St(e,r),u&&u.m(r,null),a=!0,s||(l=[At(n,"change",b4(t[16])),At(n,"keydown",t[9]),At(n,"click",t[10])],s=!0)},p(d,[p]){(!a||128&p)&&T(n,"id",d[7]),(!a||1&p)&&T(n,"name",d[0]),(!a||8&p)&&(n.value=d[3]),(!a||64&p)&&(n.disabled=d[6]),(!a||32&p)&&(n.hidden=d[5]),(!a||16&p)&&(n.checked=d[4]),u&&u.p&&(!a||16384&p)&&gr(u,c,d,d[14],a?mr(c,d[14],p,null):fr(d[14]),null),(!a||128&p)&&T(r,"for",d[7]),(!a||4&p)&&T(r,"title",d[2]),(!a||2&p&&o!==(o=yn(["PinturaRadioGroupOption",d[1]])))&&T(e,"class",o),(!a||32&p)&&T(e,"data-hidden",d[5]),(!a||64&p)&&T(e,"data-disabled",d[6]),(!a||16&p)&&T(e,"data-selected",d[4])},i(d){a||(I(u,d),a=!0)},o(d){z(u,d),a=!1},d(d){d&&Q(e),u&&u.d(d),s=!1,Kn(l)}}}function X3(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:u}=e,{value:d}=e,{checked:p}=e,{onkeydown:h}=e,{onclick:f}=e,{hidden:g=!1}=e,{disabled:$=!1}=e;const y=Object.values(G3),v=mi("keysPressed");return F(t,v,w=>n(17,r=w)),t.$$set=w=>{"name"in w&&n(0,s=w.name),"class"in w&&n(1,l=w.class),"label"in w&&n(2,c=w.label),"id"in w&&n(11,u=w.id),"value"in w&&n(3,d=w.value),"checked"in w&&n(4,p=w.checked),"onkeydown"in w&&n(12,h=w.onkeydown),"onclick"in w&&n(13,f=w.onclick),"hidden"in w&&n(5,g=w.hidden),"disabled"in w&&n(6,$=w.disabled),"$$scope"in w&&n(14,a=w.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&n(7,i=`${s}-${u}`)},[s,l,c,d,p,g,$,i,v,w=>{h(w)},w=>{r.some(S=>y.includes(S))||f(w)},u,h,f,a,o,function(w){Kr.call(this,t,w)}]}class fb extends pn{constructor(e){super(),dn(this,e,X3,Z3,ln,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var Us=(t=[])=>t.reduce((e,n)=>(Mi(n)?Mi(n[1]):n.options)?e.concat(Mi(n)?n[1]:n.options):(e.push(n),e),[]);const Md=(t,e,n)=>{let i;return Mi(t)?i={id:e,value:t[0],label:t[1],...t[2]||{}}:(i=t,i.id=i.id!=null?i.id:e),n?n(i):i};var Yr=(t,e,n)=>Yn(t)?t(e,n):t;const $b=(t,e)=>t.map(([n,i,r])=>{if(Mi(i))return[Yr(n,e),$b(i,e)];{const o=[n,Yr(i,e)];if(r){let a={...r};r.icon&&(a.icon=Yr(r.icon,e)),o.push(a)}return o}});var yb=(t,e)=>$b(t,e),bb=(t,e)=>Array.isArray(t)&&Array.isArray(e)?vs(t,e):t===e;function Tf(t,e,n){const i=t.slice();return i[27]=e[n],i}const Y3=t=>({option:1024&t[0]}),Mf=t=>({option:t[27]});function Pf(t,e,n){const i=t.slice();return i[27]=e[n],i}const K3=t=>({option:1024&t[0]}),If=t=>({option:t[27]}),q3=t=>({option:1024&t[0]}),Rf=t=>({option:t[27]});function Ef(t){let e,n,i,r,o,a=[],s=new Map,l=t[1]&&Af(t),c=t[10];const u=d=>d[27].id;for(let d=0;d<c.length;d+=1){let p=Tf(t,c,d),h=u(p);s.set(h,a[d]=Of(h,p))}return{c(){e=dt("fieldset"),l&&l.c(),n=he(),i=dt("ul");for(let d=0;d<a.length;d+=1)a[d].c();T(i,"class","PinturaRadioGroupOptions"),T(e,"class",r=yn(["PinturaRadioGroup",t[3]])),T(e,"data-layout",t[5]),T(e,"title",t[7])},m(d,p){et(d,e,p),l&&l.m(e,null),St(e,n),St(e,i);for(let h=0;h<a.length;h+=1)a[h].m(i,null);o=!0},p(d,p){d[1]?l?l.p(d,p):(l=Af(d),l.c(),l.m(e,n)):l&&(l.d(1),l=null),8419153&p[0]&&(c=d[10],Ie(),a=ns(a,p,u,1,d,c,s,i,Js,Of,null,Tf),Re()),(!o||8&p[0]&&r!==(r=yn(["PinturaRadioGroup",d[3]])))&&T(e,"class",r),(!o||32&p[0])&&T(e,"data-layout",d[5]),(!o||128&p[0])&&T(e,"title",d[7])},i(d){if(!o){for(let p=0;p<c.length;p+=1)I(a[p]);o=!0}},o(d){for(let p=0;p<a.length;p+=1)z(a[p]);o=!1},d(d){d&&Q(e),l&&l.d();for(let p=0;p<a.length;p+=1)a[p].d()}}}function Af(t){let e,n,i;return{c(){e=dt("legend"),n=vi(t[1]),T(e,"class",i=t[2]&&"implicit")},m(r,o){et(r,e,o),St(e,n)},p(r,o){2&o[0]&&Oi(n,r[1]),4&o[0]&&i!==(i=r[2]&&"implicit")&&T(e,"class",i)},d(r){r&&Q(e)}}}function J3(t){let e,n;return e=new fb({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[e5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.name=i[4]),1024&r[0]&&(o.label=i[27].label),1024&r[0]&&(o.id=i[27].id),1024&r[0]&&(o.value=i[27].value),1024&r[0]&&(o.disabled=i[27].disabled),1024&r[0]&&(o.hidden=i[27].hidden),256&r[0]&&(o.class=i[8]),1025&r[0]&&(o.checked=i[12](i[27])===i[0]),1024&r[0]&&(o.onkeydown=i[13](i[27])),1024&r[0]&&(o.onclick=i[14](i[27])),8389696&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Q3(t){let e,n,i,r,o,a,s=[],l=new Map;const c=t[22].group,u=hr(c,t,t[23],Rf),d=u||function(f){let g,$,y=f[27].label+"";return{c(){g=dt("span"),$=vi(y),T(g,"class","PinturaRadioGroupOptionGroupLabel")},m(v,w){et(v,g,w),St(g,$)},p(v,w){1024&w[0]&&y!==(y=v[27].label+"")&&Oi($,y)},d(v){v&&Q(g)}}}(t);let p=t[27].options;const h=f=>f[27].id;for(let f=0;f<p.length;f+=1){let g=Pf(t,p,f),$=h(g);l.set($,s[f]=Bf($,g))}return{c(){e=dt("li"),d&&d.c(),n=he(),i=dt("ul");for(let f=0;f<s.length;f+=1)s[f].c();r=he(),T(i,"class","PinturaRadioGroupOptions"),T(e,"class",o=yn(["PinturaRadioGroupOptionGroup",t[9]]))},m(f,g){et(f,e,g),d&&d.m(e,null),St(e,n),St(e,i);for(let $=0;$<s.length;$+=1)s[$].m(i,null);St(e,r),a=!0},p(f,g){u?u.p&&(!a||8389632&g[0])&&gr(u,c,f,f[23],a?mr(c,f[23],g,q3):fr(f[23]),Rf):d&&d.p&&(!a||1024&g[0])&&d.p(f,a?g:[-1,-1]),8418641&g[0]&&(p=f[27].options,Ie(),s=ns(s,g,h,1,f,p,l,i,Js,Bf,null,Pf),Re()),(!a||512&g[0]&&o!==(o=yn(["PinturaRadioGroupOptionGroup",f[9]])))&&T(e,"class",o)},i(f){if(!a){I(d,f);for(let g=0;g<p.length;g+=1)I(s[g]);a=!0}},o(f){z(d,f);for(let g=0;g<s.length;g+=1)z(s[g]);a=!1},d(f){f&&Q(e),d&&d.d(f);for(let g=0;g<s.length;g+=1)s[g].d()}}}function Lf(t){let e,n;return e=new Ho({props:{$$slots:{default:[t5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function t5(t){let e,n=t[27].icon+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){1024&r[0]&&n!==(n=i[27].icon+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function Ff(t){let e,n,i=t[27].label+"";return{c(){e=dt("span"),n=vi(i),T(e,"class",t[6])},m(r,o){et(r,e,o),St(e,n)},p(r,o){1024&o[0]&&i!==(i=r[27].label+"")&&Oi(n,i),64&o[0]&&T(e,"class",r[6])},d(r){r&&Q(e)}}}function e5(t){let e;const n=t[22].option,i=hr(n,t,t[23],Mf),r=i||function(o){let a,s,l,c=o[27].icon&&Lf(o),u=!o[27].hideLabel&&Ff(o);return{c(){c&&c.c(),a=he(),u&&u.c(),s=he()},m(d,p){c&&c.m(d,p),et(d,a,p),u&&u.m(d,p),et(d,s,p),l=!0},p(d,p){d[27].icon?c?(c.p(d,p),1024&p[0]&&I(c,1)):(c=Lf(d),c.c(),I(c,1),c.m(a.parentNode,a)):c&&(Ie(),z(c,1,1,()=>{c=null}),Re()),d[27].hideLabel?u&&(u.d(1),u=null):u?u.p(d,p):(u=Ff(d),u.c(),u.m(s.parentNode,s))},i(d){l||(I(c),l=!0)},o(d){z(c),l=!1},d(d){c&&c.d(d),d&&Q(a),u&&u.d(d),d&&Q(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){i?i.p&&(!e||8389632&a[0])&&gr(i,n,o,o[23],e?mr(n,o[23],a,Y3):fr(o[23]),Mf):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(I(r,o),e=!0)},o(o){z(r,o),e=!1},d(o){r&&r.d(o)}}}function zf(t){let e,n;return e=new Ho({props:{$$slots:{default:[n5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function n5(t){let e,n=t[27].icon+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){1024&r[0]&&n!==(n=i[27].icon+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function Df(t){let e,n,i=t[27].label+"";return{c(){e=dt("span"),n=vi(i),T(e,"class",t[6])},m(r,o){et(r,e,o),St(e,n)},p(r,o){1024&o[0]&&i!==(i=r[27].label+"")&&Oi(n,i),64&o[0]&&T(e,"class",r[6])},d(r){r&&Q(e)}}}function i5(t){let e;const n=t[22].option,i=hr(n,t,t[23],If),r=i||function(o){let a,s,l,c=o[27].icon&&zf(o),u=!o[27].hideLabel&&Df(o);return{c(){c&&c.c(),a=he(),u&&u.c(),s=he()},m(d,p){c&&c.m(d,p),et(d,a,p),u&&u.m(d,p),et(d,s,p),l=!0},p(d,p){d[27].icon?c?(c.p(d,p),1024&p[0]&&I(c,1)):(c=zf(d),c.c(),I(c,1),c.m(a.parentNode,a)):c&&(Ie(),z(c,1,1,()=>{c=null}),Re()),d[27].hideLabel?u&&(u.d(1),u=null):u?u.p(d,p):(u=Df(d),u.c(),u.m(s.parentNode,s))},i(d){l||(I(c),l=!0)},o(d){z(c),l=!1},d(d){c&&c.d(d),d&&Q(a),u&&u.d(d),d&&Q(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){i?i.p&&(!e||8389632&a[0])&&gr(i,n,o,o[23],e?mr(n,o[23],a,K3):fr(o[23]),If):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(I(r,o),e=!0)},o(o){z(r,o),e=!1},d(o){r&&r.d(o)}}}function Bf(t,e){let n,i,r;return i=new fb({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[i5]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=Ii(),Ot(i.$$.fragment),this.first=n},m(o,a){et(o,n,a),zt(i,o,a),r=!0},p(o,a){e=o;const s={};16&a[0]&&(s.name=e[4]),1024&a[0]&&(s.label=e[27].label),1024&a[0]&&(s.id=e[27].id),1024&a[0]&&(s.value=e[27].value),1024&a[0]&&(s.disabled=e[27].disabled),1024&a[0]&&(s.hidden=e[27].hidden),256&a[0]&&(s.class=e[8]),1025&a[0]&&(s.checked=e[12](e[27])===e[0]),1024&a[0]&&(s.onkeydown=e[13](e[27])),1024&a[0]&&(s.onclick=e[14](e[27])),8389696&a[0]&&(s.$$scope={dirty:a,ctx:e}),i.$set(s)},i(o){r||(I(i.$$.fragment,o),r=!0)},o(o){z(i.$$.fragment,o),r=!1},d(o){o&&Q(n),Dt(i,o)}}}function Of(t,e){let n,i,r,o,a;const s=[Q3,J3],l=[];function c(u,d){return u[27].options?0:1}return i=c(e),r=l[i]=s[i](e),{key:t,first:null,c(){n=Ii(),r.c(),o=Ii(),this.first=n},m(u,d){et(u,n,d),l[i].m(u,d),et(u,o,d),a=!0},p(u,d){let p=i;i=c(e=u),i===p?l[i].p(e,d):(Ie(),z(l[p],1,1,()=>{l[p]=null}),Re(),r=l[i],r?r.p(e,d):(r=l[i]=s[i](e),r.c()),I(r,1),r.m(o.parentNode,o))},i(u){a||(I(r),a=!0)},o(u){z(r),a=!1},d(u){u&&Q(n),l[i].d(u),u&&Q(o)}}}function r5(t){let e,n,i,r=t[11].length&&Ef(t);return{c(){r&&r.c(),e=he(),n=Ii()},m(o,a){r&&r.m(o,a),et(o,e,a),et(o,n,a),i=!0},p(o,a){o[11].length?r?(r.p(o,a),2048&a[0]&&I(r,1)):(r=Ef(o),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re())},i(o){i||(I(r),I(!1),i=!0)},o(o){z(r),z(!1),i=!1},d(o){r&&r.d(o),o&&Q(e),o&&Q(n)}}}function o5(t,e,n){let i,r,o,{$$slots:a={},$$scope:s}=e;const l=_a();let{label:c}=e,{hideLabel:u=!0}=e,{class:d}=e,{name:p="radio-group-"+ya()}=e,{selectedIndex:h=-1}=e,{options:f=[]}=e,{onchange:g}=e,{layout:$}=e,{optionMapper:y}=e,{optionFilter:v}=e,{value:w}=e,{optionLabelClass:S}=e,{title:R}=e,{locale:M}=e,{optionClass:B}=e,{optionGroupClass:C}=e;const D=P=>o.findIndex(b=>b.id===P.id),O=(P,b)=>{n(0,h=D(P));const W={index:h,...P};((nt,...k)=>{nt&&nt(...k)})(g,W,b),l("change",W)};return t.$$set=P=>{"label"in P&&n(1,c=P.label),"hideLabel"in P&&n(2,u=P.hideLabel),"class"in P&&n(3,d=P.class),"name"in P&&n(4,p=P.name),"selectedIndex"in P&&n(0,h=P.selectedIndex),"options"in P&&n(15,f=P.options),"onchange"in P&&n(16,g=P.onchange),"layout"in P&&n(5,$=P.layout),"optionMapper"in P&&n(17,y=P.optionMapper),"optionFilter"in P&&n(18,v=P.optionFilter),"value"in P&&n(19,w=P.value),"optionLabelClass"in P&&n(6,S=P.optionLabelClass),"title"in P&&n(7,R=P.title),"locale"in P&&n(20,M=P.locale),"optionClass"in P&&n(8,B=P.optionClass),"optionGroupClass"in P&&n(9,C=P.optionGroupClass),"$$scope"in P&&n(23,s=P.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&n(11,i=yb(v?f.filter(v):f,M)),133120&t.$$.dirty[0]&&n(10,r=((P=[],b)=>{let W=0;return P.map(nt=>(W++,Mi(nt)?Mi(nt[1])?{id:W,label:nt[0],options:nt[1].map(k=>Md(k,++W,b))}:Md(nt,W,b):nt.options?{id:nt.id||W,label:nt.label,options:nt.options.map(k=>Md(k,++W,b))}:Md(nt,W,b)))})(i,y)),1024&t.$$.dirty[0]&&n(21,o=Us(r)),2654209&t.$$.dirty[0]&&h<0&&(n(0,h=o.findIndex(P=>bb(P.value,w))),h<0&&n(0,h=(P=>P.findIndex(b=>b[0]===void 0))(f)))},[h,c,u,d,p,$,S,R,B,C,r,i,D,P=>b=>{var W;W=b.key,/enter| /i.test(W)&&O(P,b)},P=>b=>{O(P,b)},f,g,y,v,w,M,o,a,s]}class Ss extends pn{constructor(e){super(),dn(this,e,o5,r5,ln,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function _f(t){let e,n,i,r,o,a,s,l,c,u;return{c(){e=dt("div"),n=dt("button"),i=vi(""),o=he(),a=dt("button"),s=vi(""),T(n,"type","button"),T(n,"tabindex","-1"),T(n,"aria-label",r="increase "+t[7]),T(a,"type","button"),T(a,"tabindex","-1"),T(a,"aria-label",l="decrease "+t[7]),T(e,"class","PinturaInputSpinners")},m(d,p){et(d,e,p),St(e,n),St(n,i),St(e,o),St(e,a),St(a,s),c||(u=[At(n,"click",t[18]),At(a,"click",t[19])],c=!0)},p(d,p){128&p[0]&&r!==(r="increase "+d[7])&&T(n,"aria-label",r),128&p[0]&&l!==(l="decrease "+d[7])&&T(a,"aria-label",l)},d(d){d&&Q(e),c=!1,Kn(u)}}}function a5(t){let e,n,i,r,o,a,s=t[14]&&t[9]&&_f(t);return{c(){e=dt("div"),n=dt("input"),r=he(),s&&s.c(),T(n,"class","PinturaInputField"),T(n,"title",t[7]),T(n,"type",t[1]),T(n,"min",t[4]),T(n,"max",t[5]),T(n,"step",t[6]),T(n,"inputmode",t[3]),n.value=i=t[12]?t[15]:t[0],T(n,"placeholder",t[8]),T(n,"maxlength",t[13]),n.disabled=t[2],T(n,"spellcheck","false"),T(n,"autocorrect","off"),T(n,"autocapitalize","off"),Et(n,"min-width",t[11]?t[11]+"em":void 0),T(e,"class","PinturaInput")},m(l,c){et(l,e,c),St(e,n),t[30](n),St(e,r),s&&s.m(e,null),o||(a=[At(n,"input",t[17]),At(n,"blur",function(){Mn(t[12]&&t[16])&&(t[12]&&t[16]).apply(this,arguments)}),At(n,"keydown",t[20]),At(n,"keyup",t[21])],o=!0)},p(l,c){t=l,128&c[0]&&T(n,"title",t[7]),2&c[0]&&T(n,"type",t[1]),16&c[0]&&T(n,"min",t[4]),32&c[0]&&T(n,"max",t[5]),64&c[0]&&T(n,"step",t[6]),8&c[0]&&T(n,"inputmode",t[3]),36865&c[0]&&i!==(i=t[12]?t[15]:t[0])&&n.value!==i&&(n.value=i),256&c[0]&&T(n,"placeholder",t[8]),8192&c[0]&&T(n,"maxlength",t[13]),4&c[0]&&(n.disabled=t[2]),2048&c[0]&&Et(n,"min-width",t[11]?t[11]+"em":void 0),t[14]&&t[9]?s?s.p(t,c):(s=_f(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Xe,o:Xe,d(l){l&&Q(e),t[30](null),s&&s.d(),o=!1,Kn(a)}}}function s5(t,e,n){let i,r,o,a,s,l,c,u,d,{value:p}=e,{type:h="text"}=e,{disabled:f=!1}=e,{inputmode:g}=e,{min:$}=e,{max:y}=e,{step:v}=e,{onchange:w=pe}=e,{onkeydown:S=pe}=e,{onkeyup:R=pe}=e,{title:M}=e,{stepMultiplier:B=10}=e,{placeholder:C}=e,{enableSpinButtons:D=!0}=e,{enableStopPropagation:O=!1}=e;const P=()=>{let k=u.value;return h==="number"&&(k=g==="numeric"?parseInt(k,10):parseFloat(k),!Ze(k)||Number.isNaN(k)?k=$||0:r&&(k=si(k,$,y))),k};let b=p;const W=()=>{const k=si(P()+(d?v*B:v),$,y);k!==p&&(n(27,b=k),n(0,p=k),w(p))},nt=()=>{const k=si(P()-(d?v*B:v),$,y);k!==p&&(n(27,b=k),n(0,p=k),w(p))};return t.$$set=k=>{"value"in k&&n(0,p=k.value),"type"in k&&n(1,h=k.type),"disabled"in k&&n(2,f=k.disabled),"inputmode"in k&&n(3,g=k.inputmode),"min"in k&&n(4,$=k.min),"max"in k&&n(5,y=k.max),"step"in k&&n(6,v=k.step),"onchange"in k&&n(22,w=k.onchange),"onkeydown"in k&&n(23,S=k.onkeydown),"onkeyup"in k&&n(24,R=k.onkeyup),"title"in k&&n(7,M=k.title),"stepMultiplier"in k&&n(25,B=k.stepMultiplier),"placeholder"in k&&n(8,C=k.placeholder),"enableSpinButtons"in k&&n(9,D=k.enableSpinButtons),"enableStopPropagation"in k&&n(26,O=k.enableStopPropagation)},t.$$.update=()=>{2&t.$$.dirty[0]&&n(29,i=h==="number"),48&t.$$.dirty[0]&&n(12,r=Ze($)&&Ze(y)),64&t.$$.dirty[0]&&n(28,o=Ze(v)),805310464&t.$$.dirty[0]&&n(14,a=i&&r&&o),134218753&t.$$.dirty[0]&&n(15,s=u===document.activeElement?b:p),32&t.$$.dirty[0]&&n(11,l=y?(y+"").length:void 0),2056&t.$$.dirty[0]&&n(13,c=g==="numeric"&&l?l:void 0)},[p,h,f,g,$,y,v,M,C,D,u,l,r,c,a,s,()=>{n(27,b=P()),w(p)},()=>{n(27,b=u.value),w(P())},W,nt,k=>{if(S(k),!a)return;d=k.shiftKey;const{key:N}=k;O&&k.stopPropagation(),/up|down/i.test(N)&&(/up/i.test(N)&&W(),/down/i.test(N)&&nt(),k.preventDefault(),k.stopPropagation())},k=>{if(R(k),!a)return;const{key:N}=k;/up|down/i.test(N)&&(k.preventDefault(),k.stopPropagation())},w,S,R,B,O,b,o,i,function(k){jn[k?"unshift":"push"](()=>{u=k,n(10,u)})}]}class xb extends pn{constructor(e){super(),dn(this,e,s5,a5,ln,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:22,onkeydown:23,onkeyup:24,title:7,stepMultiplier:25,placeholder:8,enableSpinButtons:9,enableStopPropagation:26},null,[-1,-1])}}const l5=t=>({}),Vf=t=>({});function c5(t){let e,n,i,r,o=(t[2]||t[20])+"",a=t[6]&&Wf(t);return{c(){a&&a.c(),e=he(),n=dt("span"),T(n,"class",i=yn(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(s,l){a&&a.m(s,l),et(s,e,l),et(s,n,l),n.innerHTML=o,r=!0},p(s,l){s[6]?a?(a.p(s,l),64&l[0]&&I(a,1)):(a=Wf(s),a.c(),I(a,1),a.m(e.parentNode,e)):a&&(Ie(),z(a,1,1,()=>{a=null}),Re()),(!r||1048580&l[0])&&o!==(o=(s[2]||s[20])+"")&&(n.innerHTML=o),(!r||40&l[0]&&i!==(i=yn(["PinturaButtonLabel",s[3],s[5]&&"implicit"])))&&T(n,"class",i)},i(s){r||(I(a),r=!0)},o(s){z(a),r=!1},d(s){a&&a.d(s),s&&Q(e),s&&Q(n)}}}function u5(t){let e,n;return e=new xb({props:{value:t[10],onchange:t[16],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:t[8].reduce(Hf,1/0),max:t[8].reduce(Gf,-1/0),enableSpinButtons:!1}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1024&r[0]&&(o.value=i[10]),65536&r[0]&&(o.onchange=i[16]),256&r[0]&&(o.min=i[8].reduce(Hf,1/0)),256&r[0]&&(o.max=i[8].reduce(Gf,-1/0)),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Wf(t){let e,n;return e=new Ho({props:{class:"PinturaButtonIcon",$$slots:{default:[d5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};536870976&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function d5(t){let e;return{c(){e=Tr("g")},m(n,i){et(n,e,i),e.innerHTML=t[6]},p(n,i){64&i[0]&&(e.innerHTML=n[6])},d(n){n&&Q(e)}}}function p5(t){let e,n,i,r,o;const a=[u5,c5],s=[];function l(c,u){return c[17]?0:1}return n=l(t),i=s[n]=a[n](t),{c(){e=dt("span"),i.c(),T(e,"slot","label"),T(e,"class",r=yn(["PinturaButtonInner",t[17]&&"PinturaComboBox",t[4]]))},m(c,u){et(c,e,u),s[n].m(e,null),o=!0},p(c,u){let d=n;n=l(c),n===d?s[n].p(c,u):(Ie(),z(s[d],1,1,()=>{s[d]=null}),Re(),i=s[n],i?i.p(c,u):(i=s[n]=a[n](c),i.c()),I(i,1),i.m(e,null)),(!o||131088&u[0]&&r!==(r=yn(["PinturaButtonInner",c[17]&&"PinturaComboBox",c[4]])))&&T(e,"class",r)},i(c){o||(I(i),o=!0)},o(c){z(i),o=!1},d(c){c&&Q(e),s[n].d()}}}function h5(t){let e,n,i=t[31].label+"";return{c(){e=dt("span"),n=vi(i),T(e,"slot","group")},m(r,o){et(r,e,o),St(e,n)},p(r,o){1&o[1]&&i!==(i=r[31].label+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function Nf(t){let e,n;return e=new Ho({props:{style:Yn(t[14])?t[14](t[31].value):t[14],$$slots:{default:[m5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16384&r[0]|1&r[1]&&(o.style=Yn(i[14])?i[14](i[31].value):i[14]),536870912&r[0]|1&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function m5(t){let e,n=t[31].icon+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){1&r[1]&&n!==(n=i[31].icon+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function Uf(t){let e,n,i,r,o,a,s,l=t[31].label+"",c=t[31].sublabel&&jf(t);return{c(){e=dt("span"),n=new b0(!1),i=he(),c&&c.c(),n.a=i,T(e,"class",r=yn(["PinturaDropdownOptionLabel",t[11]]))},m(u,d){et(u,e,d),n.m(l,e),St(e,i),c&&c.m(e,null),a||(s=Pn(o=ws.call(null,e,Yn(t[15])?t[15](t[31].value):t[15])),a=!0)},p(u,d){1&d[1]&&l!==(l=u[31].label+"")&&n.p(l),u[31].sublabel?c?c.p(u,d):(c=jf(u),c.c(),c.m(e,null)):c&&(c.d(1),c=null),2048&d[0]&&r!==(r=yn(["PinturaDropdownOptionLabel",u[11]]))&&T(e,"class",r),o&&Mn(o.update)&&32768&d[0]|1&d[1]&&o.update.call(null,Yn(u[15])?u[15](u[31].value):u[15])},d(u){u&&Q(e),c&&c.d(),a=!1,s()}}}function jf(t){let e,n=t[31].sublabel+"";return{c(){e=dt("span"),T(e,"class","PinturaDropdownOptionSublabel")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){1&r[1]&&n!==(n=i[31].sublabel+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function g5(t){let e,n,i,r=t[31].icon&&Nf(t),o=!t[31].hideLabel&&Uf(t);return{c(){e=dt("span"),r&&r.c(),n=he(),o&&o.c(),T(e,"slot","option")},m(a,s){et(a,e,s),r&&r.m(e,null),St(e,n),o&&o.m(e,null),i=!0},p(a,s){a[31].icon?r?(r.p(a,s),1&s[1]&&I(r,1)):(r=Nf(a),r.c(),I(r,1),r.m(e,n)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[31].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Uf(a),o.c(),o.m(e,null))},i(a){i||(I(r),i=!0)},o(a){z(r),i=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function f5(t){let e,n,i,r,o,a;const s=t[27].controls,l=hr(s,t,t[29],Vf);return i=new Ss({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:yn(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[18],onchange:t[21],$$slots:{option:[g5,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]],group:[h5,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]]},$$scope:{ctx:t}}}),{c(){e=dt("div"),l&&l.c(),n=he(),Ot(i.$$.fragment),T(e,"slot","details"),T(e,"class","PinturaOptionsListWrapper")},m(c,u){et(c,e,u),l&&l.m(e,null),St(e,n),zt(i,e,null),r=!0,o||(a=At(e,"keydown",t[23]),o=!0)},p(c,u){l&&l.p&&(!r||536870912&u[0])&&gr(l,s,c,c[29],r?mr(s,c[29],u,l5):fr(c[29]),Vf);const d={};128&u[0]&&(d.name=c[7]),1024&u[0]&&(d.value=c[10]),512&u[0]&&(d.selectedIndex=c[9]),4096&u[0]&&(d.optionFilter=c[12]),8192&u[0]&&(d.optionMapper=c[13]),2048&u[0]&&(d.optionLabelClass=yn(["PinturaDropdownOptionLabel",c[11]])),262144&u[0]&&(d.options=c[18]),536922112&u[0]|1&u[1]&&(d.$$scope={dirty:u,ctx:c}),i.$set(d)},i(c){r||(I(l,c),I(i.$$.fragment,c),r=!0)},o(c){z(l,c),z(i.$$.fragment,c),r=!1},d(c){c&&Q(e),l&&l.d(c),Dt(i),o=!1,a()}}}function $5(t){let e,n,i;function r(a){t[28](a)}let o={onshow:t[22],buttonTitle:ep(t[2],t[1]),buttonClass:yn(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[f5],label:[p5]},$$scope:{ctx:t}};return t[19]!==void 0&&(o.isActive=t[19]),e=new pp({props:o}),jn.push(()=>Io(e,"isActive",r)),{c(){Ot(e.$$.fragment)},m(a,s){zt(e,a,s),i=!0},p(a,s){const l={};6&s[0]&&(l.buttonTitle=ep(a[2],a[1])),33&s[0]&&(l.buttonClass=yn(["PinturaDropdownButton",a[0],a[5]&&"PinturaDropdownIconOnly"])),538443772&s[0]&&(l.$$scope={dirty:s,ctx:a}),!n&&524288&s[0]&&(n=!0,l.isActive=a[19],jo(()=>n=!1)),e.$set(l)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){Dt(e,a)}}}const Hf=(t,[e])=>e<t?e:t,Gf=(t,[e])=>e>t?e:t;function y5(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{title:l}=e,{label:c}=e,{labelClass:u}=e,{innerClass:d}=e,{hideLabel:p=!1}=e,{icon:h}=e,{name:f}=e,{options:g=[]}=e,{selectedIndex:$=-1}=e,{value:y}=e,{optionLabelClass:v}=e,{optionFilter:w}=e,{optionMapper:S}=e,{optionIconStyle:R}=e,{optionLabelStyle:M}=e,{locale:B}=e,{onchange:C=pe}=e,{onload:D=pe}=e,{ondestroy:O=pe}=e,{enableInput:P=!1}=e,b;return qs(()=>D({options:g})),aa(()=>O({options:g})),t.$$set=W=>{"class"in W&&n(0,s=W.class),"title"in W&&n(1,l=W.title),"label"in W&&n(2,c=W.label),"labelClass"in W&&n(3,u=W.labelClass),"innerClass"in W&&n(4,d=W.innerClass),"hideLabel"in W&&n(5,p=W.hideLabel),"icon"in W&&n(6,h=W.icon),"name"in W&&n(7,f=W.name),"options"in W&&n(8,g=W.options),"selectedIndex"in W&&n(9,$=W.selectedIndex),"value"in W&&n(10,y=W.value),"optionLabelClass"in W&&n(11,v=W.optionLabelClass),"optionFilter"in W&&n(12,w=W.optionFilter),"optionMapper"in W&&n(13,S=W.optionMapper),"optionIconStyle"in W&&n(14,R=W.optionIconStyle),"optionLabelStyle"in W&&n(15,M=W.optionLabelStyle),"locale"in W&&n(24,B=W.locale),"onchange"in W&&n(16,C=W.onchange),"onload"in W&&n(25,D=W.onload),"ondestroy"in W&&n(26,O=W.ondestroy),"enableInput"in W&&n(17,P=W.enableInput),"$$scope"in W&&n(29,a=W.$$scope)},t.$$.update=()=>{16777472&t.$$.dirty[0]&&n(18,i=B?yb(g,B):g),263168&t.$$.dirty[0]&&n(20,r=i.reduce((W,nt)=>{if(W)return W;const k=Array.isArray(nt)?nt:[nt,nt],[N,j]=k;return bb(N,y)?j:void 0},void 0)||(W=>{const nt=W.find(k=>k[0]===void 0);if(nt)return nt[1]})(i)||y)},[s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,C,P,i,b,r,W=>{n(20,r=W.value),C(W),n(19,b=!1)},({e:W,panel:nt})=>{if(W&&W.key&&/up|down/i.test(W.key))return Dh(nt.querySelector("input:not([disabled])"));Dh(nt.querySelector("fieldset"))},W=>{/tab/i.test(W.key)&&W.preventDefault()},B,D,O,o,function(W){b=W,n(19,b)},a]}class R0 extends pn{constructor(e){super(),dn(this,e,y5,$5,ln,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:24,onchange:16,onload:25,ondestroy:26,enableInput:17},null,[-1,-1])}}function b5(t){let e;return{c(){e=dt("div"),T(e,"slot","details")},m(n,i){et(n,e,i),t[14](e)},p:Xe,d(n){n&&Q(e),t[14](null)}}}function x5(t){let e,n,i;function r(a){t[15](a)}let o={buttonLabel:t[0],buttonClass:t[1],buttonIcon:t[2],buttonHideLabel:t[3],buttonTitle:t[4],buttonLabelClass:t[5],onshow:t[6],onhide:t[7],$$slots:{details:[b5]},$$scope:{ctx:t}};return t[9]!==void 0&&(o.isActive=t[9]),e=new pp({props:o}),jn.push(()=>Io(e,"isActive",r)),{c(){Ot(e.$$.fragment)},m(a,s){zt(e,a,s),i=!0},p(a,[s]){const l={};1&s&&(l.buttonLabel=a[0]),2&s&&(l.buttonClass=a[1]),4&s&&(l.buttonIcon=a[2]),8&s&&(l.buttonHideLabel=a[3]),16&s&&(l.buttonTitle=a[4]),32&s&&(l.buttonLabelClass=a[5]),64&s&&(l.onshow=a[6]),128&s&&(l.onhide=a[7]),65792&s&&(l.$$scope={dirty:s,ctx:a}),!n&&512&s&&(n=!0,l.isActive=a[9],jo(()=>n=!1)),e.$set(l)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){Dt(e,a)}}}function v5(t,e,n){let{buttonLabel:i}=e,{buttonClass:r}=e,{buttonIcon:o}=e,{buttonHideLabel:a}=e,{buttonTitle:s}=e,{buttonLabelClass:l}=e,{root:c}=e,{ondestroy:u=pe}=e,{onshow:d=pe}=e,{onhide:p=pe}=e,h,f=!1;return aa(u),t.$$set=g=>{"buttonLabel"in g&&n(0,i=g.buttonLabel),"buttonClass"in g&&n(1,r=g.buttonClass),"buttonIcon"in g&&n(2,o=g.buttonIcon),"buttonHideLabel"in g&&n(3,a=g.buttonHideLabel),"buttonTitle"in g&&n(4,s=g.buttonTitle),"buttonLabelClass"in g&&n(5,l=g.buttonLabelClass),"root"in g&&n(10,c=g.root),"ondestroy"in g&&n(11,u=g.ondestroy),"onshow"in g&&n(6,d=g.onshow),"onhide"in g&&n(7,p=g.onhide)},t.$$.update=()=>{1280&t.$$.dirty&&h&&c&&h.firstChild!==c&&(h.hasChildNodes()?h.replaceChild(c,h.firstChild):h.append(c))},[i,r,o,a,s,l,d,p,h,f,c,u,()=>n(9,f=!1),()=>n(9,f=!0),function(g){jn[g?"unshift":"push"](()=>{h=g,n(8,h)})},function(g){f=g,n(9,f)}]}class w5 extends pn{constructor(e){super(),dn(this,e,v5,x5,ln,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var Qs=(t,e={})=>{const{direction:n,shiftMultiplier:i=10,bubbles:r=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=e,s=n==="horizontal",l=n==="vertical",c=u=>{const{key:d}=u,p=u.shiftKey,h=/up|down/i.test(d),f=/left|right/i.test(d);if(!f&&!h||s&&h||l&&f)return;const g=p?i:1;a&&u.stopPropagation(),o&&u.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:r,detail:ot((/left/i.test(d)?-1:/right/i.test(d)?1:0)*g,(/up/i.test(d)?-1:/down/i.test(d)?1:0)*g)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}},Kc=(t,e,n)=>(t-e)/(n-e);const S5=t=>({}),Zf=t=>({});function Xf(t){let e,n,i,r,o,a,s,l;return n=new Ho({props:{$$slots:{default:[k5]},$$scope:{ctx:t}}}),o=new Ho({props:{$$slots:{default:[C5]},$$scope:{ctx:t}}}),{c(){e=dt("button"),Ot(n.$$.fragment),i=he(),r=dt("button"),Ot(o.$$.fragment),T(e,"type","button"),T(e,"aria-label","Increase"),T(r,"type","button"),T(r,"aria-label","Decrease")},m(c,u){et(c,e,u),zt(n,e,null),et(c,i,u),et(c,r,u),zt(o,r,null),a=!0,s||(l=[At(e,"pointerdown",t[18](1)),At(r,"pointerdown",t[18](-1))],s=!0)},p(c,u){const d={};32&u[1]&&(d.$$scope={dirty:u,ctx:c}),n.$set(d);const p={};32&u[1]&&(p.$$scope={dirty:u,ctx:c}),o.$set(p)},i(c){a||(I(n.$$.fragment,c),I(o.$$.fragment,c),a=!0)},o(c){z(n.$$.fragment,c),z(o.$$.fragment,c),a=!1},d(c){c&&Q(e),Dt(n),c&&Q(i),c&&Q(r),Dt(o),s=!1,Kn(l)}}}function k5(t){let e;return{c(){e=Tr("path"),T(e,"d","M8 12 h8 M12 8 v8")},m(n,i){et(n,e,i)},p:Xe,d(n){n&&Q(e)}}}function C5(t){let e;return{c(){e=Tr("path"),T(e,"d","M9 12 h6")},m(n,i){et(n,e,i)},p:Xe,d(n){n&&Q(e)}}}function T5(t){let e,n,i,r,o,a,s,l,c,u,d,p,h,f,g;const $=t[34].default,y=hr($,t,t[36],null),v=t[34].knob,w=hr(v,t,t[36],Zf);let S=t[7]&&Xf(t);return{c(){e=dt("div"),n=dt("div"),i=dt("input"),r=he(),o=dt("div"),y&&y.c(),s=he(),l=dt("div"),c=dt("div"),w&&w.c(),d=he(),S&&S.c(),T(i,"type","range"),T(i,"id",t[3]),T(i,"min",t[0]),T(i,"max",t[1]),T(i,"step",t[2]),i.value=t[12],Et(i,"pointer-events",t[8]?"none":void 0),T(o,"class",a=yn(["PinturaSliderTrack",t[4]])),T(c,"class",u=yn(["PinturaSliderKnob",t[5]])),T(l,"class","PinturaSliderKnobController"),Et(l,"transform",t[15]),T(n,"class","PinturaSliderControl"),Et(n,"--slider-position",Math.round(t[13])),T(e,"class",p=yn(["PinturaSlider",t[10]])),T(e,"data-direction",t[6])},m(R,M){et(R,e,M),St(e,n),St(n,i),t[35](i),St(n,r),St(n,o),y&&y.m(o,null),St(n,s),St(n,l),St(l,c),w&&w.m(c,null),St(e,d),S&&S.m(e,null),h=!0,f||(g=[At(i,"input",t[16]),At(i,"nudge",t[17]),Pn(Qs.call(null,i)),At(n,"pointerdown",function(){Mn(t[9]&&t[11])&&(t[9]&&t[11]).apply(this,arguments)})],f=!0)},p(R,M){t=R,(!h||8&M[0])&&T(i,"id",t[3]),(!h||1&M[0])&&T(i,"min",t[0]),(!h||2&M[0])&&T(i,"max",t[1]),(!h||4&M[0])&&T(i,"step",t[2]),(!h||4096&M[0])&&(i.value=t[12]),256&M[0]&&Et(i,"pointer-events",t[8]?"none":void 0),y&&y.p&&(!h||32&M[1])&&gr(y,$,t,t[36],h?mr($,t[36],M,null):fr(t[36]),null),(!h||16&M[0]&&a!==(a=yn(["PinturaSliderTrack",t[4]])))&&T(o,"class",a),w&&w.p&&(!h||32&M[1])&&gr(w,v,t,t[36],h?mr(v,t[36],M,S5):fr(t[36]),Zf),(!h||32&M[0]&&u!==(u=yn(["PinturaSliderKnob",t[5]])))&&T(c,"class",u),32768&M[0]&&Et(l,"transform",t[15]),8192&M[0]&&Et(n,"--slider-position",Math.round(t[13])),t[7]?S?(S.p(t,M),128&M[0]&&I(S,1)):(S=Xf(t),S.c(),I(S,1),S.m(e,null)):S&&(Ie(),z(S,1,1,()=>{S=null}),Re()),(!h||1024&M[0]&&p!==(p=yn(["PinturaSlider",t[10]])))&&T(e,"class",p),(!h||64&M[0])&&T(e,"data-direction",t[6])},i(R){h||(I(y,R),I(w,R),I(S),h=!0)},o(R){z(y,R),z(w,R),z(S),h=!1},d(R){R&&Q(e),t[35](null),y&&y.d(R),w&&w.d(R),S&&S.d(),f=!1,Kn(g)}}}function M5(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,{$$slots:v={},$$scope:w}=e,{min:S=0}=e,{max:R=100}=e,{step:M=1}=e,{id:B}=e,{value:C=0}=e,{valueMin:D}=e,{valueMax:O}=e,{trackClass:P}=e,{knobClass:b}=e,{ongrab:W=pe}=e,{onchange:nt=pe}=e,{onrelease:k=pe}=e,{onexceed:N=pe}=e,{direction:j="x"}=e,{getValue:ut=ri}=e,{setValue:Z=ri}=e,{enableSpinButtons:ft=!0}=e,{enableForceUseKnob:q=!1}=e,{enableStopPropagation:ht=!0}=e,{enablePointerdownListener:xt=!0}=e,{maxInteractionDistance:lt=6}=e,{class:Ct}=e;const it=mt=>Z(((at,$t)=>($t=1/$t,Math.round(at*$t)/$t))(si(mt,S,R),M),C),vt=(mt,at,$t={})=>{const{grabbed:te=!1,released:le=!1}=$t,Wt=it(S+mt/at*r),we=D||S,yt=O||R;n(19,C=Ne(Wt)?Wt:si(Wt,we,yt)),y!==Wt&&(y=Wt,!Ne(Wt)&&(Wt<we||Wt>yt)&&N(C,Wt),C!==$&&($=C,te&&W(C),nt(C),le&&k(C)))};let K,Ft;const Ht=mt=>{const at=mt[u]-g;vt(f+at,h)},Lt=mt=>{Ft=setTimeout(()=>{h=void 0},50),document.documentElement.removeEventListener("pointermove",Ht),document.documentElement.removeEventListener("pointerup",Lt),nt(C),k(C)},bt=()=>{n(19,C=it(i+rt*M)),nt(C)};let _t,rt=1,Tt=!1;const Vt=mt=>{clearTimeout(_t),Tt||bt(),k(C),document.removeEventListener("pointerup",Vt)};return t.$$set=mt=>{"min"in mt&&n(0,S=mt.min),"max"in mt&&n(1,R=mt.max),"step"in mt&&n(2,M=mt.step),"id"in mt&&n(3,B=mt.id),"value"in mt&&n(19,C=mt.value),"valueMin"in mt&&n(20,D=mt.valueMin),"valueMax"in mt&&n(21,O=mt.valueMax),"trackClass"in mt&&n(4,P=mt.trackClass),"knobClass"in mt&&n(5,b=mt.knobClass),"ongrab"in mt&&n(22,W=mt.ongrab),"onchange"in mt&&n(23,nt=mt.onchange),"onrelease"in mt&&n(24,k=mt.onrelease),"onexceed"in mt&&n(25,N=mt.onexceed),"direction"in mt&&n(6,j=mt.direction),"getValue"in mt&&n(26,ut=mt.getValue),"setValue"in mt&&n(27,Z=mt.setValue),"enableSpinButtons"in mt&&n(7,ft=mt.enableSpinButtons),"enableForceUseKnob"in mt&&n(8,q=mt.enableForceUseKnob),"enableStopPropagation"in mt&&n(28,ht=mt.enableStopPropagation),"enablePointerdownListener"in mt&&n(9,xt=mt.enablePointerdownListener),"maxInteractionDistance"in mt&&n(29,lt=mt.maxInteractionDistance),"class"in mt&&n(10,Ct=mt.class),"$$scope"in mt&&n(36,w=mt.$$scope)},t.$$.update=()=>{67633152&t.$$.dirty[0]&&n(12,i=C!==void 0?ut(C):0),3&t.$$.dirty[0]&&(r=R-S),4099&t.$$.dirty[0]&&n(31,o=Kc(i,S,R)),1&t.$$.dirty[1]&&n(13,a=100*o),64&t.$$.dirty[0]&&n(32,s=j.toUpperCase()),64&t.$$.dirty[0]&&n(33,l=j==="x"?"Width":"Height"),4&t.$$.dirty[1]&&(c="offset"+l),2&t.$$.dirty[1]&&(u="page"+s),8192&t.$$.dirty[0]|2&t.$$.dirty[1]&&n(15,d=`translate${s}(${a}%)`)},[S,R,M,B,P,b,j,ft,q,xt,Ct,mt=>{clearTimeout(Ft);let at=!1;ht&&mt.stopPropagation(),clearTimeout(K);const $t=p.getBoundingClientRect();if(h=p[c],g=mt[u],f=g-$t[j],q){if(Math.abs(f-o*h)>lt)return;at=!0,mt.stopPropagation()}return document.activeElement!==p&&p.focus(),vt(f,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",Ht),document.documentElement.addEventListener("pointerup",Lt),at},i,a,p,d,mt=>{h||(n(19,C=Z(parseFloat(mt.target.value))),C!==$&&($=C,nt(C)))},mt=>{const at=p[c];vt(i/r*at+mt.detail[j],at),clearTimeout(K),K=setTimeout(()=>{k(C)},250)},mt=>at=>{clearTimeout(K),rt=mt,Tt=!1,_t=setInterval(()=>{Tt=!0,bt()},100),document.addEventListener("pointercancel",Vt),document.addEventListener("pointerup",Vt)},C,D,O,W,nt,k,N,ut,Z,ht,lt,mt=>{const at=p.getBoundingClientRect(),$t=mt[u]-at[j],te=p[c];return Math.abs($t-o*te)},o,s,l,v,function(mt){jn[mt?"unshift":"push"](()=>{p=mt,n(14,p)})},w]}class E0 extends pn{constructor(e){super(),dn(this,e,M5,T5,ln,{min:0,max:1,step:2,id:3,value:19,valueMin:20,valueMax:21,trackClass:4,knobClass:5,ongrab:22,onchange:23,onrelease:24,onexceed:25,direction:6,getValue:26,setValue:27,enableSpinButtons:7,enableForceUseKnob:8,enableStopPropagation:28,enablePointerdownListener:9,maxInteractionDistance:29,class:10,eventDistanceToKnob:30,handlePointerDown:11},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[30]}get handlePointerDown(){return this.$$.ctx[11]}}function Yf(t){let e,n;return e=new Ho({props:{class:"PinturaButtonIcon",$$slots:{default:[P5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1048580&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function P5(t){let e;return{c(){e=Tr("g")},m(n,i){et(n,e,i),e.innerHTML=t[2]},p(n,i){4&i&&(e.innerHTML=n[2])},d(n){n&&Q(e)}}}function Kf(t){let e,n,i=Yr(t[8],t[6])+"";return{c(){e=dt("span"),n=vi(i),T(e,"class","PinturaButtonLabelPrefix")},m(r,o){et(r,e,o),St(e,n)},p(r,o){320&o&&i!==(i=Yr(r[8],r[6])+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function I5(t){let e,n,i,r,o,a,s,l,c,u=t[2]&&Yf(t),d=t[8]&&Kf(t);return{c(){e=dt("span"),u&&u.c(),n=he(),d&&d.c(),i=he(),r=dt("span"),o=vi(t[9]),T(r,"class",a=yn(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),T(e,"slot","label"),T(e,"title",s=Yr(t[1],t[6])),T(e,"class",l=yn(["PinturaButtonInner",t[4]]))},m(p,h){et(p,e,h),u&&u.m(e,null),St(e,n),d&&d.m(e,null),St(e,i),St(e,r),St(r,o),c=!0},p(p,h){p[2]?u?(u.p(p,h),4&h&&I(u,1)):(u=Yf(p),u.c(),I(u,1),u.m(e,n)):u&&(Ie(),z(u,1,1,()=>{u=null}),Re()),p[8]?d?d.p(p,h):(d=Kf(p),d.c(),d.m(e,i)):d&&(d.d(1),d=null),(!c||512&h)&&Oi(o,p[9]),(!c||40&h&&a!==(a=yn(["PinturaButtonLabel",p[3],p[5]&&"implicit"])))&&T(r,"class",a),(!c||66&h&&s!==(s=Yr(p[1],p[6])))&&T(e,"title",s),(!c||16&h&&l!==(l=yn(["PinturaButtonInner",p[4]])))&&T(e,"class",l)},i(p){c||(I(u),c=!0)},o(p){z(u),c=!1},d(p){p&&Q(e),u&&u.d(),d&&d.d()}}}function R5(t){let e,n,i,r,o;const a=[t[12],{value:t[7]},{onchange:t[11]}];let s={};for(let l=0;l<a.length;l+=1)s=Fi(s,a[l]);return n=new E0({props:s}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"slot","details")},m(l,c){et(l,e,c),zt(n,e,null),i=!0,r||(o=At(e,"keydown",t[10]),r=!0)},p(l,c){const u=6272&c?Pr(a,[4096&c&&Or(l[12]),128&c&&{value:l[7]},2048&c&&{onchange:l[11]}]):{};n.$set(u)},i(l){i||(I(n.$$.fragment,l),i=!0)},o(l){z(n.$$.fragment,l),i=!1},d(l){l&&Q(e),Dt(n),r=!1,o()}}}function E5(t){let e,n;return e=new pp({props:{panelClass:"PinturaSliderPanel",buttonClass:yn(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[R5],label:[I5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,[r]){const o={};33&r&&(o.buttonClass=yn(["PinturaSliderButton",i[0],i[5]&&"PinturaSliderIconOnly"])),1053694&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function A5(t,e,n){const i=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let r=Lg(e,i),{class:o}=e,{title:a}=e,{label:s=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:u}=e,{hideLabel:d=!1}=e,{locale:p}=e,{value:h}=e,{onchange:f=pe}=e,{labelPrefix:g}=e;const{min:$,max:y,getValue:v=ri}=r;let w;const S=R=>n(9,w=(M=>Yn(s)?s(v(M),$,y,M):s)(R));return t.$$set=R=>{e=Fi(Fi({},e),au(R)),n(12,r=Lg(e,i)),"class"in R&&n(0,o=R.class),"title"in R&&n(1,a=R.title),"label"in R&&n(13,s=R.label),"icon"in R&&n(2,l=R.icon),"labelClass"in R&&n(3,c=R.labelClass),"innerClass"in R&&n(4,u=R.innerClass),"hideLabel"in R&&n(5,d=R.hideLabel),"locale"in R&&n(6,p=R.locale),"value"in R&&n(7,h=R.value),"onchange"in R&&n(14,f=R.onchange),"labelPrefix"in R&&n(8,g=R.labelPrefix)},t.$$.update=()=>{8320&t.$$.dirty&&S(h)},[o,a,l,c,u,d,p,h,g,w,R=>{/tab/i.test(R.key)&&R.preventDefault()},R=>{S(R),f(R)},r,s,f]}class L5 extends pn{constructor(e){super(),dn(this,e,A5,E5,ln,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function F5(t){let e,n,i,r,o,a,s,l;return{c(){e=dt("span"),n=Tr("svg"),i=Tr("g"),r=Tr("circle"),o=Tr("circle"),a=he(),s=dt("span"),l=vi(t[3]),T(r,"class","PinturaProgressIndicatorBar"),T(r,"r","8.5"),T(r,"cx","10"),T(r,"cy","10"),T(r,"stroke-linecap","round"),T(r,"opacity",".25"),T(o,"class","PinturaProgressIndicatorFill"),T(o,"r","8.5"),T(o,"stroke-dasharray",t[2]),T(o,"cx","10"),T(o,"cy","10"),T(o,"transform","rotate(-90) translate(-20)"),T(i,"fill","none"),T(i,"stroke","currentColor"),T(i,"stroke-width","2.5"),T(i,"stroke-linecap","round"),T(i,"opacity",t[1]),T(n,"width","20"),T(n,"height","20"),T(n,"viewBox","0 0 20 20"),T(n,"xmlns","http://www.w3.org/2000/svg"),T(n,"aria-hidden","true"),T(n,"focusable","false"),T(s,"class","implicit"),T(e,"class","PinturaProgressIndicator"),T(e,"data-status",t[0]),Et(e,"opacity",t[4])},m(c,u){et(c,e,u),St(e,n),St(n,i),St(i,r),St(i,o),St(e,a),St(e,s),St(s,l)},p(c,[u]){4&u&&T(o,"stroke-dasharray",c[2]),2&u&&T(i,"opacity",c[1]),8&u&&Oi(l,c[3]),1&u&&T(e,"data-status",c[0]),16&u&&Et(e,"opacity",c[4])},i:Xe,o:Xe,d(c){c&&Q(e)}}}function z5(t,e,n){let i,r,o,a,s,l,c,u;const d=_a();let{progress:p}=e,{min:h=0}=e,{max:f=100}=e,{labelBusy:g="Busy"}=e,{opacity:$}=e;const y=mi("isAnimated");F(t,y,B=>n(14,s=B));const v=hn($,{precision:.01});F(t,v,B=>n(4,u=B));const w=hn(0,{precision:.01}),S=hn(0,{precision:.01});F(t,S,B=>n(15,l=B));const R=Vn([w],B=>si(B,h,f));F(t,R,B=>n(16,c=B));const M=R.subscribe(B=>{p===1&&Math.round(B)>=100&&d("complete")});return qs(()=>{S.set(1,{hard:!s})}),aa(()=>{M()}),t.$$set=B=>{"progress"in B&&n(9,p=B.progress),"min"in B&&n(10,h=B.min),"max"in B&&n(11,f=B.max),"labelBusy"in B&&n(12,g=B.labelBusy),"opacity"in B&&n(13,$=B.opacity)},t.$$.update=()=>{24576&t.$$.dirty&&Ze($)&&v.set($,{hard:!s}),16896&t.$$.dirty&&p&&p!==1/0&&w.set(100*p,{hard:!s}),70144&t.$$.dirty&&n(3,i=p===1/0?g:Math.round(c)+"%"),66048&t.$$.dirty&&n(2,r=p===1/0?"26.5 53":c/100*53+" 53"),32768&t.$$.dirty&&n(1,o=l),512&t.$$.dirty&&n(0,a=p===1/0?"busy":"loading")},[a,o,r,i,u,y,v,S,R,p,h,f,g,$,s,l,c]}class vb extends pn{constructor(e){super(),dn(this,e,z5,F5,ln,{progress:9,min:10,max:11,labelBusy:12,opacity:13})}}function qf(t){let e,n,i=Yr(t[0],t[1])+"";return{c(){e=dt("span"),n=vi(i),T(e,"class",t[3])},m(r,o){et(r,e,o),St(e,n)},p(r,o){3&o&&i!==(i=Yr(r[0],r[1])+"")&&Oi(n,i),8&o&&T(e,"class",r[3])},d(r){r&&Q(e)}}}function D5(t){let e,n,i,r,o=t[0]&&qf(t);return i=new qr({props:{items:t[2]}}),{c(){e=dt("li"),o&&o.c(),n=he(),Ot(i.$$.fragment),T(e,"class","PinturaShapeStyle")},m(a,s){et(a,e,s),o&&o.m(e,null),St(e,n),zt(i,e,null),r=!0},p(a,[s]){a[0]?o?o.p(a,s):(o=qf(a),o.c(),o.m(e,n)):o&&(o.d(1),o=null);const l={};4&s&&(l.items=a[2]),i.$set(l)},i(a){r||(I(i.$$.fragment,a),r=!0)},o(a){z(i.$$.fragment,a),r=!1},d(a){a&&Q(e),o&&o.d(),Dt(i)}}}function B5(t,e,n){let i,{title:r}=e,{locale:o}=e,{items:a}=e,{hideTitle:s=!1}=e;return t.$$set=l=>{"title"in l&&n(0,r=l.title),"locale"in l&&n(1,o=l.locale),"items"in l&&n(2,a=l.items),"hideTitle"in l&&n(4,s=l.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&n(3,i="PinturaShapeStyleLabel"+(s?" implicit":""))},[r,o,a,i,s]}class O5 extends pn{constructor(e){super(),dn(this,e,B5,D5,ln,{title:0,locale:1,items:2,hideTitle:4})}}var Jf=(t,e,n)=>{let i,r,o;const a=Math.floor(6*t),s=6*t-a,l=n*(1-e),c=n*(1-s*e),u=n*(1-(1-s)*e);switch(a%6){case 0:i=n,r=u,o=l;break;case 1:i=c,r=n,o=l;break;case 2:i=l,r=n,o=u;break;case 3:i=l,r=c,o=n;break;case 4:i=u,r=l,o=n;break;case 5:i=n,r=l,o=c}return[i,r,o]};function _5(t){let e,n;return{c(){e=dt("div"),n=dt("span"),T(e,"class","PinturaColorPreview"),T(e,"title",t[0]),Et(e,"--color",t[1])},m(i,r){et(i,e,r),St(e,n)},p(i,[r]){1&r&&T(e,"title",i[0]),2&r&&Et(e,"--color",i[1])},i:Xe,o:Xe,d(i){i&&Q(e)}}}function V5(t,e,n){let i,{color:r}=e,{title:o}=e;return t.$$set=a=>{"color"in a&&n(2,r=a.color),"title"in a&&n(0,o=a.title)},t.$$.update=()=>{4&t.$$.dirty&&n(1,i=r?Cr(r):"transparent")},[o,i,r]}class A0 extends pn{constructor(e){super(),dn(this,e,V5,_5,ln,{color:2,title:0})}}var Bh=t=>(t=t.trim(),/^rgba/.test(t)?t.substring(5).split(",").map(parseFloat).map((e,n)=>e/(n===3?1:255)):/^rgb/.test(t)?t.substring(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(t)?(e=>{const[,n,i,r,o]=e.split("");e=e.length>=4&&e.length<=5?`#${n}${n}${i}${i}${r}${r}${o?`${o}${o}`:""}`:e;const[a,s,l,c,u]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(a)return[s,l,c,u].filter(d=>d!==void 0).map(d=>parseInt(d,16)/255)})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0);let lh=null;function Qf(t){let e,n;return{c(){e=dt("span"),n=vi(t[0])},m(i,r){et(i,e,r),St(e,n)},p(i,r){1&r[0]&&Oi(n,i[0])},d(i){i&&Q(e)}}}function W5(t){let e,n,i,r;n=new A0({props:{color:t[4],title:Yr(t[8],t[10])}});let o=!t[9]&&Qf(t);return{c(){e=dt("span"),Ot(n.$$.fragment),i=he(),o&&o.c(),T(e,"slot","label"),T(e,"class","PinturaButtonLabel")},m(a,s){et(a,e,s),zt(n,e,null),St(e,i),o&&o.m(e,null),r=!0},p(a,s){const l={};16&s[0]&&(l.color=a[4]),1280&s[0]&&(l.title=Yr(a[8],a[10])),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=Qf(a),o.c(),o.m(e,null))},i(a){r||(I(n.$$.fragment,a),r=!0)},o(a){z(n.$$.fragment,a),r=!1},d(a){a&&Q(e),Dt(n),o&&o.d()}}}function t$(t){let e,n,i,r,o,a,s,l,c,u,d,p;s=new E0({props:{class:"PinturaHuePicker",onchange:t[27],value:t[16],min:0,max:1,step:.01}});let h=t[11]&&e$(t),f=(t[14]||t[15])&&n$(t);return{c(){e=dt("div"),n=dt("div"),i=dt("div"),r=dt("div"),o=he(),a=dt("div"),Ot(s.$$.fragment),l=he(),h&&h.c(),c=he(),f&&f.c(),T(r,"role","button"),T(r,"aria-label","Saturation slider"),T(r,"class","PinturaPickerKnob"),T(r,"tabindex","0"),Et(r,"background-color",t[20]),T(i,"class","PinturaPickerKnobController"),Et(i,"transform",`translate(${t[25]}%,${t[24]}%)`),T(n,"class","PinturaSaturationPicker"),Et(n,"background-color",t[21]),Et(a,"--knob-background",t[21]),T(e,"class","PinturaPicker")},m(g,$){et(g,e,$),St(e,n),St(n,i),St(i,r),t[41](n),St(e,o),St(e,a),zt(s,a,null),St(e,l),h&&h.m(e,null),St(e,c),f&&f.m(e,null),u=!0,d||(p=[At(r,"nudge",t[30]),Pn(Qs.call(null,r,{preventDefault:!0})),At(n,"pointerdown",t[29])],d=!0)},p(g,$){1048576&$[0]&&Et(r,"background-color",g[20]),50331648&$[0]&&Et(i,"transform",`translate(${g[25]}%,${g[24]}%)`),2097152&$[0]&&Et(n,"background-color",g[21]);const y={};65536&$[0]&&(y.value=g[16]),s.$set(y),2097152&$[0]&&Et(a,"--knob-background",g[21]),g[11]?h?(h.p(g,$),2048&$[0]&&I(h,1)):(h=e$(g),h.c(),I(h,1),h.m(e,c)):h&&(Ie(),z(h,1,1,()=>{h=null}),Re()),g[14]||g[15]?f?(f.p(g,$),49152&$[0]&&I(f,1)):(f=n$(g),f.c(),I(f,1),f.m(e,null)):f&&(Ie(),z(f,1,1,()=>{f=null}),Re())},i(g){u||(I(s.$$.fragment,g),I(h),I(f),u=!0)},o(g){z(s.$$.fragment,g),z(h),z(f),u=!1},d(g){g&&Q(e),t[41](null),Dt(s),h&&h.d(),f&&f.d(),d=!1,Kn(p)}}}function e$(t){let e,n,i;return n=new E0({props:{class:"PinturaOpacityPicker",onchange:t[28],value:t[17],min:0,max:1,step:.01}}),{c(){e=dt("div"),Ot(n.$$.fragment),Et(e,"--knob-background",t[18]),Et(e,"--track-background",`linear-gradient(to right,${t[19]},${t[20]})`)},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};131072&o[0]&&(a.value=r[17]),n.$set(a),262144&o[0]&&Et(e,"--knob-background",r[18]),1572864&o[0]&&Et(e,"--track-background",`linear-gradient(to right,${r[19]},${r[20]})`)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function n$(t){let e,n,i,r,o,a,s,l=t[15]&&i$(t);return{c(){e=dt("div"),n=dt("input"),r=he(),l&&l.c(),T(n,"class","PinturaColorPickerInput"),T(n,"type","text"),n.disabled=i=!t[14],n.value=t[23],T(e,"class","PinturColorPickerInputGroup")},m(c,u){et(c,e,u),St(e,n),St(e,r),l&&l.m(e,null),o=!0,a||(s=[At(n,"keydown",t[32]),At(n,"input",t[31])],a=!0)},p(c,u){(!o||16384&u[0]&&i!==(i=!c[14]))&&(n.disabled=i),(!o||8388608&u[0]&&n.value!==c[23])&&(n.value=c[23]),c[15]?l?(l.p(c,u),32768&u[0]&&I(l,1)):(l=i$(c),l.c(),I(l,1),l.m(e,null)):l&&(Ie(),z(l,1,1,()=>{l=null}),Re())},i(c){o||(I(l),o=!0)},o(c){z(l),o=!1},d(c){c&&Q(e),l&&l.d(),a=!1,Kn(s)}}}function i$(t){let e,n;return e=new ks({props:{icon:'<path stroke="currentColor" stroke-linecap="square" d="m13 14-7 7a2.704 2.704 0 0 1-3 0 2.704 2.704 0 0 1 0-3l7-7"/><path fill="currentColor" d="M9.475 9.475 14.5 14.5c.263.263.69.265.955.005l.783-.767a4.209 4.209 0 0 0 1.262-3.006V10l4-4c.5-.5.375-2.125-.5-3s-2.5-1-3-.5l-4 4h-.732a4.329 4.329 0 0 0-3.03 1.238l-.758.742a.7.7 0 0 0-.005.995Z"/>',hideLabel:!0,label:"Pick a color",class:"PinturaEyeDropper",onclick:t[33]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p:Xe,i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function r$(t){let e,n;return e=new Ss({props:{label:Yr(t[10].labelColorPalette,t[10]),class:yn(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[42]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[43],$$slots:{option:[U5,({option:i})=>({59:i}),({option:i})=>[0,i?268435456:0]],group:[N5,({option:i})=>({59:i}),({option:i})=>[0,i?268435456:0]]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1024&r[0]&&(o.label=Yr(i[10].labelColorPalette,i[10])),512&r[0]&&(o.class=yn(["PinturaColorPresets",i[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&r[0]&&(o.name=i[1]),16&r[0]&&(o.value=i[4]),1028&r[0]&&(o.options=i[2].map(i[42])),8&r[0]&&(o.selectedIndex=i[3]),128&r[0]&&(o.optionMapper=i[7]),64&r[0]&&(o.optionLabelClass=i[6]),512&r[0]|805306368&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function N5(t){let e,n,i=t[59].label+"";return{c(){e=dt("span"),n=vi(i),T(e,"slot","group")},m(r,o){et(r,e,o),St(e,n)},p(r,o){268435456&o[1]&&i!==(i=r[59].label+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function o$(t){let e,n,i=t[59].label+"";return{c(){e=dt("span"),n=vi(i),T(e,"class","PinturaButtonLabel")},m(r,o){et(r,e,o),St(e,n)},p(r,o){268435456&o[1]&&i!==(i=r[59].label+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function U5(t){let e,n,i,r;n=new A0({props:{title:t[59].label,color:t[59].value}});let o=!t[9]&&o$(t);return{c(){e=dt("span"),Ot(n.$$.fragment),i=he(),o&&o.c(),T(e,"slot","option")},m(a,s){et(a,e,s),zt(n,e,null),St(e,i),o&&o.m(e,null),r=!0},p(a,s){const l={};268435456&s[1]&&(l.title=a[59].label),268435456&s[1]&&(l.color=a[59].value),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=o$(a),o.c(),o.m(e,null))},i(a){r||(I(n.$$.fragment,a),r=!0)},o(a){z(n.$$.fragment,a),r=!1},d(a){a&&Q(e),Dt(n),o&&o.d()}}}function j5(t){let e,n,i,r=t[13]&&t$(t),o=t[12]&&r$(t);return{c(){e=dt("div"),r&&r.c(),n=he(),o&&o.c(),T(e,"slot","details"),T(e,"class","PinturaColorPickerPanel")},m(a,s){et(a,e,s),r&&r.m(e,null),St(e,n),o&&o.m(e,null),i=!0},p(a,s){a[13]?r?(r.p(a,s),8192&s[0]&&I(r,1)):(r=t$(a),r.c(),I(r,1),r.m(e,n)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[12]?o?(o.p(a,s),4096&s[0]&&I(o,1)):(o=r$(a),o.c(),I(o,1),o.m(e,null)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re())},i(a){i||(I(r),I(o),i=!0)},o(a){z(r),z(o),i=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function H5(t){let e,n;return e=new pp({props:{buttonClass:yn(["PinturaColorPickerButton",t[5]]),$$slots:{details:[j5],label:[W5]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};32&r[0]&&(o.buttonClass=yn(["PinturaColorPickerButton",i[5]])),67108831&r[0]|536870912&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function G5(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,{label:$}=e,{name:y}=e,{options:v=[]}=e,{selectedIndex:w=-1}=e,{value:S}=e,{buttonClass:R}=e,{optionLabelClass:M}=e,{optionMapper:B}=e,{onchange:C}=e,{title:D}=e,{hidePresetLabel:O=!0}=e,{locale:P}=e,{enableOpacity:b=!0}=e,{enablePresets:W=!0}=e,{enablePicker:nt=!0}=e,{enableInput:k=!1}=e,{enableEyeDropper:N=!1}=e,j="transparent",ut="transparent";const Z=(rt,Tt)=>{if(p=[rt[0],rt[1],rt[2]],Tt){let Vt=((te,le,Wt)=>{let we=Math.max(te,le,Wt),yt=we-Math.min(te,le,Wt),ie=yt&&(we==te?(le-Wt)/yt:we==le?2+(Wt-te)/yt:4+(te-le)/yt);return[60*(ie<0?ie+6:ie)/360,we&&yt/we,we]})(...p),mt=Vt[0],at=Vt[1],$t=Vt[2];Ze(Ct)&&(mt=Ct),Ze(xt)&&(at=xt),Ze(lt)&&($t=lt),n(16,l=mt),n(36,c=at),n(37,u=$t),n(17,d=Ze(rt[3])?rt[3]:1)}n(18,h=Cr(rt)),n(19,f=Cr([...p,0])),n(20,j=Cr([...p,1])),n(21,ut=Cr(Jf(l,1,1)))},ft=()=>{const rt=[...Jf(l,c,u),d];Z(rt),C(rt)},q=rt=>{const Tt=rt.length===3?[...rt,1]:rt;ht(),Z(Tt,!0),C(Tt)},ht=()=>{xt=void 0,lt=void 0,Ct=void 0};let xt,lt,Ct;const it=(rt,Tt)=>{const Vt=si(rt.x/Tt.width,0,1),mt=si(rt.y/Tt.height,0,1);var at,$t;$t=1-mt,n(36,c=at=Vt),n(37,u=$t),xt=at,lt=$t,ft()};let vt,K,Ft,Ht;const Lt=rt=>{const Tt=Ni(Qm(rt),Ht);it(Wi(We(Ft),Tt),K)},bt=rt=>{K=void 0,document.documentElement.removeEventListener("pointermove",Lt),document.documentElement.removeEventListener("pointerup",bt)};let _t;return t.$$set=rt=>{"label"in rt&&n(0,$=rt.label),"name"in rt&&n(1,y=rt.name),"options"in rt&&n(2,v=rt.options),"selectedIndex"in rt&&n(3,w=rt.selectedIndex),"value"in rt&&n(4,S=rt.value),"buttonClass"in rt&&n(5,R=rt.buttonClass),"optionLabelClass"in rt&&n(6,M=rt.optionLabelClass),"optionMapper"in rt&&n(7,B=rt.optionMapper),"onchange"in rt&&n(34,C=rt.onchange),"title"in rt&&n(8,D=rt.title),"hidePresetLabel"in rt&&n(9,O=rt.hidePresetLabel),"locale"in rt&&n(10,P=rt.locale),"enableOpacity"in rt&&n(11,b=rt.enableOpacity),"enablePresets"in rt&&n(12,W=rt.enablePresets),"enablePicker"in rt&&n(13,nt=rt.enablePicker),"enableInput"in rt&&n(14,k=rt.enableInput),"enableEyeDropper"in rt&&n(35,N=rt.enableEyeDropper)},t.$$.update=()=>{16&t.$$.dirty[1]&&n(15,i=N&&(lh===null&&(lh=Mr()&&"EyeDropper"in window),lh)),16&t.$$.dirty[0]|128&t.$$.dirty[1]&&(!S||g&&vs(S,g)||(n(38,g=[...S]),Z(S,!0))),32&t.$$.dirty[1]&&n(25,r=100*c),64&t.$$.dirty[1]&&n(24,o=100-100*u),256&t.$$.dirty[1]&&n(40,a=!!_t&&_t.length>=4&&_t.length<=5),51216&t.$$.dirty[0]|512&t.$$.dirty[1]&&n(23,s=(k||i)&&S?((rt,Tt,Vt)=>{let mt=rt.map(at=>Math.round(255*at).toString(16).toLowerCase().padStart(2,"0"));return(!Tt&&mt.length>3||mt[3]==="ff")&&mt.pop(),Vt&&(mt=mt.map(at=>at.substring(0,1))),"#"+mt.join("")})(S,b,a):void 0)},[$,y,v,w,S,R,M,B,D,O,P,b,W,nt,k,i,l,d,h,f,j,ut,vt,s,o,r,q,rt=>{n(16,l=rt),Ct=rt,ft()},rt=>{n(17,d=rt),ft()},rt=>{rt.stopPropagation(),K=Zi(vt.offsetWidth,vt.offsetHeight),Ft=(Tt=>ot(Tt.offsetX,Tt.offsetY))(rt),Ht=Qm(rt),it(Ft,K),document.documentElement.addEventListener("pointermove",Lt),document.documentElement.addEventListener("pointerup",bt)},rt=>{K=Zi(vt.offsetWidth,vt.offsetHeight);const Tt=r/100*K.width,Vt=o/100*K.height;it({x:Tt+rt.detail.x,y:Vt+rt.detail.y},K)},rt=>{const{value:Tt}=rt.target,Vt=Tt.length;if(!Tt.startsWith("#")||Vt<4||Vt===6||Vt===8||Vt>9||!b&&Vt>7)return;const mt=Bh(Tt);mt&&(n(39,_t=Tt),ht(),Z(mt),C(mt))},rt=>{rt.stopPropagation()},rt=>{new EyeDropper().open().then(({sRGBHex:Tt})=>{const Vt=Bh(Tt);Vt&&(Vt[3]=1,n(39,_t=S),ht(),Z(Vt),C(Vt))}).catch(Tt=>{})},C,N,c,u,g,_t,a,function(rt){jn[rt?"unshift":"push"](()=>{vt=rt,n(22,vt)})},([rt,Tt])=>[rt,Yn(Tt)?Tt(P):Tt],rt=>q(rt.value)]}class Z5 extends pn{constructor(e){super(),dn(this,e,G5,H5,ln,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:34,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14,enableEyeDropper:35},null,[-1,-1])}}function X5(t){let e,n,i;return n=new qr({props:{items:t[0]}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaShorthandControl PinturaShapeStyle")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,[o]){const a={};1&o&&(a.items=r[0]),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function Y5(t,e,n){let i,r,{value:o}=e,{onchange:a}=e,{controls:s=[]}=e;return t.$$set=l=>{n(6,e=Fi(Fi({},e),au(l))),"value"in l&&n(1,o=l.value),"onchange"in l&&n(2,a=l.onchange),"controls"in l&&n(3,s=l.controls)},t.$$.update=()=>{n(4,i=(l=>{const{controls:c,...u}=l;return u})(e)),30&t.$$.dirty&&n(0,r=s.map((l,c)=>{const[u,d,p]=l;return[u,d,{...i,...p,value:o[c],onchange:h=>{const f=[...o];f[c]=h,a(f)}}]}))},e=au(e),[r,o,a,s,i]}class K5 extends pn{constructor(e){super(),dn(this,e,Y5,X5,ln,{value:1,onchange:2,controls:3})}}function q5(t){let e,n;return e=new R0({props:{label:t[4],options:t[1],title:t[2],selectedIndex:t[5],onchange:t[10]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,[r]){const o={};16&r&&(o.label=i[4]),2&r&&(o.options=i[1]),4&r&&(o.title=i[2]),32&r&&(o.selectedIndex=i[5]),9&r&&(o.onchange=i[10]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function J5(t,e,n){let i,r,o,a,{options:s}=e,{title:l}=e,{onchange:c}=e,{selectedIndex:u=-1}=e,{value:d}=e,{label:p}=e;return t.$$set=h=>{"options"in h&&n(1,s=h.options),"title"in h&&n(2,l=h.title),"onchange"in h&&n(3,c=h.onchange),"selectedIndex"in h&&n(0,u=h.selectedIndex),"value"in h&&n(6,d=h.value),"label"in h&&n(7,p=h.label)},t.$$.update=()=>{67&t.$$.dirty&&n(9,i=((h,f,g)=>{if(h)return f>-1?h[f]:g!==void 0?h.find($=>$[0]===g):h[0]})(s,u,d)),514&t.$$.dirty&&n(5,r=s&&s.findIndex(h=>h===i)),512&t.$$.dirty&&n(8,o=i&&i[1]),384&t.$$.dirty&&n(4,a=p||o)},[u,s,l,c,a,r,d,p,o,i,h=>{n(0,u=h.index),c&&c(h)}]}class Q5 extends pn{constructor(e){super(),dn(this,e,J5,q5,ln,{options:1,title:2,onchange:3,selectedIndex:0,value:6,label:7})}}function a$(t,e,n){const i=t.slice();return i[9]=e[n][0],i[0]=e[n][1],i[10]=e[n][2],i[2]=e[n][3],i}function tw(t){let e,n,i;const r=[t[10]];var o=t[3][t[9]]||t[9];function a(s){let l={};for(let c=0;c<r.length;c+=1)l=Fi(l,r[c]);return{props:l}}return o&&(e=Jd(o,a())),{c(){e&&Ot(e.$$.fragment),n=Ii()},m(s,l){e&&zt(e,s,l),et(s,n,l),i=!0},p(s,l){const c=4&l?Pr(r,[Or(s[10])]):{};if(o!==(o=s[3][s[9]]||s[9])){if(e){Ie();const u=e;z(u.$$.fragment,1,0,()=>{Dt(u,1)}),Re()}o?(e=Jd(o,a()),Ot(e.$$.fragment),I(e.$$.fragment,1),zt(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(s){i||(e&&I(e.$$.fragment,s),i=!0)},o(s){e&&z(e.$$.fragment,s),i=!1},d(s){s&&Q(n),e&&Dt(e,s)}}}function ew(t){let e,n=t[9],i=t[9]&&ch(t);return{c(){i&&i.c(),e=Ii()},m(r,o){i&&i.m(r,o),et(r,e,o)},p(r,o){r[9]?n?ln(n,r[9])?(i.d(1),i=ch(r),i.c(),i.m(e.parentNode,e)):i.p(r,o):(i=ch(r),i.c(),i.m(e.parentNode,e)):n&&(i.d(1),i=null),n=r[9]},i:Xe,o(r){z(i)},d(r){r&&Q(e),i&&i.d(r)}}}function nw(t){let e,n,i=t[10].innerHTML+"";return{c(){e=new b0(!1),n=Ii(),e.a=n},m(r,o){e.m(i,r,o),et(r,n,o)},p(r,o){4&o&&i!==(i=r[10].innerHTML+"")&&e.p(i)},i:Xe,o:Xe,d(r){r&&Q(n),r&&e.d()}}}function iw(t){let e,n=t[10].textContent+"";return{c(){e=vi(n)},m(i,r){et(i,e,r)},p(i,r){4&r&&n!==(n=i[10].textContent+"")&&Oi(e,n)},i:Xe,o:Xe,d(i){i&&Q(e)}}}function rw(t){let e,n;return e=new qr({props:{items:t[2],discardEmptyItems:!0}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};4&r&&(o.items=i[2]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function ch(t){let e,n,i,r,o;const a=[rw,iw,nw],s=[];function l(d,p){return d[2]&&d[2].length?0:d[10].textContent?1:d[10].innerHTML?2:-1}~(n=l(t))&&(i=s[n]=a[n](t));let c=[t[4](t[10])],u={};for(let d=0;d<c.length;d+=1)u=Fi(u,c[d]);return{c(){e=dt(t[9]),i&&i.c(),r=he(),/-/.test(t[9])?zg(e,u):Fg(e,u)},m(d,p){et(d,e,p),~n&&s[n].m(e,null),St(e,r),o=!0},p(d,p){let h=n;n=l(d),n===h?~n&&s[n].p(d,p):(i&&(Ie(),z(s[h],1,1,()=>{s[h]=null}),Re()),~n?(i=s[n],i?i.p(d,p):(i=s[n]=a[n](d),i.c()),I(i,1),i.m(e,r)):i=null),u=Pr(c,[4&p&&d[4](d[10])]),/-/.test(d[9])?zg(e,u):Fg(e,u)},i(d){o||(I(i),o=!0)},o(d){z(i),o=!1},d(d){d&&Q(e),~n&&s[n].d()}}}function s$(t,e){let n,i,r,o,a,s;const l=[ew,tw],c=[];function u(d,p){return 4&p&&(i=null),i==null&&(i=!d[5](d[9])),i?0:1}return r=u(e,-1),o=c[r]=l[r](e),{key:t,first:null,c(){n=Ii(),o.c(),a=Ii(),this.first=n},m(d,p){et(d,n,p),c[r].m(d,p),et(d,a,p),s=!0},p(d,p){let h=r;r=u(e=d,p),r===h?c[r].p(e,p):(Ie(),z(c[h],1,1,()=>{c[h]=null}),Re(),o=c[r],o?o.p(e,p):(o=c[r]=l[r](e),o.c()),I(o,1),o.m(a.parentNode,a))},i(d){s||(I(o),s=!0)},o(d){z(o),s=!1},d(d){d&&Q(n),c[r].d(d),d&&Q(a)}}}function ow(t){let e,n,i=[],r=new Map,o=t[2];const a=s=>s[0]+s[1];for(let s=0;s<o.length;s+=1){let l=a$(t,o,s),c=a(l);r.set(c,i[s]=s$(c,l))}return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ii()},m(s,l){for(let c=0;c<i.length;c+=1)i[c].m(s,l);et(s,e,l),n=!0},p(s,[l]){62&l&&(o=s[2],Ie(),i=ns(i,l,a,1,s,o,r,e.parentNode,Js,s$,e,a$),Re())},i(s){if(!n){for(let l=0;l<o.length;l+=1)I(i[l]);n=!0}},o(s){for(let l=0;l<i.length;l+=1)z(i[l]);n=!1},d(s){for(let l=0;l<i.length;l+=1)i[l].d(s);s&&Q(e)}}}function aw(t,e,n){let i,r,{items:o}=e,{discardEmptyItems:a=!0}=e,{key:s=""}=e;const l={Button:ks,ImageButton:mb,ImageButtonList:I0,Dropdown:R0,Select:Q5,RadioGroup:Ss,Input:xb,Panel:w5,ProgressIndicator:vb,ShapeStyle:O5,ToggleSlider:L5,ColorPicker:Z5,ShorthandControl:K5},c=d=>!Ne(d)||!!l[d],u=d=>{if(!d)return!1;const[p,,h,f=[]]=d;return!!c(p)||f.some(u)||h.textContent||h.innerHTML};return t.$$set=d=>{"items"in d&&n(6,o=d.items),"discardEmptyItems"in d&&n(7,a=d.discardEmptyItems),"key"in d&&n(0,s=d.key)},t.$$.update=()=>{1&t.$$.dirty&&n(1,i=s),192&t.$$.dirty&&n(2,r=(o&&a?o.filter(u):o)||[])},[s,i,r,l,(d={})=>{const{textContent:p,innerHTML:h,...f}=d;return f},c,o,a]}class qr extends pn{constructor(e){super(),dn(this,e,aw,ow,ln,{items:6,discardEmptyItems:7,key:0})}get items(){return this.$$.ctx[6]}set items(e){this.$$set({items:e}),E()}get discardEmptyItems(){return this.$$.ctx[7]}set discardEmptyItems(e){this.$$set({discardEmptyItems:e}),E()}get key(){return this.$$.ctx[0]}set key(e){this.$$set({key:e}),E()}}function l$(t){let e,n;return e=new Ho({props:{class:"PinturaButtonIcon",$$slots:{default:[sw]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};536870920&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function sw(t){let e;return{c(){e=Tr("g")},m(n,i){et(n,e,i),e.innerHTML=t[3]},p(n,i){8&i&&(e.innerHTML=n[3])},d(n){n&&Q(e)}}}function lw(t){let e;return{c(){e=dt("span"),T(e,"class",t[11])},m(n,i){et(n,e,i),e.innerHTML=t[0]},p(n,i){1&i&&(e.innerHTML=n[0]),2048&i&&T(e,"class",n[11])},i:Xe,o:Xe,d(n){n&&Q(e)}}}function cw(t){let e,n,i;return n=new qr({props:{items:t[0]}}),{c(){e=dt("span"),Ot(n.$$.fragment),T(e,"class",t[11])},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};1&o&&(a.items=r[0]),n.$set(a),(!i||2048&o)&&T(e,"class",r[11])},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function uw(t){let e,n,i,r,o,a;const s=t[27].default,l=hr(s,t,t[29],null),c=l||function(u){let d,p,h,f,g,$,y=u[3]&&l$(u);const v=[cw,lw],w=[];function S(R,M){return 1&M&&(h=null),h==null&&(h=!!Mi(R[0])),h?0:1}return f=S(u,-1),g=w[f]=v[f](u),{c(){d=dt("span"),y&&y.c(),p=he(),g.c(),T(d,"class",u[13])},m(R,M){et(R,d,M),y&&y.m(d,null),St(d,p),w[f].m(d,null),$=!0},p(R,M){R[3]?y?(y.p(R,M),8&M&&I(y,1)):(y=l$(R),y.c(),I(y,1),y.m(d,p)):y&&(Ie(),z(y,1,1,()=>{y=null}),Re());let B=f;f=S(R,M),f===B?w[f].p(R,M):(Ie(),z(w[B],1,1,()=>{w[B]=null}),Re(),g=w[f],g?g.p(R,M):(g=w[f]=v[f](R),g.c()),I(g,1),g.m(d,null)),(!$||8192&M)&&T(d,"class",R[13])},i(R){$||(I(y),I(g),$=!0)},o(R){z(y),z(g),$=!1},d(R){R&&Q(d),y&&y.d(),w[f].d()}}}(t);return{c(){e=dt("button"),c&&c.c(),T(e,"type",t[6]),e.disabled=t[5],T(e,"class",t[12]),T(e,"title",n=ep(t[0],t[1],t[2]))},m(u,d){et(u,e,d),c&&c.m(e,null),t[28](e),r=!0,o||(a=[At(e,"keydown",function(){Mn(t[8])&&t[8].apply(this,arguments)}),At(e,"click",function(){Mn(t[7])&&t[7].apply(this,arguments)}),At(e,"pointerdown",function(){Mn(t[14])&&t[14].apply(this,arguments)}),Pn(i=ws.call(null,e,t[4])),Pn(t[9].call(null,e))],o=!0)},p(u,[d]){t=u,l?l.p&&(!r||536870912&d)&&gr(l,s,t,t[29],r?mr(s,t[29],d,null):fr(t[29]),null):c&&c.p&&(!r||10249&d)&&c.p(t,r?d:-1),(!r||64&d)&&T(e,"type",t[6]),(!r||32&d)&&(e.disabled=t[5]),(!r||4096&d)&&T(e,"class",t[12]),(!r||7&d&&n!==(n=ep(t[0],t[1],t[2])))&&T(e,"title",n),i&&Mn(i.update)&&16&d&&i.update.call(null,t[4])},i(u){r||(I(c,u),r=!0)},o(u){z(c,u),r=!1},d(u){u&&Q(e),c&&c.d(u),t[28](null),o=!1,Kn(a)}}}function dw(t,e,n){let i,r,o,a,s,l,{$$slots:c={},$$scope:u}=e,{class:d}=e,{label:p}=e,{title:h}=e,{shortcut:f}=e,{labelClass:g}=e,{innerClass:$}=e,{hideLabel:y=!1}=e,{icon:v}=e,{style:w}=e,{disabled:S}=e,{type:R="button"}=e,{onclick:M}=e,{onkeydown:B}=e,{onhold:C}=e,{action:D=()=>{}}=e,{holdThreshold:O=500}=e,{holdSpeedUpFactor:P=.5}=e,{holdSpeedMin:b=20}=e;const W=k=>{n(25,l=setTimeout(()=>{C(),W(Math.max(k*P,b))},k))};let nt;return t.$$set=k=>{"class"in k&&n(15,d=k.class),"label"in k&&n(0,p=k.label),"title"in k&&n(1,h=k.title),"shortcut"in k&&n(2,f=k.shortcut),"labelClass"in k&&n(16,g=k.labelClass),"innerClass"in k&&n(17,$=k.innerClass),"hideLabel"in k&&n(18,y=k.hideLabel),"icon"in k&&n(3,v=k.icon),"style"in k&&n(4,w=k.style),"disabled"in k&&n(5,S=k.disabled),"type"in k&&n(6,R=k.type),"onclick"in k&&n(7,M=k.onclick),"onkeydown"in k&&n(8,B=k.onkeydown),"onhold"in k&&n(19,C=k.onhold),"action"in k&&n(9,D=k.action),"holdThreshold"in k&&n(20,O=k.holdThreshold),"holdSpeedUpFactor"in k&&n(21,P=k.holdSpeedUpFactor),"holdSpeedMin"in k&&n(22,b=k.holdSpeedMin),"$$scope"in k&&n(29,u=k.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&n(26,r=C?()=>{l&&(clearTimeout(l),n(25,l=void 0),document.documentElement.removeEventListener("pointerup",r))}:pe),68681728&t.$$.dirty&&n(14,i=C?()=>{document.documentElement.addEventListener("pointerup",r),W(O)}:pe),131072&t.$$.dirty&&n(13,o=yn(["PinturaButtonInner",$])),294912&t.$$.dirty&&n(12,a=yn(["PinturaButton",y&&"PinturaButtonIconOnly",d])),327680&t.$$.dirty&&n(11,s=yn([y?"implicit":"PinturaButtonLabel",g]))},[p,h,f,v,w,S,R,M,B,D,nt,s,a,o,i,d,g,$,y,C,O,P,b,k=>hb(k,nt),()=>nt,l,r,c,function(k){jn[k?"unshift":"push"](()=>{nt=k,n(10,nt)})},u]}class ks extends pn{constructor(e){super(),dn(this,e,dw,uw,ln,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var wb=(t,e)=>{const n=t.findIndex(e);if(n>=0)return t.splice(n,1)};const pw=80;var tl=(t,e={})=>{const{inertia:n=!1,inertiaDurationMultiplier:i=pw,shouldStartInteraction:r=()=>!0,pinch:o=!1,multiTouch:a,getEventPosition:s=lt=>ot(lt.clientX,lt.clientY),observeKeys:l=!1}=e;function c(lt,Ct){t.dispatchEvent(new CustomEvent(lt,{detail:Ct}))}function u(){M&&M(),M=void 0}const d=[],p=lt=>lt.timeStamp===0?Date.now():lt.timeStamp,h=()=>{const lt=We(d[0].position);if(d[1]){const Ct=.5*(d[1].position.x-lt.x),it=.5*(d[1].position.y-lt.y);lt.x+=Ct,lt.y+=it}return lt},f=lt=>{lt.origin.x=lt.position.x,lt.origin.y=lt.position.y,lt.translation.x=0,lt.translation.y=0},g=lt=>{const Ct=(it=>d.findIndex(vt=>vt.event.pointerId===it.pointerId))(lt);if(!(Ct<0))return d[Ct]},$=()=>d.length===1,y=()=>d.length===2,v=lt=>{const Ct=ia(lt.map(it=>it.position));return{center:Ct,distance:((it,vt)=>it.reduce((K,Ft)=>K+Po(vt,Ft.position),0)/it.length)(lt,Ct),velocity:ia(lt.map(it=>it.velocity)),translation:ia(lt.map(it=>it.translation))}};let w,S,R,M,B,C,D,O,P=0,b;t.addEventListener("pointerdown",j);const W=["Meta","Control","Alt","Shift"];function nt(lt){if(!W.includes(lt.key))return;const{metaKey:Ct,ctrlKey:it,altKey:vt,shiftKey:K}=lt;N({metaKey:Ct,ctrlKey:it,altKey:vt,shiftKey:K})}let k=Date.now();const N=lt=>{const Ct=We(d[0].translation);let it=D;o&&y()&&(it*=Po(d[0].position,d[1].position)/B,Wi(Ct,d[1].translation)),Wi(Ct,C);const vt=Date.now();vt-k<16||(k=vt,c("interactionupdate",{position:h(),translation:Ct,scalar:o?it:void 0,isMultiTouching:y(),...lt}))};function j(lt){if(!y()&&!(Ct=>Ze(Ct.button)&&Ct.button!==0)(lt)&&r(lt,t)){if(u(),(Ct=>{const it=p(Ct),vt={timeStamp:it,timeStampInitial:it,position:s(Ct),origin:s(Ct),velocity:ui(),velocityHistory:[],velocityAverage:ui(),translation:ui(),interactionState:void 0,event:Ct};d.push(vt),vt.interactionState=v(d)})(lt),l&&(window.addEventListener("keydown",nt),window.addEventListener("keyup",nt)),$())document.documentElement.addEventListener("pointermove",ut),document.documentElement.addEventListener("pointerup",Z),document.documentElement.addEventListener("pointercancel",Z),document.addEventListener("visibilitychange",q),O=!1,D=1,C=ui(),B=void 0,c("interactionstart",{origin:We(g(lt).origin)});else if(o)O=!0,B=Po(d[0].position,d[1].position),C.x+=d[0].translation.x,C.y+=d[0].translation.y,f(d[0]);else if(a===!1)return d.length=0,xt(),c("interactioncancel")}}function ut(lt){lt.preventDefault(),(Ft=>{const Ht=g(Ft);if(!Ht)return;const Lt=p(Ft),bt=s(Ft),_t=Math.max(1,Lt-Ht.timeStamp);Ht.velocity.x=(bt.x-Ht.position.x)/_t,Ht.velocity.y=(bt.y-Ht.position.y)/_t,Ht.velocityHistory.push(We(Ht.velocity)),Ht.velocityHistory=Ht.velocityHistory.slice(-3),Ht.velocityAverage=Ht.velocityHistory.reduce((rt,Tt,Vt,mt)=>(rt.x+=Tt.x/mt.length,rt.y+=Tt.y/mt.length,rt),ui()),Ht.translation.x=bt.x-Ht.origin.x,Ht.translation.y=bt.y-Ht.origin.y,Ht.timeStamp=Lt,Ht.position.x=bt.x,Ht.position.y=bt.y,Ht.event=Ft})(lt);const{metaKey:Ct=!1,ctrlKey:it=!1,altKey:vt=!1,shiftKey:K=!1}=l?lt:{};N({metaKey:Ct,ctrlKey:it,altKey:vt,shiftKey:K})}function Z(lt){if(!g(lt))return;const Ct=h(),it=(_t=>{const rt=wb(d,Tt=>Tt.event.pointerId===_t.pointerId);if(rt)return rt[0]})(lt);if(o&&$()){const _t=Po(d[0].position,it.position);D*=_t/B,C.x+=d[0].translation.x+it.translation.x,C.y+=d[0].translation.y+it.translation.y,f(d[0])}let vt=!1,K=!1;if(!O&&it){const _t=performance.now(),rt=_t-it.timeStampInitial;vt=Vo(it.translation)<64&&rt<300,K=!!(b&&vt&&_t-P<700&&Vo(b,it.position)<128),vt&&(b=We(it.position),P=_t)}if(d.length>0)return;xt();const Ft=We(it.translation),Ht=We(it.velocityAverage);let Lt=!1;c("interactionrelease",{isTap:vt,isDoubleTap:K,position:Ct,translation:Ft,scalar:D,preventInertia:()=>Lt=!0});const bt=Po(Ht);if(Lt||!n||bt<.25)return ht(Ft,{isTap:vt,isDoubleTap:K});S=We(Ct),R=We(Ft),w=T0(We(Ft),{easing:m3,duration:bt*i}),w.set({x:Ft.x+50*Ht.x,y:Ft.y+50*Ht.y}).then(()=>{M&&ht(Da(w),{isTap:vt,isDoubleTap:K})}),M=w.subscribe(ft)}function ft(lt){lt&&c("interactionupdate",{position:ot(S.x+(lt.x-R.x),S.y+(lt.y-R.y)),translation:lt,scalar:o?D:void 0})}function q(lt){if(document.visibilityState==="visible"||!d.length)return;const Ct=v(d);u(),c("interactionend",{...Ct}),d.length=0,xt()}function ht(lt,Ct){u(),c("interactionend",{...Ct,translation:lt,scalar:o?D:void 0})}function xt(){l&&window.removeEventListener("keydown",nt),l&&window.removeEventListener("keyup",nt),document.documentElement.removeEventListener("pointermove",ut),document.documentElement.removeEventListener("pointerup",Z),document.documentElement.removeEventListener("pointercancel",Z),document.addEventListener("visibilitychange",q)}return{destroy(){u(),t.removeEventListener("pointerdown",j)}}};function Os(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const c$=(t,e,n)=>{if(!e||!n)return{...t};const i=t.x+Os(e.x-t.x,n),r=t.x+t.width+Os(e.x+e.width-(t.x+t.width),n),o=t.y+Os(e.y-t.y,n);return{x:i,y:o,width:r-i,height:t.y+t.height+Os(e.y+e.height-(t.y+t.height),n)-o}},hw=(t,e,n)=>e&&n?ot(t.x+Os(e.x-t.x,n),t.y+Os(e.y-t.y,n)):{...t};var Sb=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},hp=(t,e)=>{let n=t.detail||0;const{deltaX:i,deltaY:r,wheelDelta:o,wheelDeltaX:a,wheelDeltaY:s}=t,{fixScrollDirection:l=!1}=e||{};return Ze(a)&&Math.abs(a)>Math.abs(s)?n=a/-120:Ze(i)&&Math.abs(i)>Math.abs(r)?n=i/20:(o||s)&&(n=(o||s)/-120),n||(n=r/20),(Ba()||Oa())&&(n*=2),l&&sp()&&(n*=-1),n};function mw(t){let e,n,i,r,o,a,s;const l=t[38].default,c=hr(l,t,t[37],null);return{c(){e=dt("div"),n=dt("div"),c&&c.c(),Et(n,"transform",t[6]),T(e,"class",i=yn(["PinturaScrollable",t[0]])),T(e,"data-direction",t[1]),T(e,"data-state",t[7]),Et(e,"--scrollable-feather-start-opacity",t[4]),Et(e,"--scrollable-feather-end-opacity",t[5])},m(u,d){et(u,e,d),St(e,n),c&&c.m(n,null),t[40](e),o=!0,a||(s=[At(n,"interactionstart",t[10]),At(n,"interactionupdate",t[12]),At(n,"interactionend",t[13]),At(n,"interactionrelease",t[11]),Pn(tl.call(null,n,{inertia:!0})),At(n,"measure",t[39]),Pn(Ir.call(null,n)),At(e,"wheel",t[15],{passive:!1}),At(e,"scroll",t[17]),At(e,"focusin",t[16]),At(e,"nudge",t[18]),At(e,"measure",t[14]),Pn(Ir.call(null,e,{observePosition:!0})),Pn(r=Qs.call(null,e,{direction:t[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(u,d){c&&c.p&&(!o||64&d[1])&&gr(c,l,u,u[37],o?mr(l,u[37],d,null):fr(u[37]),null),64&d[0]&&Et(n,"transform",u[6]),(!o||1&d[0]&&i!==(i=yn(["PinturaScrollable",u[0]])))&&T(e,"class",i),(!o||2&d[0])&&T(e,"data-direction",u[1]),(!o||128&d[0])&&T(e,"data-state",u[7]),r&&Mn(r.update)&&2&d[0]&&r.update.call(null,{direction:u[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}),16&d[0]&&Et(e,"--scrollable-feather-start-opacity",u[4]),32&d[0]&&Et(e,"--scrollable-feather-end-opacity",u[5])},i(u){o||(I(c,u),o=!0)},o(u){z(c,u),o=!1},d(u){u&&Q(e),c&&c.d(u),t[40](null),a=!1,Kn(s)}}}function gw(t,e,n){let i,r,o,a,s,l,c,u,d,{$$slots:p={},$$scope:h}=e;const f=_a();let g,$,y,v,w="idle",S=hn(0);F(t,S,K=>n(36,u=K));let{class:R}=e,{scrollBlockInteractionDist:M=5}=e,{scrollStep:B=10}=e,{scrollFocusMargin:C=64}=e,{scrollDirection:D="x"}=e,{scrollAutoCancel:O=!1}=e,{elasticity:P=0}=e,{onscroll:b=pe}=e,{maskFeatherSize:W}=e,{maskFeatherStartOpacity:nt}=e,{maskFeatherEndOpacity:k}=e,{scroll:N}=e;const j=mi("fixScrollDirection");let ut;F(t,j,K=>n(47,d=K));let Z,ft,q=!0;const ht=S.subscribe(K=>{const Ft=ui();Ft[D]=K,b(Ft)}),xt=K=>Math.max(Math.min(0,K),y[i]-$[i]);let lt,Ct,it;const vt=(K,Ft={})=>{const{elastic:Ht=!1,animate:Lt=!1,preventScrollState:bt=!1}=Ft;Math.abs(K-g)>M&&w==="idle"&&!v&&!bt&&n(29,w="scrolling");const _t=xt(K),rt=Ht&&P&&!v?_t+Os(K-_t,P):_t;let Tt=!0;Lt?Tt=!1:q||(Tt=!v),q=!1,S.set(rt,{hard:Tt}).then(Vt=>{v&&(q=!0)})};return aa(()=>{ht()}),t.$$set=K=>{"class"in K&&n(0,R=K.class),"scrollBlockInteractionDist"in K&&n(22,M=K.scrollBlockInteractionDist),"scrollStep"in K&&n(23,B=K.scrollStep),"scrollFocusMargin"in K&&n(24,C=K.scrollFocusMargin),"scrollDirection"in K&&n(1,D=K.scrollDirection),"scrollAutoCancel"in K&&n(25,O=K.scrollAutoCancel),"elasticity"in K&&n(26,P=K.elasticity),"onscroll"in K&&n(27,b=K.onscroll),"maskFeatherSize"in K&&n(21,W=K.maskFeatherSize),"maskFeatherStartOpacity"in K&&n(19,nt=K.maskFeatherStartOpacity),"maskFeatherEndOpacity"in K&&n(20,k=K.maskFeatherEndOpacity),"scroll"in K&&n(28,N=K.scroll),"$$scope"in K&&n(37,h=K.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(33,i=D==="x"?"width":"height"),2&t.$$.dirty[0]&&n(31,r=D.toUpperCase()),8&t.$$.dirty[0]&&n(35,o=ut&&getComputedStyle(ut)),8&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(34,a=o&&Sb(o.getPropertyValue("--scrollable-feather-size"))),1075314692&t.$$.dirty[0]|44&t.$$.dirty[1]&&u!=null&&y&&a!=null&&$){const K=-1*u/a,Ft=-(y[i]-$[i]-u)/a;n(19,nt=si(1-K,0,1)),n(20,k=si(1-Ft,0,1)),n(21,W=a),n(4,Z=nt),n(5,ft=k)}268435464&t.$$.dirty[0]&&ut&&N!==void 0&&(Ze(N)?vt(N):vt(N.scrollOffset,N)),1073741828&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(32,s=y&&$?$[i]>y[i]:void 0),536870912&t.$$.dirty[0]|2&t.$$.dirty[1]&&n(7,l=yn([w,s?"overflows":void 0])),35&t.$$.dirty[1]&&n(6,c=s?`translate${r}(${u}px)`:"none")},[R,D,$,ut,Z,ft,c,l,S,j,()=>{s&&(Ct=!1,lt=!0,it=ot(0,0),v=!1,n(29,w="idle"),g=Da(S))},({detail:K})=>{s&&(v=!0,n(29,w="idle"))},({detail:K})=>{s&&(Ct||lt&&(lt=!1,Vo(K.translation)<.1)||(!O||D!=="x"||(Ft=>{const Ht=Uo(ot(Ft.x-it.x,Ft.y-it.y),Math.abs);it=We(Ft);const Lt=Vo(Ht),bt=Ht.x-Ht.y;return!(Lt>1&&bt<-.5)})(K.translation)?vt(g+K.translation[D],{elastic:!0}):Ct=!0))},({detail:K})=>{if(!s||Ct)return;const Ft=g+K.translation[D],Ht=xt(Ft);q=!1,S.set(Ht).then(Lt=>{v&&(q=!0)})},({detail:K})=>{n(30,y=K),f("measure",{x:K.x,y:K.y,width:K.width,height:K.height})},K=>{if(!s)return;K.preventDefault(),K.stopPropagation();const Ft=K.shiftKey,Ht=hp(K,{fixScrollDirection:d})*(Ft?-1:1),Lt=Da(S);vt(Lt+Ht*B,{animate:!0})},K=>{if(!s||!v)return;let Ft=K.target;K.target.classList.contains("implicit")&&(Ft=Ft.parentNode);const Ht=Ft[D==="x"?"offsetLeft":"offsetTop"],Lt=Ht+Ft[D==="x"?"offsetWidth":"offsetHeight"],bt=Da(S),_t=C+W;bt+Ht<_t?vt(-Ht+_t):bt+Lt>y[i]-_t&&vt(y[i]-Lt-_t,{animate:!0})},()=>{n(3,ut[D==="x"?"scrollLeft":"scrollTop"]=0,ut)},({detail:K})=>{if(ut.querySelector("[data-focus-visible]"))return;const Ft=-2*K[D],Ht=Da(S);vt(Ht+Ft*B,{animate:!0,preventScrollState:!0})},nt,k,W,M,B,C,O,P,b,N,w,y,r,s,i,a,o,u,h,p,K=>n(2,$=K.detail),function(K){jn[K?"unshift":"push"](()=>{ut=K,n(3,ut)})}]}class Va extends pn{constructor(e){super(),dn(this,e,gw,mw,ln,{class:0,scrollBlockInteractionDist:22,scrollStep:23,scrollFocusMargin:24,scrollDirection:1,scrollAutoCancel:25,elasticity:26,onscroll:27,maskFeatherSize:21,maskFeatherStartOpacity:19,maskFeatherEndOpacity:20,scroll:28},null,[-1,-1])}}function fw(t){let e,n,i,r,o;return{c(){e=dt("span"),T(e,"class","PinturaStatusMessage")},m(a,s){et(a,e,s),e.innerHTML=t[0],i=!0,r||(o=[At(e,"measure",function(){Mn(t[1])&&t[1].apply(this,arguments)}),Pn(Ir.call(null,e))],r=!0)},p(a,[s]){t=a,(!i||1&s)&&(e.innerHTML=t[0])},i(a){i||(cc(()=>{n||(n=Og(e,t[4],{duration:t[2]},!0)),n.run(1)}),i=!0)},o(a){n||(n=Og(e,t[4],{duration:t[2]},!1)),n.run(0),i=!1},d(a){a&&Q(e),a&&n&&n.end(),r=!1,Kn(o)}}}function $w(t,e,n){let i,r,{text:o}=e,{onmeasure:a=pe}=e;const s=mi("isAnimated");return F(t,s,l=>n(5,r=l)),t.$$set=l=>{"text"in l&&n(0,o=l.text),"onmeasure"in l&&n(1,a=l.onmeasure)},t.$$.update=()=>{32&t.$$.dirty&&n(2,i=r?500:0)},[o,a,i,s,function(l,{duration:c}){return{duration:c,tick:u=>{l.style.opacity=u}}},r]}class kb extends pn{constructor(e){super(),dn(this,e,$w,fw,ln,{text:0,onmeasure:1})}}function yw(t){let e,n,i;const r=t[5].default,o=hr(r,t,t[4],null);return{c(){e=dt("span"),o&&o.c(),T(e,"class",n="PinturaStatusAside "+t[1]),Et(e,"transform",t[2]),Et(e,"opacity",t[0])},m(a,s){et(a,e,s),o&&o.m(e,null),i=!0},p(a,[s]){o&&o.p&&(!i||16&s)&&gr(o,r,a,a[4],i?mr(r,a[4],s,null):fr(a[4]),null),(!i||2&s&&n!==(n="PinturaStatusAside "+a[1]))&&T(e,"class",n),4&s&&Et(e,"transform",a[2]),1&s&&Et(e,"opacity",a[0])},i(a){i||(I(o,a),i=!0)},o(a){z(o,a),i=!1},d(a){a&&Q(e),o&&o.d(a)}}}function bw(t,e,n){let i,{$$slots:r={},$$scope:o}=e,{offset:a=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=c=>{"offset"in c&&n(3,a=c.offset),"opacity"in c&&n(0,s=c.opacity),"class"in c&&n(1,l=c.class),"$$scope"in c&&n(4,o=c.$$scope)},t.$$.update=()=>{8&t.$$.dirty&&n(2,i=`translateX(${a}px)`)},[s,l,i,a,o,r]}class Cb extends pn{constructor(e){super(),dn(this,e,bw,yw,ln,{offset:3,opacity:0,class:1})}}let uh=null;var xw=t=>{if(uh===null&&(uh=Mr()&&"visualViewport"in window),!uh)return!1;const e=visualViewport.height,n=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",n),()=>visualViewport.removeEventListener("resize",n)};function u$(t){let e,n;const i=[{onclick:t[1]},t[3]];let r={};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new ks({props:r}),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=10&a[0]?Pr(i,[2&a[0]&&{onclick:o[1]},8&a[0]&&Or(o[3])]):{};e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function d$(t){let e,n;const i=[{onclick:t[0]},{class:"PinturaInputFormButtonConfirm"},t[2]];let r={};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new ks({props:r}),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=5&a[0]?Pr(i,[1&a[0]&&{onclick:o[0]},i[1],4&a[0]&&Or(o[2])]):{};e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function vw(t){let e,n,i,r,o,a,s,l,c=t[3]&&u$(t);const u=t[28].default,d=hr(u,t,t[27],null);let p=t[2]&&d$(t);return{c(){e=dt("div"),n=dt("div"),c&&c.c(),i=he(),r=dt("div"),d&&d.c(),o=he(),p&&p.c(),T(r,"class","PinturaInputFormFields"),T(n,"class","PinturaInputFormInner"),T(e,"class","PinturaInputForm"),T(e,"data-layout",t[4]),Et(e,"opacity",t[6]),Et(e,"left",t[7]),Et(e,"top",t[8]),Et(e,"right",t[9]),Et(e,"bottom",t[10])},m(h,f){et(h,e,f),St(e,n),c&&c.m(n,null),St(n,i),St(n,r),d&&d.m(r,null),St(n,o),p&&p.m(n,null),t[29](e),a=!0,s||(l=[At(r,"keydown",t[14]),At(e,"focusin",t[11]),At(e,"focusout",t[12]),At(e,"measure",t[13]),Pn(Ir.call(null,e))],s=!0)},p(h,f){h[3]?c?(c.p(h,f),8&f[0]&&I(c,1)):(c=u$(h),c.c(),I(c,1),c.m(n,i)):c&&(Ie(),z(c,1,1,()=>{c=null}),Re()),d&&d.p&&(!a||134217728&f[0])&&gr(d,u,h,h[27],a?mr(u,h[27],f,null):fr(h[27]),null),h[2]?p?(p.p(h,f),4&f[0]&&I(p,1)):(p=d$(h),p.c(),I(p,1),p.m(n,null)):p&&(Ie(),z(p,1,1,()=>{p=null}),Re()),(!a||16&f[0])&&T(e,"data-layout",h[4]),64&f[0]&&Et(e,"opacity",h[6]),128&f[0]&&Et(e,"left",h[7]),256&f[0]&&Et(e,"top",h[8]),512&f[0]&&Et(e,"right",h[9]),1024&f[0]&&Et(e,"bottom",h[10])},i(h){a||(I(c),I(d,h),I(p),a=!0)},o(h){z(c),z(d,h),z(p),a=!1},d(h){h&&Q(e),c&&c.d(),d&&d.d(h),p&&p.d(),t[29](null),s=!1,Kn(l)}}}function ww(t,e,n){let i,r,o,a,s,{$$slots:l={},$$scope:c}=e,{onconfirm:u}=e,{oncancel:d}=e,{autoFocus:p=!0}=e,{autoPositionCursor:h=!0}=e,{buttonConfirm:f}=e,{buttonCancel:g}=e,{layout:$="stack"}=e,{parentRect:y}=e,{align:v}=e,{justify:w}=e,{parentMargin:S=16}=e,{panelOffset:R=ui()}=e,M=!1,B,C,D={top:void 0,bottom:void 0},O=0,P,b,W,nt;const k=()=>{const Z=s.querySelector("input, textarea");Z.focus(),O>=1||Z.select()},N=()=>{M=!0,ut||!ba()&&!rp()||n(23,D={top:"1em",bottom:"auto"}),ba()&&(Z=>{let ft;const q=xt=>ft=xt.touches[0].screenY,ht=xt=>{const lt=xt.touches[0].screenY,Ct=xt.target;/textarea/i.test(Ct.nodeName)?(lt>ft?Ct.scrollTop==0&&xt.preventDefault():lt<ft?Ct.scrollTop+Ct.offsetHeight==Ct.scrollHeight&&xt.preventDefault():xt.preventDefault(),ft=lt):xt.preventDefault()};Z.addEventListener("touchstart",q),Z.addEventListener("touchmove",ht)})(s),n(6,O=1)};let j;const ut=xw(Z=>{a?Z!=="hidden"||M?(clearTimeout(C),C=void 0,n(23,D={top:visualViewport.height-B.height-R.y+"px"}),Z==="visible"?(n(5,s.dataset.stick=!0,s),k(),N()):(M=!1,n(6,O=0))):k():n(23,D={top:"4.5em",bottom:"auto"})});return qs(()=>{p&&k()}),aa(()=>{ut&&ut()}),t.$$set=Z=>{"onconfirm"in Z&&n(0,u=Z.onconfirm),"oncancel"in Z&&n(1,d=Z.oncancel),"autoFocus"in Z&&n(15,p=Z.autoFocus),"autoPositionCursor"in Z&&n(16,h=Z.autoPositionCursor),"buttonConfirm"in Z&&n(2,f=Z.buttonConfirm),"buttonCancel"in Z&&n(3,g=Z.buttonCancel),"layout"in Z&&n(4,$=Z.layout),"parentRect"in Z&&n(17,y=Z.parentRect),"align"in Z&&n(18,v=Z.align),"justify"in Z&&n(19,w=Z.justify),"parentMargin"in Z&&n(20,S=Z.parentMargin),"panelOffset"in Z&&n(21,R=Z.panelOffset),"$$scope"in Z&&n(27,c=Z.$$scope)},t.$$.update=()=>{4325376&t.$$.dirty[0]&&n(26,i=y&&B),73269248&t.$$.dirty[0]&&n(25,r=i?((Z,ft,q,ht,xt)=>{let lt,Ct;return lt=ht==="center"?Z.x+.5*Z.width-.5*ft.width:ht==="right"?Z.x+Z.width-ft.width-xt:Z.x+xt,Ct=q==="center"?Z.y+.5*Z.height-.5*ft.height:q==="bottom"?Z.y+Z.height-ft.height-xt:Z.y+xt,{top:Ct+"px",right:"auto",bottom:"auto",left:lt+"px"}})(y,B,v,w,S):void 0),100663296&t.$$.dirty[0]&&n(7,P=i?r.left:void 0),109051904&t.$$.dirty[0]&&n(8,b=i?r.top:D.top),100663296&t.$$.dirty[0]&&n(9,W=i?r.right:void 0),109051904&t.$$.dirty[0]&&n(10,nt=i?r.bottom:D.bottom),32&t.$$.dirty[0]&&n(24,o=s&&getComputedStyle(s)),16777216&t.$$.dirty[0]&&(a=o&&o.getPropertyValue("--editor-modal")==="1")},[u,d,f,g,$,s,O,P,b,W,nt,Z=>{var ft;((q=>/textarea/i.test(q))(Z.target)||gb(Z.target))&&(j=Date.now(),h&&((ft=Z.target).selectionStart=ft.selectionEnd=ft.value.length),clearTimeout(C),C=setTimeout(N,200))},Z=>{Date.now()-j>50||(Z.stopPropagation(),k())},({detail:Z})=>{n(22,B={width:Z.width,height:Z.height})},Z=>Z.key==="Enter"?u():Z.key==="Escape"?d():void 0,p,h,y,v,w,S,R,B,D,o,r,i,c,l,function(Z){jn[Z?"unshift":"push"](()=>{s=Z,n(5,s)})}]}class Tb extends pn{constructor(e){super(),dn(this,e,ww,vw,ln,{onconfirm:0,oncancel:1,autoFocus:15,autoPositionCursor:16,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:17,align:18,justify:19,parentMargin:20,panelOffset:21},null,[-1,-1])}}var p$=(t,e)=>{t.fastSeek&&t.fastSeek(e),t.currentTime=e};const Sw=["aspectRatio","isRotatedSideways","flip","cropSize"],h$=v0.map(([t])=>t).filter(t=>!Sw.includes(t));var zs=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),Mb=(t,e)=>(e?Ns(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),m$=(t,e=ri)=>{const{subscribe:n,set:i}=fe(void 0);return{subscribe:n,destroy:((r,o)=>{const a=matchMedia(r);return a.addListener(o),o(a),{get matches(){return a.matches},destroy:()=>a.removeListener(o)}})(t,({matches:r})=>i(e(r))).destroy}},g$=(t,e,n)=>new Promise((i,r)=>{(async()=>{mc(t)&&i(await nb(t));const o=await e.read(t),a=l=>Hy(l,n).then(c=>e.apply(c,o)).then(i).catch(r);if(jy(t)||!Uy()||Oa()||ba())return a(t);let s;try{s=await hu((l,c)=>createImageBitmap(l).then(u=>c(null,u)).catch(c),[t])}catch{}s&&s.width?await ip()?C0()&&o>1?i(await(async l=>pu(await pc(l)))(s)):i(s):i(e.apply(s,o)):a(t)})()}),f$=(t,e)=>new Promise(async n=>{if(t.width<e.width&&t.height<e.height)return n(t);const i=Math.min(e.width/t.width,e.height/t.height),r=i*t.width,o=i*t.height,a=Ci("canvas",{width:r,height:o}),s=a.getContext("2d",{willReadFrequently:!0}),l=oc(t)?await pc(t):t;s.drawImage(l,0,0,r,o),n(pu(a))});let dh=null;var kw=()=>{if(dh===null){let t=Ci("canvas");dh=!!cp(t),ar(t),t=void 0}return dh};const $$=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Sl={precision:1e-4},Pd={precision:.01*Sl.precision};var Cw=()=>{const t=[],e=[],n=[],i=()=>{e.forEach(o=>o(n))},r=o=>{o.unsub=o.subscribe(a=>((s,l)=>{const c=t.indexOf(s);c<0||(n[c]=l,i())})(o,a)),i()};return{get length(){return t.length},clear:()=>{t.forEach(o=>o.unsub()),t.length=0,n.length=0},unshift:o=>{t.unshift(o),r(o)},get:o=>t[o],push:o=>{t.push(o),r(o)},remove:o=>{o.unsub();const a=t.indexOf(o);t.splice(a,1),n.splice(a,1)},forEach:o=>t.forEach(o),filter:o=>t.filter(o),subscribe:o=>(e.push(o),o(n),()=>{e.splice(e.indexOf(o),1)})}},ph=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,Pb=(t={})=>new Promise(e=>{const{accept:n="image/*"}=t,i=Ci("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:n}),r=()=>{const[o]=i.files;i.parentNode&&i.remove(),i.removeEventListener("change",r),e(o)};i.addEventListener("change",r),ba()&&document.body.append(i),i.click()}),uu=t=>{try{return t()}catch(e){console.error(e)}},Tw=([t,e])=>t+.5*(e-t),js=t=>Math.round(100*t),L0=t=>ot(t.clientX,t.clientY),Oh=(t,e,n)=>{const i=L0(t);return Ni(Ni(i,e),n)};function Mw(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,{root:C}=e,{locale:D}=e,{stores:O}=e,{allowPan:P=!0}=e,{allowZoom:b=!0}=e,{enablePan:W=!0}=e,{enableZoom:nt=!0}=e,{enableZoomControls:k=nt}=e,{enableZoomInput:N=!0}=e,{enablePanInput:j=!0}=e,{enablePanLimit:ut=!0}=e,{panLimitGutterScalar:Z=0}=e,{zoomOptions:ft=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:q=.25}=e,{zoomAdjustFactor:ht=.1}=e,{zoomAdjustWheelFactor:xt=1}=e,{elasticity:lt=5}=e,{imageSelectionRectCentered:Ct}=e,{imageSelectionRectScalar:it}=e,{zoomLevel:vt=null}=e,{zoomControls:K}=e,{zoomMultiTouching:Ft=!1}=e;const{isAnimated:Ht,isInteracting:Lt,rootRect:bt,stageRect:_t,stageScalar:rt,imageSelectionPan:Tt,imageSelectionZoom:Vt,imageSelectionStageFitScalar:mt,imageSelectionRect:at,imageSelectionStoredState:$t,imagePreviewUpscale:te}=O;F(t,Ht,X=>n(70,M=X)),F(t,Lt,X=>n(69,S=X)),F(t,bt,X=>n(66,y=X)),F(t,_t,X=>n(65,$=X)),F(t,rt,X=>n(46,R=X)),F(t,Tt,X=>n(64,h=X)),F(t,Vt,X=>n(43,p=X)),F(t,mt,X=>n(44,f=X)),F(t,at,X=>n(67,v=X)),F(t,$t,X=>n(71,B=X)),F(t,te,X=>n(45,g=X));const le=mi("fixScrollDirection");F(t,le,X=>n(68,w=X));let Wt=!1,we,yt,ie,V;const De=X=>{const oe=C.querySelector(".PinturaMain > .PinturaUtilMain")||C.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!oe&&!!oe.contains(X.target)&&!cu(X.target)},Le=(X={})=>{const{pan:oe=h,zoom:Zt=p}=X;kt($t,B={translation:oe,zoom:Zt},B)},qt=()=>h&&h.x===0&&h.y===0,$e=()=>{kt(Vt,p=void 0,p),qt()||kt(Tt,h=ui(),h),Be.set(void 0,{hard:!0})},Me=()=>{$e(),Le()},Be=hn(void 0,{precision:.01});Be.subscribe(X=>{if(X===void 0)return kt(Vt,p=void 0,p),void(qt()||kt(Tt,h=ui(),h));const oe=p;X<=1?qt()||kt(Tt,h=ui(),h):X<=oe&&kt(Tt,h=Br(h,.8),h),kt(Vt,p=X,p)});const mn=X=>{Be.update(oe=>{const Zt=X(oe||f);return Le({zoom:Zt}),Zt})},wt=X=>{X?Be.set(X,{hard:M===!1}):(X=void 0,Be.set(void 0,{hard:!0})),kt(Vt,p=X,p),Le({zoom:X})},re=(X,oe)=>{const Zt=it*oe,ee={...Ct},Je=1-si(Z,0,1);Dr(ee,Zt<Je?Zt:Je);const Fe={...Ct};Dr(Fe,Zt),ga(Fe,X);const be={...Fe};return Fe.x>ee.x&&(be.x=ee.x),Fe.y>ee.y&&(be.y=ee.y),Fe.x+Fe.width<ee.x+ee.width&&(be.x=ee.x+ee.width-Fe.width),Fe.y+Fe.height<ee.y+ee.height&&(be.y=ee.y+ee.height-Fe.height),Ni(Fn(be),Fn(ee))},on=({translation:X,zoom:oe=1,elastify:Zt=!0})=>{if(!we)return;let ee=X;const Je=ot(we.x+ee.x,we.y+ee.y);if(!ut)return Je;const Fe=re(Je,oe);return Zt?hw(Fe,Je,lt):Fe};let Ue,en;const ke=()=>{en=void 0,kt(Lt,S=!0,S),n(34,Wt=j),Ue=!1,ie=!1,we={...h},yt=g?p||f:o?p||1:p||f},qe=X=>{const{scalar:oe,translation:Zt,isMultiTouching:ee}=X.detail;if(!we||!ee&&!j)return;ee&&Br(Zt,.5),(j||ee)&&(Ue=!0),Ft||n(13,Ft=ee);const Je=i?si(yt*oe,s,l):1,Fe=on({translation:Zt,zoom:Je,elastify:!0}),be=_s(Fe);V=_s(h),ie=be<V,i&&Vt.set(Je),Tt.set(Fe),en=Ft&&{translation:X.detail.translation,scalar:oe}},vn=X=>{kt(Lt,S=!1,S),n(34,Wt=!1),n(13,Ft=!1),ie&&V<50&&(we=void 0,yt=void 0,Tt.set(ui()))},In=X=>{kt(Lt,S=!1,S),n(34,Wt=!1),n(13,Ft=!1),Promise.resolve().then(()=>{if(Ue&&we){const oe=en||X.detail,Zt=i?si(yt*oe.scalar,s,l):1,ee=on({elastify:!1,translation:oe.translation,zoom:Zt});Tt.set(ee)}we=void 0,yt=void 0,j&&X.detail.isDoubleTap&&Me(),Le()})};let Hn,Jt=Date.now(),He=0,Y=!1,Pt=!1;const H=X=>{if(!De(X)||(X.preventDefault(),X.stopPropagation(),Pt))return;clearTimeout(Hn);const oe=hp(X,{fixScrollDirection:w}),Zt=Date.now(),ee=Zt-Jt;Jt=Zt;const Je=Math.abs(oe/ee)>.2;He=Je?He+1:0;const Fe=1+-1*oe*xt/(Je?50:100),be=Oh(X,y,$);Bt(be,Fe,{isZoomingFast:Je})},Bt=(X,oe,{isZoomingFast:Zt})=>{const ee=g?p||f:o?p||1:p||f,Je=ee*oe,Fe=ui(),be=h,di=g?f:o?1:f,Ri=Math.abs(Je-di),Wn=Je<ee,_e=ee>di&&Wn||ee<di&&Je>ee,Ve=He>=5;if(Zt||(Y=!1),He>0&&!Y&&(Y=_e),Ve&&Y)return Me(),Pt=!0,void setTimeout(()=>{Pt=!1},100);if(Ve)return;!Zt&&_e&&Ri<=.05&&(Hn=setTimeout(()=>{Me()},250)),kt(Vt,p=si(Je,s,l),p);const wn=Ln(v);Dr(wn,ee),ga(wn,be);const An=Fn(wn),ae=Ln(wn);Dr(ae,p-ee+1,X);const se=Fn(ae),Rn=tg(Ni(se,An),ee);((zn,Ei,$i)=>{zn.x=Ei,zn.y=$i})(Fe,be.x+Rn.x,be.y+Rn.y),kt(Tt,h=Wn&&Zt?Br(We(h),.85):re(Fe,ee),h),Le()},ue=X=>(X?"add":"remove")+"EventListener";let Ce,me,It,Oe;const cn=X=>{X.preventDefault(),me={...h},Oe=Ln(v),It=Oh(X,y,$),Ce=g?p||f:o?p||1:p||f},rn=X=>{X.preventDefault(),kt(Vt,p=si(X.scale*Ce,s,l),p);const oe=Ln(Oe);Dr(oe,Ce),ga(oe,me);const Zt=Fn(oe),ee=Ln(oe);Dr(ee,p-Ce+1,It);const Je=Fn(ee),Fe=tg(Ni(Je,Zt),Ce),be={x:me.x+Fe.x,y:me.y+Fe.y};kt(Tt,h=re(be,p),h)},J=X=>{X.preventDefault()},jt=X=>{C[ue(X)]("wheel",H),ba()||(C[ue(X)]("gesturestart",cn),C[ue(X)]("gesturechange",rn),C[ue(X)]("gestureend",J))},Ae=X=>{const oe=ue(X);C[oe]("interactionstart",ke),C[oe]("interactionupdate",qe),C[oe]("interactionrelease",vn),C[oe]("interactionend",In)};let Se;return qs(()=>{Se=tl(C,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:De})}),aa(()=>{jt(!1),Ae(!1),Se.destroy(),Se=void 0}),t.$$set=X=>{"root"in X&&n(14,C=X.root),"locale"in X&&n(15,D=X.locale),"stores"in X&&n(16,O=X.stores),"allowPan"in X&&n(17,P=X.allowPan),"allowZoom"in X&&n(18,b=X.allowZoom),"enablePan"in X&&n(19,W=X.enablePan),"enableZoom"in X&&n(20,nt=X.enableZoom),"enableZoomControls"in X&&n(21,k=X.enableZoomControls),"enableZoomInput"in X&&n(22,N=X.enableZoomInput),"enablePanInput"in X&&n(23,j=X.enablePanInput),"enablePanLimit"in X&&n(24,ut=X.enablePanLimit),"panLimitGutterScalar"in X&&n(25,Z=X.panLimitGutterScalar),"zoomOptions"in X&&n(26,ft=X.zoomOptions),"zoomAdjustStep"in X&&n(27,q=X.zoomAdjustStep),"zoomAdjustFactor"in X&&n(28,ht=X.zoomAdjustFactor),"zoomAdjustWheelFactor"in X&&n(29,xt=X.zoomAdjustWheelFactor),"elasticity"in X&&n(30,lt=X.elasticity),"imageSelectionRectCentered"in X&&n(31,Ct=X.imageSelectionRectCentered),"imageSelectionRectScalar"in X&&n(32,it=X.imageSelectionRectScalar),"zoomLevel"in X&&n(33,vt=X.zoomLevel),"zoomControls"in X&&n(12,K=X.zoomControls),"zoomMultiTouching"in X&&n(13,Ft=X.zoomMultiTouching)},t.$$.update=()=>{var X,oe;5505024&t.$$.dirty[0]&&n(36,i=b&&nt&&N),655360&t.$$.dirty[0]&&n(35,r=P&&W),393216&t.$$.dirty[0]&&(P||b?(kt(Vt,p=nt?B.zoom:void 0,p),kt(Tt,h=W?We(B.translation):qt()?h:ui(),h),Be.set(p)):$e()),32768&t.$$.dirty[1]&&(o=R>=1),67141632&t.$$.dirty[0]|57344&t.$$.dirty[1]&&n(40,a=[(g||R<1)&&[f,js(f)+"%",{sublabel:D.labelZoomFit}],...ft.map(Zt=>[Zt,js(Zt)+"%"])].filter(Boolean).map(Zt=>(Zt[0]===1&&(Zt[2]={sublabel:D.labelZoomActual}),Zt)).sort((Zt,ee)=>{const Je=Zt[0]||f,Fe=ee[0]||f;return Je<Fe?-1:Fe<Je?1:0})),8704&t.$$.dirty[1]&&n(38,s=Math.min(a.reduce((Zt,[ee])=>ee<Zt?ee:Zt,Number.MAX_SAFE_INTEGER),f)),512&t.$$.dirty[1]&&n(37,l=a.reduce((Zt,[ee])=>ee>Zt?ee:Zt,Number.MIN_SAFE_INTEGER)),4&t.$$.dirty[1]&&vt!==null&&wt(vt),61440&t.$$.dirty[1]&&n(42,u=p||(g||R<1?f:1)),2560&t.$$.dirty[1]&&n(39,(X=a.map(([Zt])=>Zt),oe=u,c=X.findIndex(Zt=>Zt===oe))),2048&t.$$.dirty[1]&&n(41,d=js(u)+"%"),405045248&t.$$.dirty[0]|6080&t.$$.dirty[1]&&n(12,K=(b||b)&&k?[["Button","zoom-out",{hideLabel:!0,label:D.labelZoomOut,icon:D.iconZoomOut,disabled:p===s,onclick:()=>mn(Zt=>Math.max(s,Zt-q)),onhold:()=>mn(Zt=>Math.max(s,Zt*(1-ht)))}],["Dropdown","zoom-level",{label:d,title:D.labelZoom,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:Zt=>wt(Zt.value)}],["Button","zoom-in",{hideLabel:!0,label:D.labelZoomIn,icon:D.iconZoomIn,disabled:p===l,onclick:()=>mn(Zt=>Math.min(l,Zt+q)),onhold:()=>mn(Zt=>Math.min(l,Zt*(1+ht)))}]]:[]),16384&t.$$.dirty[0]|32&t.$$.dirty[1]&&C&&jt(i),16384&t.$$.dirty[0]|16&t.$$.dirty[1]&&C&&Ae(r),8404992&t.$$.dirty[0]|24&t.$$.dirty[1]&&C&&C.style.setProperty("--cursor",r&&j?Wt?"grabbing":"grab":"")},[Ht,Lt,bt,_t,rt,Tt,Vt,mt,at,$t,te,le,K,Ft,C,D,O,P,b,W,nt,k,N,j,ut,Z,ft,q,ht,xt,lt,Ct,it,vt,Wt,r,i,l,s,c,a,d,u,p,f,g,R]}class Pw extends pn{constructor(e){super(),dn(this,e,Mw,null,ln,{root:14,locale:15,stores:16,allowPan:17,allowZoom:18,enablePan:19,enableZoom:20,enableZoomControls:21,enableZoomInput:22,enablePanInput:23,enablePanLimit:24,panLimitGutterScalar:25,zoomOptions:26,zoomAdjustStep:27,zoomAdjustFactor:28,zoomAdjustWheelFactor:29,elasticity:30,imageSelectionRectCentered:31,imageSelectionRectScalar:32,zoomLevel:33,zoomControls:12,zoomMultiTouching:13},null,[-1,-1,-1,-1])}}const{window:kl}=N2;function y$(t){let e,n,i,r=t[41]&&b$(t),o=t[38]&&S$(t);return{c(){r&&r.c(),e=he(),o&&o.c(),n=Ii()},m(a,s){r&&r.m(a,s),et(a,e,s),o&&o.m(a,s),et(a,n,s),i=!0},p(a,s){a[41]?r?(r.p(a,s),1024&s[1]&&I(r,1)):(r=b$(a),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[38]?o?(o.p(a,s),128&s[1]&&I(o,1)):(o=S$(a),o.c(),I(o,1),o.m(n.parentNode,n)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re())},i(a){i||(I(r),I(o),i=!0)},o(a){z(r),z(o),i=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(n)}}}function b$(t){let e,n,i,r,o;const a=[Rw,Iw],s=[];function l(c,u){return c[39]?0:c[35]?1:-1}return~(i=l(t))&&(r=s[i]=a[i](t)),{c(){e=dt("div"),n=dt("p"),r&&r.c(),Et(n,"transform",t[72]),T(e,"class","PinturaStatus"),Et(e,"opacity",t[54])},m(c,u){et(c,e,u),St(e,n),~i&&s[i].m(n,null),o=!0},p(c,u){let d=i;i=l(c),i===d?~i&&s[i].p(c,u):(r&&(Ie(),z(s[d],1,1,()=>{s[d]=null}),Re()),~i?(r=s[i],r?r.p(c,u):(r=s[i]=a[i](c),r.c()),I(r,1),r.m(n,null)):r=null),1024&u[2]&&Et(n,"transform",c[72]),8388608&u[1]&&Et(e,"opacity",c[54])},i(c){o||(I(r),o=!0)},o(c){z(r),o=!1},d(c){c&&Q(e),~i&&s[i].d()}}}function Iw(t){let e,n,i,r;e=new kb({props:{text:t[35].text||"",onmeasure:t[221]}});let o=t[35].aside&&x$(t);return{c(){Ot(e.$$.fragment),n=he(),o&&o.c(),i=Ii()},m(a,s){zt(e,a,s),et(a,n,s),o&&o.m(a,s),et(a,i,s),r=!0},p(a,s){const l={};16&s[1]&&(l.text=a[35].text||""),e.$set(l),a[35].aside?o?(o.p(a,s),16&s[1]&&I(o,1)):(o=x$(a),o.c(),I(o,1),o.m(i.parentNode,i)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re())},i(a){r||(I(e.$$.fragment,a),I(o),r=!0)},o(a){z(e.$$.fragment,a),z(o),r=!1},d(a){Dt(e,a),a&&Q(n),o&&o.d(a),a&&Q(i)}}}function Rw(t){let e,n,i,r;return e=new kb({props:{text:t[39],onmeasure:t[221]}}),i=new Cb({props:{class:"PinturaStatusIcon",offset:t[82],opacity:t[83],$$slots:{default:[Lw]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment),n=he(),Ot(i.$$.fragment)},m(o,a){zt(e,o,a),et(o,n,a),zt(i,o,a),r=!0},p(o,a){const s={};256&a[1]&&(s.text=o[39]),e.$set(s);const l={};1048576&a[2]&&(l.offset=o[82]),2097152&a[2]&&(l.opacity=o[83]),8&a[0]|2097152&a[19]&&(l.$$scope={dirty:a,ctx:o}),i.$set(l)},i(o){r||(I(e.$$.fragment,o),I(i.$$.fragment,o),r=!0)},o(o){z(e.$$.fragment,o),z(i.$$.fragment,o),r=!1},d(o){Dt(e,o),o&&Q(n),Dt(i,o)}}}function x$(t){let e,n;return e=new Cb({props:{class:"PinturaStatusButton",offset:t[82],opacity:t[83],$$slots:{default:[Ew]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1048576&r[2]&&(o.offset=i[82]),2097152&r[2]&&(o.opacity=i[83]),16&r[1]|2097152&r[19]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function v$(t){let e,n;return e=new vb({props:{progress:t[35].progressIndicator.progress}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[1]&&(o.progress=i[35].progressIndicator.progress),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function w$(t){let e,n;const i=[t[35].closeButton,{hideLabel:!0}];let r={};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new ks({props:r}),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=16&a[1]?Pr(i,[Or(o[35].closeButton),i[1]]):{};e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function Ew(t){let e,n,i,r=t[35].progressIndicator.visible&&v$(t),o=t[35].closeButton&&t[35].text&&w$(t);return{c(){r&&r.c(),e=he(),o&&o.c(),n=Ii()},m(a,s){r&&r.m(a,s),et(a,e,s),o&&o.m(a,s),et(a,n,s),i=!0},p(a,s){a[35].progressIndicator.visible?r?(r.p(a,s),16&s[1]&&I(r,1)):(r=v$(a),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[35].closeButton&&a[35].text?o?(o.p(a,s),16&s[1]&&I(o,1)):(o=w$(a),o.c(),I(o,1),o.m(n.parentNode,n)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re())},i(a){i||(I(r),I(o),i=!0)},o(a){z(r),z(o),i=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(n)}}}function Aw(t){let e,n=t[3].iconSupportError+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){8&r[0]&&n!==(n=i[3].iconSupportError+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function Lw(t){let e,n;return e=new Ho({props:{$$slots:{default:[Aw]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8&r[0]|2097152&r[19]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function S$(t){let e,n,i,r,o,a,s,l,c,u,d,p,h,f,g=t[10]&&k$(t),$=t[46]&&t[45]&&C$(t);const y=[Vw,_w],v=[];function w(C,D){return C[46]?0:1}function S(C){t[442](C)}function R(C){t[443](C)}function M(C){t[444](C)}i=w(t),r=v[i]=y[i](t),a=new v3({props:{isAnimated:t[53],isTransparent:t[20],pixelRatio:t[57],textPixelRatio:t[6],backgroundColor:t[56],maskRect:t[58],maskOpacity:t[73]?t[73].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[85],images:t[55],interfaceImages:t[86],loadImageData:t[28],enableGrid:t[11],gridSize:t[87],gridColors:[t[88],t[89]],gridOpacity:t[90],selectionColor:t[91],csp:t[92]||{},willRequest:t[81]||t[93],willRender:t[439],didRender:t[440]}});let B={root:t[2],locale:t[3],stores:t[202],allowPan:t[95],enablePan:t[17],enablePanLimit:t[21],panLimitGutterScalar:t[22],enablePanInput:t[96],allowZoom:t[97],enableZoom:t[18],enableZoomInput:t[19]!==void 0?t[19]:t[98],enableZoomControls:t[99],zoomOptions:t[13]||t[23],zoomAdjustStep:t[14]||t[24],zoomAdjustFactor:t[15]||t[25],zoomAdjustWheelFactor:t[16]||t[26],imageSelectionRectCentered:t[100],imageSelectionRectScalar:t[101],elasticity:_h*t[8]};return t[0]!==void 0&&(B.zoomLevel=t[0]),t[33]!==void 0&&(B.zoomControls=t[33]),t[34]!==void 0&&(B.zoomMultiTouching=t[34]),u=new Pw({props:B}),jn.push(()=>Io(u,"zoomLevel",S)),jn.push(()=>Io(u,"zoomControls",R)),jn.push(()=>Io(u,"zoomMultiTouching",M)),{c(){g&&g.c(),e=he(),$&&$.c(),n=he(),r.c(),o=he(),Ot(a.$$.fragment),s=he(),l=dt("div"),c=he(),Ot(u.$$.fragment),T(l,"class","PinturaRootPortal")},m(C,D){g&&g.m(C,D),et(C,e,D),$&&$.m(C,D),et(C,n,D),v[i].m(C,D),et(C,o,D),zt(a,C,D),et(C,s,D),et(C,l,D),t[441](l),et(C,c,D),zt(u,C,D),f=!0},p(C,D){C[10]?g?(g.p(C,D),1024&D[0]&&I(g,1)):(g=k$(C),g.c(),I(g,1),g.m(e.parentNode,e)):g&&(Ie(),z(g,1,1,()=>{g=null}),Re()),C[46]&&C[45]?$?($.p(C,D),49152&D[1]&&I($,1)):($=C$(C),$.c(),I($,1),$.m(n.parentNode,n)):$&&(Ie(),z($,1,1,()=>{$=null}),Re());let O=i;i=w(C),i===O?v[i].p(C,D):(Ie(),z(v[O],1,1,()=>{v[O]=null}),Re(),r=v[i],r?r.p(C,D):(r=v[i]=y[i](C),r.c()),I(r,1),r.m(o.parentNode,o));const P={};4194304&D[1]&&(P.isAnimated=C[53]),1048576&D[0]&&(P.isTransparent=C[20]),67108864&D[1]&&(P.pixelRatio=C[57]),64&D[0]&&(P.textPixelRatio=C[6]),33554432&D[1]&&(P.backgroundColor=C[56]),134217728&D[1]&&(P.maskRect=C[58]),2048&D[2]&&(P.maskOpacity=C[73]?C[73].maskOpacity:1),128&D[0]&&(P.maskMarkupOpacity=C[7]),32&D[0]&&(P.maskFrameOpacity=C[5]),8388608&D[2]&&(P.clipAnnotationsToImage=C[85]),16777216&D[1]&&(P.images=C[55]),16777216&D[2]&&(P.interfaceImages=C[86]),268435456&D[0]&&(P.loadImageData=C[28]),2048&D[0]&&(P.enableGrid=C[11]),33554432&D[2]&&(P.gridSize=C[87]),201326592&D[2]&&(P.gridColors=[C[88],C[89]]),268435456&D[2]&&(P.gridOpacity=C[90]),536870912&D[2]&&(P.selectionColor=C[91]),1073741824&D[2]&&(P.csp=C[92]||{}),524288&D[2]|1&D[3]&&(P.willRequest=C[81]||C[93]),512&D[0]|270991424&D[1]|2&D[3]&&(P.willRender=C[439]),62&D[2]&&(P.didRender=C[440]),a.$set(P);const b={};4&D[0]&&(b.root=C[2]),8&D[0]&&(b.locale=C[3]),4&D[3]&&(b.allowPan=C[95]),131072&D[0]&&(b.enablePan=C[17]),2097152&D[0]&&(b.enablePanLimit=C[21]),4194304&D[0]&&(b.panLimitGutterScalar=C[22]),8&D[3]&&(b.enablePanInput=C[96]),16&D[3]&&(b.allowZoom=C[97]),262144&D[0]&&(b.enableZoom=C[18]),524288&D[0]|32&D[3]&&(b.enableZoomInput=C[19]!==void 0?C[19]:C[98]),64&D[3]&&(b.enableZoomControls=C[99]),8396800&D[0]&&(b.zoomOptions=C[13]||C[23]),16793600&D[0]&&(b.zoomAdjustStep=C[14]||C[24]),33587200&D[0]&&(b.zoomAdjustFactor=C[15]||C[25]),67174400&D[0]&&(b.zoomAdjustWheelFactor=C[16]||C[26]),128&D[3]&&(b.imageSelectionRectCentered=C[100]),256&D[3]&&(b.imageSelectionRectScalar=C[101]),256&D[0]&&(b.elasticity=_h*C[8]),!d&&1&D[0]&&(d=!0,b.zoomLevel=C[0],jo(()=>d=!1)),!p&&4&D[1]&&(p=!0,b.zoomControls=C[33],jo(()=>p=!1)),!h&&8&D[1]&&(h=!0,b.zoomMultiTouching=C[34],jo(()=>h=!1)),u.$set(b)},i(C){f||(I(g),I($),I(r),I(a.$$.fragment,C),I(u.$$.fragment,C),f=!0)},o(C){z(g),z($),z(r),z(a.$$.fragment,C),z(u.$$.fragment,C),f=!1},d(C){g&&g.d(C),C&&Q(e),$&&$.d(C),C&&Q(n),v[i].d(C),C&&Q(o),Dt(a,C),C&&Q(s),C&&Q(l),t[441](null),C&&Q(c),Dt(u,C)}}}function k$(t){let e,n,i,r,o;return n=new qr({props:{items:t[69]}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaNav PinturaNavTools")},m(a,s){et(a,e,s),zt(n,e,null),i=!0,r||(o=[At(e,"measure",t[428]),Pn(Ir.call(null,e))],r=!0)},p(a,s){const l={};128&s[2]&&(l.items=a[69]),n.$set(l)},i(a){i||(I(n.$$.fragment,a),i=!0)},o(a){z(n.$$.fragment,a),i=!1},d(a){a&&Q(e),Dt(n),r=!1,Kn(o)}}}function C$(t){let e,n,i;return n=new Va({props:{elasticity:t[8]*Vh,scrollDirection:t[76]?"y":"x",$$slots:{default:[Ow]},$$scope:{ctx:t}}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaNav PinturaNavMain")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};256&o[0]&&(a.elasticity=r[8]*Vh),16384&o[2]&&(a.scrollDirection=r[76]?"y":"x"),12288&o[1]|135168&o[2]|2097152&o[19]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function Fw(t){let e,n;const i=[t[79],{tabs:t[44]}];let r={$$slots:{default:[Bw,({tab:o})=>({609:o}),({tab:o})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o?1048576:0]]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new up({props:r}),e.$on("select",t[429]),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=8192&a[1]|131072&a[2]?Pr(i,[131072&a[2]&&Or(o[79]),8192&a[1]&&{tabs:o[44]}]):{};3145728&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function zw(t){let e,n;return e=new qr({props:{items:t[44]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8192&r[1]&&(o.items=i[44]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Dw(t){let e,n=t[609].icon+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){1048576&r[19]&&n!==(n=i[609].icon+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function Bw(t){let e,n,i,r,o,a=t[609].label+"";return e=new Ho({props:{$$slots:{default:[Dw]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment),n=he(),i=dt("span"),r=vi(a)},m(s,l){zt(e,s,l),et(s,n,l),et(s,i,l),St(i,r),o=!0},p(s,l){const c={};3145728&l[19]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c),(!o||1048576&l[19])&&a!==(a=s[609].label+"")&&Oi(r,a)},i(s){o||(I(e.$$.fragment,s),o=!0)},o(s){z(e.$$.fragment,s),o=!1},d(s){Dt(e,s),s&&Q(n),s&&Q(i)}}}function Ow(t){let e,n,i,r;const o=[zw,Fw],a=[];function s(l,c){return l[74]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),i=Ii()},m(l,c){a[e].m(l,c),et(l,i,c),r=!0},p(l,c){let u=e;e=s(l),e===u?a[e].p(l,c):(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),I(n,1),n.m(i.parentNode,i))},i(l){r||(I(n),r=!0)},o(l){z(n),r=!1},d(l){a[e].d(l),l&&Q(i)}}}function _w(t){let e,n,i;function r(a){t[435](a)}let o={locale:t[3],class:"PinturaMain",view:t[207](t[43]),props:t[206](t[43],t[27]),stores:t[202]};return t[1][t[43]]!==void 0&&(o.component=t[1][t[43]]),e=new pb({props:o}),jn.push(()=>Io(e,"component",r)),e.$on("measure",t[233]),e.$on("show",t[436]),e.$on("hide",t[437]),e.$on("fade",t[438]),{c(){Ot(e.$$.fragment)},m(a,s){zt(e,a,s),i=!0},p(a,s){const l={};8&s[0]&&(l.locale=a[3]),4096&s[1]&&(l.view=a[207](a[43])),134217728&s[0]|4096&s[1]&&(l.props=a[206](a[43],a[27])),!n&&2&s[0]|4096&s[1]&&(n=!0,l.component=a[1][a[43]],jo(()=>n=!1)),e.$set(l)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){Dt(e,a)}}}function Vw(t){let e,n;const i=[{class:"PinturaMain"},{visible:t[62]},t[79],{panels:t[78]}];let r={$$slots:{default:[Ww,({panel:o,panelIsActive:a})=>({607:o,608:a}),({panel:o,panelIsActive:a})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(o?262144:0)|(a?524288:0)]]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new dp({props:r}),e.$on("measure",t[434]),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=196609&a[2]?Pr(i,[i[0],1&a[2]&&{visible:o[62]},131072&a[2]&&Or(o[79]),65536&a[2]&&{panels:o[78]}]):{};134217738&a[0]|2883584&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function Ww(t){let e,n,i;function r(a){t[430](a,t[607])}let o={locale:t[3],view:t[207](t[607]),props:t[206](t[607],t[27]),isActive:t[608],stores:t[202]};return t[1][t[607]]!==void 0&&(o.component=t[1][t[607]]),e=new pb({props:o}),jn.push(()=>Io(e,"component",r)),e.$on("measure",t[233]),e.$on("show",function(){return t[431](t[607])}),e.$on("hide",function(){return t[432](t[607])}),e.$on("fade",function(...a){return t[433](t[607],...a)}),{c(){Ot(e.$$.fragment)},m(a,s){zt(e,a,s),i=!0},p(a,s){t=a;const l={};8&s[0]&&(l.locale=t[3]),262144&s[19]&&(l.view=t[207](t[607])),134217728&s[0]|262144&s[19]&&(l.props=t[206](t[607],t[27])),524288&s[19]&&(l.isActive=t[608]),!n&&2&s[0]|262144&s[19]&&(n=!0,l.component=t[1][t[607]],jo(()=>n=!1)),e.$set(l)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){Dt(e,a)}}}function T$(t){let e;return{c(){e=dt("span"),T(e,"class","PinturaEditorOverlay"),Et(e,"opacity",t[102])},m(n,i){et(n,e,i)},p(n,i){512&i[3]&&Et(e,"opacity",n[102])},d(n){n&&Q(e)}}}function M$(t){let e,n;const i=[{layout:"row"},{parentRect:t[50]},t[60]];let r={$$slots:{default:[Nw]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new Tb({props:r}),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=537395200&a[1]?Pr(i,[i[0],524288&a[1]&&{parentRect:o[50]},536870912&a[1]&&Or(o[60])]):{};1610612736&a[1]|2097152&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function Nw(t){let e,n,i;return{c(){e=dt("input"),e.value=n=t[60].text,T(e,"placeholder",i=t[60].placeholder),T(e,"type","text"),T(e,"spellcheck","false"),T(e,"autocorrect","off"),T(e,"autocapitalize","off")},m(r,o){et(r,e,o),t[445](e)},p(r,o){536870912&o[1]&&n!==(n=r[60].text)&&e.value!==n&&(e.value=n),536870912&o[1]&&i!==(i=r[60].placeholder)&&T(e,"placeholder",i)},d(r){r&&Q(e),t[445](null)}}}function Uw(t){let e,n,i,r,o,a;cc(t[427]);let s=t[40]&&y$(t),l=t[102]>0&&T$(t),c=t[60]&&M$(t);return{c(){e=dt("div"),s&&s.c(),n=he(),l&&l.c(),i=he(),c&&c.c(),T(e,"id",t[4]),T(e,"class",t[77]),T(e,"data-env",t[75]),T(e,"dir",t[12])},m(u,d){et(u,e,d),s&&s.m(e,null),St(e,n),l&&l.m(e,null),St(e,i),c&&c.m(e,null),t[446](e),r=!0,o||(a=[At(kl,"keydown",t[224]),At(kl,"keyup",t[225]),At(kl,"blur",t[226]),At(kl,"paste",t[230]),At(kl,"resize",t[427]),At(e,"ping",function(){Mn(t[68])&&t[68].apply(this,arguments)}),At(e,"contextmenu",t[227]),At(e,"touchstart",t[222],{passive:!1}),At(e,"touchmove",function(){Mn(t[71])&&t[71].apply(this,arguments)}),At(e,"pointermove",function(){Mn(t[70])&&t[70].apply(this,arguments)}),At(e,"transitionend",t[212]),At(e,"dropfiles",t[228]),At(e,"measure",t[447]),At(e,"click",function(){Mn(t[42]?t[229]:pe)&&(t[42]?t[229]:pe).apply(this,arguments)}),Pn(Ir.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),Pn($3.call(null,e)),Pn(db.call(null,e))],o=!0)},p(u,d){(t=u)[40]?s?(s.p(t,d),512&d[1]&&I(s,1)):(s=y$(t),s.c(),I(s,1),s.m(e,n)):s&&(Ie(),z(s,1,1,()=>{s=null}),Re()),t[102]>0?l?l.p(t,d):(l=T$(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),t[60]?c?(c.p(t,d),536870912&d[1]&&I(c,1)):(c=M$(t),c.c(),I(c,1),c.m(e,null)):c&&(Ie(),z(c,1,1,()=>{c=null}),Re()),(!r||16&d[0])&&T(e,"id",t[4]),(!r||32768&d[2])&&T(e,"class",t[77]),(!r||8192&d[2])&&T(e,"data-env",t[75]),(!r||4096&d[0])&&T(e,"dir",t[12])},i(u){r||(I(s),I(c),r=!0)},o(u){z(s),z(c),r=!1},d(u){u&&Q(e),s&&s.d(),l&&l.d(),c&&c.d(),t[446](null),o=!1,Kn(a)}}}const _h=1,Vh=10;function jw(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,W,nt,k,N,j,ut,Z,ft,q,ht,xt,lt,Ct,it,vt,K,Ft,Ht,Lt,bt,_t,rt,Tt,Vt,mt,at,$t,te,le,Wt,we,yt,ie,V,De,Le,qt,$e,Me,Be,mn,wt,re,on,Ue,en,ke,qe,vn,In,Hn,Jt,He,Y,Pt,H,Bt,ue,Ce,me,It,Oe,cn,rn,J,jt,Ae,Se,X,oe,Zt,ee,Je,Fe,be,di,Ri,Wn,_e,Ve,wn,An,ae,se,Rn,zn,Ei,$i,ti,qn,kn,yi,$r,Jr,Rr,tr,ao,gi,Yi,Ke,Ro,pi,yo,_r,Wa,yr,Xi,Ai,Eo,Qr,so,Ao,bo,Ki,Go,Er,Lo,sr,xo,lo,Ar,vr,to,Zo,qi,On,wi,vo,li,co,ci,uo,wo,Xo,_i,Ui,Yo,Fo,eo,wr,po,Ti,ji,Lr,no,_,ce,bn,nn,de,xe,Dn,xn,ye,ei,Cn,So,Ca,Ji,ko,zo,is,Si,Vr,Ko,A,ve,ze,gn,En,Xn,Ge,Qe,Nn,Gn,bi,zi,fi,Li,Bn,Fr,qo,Na,Cs,el,Ua,ja,Ts,er=Xe,Ha=Xe;F(t,g3,m=>n(415,nn=m)),t.$$.on_destroy.push(()=>er()),t.$$.on_destroy.push(()=>Ha());const Ta=bs(),br=_a();let{class:Wr}=e,{layout:zr}=e,{stores:Sr}=e,{locale:Ye}=e,{id:Co}=e,{util:Ga}=e,{utils:Do}=e,{animations:Ms="auto"}=e,{disabled:nl=!1}=e,{previewUpscale:El=!1}=e,{previewPad:Al=!1}=e,{previewMaskOpacity:fu=.95}=e,{previewImageDataMaxSize:Ll}=e,{previewImageTextPixelRatio:$u}=e,{markupMaskOpacity:yu=1}=e,{zoomMaskOpacity:Fl=.85}=e,{elasticityMultiplier:Ma=10}=e,{willRevert:Ps=()=>Promise.resolve(!0)}=e,{willProcessImage:gc=()=>Promise.resolve(!0)}=e,{willRenderCanvas:fc=ri}=e,{willRenderToolbar:il=ri}=e,{willRenderUtilTabs:zl=ri}=e,{willSetHistoryInitialState:rs=ri}=e,{enableButtonExport:Dl=!0}=e,{enableButtonRevert:os=!0}=e,{enableNavigateHistory:x=!0}=e,{enableToolbar:U=!0}=e,{enableUtils:L=!0}=e,{enableButtonClose:tt=!1}=e,{enableDropImage:st=!1}=e,{enablePasteImage:Rt=!1}=e,{enableBrowseImage:Nt=!1}=e,{enableTransparencyGrid:Xt=!1}=e,{layoutDirectionPreference:Ut="auto"}=e,{layoutHorizontalUtilsPreference:Yt="left"}=e,{layoutVerticalUtilsPreference:Kt="bottom"}=e,{layoutVerticalToolbarPreference:Qt="top"}=e,{layoutVerticalControlGroupsPreference:an="bottom"}=e,{layoutVerticalControlTabsPreference:ge="bottom"}=e,{status:ne}=e,{formatStatusImageLoading:Pe=function(m,G){const{state:pt}=m;if(!pt||!pt.task)return G.statusImageLoadNone;if(pt.error){if(pt.error.code==="IMAGE_TOO_SMALL")return G.statusImageLoadMinSize;if(pt.error.code==="VIDEO_TOO_SHORT"){const Mt=Array.isArray(G.unitSeconds)?pt.error.metadata.minDuration===1?G.unitSeconds[0]:G.unitSeconds[1]:G.unitSeconds;return Ns(G.statusImageLoadMinDuration,{seconds:Mt},"{","}")}return G.statusImageLoadError}return pt.task==="blob-to-bitmap"?G.statusImageLoadPrepare:G.statusImageLoadBusy}}=e,{formatStatusImageProcessing:Te=function(m,G){const{state:pt}=m;if(pt&&pt.task)return pt.task==="store"?pt.error?G.statusImageUploadError:G.statusImageUploadBusy:pt.error?G.statusImageProcessError:G.statusImageProcessBusy}}=e,{formatStatusSupportError:tn=function(m,G){const{features:pt}=m;return{features:pt.join(", ")}}}=e,{textDirection:sn}=e,{markupEditorZoomLevel:Tn=null}=e,{markupEditorZoomLevels:fn}=e,{markupEditorZoomAdjustStep:_n}=e,{markupEditorZoomAdjustFactor:xi}=e,{markupEditorZoomAdjustWheelFactor:Jn}=e,{markupEditorInteractionMode:Un=!1}=e,{muteAudio:ki=!0}=e,{willSetMediaInitialTimeOffset:oi=(m,G)=>m*Tw(G[0])}=e,{enablePan:nr=!0}=e,{enableZoom:hi=!0}=e,{enableZoomControls:Nr=!0}=e,{enableZoomInput:io}=e,{enablePanInput:ro}=e,{enableCanvasAlpha:Pa=!1}=e,{enablePanLimit:as}=e,{panLimitGutterScalar:rl}=e,{pan:ss=null}=e,{zoomPresetOptions:Za=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:sa=.25}=e,{zoomAdjustFactor:Jo=.1}=e,{zoomAdjustWheelFactor:Is=1}=e,{zoomLevel:To=null}=e,{fixScrollDirection:ls=!1}=e;const la=fe(ls);let ca,Xa;Mo("fixScrollDirection",la);let{imagePreviewSrc:Rs}=e,{imageOrienter:ol={read:()=>1,apply:m=>m}}=e,{pluginComponents:Bo}=e,{pluginOptions:Oo={}}=e;const xr=Ta.sub,lr={};let{root:cr}=e;const $p=()=>{be.setAttribute("data-redraw","true"),sl.set({})},yp=fe(!0);F(t,yp,m=>n(480,Rr=m));const $c=fe(void 0);F(t,$c,m=>n(425,A=m));const cs=fe(0);F(t,cs,m=>n(422,Si=m));const V0=fe(!1),bu=m=>{V0.set(m.type==="play"),Ta.pub(m.type)};let W0,bp,N0,xp,vp=!1;const wp=()=>{if(!o||!Bl())return;xp=d,kt($c,A=void 0,A);const m=be;vp=!1;const G=1/24,pt=us();(Math.abs(c*pt-Si*pt)<=G||pt-pt*Si<=G)&&kt(cs,Si=l,Si),xu(Si*us()),m.play().catch(()=>{});let Mt=bc();const ct=()=>{if(Bl())return;N0=requestAnimationFrame(ct);let gt=bc();gt-Mt<=0&&(gt=Mt+.01),Mt=gt,kt(cs,Si=gt/us(),Si),xp>=0&&Si>=c&&(kt(cs,Si=c,Si),al()),d>-1&&(vp=!0),vp&&d===-1&&p>0&&(kt(cs,Si=s[p][0],Si),xu(Si*us())),kt(wu,Ji=Si*us(),Ji),$p()};ct()},al=()=>{o&&!Bl()&&(kt($c,A=void 0,A),xp=void 0,be.pause(),cancelAnimationFrame(N0),$p())},Bl=()=>be&&be.paused,Sp=()=>{if(o)return Bl()?wp():al()},kp=()=>{o&&(be.muted=!0)},Cp=()=>{o&&(be.muted=!1)},U0=()=>{o&&kt(yc,Ko=!Ko,Ko)},yc=fe(ki);F(t,yc,m=>n(424,Ko=m));const us=()=>{if(o)return be.duration},bc=()=>{if(o)return be.currentTime},xu=m=>{o&&(p$(be,m),kt(cs,Si=m/Vr,Si))},sl=fe({});F(t,sl,m=>n(52,gi=m)),Mo("redrawTrigger",sl);const vu=fe(Ma);F(t,vu,m=>n(497,zo=m)),Mo("elasticityMultiplier",vu);let xc=[];const Tp=hn();F(t,Tp,m=>n(102,Ts=m));const j0=k0()||1024,H0=Zi(j0,j0),G0=q2(),Xb=m=>Promise.resolve(ko&&ko(m,{resourceType:"image"})).then(G=>{if(G===!1)return;const{headers:pt,credentials:Mt}=G||{};return fetch(m,{headers:pt,credentials:Mt}).then(ct=>{if(ct.status!==200)throw`${ct.status} (${ct.statusText})`;return ct.blob()}).then(ct=>g$(ct,ol,G0)).then(ct=>f$(ct,g))});let{imageSourceToImageData:Mp=m=>Ne(m)?Xb(m):sc(m)?new Promise(G=>G(pu(m))):a0(m)||mu(m)?g$(m,ol,G0).then(G=>f$(G,g)):void 0}=e;const Pp=(()=>{let m,G;const pt=h$.reduce((Mt,ct)=>(Mt[ct]=function(gt,Gt,je){let $n=[];return{set:Gt,update:je,publish:Zn=>{$n.forEach(ni=>ni(Zn))},subscribe:Zn=>($n.push(Zn),gt(Zn),()=>{$n=$n.filter(ni=>ni!==Zn)})}}(gt=>{if(!G)return gt();G.stores[ct].subscribe(gt)()},gt=>{G&&G.stores[ct].set(gt)},gt=>{G&&G.stores[ct].update(gt)}),Mt),{});return{update:Mt=>{if(G=Mt,m&&(m.forEach(ct=>ct()),m=void 0),!Mt)return pt.file.publish(void 0),void pt.loadState.publish(void 0);m=h$.map(ct=>Mt.stores[ct].subscribe(gt=>{pt[ct].publish(gt)}))},stores:pt,destroy:()=>{m&&m.forEach(Mt=>Mt())}}})(),{file:Ip,size:ll,duration:Rp,currentTime:wu,trim:Ep,volume:Z0,minDuration:Yb,maxDuration:Ap,loadState:Su,processState:Lp,cropAspectRatio:ku,cropLimitToImage:Fp,crop:Ia,cropMinSize:Kb,cropMaxSize:qb,cropRange:Jb,cropOrigin:Qb,cropRectAspectRatio:tx,rotation:Ol,rotationRange:ex,targetSize:nx,flipX:Cu,flipY:Tu,backgroundColor:Mu,backgroundImage:X0,colorMatrix:Y0,convolutionMatrix:K0,gamma:q0,vignette:J0,noise:Q0,decoration:Pu,annotation:Iu,manipulation:Ru,redaction:Eu,frame:cl,selection:zp,state:Au}=Pp.stores;F(t,Ip,m=>n(399,sr=m)),F(t,ll,m=>n(372,Wn=m)),F(t,Rp,m=>n(423,Vr=m)),F(t,wu,m=>n(496,Ji=m)),F(t,Ep,m=>n(420,Ca=m)),F(t,Z0,m=>n(421,is=m)),F(t,Ap,m=>n(426,ve=m)),F(t,Su,m=>n(391,Ai=m)),F(t,Lp,m=>n(390,Xi=m)),F(t,ku,m=>n(493,xe=m)),F(t,Fp,m=>n(85,Xn=m)),F(t,Ia,m=>n(410,Ui=m)),F(t,Ol,m=>n(375,wn=m)),F(t,Cu,m=>n(374,Ve=m)),F(t,Tu,m=>n(373,_e=m)),F(t,Mu,m=>n(381,yi=m)),F(t,Pu,m=>n(48,Ri=m)),F(t,Iu,m=>n(49,An=m)),F(t,Ru,m=>n(378,ti=m)),F(t,Eu,m=>n(379,qn=m)),F(t,cl,m=>n(47,di=m)),F(t,zp,m=>n(59,ei=m)),F(t,Au,m=>n(482,Ar=m)),Mo("components",{DynamicComponentTree:qr}),Mo("previewcontrols",{play:wp,pause:al,togglePlayPause:Sp,mute:kp,unmute:Cp,toggleMute:U0,setCurrentTime:xu,getCurrentTime:bc,getDuration:us,frameOffset:cs,framePeekOffset:$c,isPlaying:V0,isMuted:yc});const tm=(m,G,pt=0)=>new Promise((Mt,ct)=>{if(mc(m))return void tb(m).then($n=>{const Zn=Ze(Ji)?Ji:oi($n.duration,Ca||[[0,1]]);eb($n,Zn).then(Mt)});let gt,Gt=!1;G.cancel=()=>Gt=!0;const je=Date.now();Mp(m).then($n=>{const Zn=Date.now()-je;clearTimeout(gt),gt=setTimeout(()=>{Gt||Mt($n)},Math.max(0,pt-Zn))}).catch(ct)}),{images:em,shapePreprocessor:nm,imageScrambler:im,imageRedactionRendering:rm,willRequest:om,willRequestResource:am,csp:sm}=Sr;let vc;F(t,em,m=>n(419,So=m)),F(t,nm,m=>n(418,Cn=m)),F(t,im,m=>n(382,$r=m)),F(t,rm,m=>n(380,kn=m)),F(t,om,m=>n(81,ko=m)),F(t,am,m=>n(93,Li=m)),F(t,sm,m=>n(92,fi=m));const ix=Vn(X0,(m,G)=>{if(!m)return G(void 0);vc&&(vc.cancel(),vc=void 0),vc={cancel:pe},tm(m,vc).then(G).catch(pt=>{})}),rx=Au.subscribe(m=>Ta.pub("update",m)),ox=fe();Mo("ui",fe({})),Mo("selection",zp);const Dp=fe(!0);F(t,Dp,m=>n(95,Fr=m));const Bp=fe(!0);F(t,Bp,m=>n(97,Na=m));const Op=fe(!0);F(t,Op,m=>n(417,ye=m));const Lu=fe(!0);F(t,Lu,m=>n(494,Dn=m));const _p=fe(!0);F(t,_p,m=>n(98,Cs=m));const Vp=fe();F(t,Vp,m=>n(99,el=m));const Fu=fe();F(t,Fu,m=>n(495,xn=m));const Wp=Vn([Fu,Lu],()=>xn!==void 0?xn:Dn);F(t,Wp,m=>n(96,qo=m));const wc=fe([0,0,0]);F(t,wc,m=>n(56,On=m));const zu=fe([1,1,1]);F(t,zu,m=>n(478,$i=m));const Sc=hn([1,1,1]);F(t,Sc,m=>n(477,Ei=m));const Np=fe();F(t,Np,m=>n(91,zi=m));const lm=fe(),Up=fe();F(t,Up,m=>n(51,tr=m));const _l=fe();F(t,_l,m=>n(376,se=m));const Vl=fe(Vs());F(t,Vl,m=>n(80,vr=m));const jp=fe(0);F(t,jp,m=>n(416,de=m));const kc=fe(Vs());F(t,kc,m=>n(84,En=m));const ul=fe();F(t,ul,m=>n(475,Fe=m));const Du=m$("(pointer: fine)",m=>m?"pointer-fine":"pointer-coarse");F(t,Du,m=>n(397,Er=m));const Bu=m$("(hover: hover)",m=>m?"pointer-hover":"pointer-no-hover");F(t,Bu,m=>n(396,Go=m));const cm=fe(!1),Cc=fe(!1);F(t,Cc,m=>n(377,zn=m));const Hp=Ql(void 0,m=>{const G=hn(0),pt=[Cc.subscribe(Mt=>{G.set(Mt?1:0,{hard:!Ke})}),G.subscribe(m)];return()=>pt.forEach(Mt=>Mt())});F(t,Hp,m=>n(476,Rn=m));const Ou=fe();F(t,Ou,m=>n(481,Ao=m));const _u=fe();let Gp;F(t,_u,m=>n(53,Ke=m)),Mo("isAnimated",_u);const Vu=fe(El);F(t,Vu,m=>n(400,xo=m));const dl=fe(!1);F(t,dl,m=>n(487,eo=m)),Mo("imageIsStatic",dl);const Tc=fe();F(t,Tc,m=>n(488,wr=m));const Zp=fe();F(t,Zp,m=>n(485,Yo=m));const um=Ql(void 0,m=>{const G=fe(void 0),pt=[Ia.subscribe(()=>{if(!Ui)return;if(eo)return G.set(Ln(Ui));const Mt=c$(Ui,Yo,5*Ma);G.set(Mt)}),G.subscribe(m)];return()=>pt.forEach(Mt=>Mt())}),ua=fe();F(t,ua,m=>n(484,_i=m));const Wu=fe();F(t,Wu,m=>n(486,Fo=m));const Xp=fe(void 0);F(t,Xp,m=>n(491,_=m));const dm=fe(ui());F(t,dm,m=>n(492,ce=m));const pm=(m,G)=>{if(!G||!m)return{top:0,right:0,bottom:0,left:0};const pt=S2(G,m,$),Mt=w2(pt,m);return{top:Math.abs(Mt.top),right:Math.abs(Mt.right),bottom:Math.abs(Mt.bottom),left:Math.abs(Mt.left)}},hm=fe({}),Yp=Vn([ul,Vl,kc,hm],([m,G,pt,Mt],ct)=>{if(!m)return ct(void 0);let gt=0;N.length!==1||h||Qt==="bottom"||(gt=pt.y+pt.height),ct(Bi(m.x+G.x,m.y+G.y+gt,m.width,m.height))});let Mc={left:0,right:0,top:0,bottom:0};const Nu=fe(!1),Wl=Vn([Nu,cl,Yp,Cc],([m,G,pt,Mt],ct)=>{if(!pt)return ct({left:0,right:0,top:0,bottom:0});if(!m)return;const gt=Math.min(pt.width,pt.height),Gt=pm({width:gt,height:gt},G);un(Mc.top,4)===un(Gt.top,4)&&un(Mc.bottom,4)===un(Gt.bottom,4)&&un(Mc.right,4)===un(Gt.right,4)&&un(Mc.left,4)===un(Gt.left,4)||(Mc=Gt,ct(Gt))});F(t,Wl,m=>n(408,uo=m));const Nl=Vn([Nu,Wl],([m,G],pt)=>{if(!m)return pt(!1);pt(Object.values(G).some(Mt=>Mt>0))});F(t,Nl,m=>n(409,wo=m));const ax=Vn([Nu,ul,Nl,Wl],([m,G,pt,Mt],ct)=>{if(G)return m&&pt?void ct(Bi(G.x+Mt.left,G.y+Mt.top,G.width-Mt.left-Mt.right,G.height-Mt.top-Mt.bottom)):ct({...G})}),Ya=Vn([Yp,Nl,Wl],([m,G,pt],Mt)=>m?G?void Mt(Bi(m.x+pt.left,m.y+pt.top,m.width-pt.left-pt.right,m.height-pt.top-pt.bottom)):Mt(m):Mt(void 0));F(t,Ya,m=>n(50,ae=m));const sx=Vn([dl,ll,Ol],([m,G,pt],Mt)=>{if(!m||!G)return Mt(void 0);const ct=Xr(G);Mt(kr(ct,pt))}),Kp=Vn([sx],([m],G)=>{if(!m)return G(void 0);const pt=or(m);G(ou(pt))});F(t,Kp,m=>n(412,ji=m));const ds=Vn([Ya,Ia,Kp,Vu],([m,G,pt,Mt],ct)=>{if(!m||!G||!(!wr&&!Yo))return;const{width:gt,height:Gt}=pt||G,je=Math.min(m.width/gt,m.height/Gt);ct(Mt?je:Math.min(1,je))});F(t,ds,m=>n(411,Ti=m)),Mo("imageStaticVisualCorners",Vn([dl,ll,Ol,Ya,ul,ds],([m,G,pt,Mt,ct,gt],Gt)=>{if(!(m&&Mt&&ct&&G))return Gt(void 0);const je=Xr(G),$n=ou(Dr(je,gt)),Zn=zd(Mt,$n);$n.x=Zn.x,$n.y=Zn.y,Gt(kr($n,pt))}));const Ul=fe(void 0);F(t,Ul,m=>n(414,bn=m));const mm=Vn([Ia,Ya],([m,G])=>{if(G&&m)return Math.min(G.width/m.width,G.height/m.height)}),qp=Vn([Ia,ua],([m,G])=>m&&G?Math.min(m.width/G.width,m.height/G.height):1);F(t,qp,m=>n(101,ja=m));const Pc=Vn([Ul,qp],([m,G])=>m&&G?G*m:1);F(t,Pc,m=>n(490,Lr=m));const pl=fe(ui());F(t,pl,m=>n(413,no=m));const gm=fe({scalar:Lr,translation:no}),fm=()=>{gm.set({scalar:void 0,translation:ui()})},Uu=Ql(void 0,m=>{const G=hn(void 0,{precision:1e-4}),pt=Yc()===1?gt=>ra(gt,Math.round):ri,Mt=()=>{if(!_i)return;const gt=zn||!Ao;if(eo){const je=Ln(_i);return ga(je,ce),ga(je,ae),G.set(je,{hard:gt})}const Gt=c$(_i,_,_h*Ma);Gt.width<0&&(Gt.width=0,Gt.x=_i.x),Gt.height<0&&(Gt.height=0,Gt.y=_i.y),ga(Gt,ae),ga(Gt,no),Dr(Gt,Lr),!gt&&pt(Gt),G.set(Gt,{hard:gt})},ct=[Ya.subscribe(Mt),ua.subscribe(Mt),Pc.subscribe(Mt),pl.subscribe(Mt),cl.subscribe(Mt),G.subscribe(m)];return()=>ct.forEach(gt=>gt())});F(t,Uu,m=>n(58,ci=m));const Jp=fe(1);F(t,Jp,m=>n(483,Xo=m));const Qp=()=>{if(!Ui||!ae)return;let m=Ws(Ln(Ui),Ti||1);const G=zd(ae,Ws(Ln(ji),Ti));ga(m,G);const pt=Fe.width/m.width,Mt=Fe.height/m.height,ct=Math.min(1,pt,Mt);Jp.set(ct),Dr(m,ct),((gt,Gt)=>{const[je,$n,Zn,ni]=Pl(gt);je<Gt.y&&(gt.y=Math.max(Gt.y,gt.y)),$n>Gt.width&&(gt.x=Gt.width-gt.width),Zn>Gt.height&&(gt.y=Gt.height-gt.height),ni<Gt.x&&(gt.x=Math.max(Gt.x,gt.x))})(m,{...Fe,x:0,y:0}),ua.set(m)},$m=Vn([Ya,ds,Ia,ll],([m,G,pt,Mt],ct)=>{m&&(pt||Mt)&&ct(ym(m,G||1,pt||Mt))});F(t,$m,m=>n(100,Ua=m));const ym=(m,G,pt)=>pt.width<=m.width&&pt.height<=m.height?zd(m,Ws(Ln(pt),G)):oo(m,pr(pt));let t1,bm;const e1=m=>{if(h&&t1&&fa(t1,m)&&bm===Ti)return;if(eo)return Qp();t1=m,bm=Ti;const G=ym(m,Ti,Ui||Wn);ua.set(G)};let xm=!1;const lx=ds.subscribe(m=>{!xm&&m!==void 0&&Ui&&(e1(ae),xm=!0)}),cx=Ya.subscribe(m=>{m&&Ti!==void 0&&Ui&&e1(m)}),ux=dl.subscribe(m=>{!m&&ae&&e1(ae)});let n1;const dx=Wu.subscribe(m=>{if(!m)return n1=void 0,void kt(Tc,wr=void 0,wr);n1=po;const G=Ln(Ui);Tc.set(G)}),px=ua.subscribe(m=>{if(!m||!Fo)return;const G=(pt=Ln(m),Mt=Fo,pt.x-=Mt.x,pt.y-=Mt.y,pt.width-=Mt.width,pt.height-=Mt.height,pt);var pt,Mt;((gt,Gt)=>{gt.x/=Gt,gt.y/=Gt,gt.width/=Gt,gt.height/=Gt})(G,n1);const ct=((gt,Gt)=>(gt.x+=Gt.x,gt.y+=Gt.y,gt.width+=Gt.width,gt.height+=Gt.height,gt))(Ln(wr),G);Ia.set(ct)}),hx=Ia.subscribe(m=>{if(!m||!_i)return;if(eo)return void(Fo||Qp());if(zn||Fo||Yo)return;const G=pr(_i),pt=pr(m);if(un(G,6)===un(pt,6))return;const{width:Mt,height:ct}=Ui,gt=Math.min(ae.width/Mt,ae.height/ct),Gt=Zi(m.width*gt,m.height*gt),je=.5*(_i.width-Gt.width),$n=.5*(_i.height-Gt.height),Zn=Bi(Math.max(0,Math.min(ae.width-Gt.width,_i.x+je)),Math.max(0,Math.min(ae.height-Gt.height,_i.y+$n)),Gt.width,Gt.height);ua.set(Zn)}),vm=Vn([ds,Ia,ua,dl],([m,G,pt,Mt],ct)=>{if(!m||!G||!pt)return;if(Mt)return ct(Xo);const gt=pt.width/G.width,Gt=pt.height/G.height;ct(Math.max(gt,Gt)/m)}),ju=Vn([ds,vm],([m,G],pt)=>{G&&pt(m*G)});F(t,ju,m=>n(489,po=m));let jl={left:0,right:0,top:0,bottom:0};const wm=Vn([cl,ua],([m,G],pt)=>{if(!G)return pt(jl);const Mt=pm(G,m);un(jl.top,4)===un(Mt.top,4)&&un(jl.bottom,4)===un(Mt.bottom,4)&&un(jl.right,4)===un(Mt.right,4)&&un(jl.left,4)===un(Mt.left,4)||(jl=Mt,pt(Mt))}),mx=Vn([wm],([m],G)=>{G(Object.values(m).some(pt=>pt>0))}),i1=hn(.075,{stiffness:.03,damping:.4,precision:.001}),gx=Vn([Sc,wc,i1,Uu,Pc,cl,mx,wm,Nl],([m,G,pt,Mt,ct,gt,Gt,je,$n],Zn)=>{if(!Mt||h)return Zn([]);let{x:ni,y:Sn,width:Qi,height:ai}=Mt;ni+=.5,Sn+=.5,Qi-=.5,ai-=.5;const ur=[];if(gt){if(Gt){let{left:ii,right:pa,top:gl,bottom:Gl}=je;ii*=ct,pa*=ct,gl*=ct,Gl*=ct;const R1=ph(G)?[1,1,1,.125]:[0,0,0,.075];ur.push({x:ni-ii-.5,y:Sn-gl-.5,width:Qi+ii+pa+1,height:ai+gl+Gl+1,strokeWidth:1,strokeColor:R1,opacity:$n?1:.5})}const Qo=ph(m);gt&&gt.frameColor&&ph(gt.frameColor)||Qo||(ur.push({x:ni-1,y:Sn-1,width:Qi+2,height:ai+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:pt}),ur.push({x:ni+1,y:Sn+1,width:Qi-2,height:ai-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:pt}))}Zn([...ur,{x:ni,y:Sn,width:Qi,height:ai,strokeWidth:1,strokeColor:m,opacity:pt}])}),Ic=fe([]);F(t,Ic,m=>n(402,to=m));const Sm=Vn([gx,Ic],([m,G],pt)=>{pt([...m,...G])});F(t,Sm,m=>n(94,Bn=m));const r1=hn(0,{precision:.001});F(t,r1,m=>n(404,qi=m));const o1=hn();F(t,o1,m=>n(407,li=m));const a1=hn();F(t,a1,m=>n(406,vo=m));const s1=hn();F(t,s1,m=>n(405,wi=m));const l1=hn();F(t,l1,m=>n(403,Zo=m));const Rc=fe(!1);F(t,Rc,m=>n(389,yr=m));const Ec=fe();let Es;F(t,Ec,m=>n(392,Eo=m));const c1=Vn([Rc,Ec],([m,G],pt)=>{if(!m||!G)return void pt(void 0);if(Es&&(Es.cancel(),n(295,Es=void 0)),gu(G))return pt(Vy(G));const Mt=da.length?0:Ke?250:0;n(295,Es={cancel:pe}),tm(G,Es,Mt).then(pt).catch(ct=>{kt(Su,Ai.error=ct,Ai)}).finally(()=>{n(295,Es=void 0)})});er(),er=Zr(c1,m=>n(371,be=m));let{imagePreviewCurrent:Ac}=e;const u1=fe({});F(t,u1,m=>n(394,bo=m));const Hu=fe([]);F(t,Hu,m=>n(86,Ge=m));const Gu=Vn([Ya,_l,ll,um,ua,ju,Ol,Cu,Tu,Pc,pl,cm],([m,G,pt,Mt,ct,gt,Gt,je,$n,Zn,ni,Sn],Qi)=>{if(!m||!ct)return;const ai=t3(m,G,pt,Mt,ct,Zn,ni,gt,Gt,je,$n);!Sn&&b(ai),Qi(ai)});F(t,Gu,m=>n(395,Ki=m));const km=Vn([Y0,K0,q0,J0,Q0],([m,G,pt,Mt,ct],gt)=>{const Gt=m&&Object.keys(m).map(je=>m[je]).filter(Boolean);gt({gamma:pt||void 0,vignette:Mt||void 0,noise:ct||void 0,convolutionMatrix:G||void 0,colorMatrix:Gt&&Gt.length&&f0(Gt)})});let Zu,d1;const Cm=(()=>{if(!ba())return!1;const m=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,G,pt]=m.map(Mt=>parseInt(Mt,10)||0);return G>13||G===13&&pt>=4})(),Lc=fe({});F(t,Lc,m=>n(383,ao=m)),Mo("env",Lc);const Tm=Yc(),p1=Ql(Tm,m=>{const G=()=>m(Yc()),pt=matchMedia(`(resolution: ${Tm}dppx)`);return pt.addListener(G),()=>pt.removeListener(G)});F(t,p1,m=>n(57,co=m));const Ka=((m,G,pt)=>{const{sub:Mt,pub:ct}=bs(),{willUndo:gt=()=>!0}=pt||{},Gt=[],je=fe(0),$n=[],Zn=()=>$n.forEach(Sn=>Sn({index:Da(je),length:Gt.length})),ni={get index(){return Da(je)},set index(Sn){Sn=Number.isInteger(Sn)?Sn:0,Sn=si(Sn,0,Gt.length-1),je.set(Sn),G(Gt[ni.index]),Zn()},get state(){return Gt[Gt.length-1]},length:()=>Gt.length,undo(){if(gt()===!1)return;const Sn=ni.index--;return ct("undo",Sn),Sn},redo(){const Sn=ni.index++;return ct("redo",ni.index),Sn},revert(){Gt.length=1,ni.index=0,ct("revert")},write(Sn){Sn&&G({...m(),...Sn});const Qi=m(),ai=Gt[Gt.length-1];JSON.stringify(Qi)!==JSON.stringify(ai)&&(Gt.length=ni.index+1,Gt.push(Qi),je.set(Gt.length-1),Zn(),ct("writehistory"))},set(Sn={}){Gt.length=0,ni.index=0;const Qi=Array.isArray(Sn)?Sn:[Sn];Gt.push(...Qi),ni.index=Gt.length-1},get:()=>[...Gt],subscribe:Sn=>($n.push(Sn),Sn({index:ni.index,length:Gt.length}),()=>$n.splice($n.indexOf(Sn),1)),on:Mt};return ni})(()=>Ar,m=>{kt(Au,Ar=m,Ar),Vl.set(vr)},{willUndo:()=>!xx()||(bx(),!1)});Ha(),Ha=Zr(Ka,m=>n(401,lo=m));const Mm=()=>{const m={x:0,y:0,...Wn},G=ra(oo(m,Ar.cropAspectRatio),Math.round),pt=rs({...Ar,rotation:0,crop:G},Ar),Mt=[pt];JSON.stringify(pt)!==JSON.stringify(Ar)&&Mt.push({...Ar}),Ka.set(Mt)},fx=Su.subscribe(m=>{m&&m.complete&&Mm()}),$x=()=>Ps().then(m=>m&&Ka.revert()),yx=[Iu,Pu,Eu,Ru],bx=()=>{yx.forEach(m=>{m.update(G=>G.length&&ho(G[G.length-1])?G.slice(0,-1):G)})},xx=()=>k.filter(m=>m.length).some(m=>ho(m[m.length-1])),As=fe(!1);F(t,As,m=>n(384,Yi=m));const vx=()=>{kt(As,Yi=!0,Yi),gc().then(m=>{if(!m)return void kt(As,Yi=!1,Yi);let G;G=zc.subscribe(pt=>{pt===1&&(G&&G(),br("processImage"))})})},wx=Lp.subscribe(m=>{if(!m)return void kt(As,Yi=!1,Yi);kt(As,Yi=!0,Yi);const{complete:G,abort:pt}=m;(G||pt)&&kt(As,Yi=!1,Yi)}),da=Cw();F(t,da,m=>n(55,Qr=m));const Sx=Vn([da],([m],G)=>{if(!m.length)return G();const{origin:pt,translation:Mt,rotation:ct,scale:gt}=m[0];G({origin:pt,translation:Mt,rotation:ct,scale:gt})}),Xu=fe();F(t,Xu,m=>n(398,Lo=m));let Yu,Ku=[];const Pm=fe(),h1=fe(),kx=Vn([Ul,h1,ds,mm],([m,G,pt,Mt])=>m||(G||pt<1?Mt:1)),Im={...Sr,imageFile:Ip,imageSize:ll,mediaDuration:Rp,mediaMinDuration:Yb,mediaMaxDuration:Ap,mediaTrim:Ep,imageBackgroundColor:Mu,imageBackgroundImage:X0,imageCropAspectRatio:ku,imageCropMinSize:Kb,imageCropMaxSize:qb,imageCropLimitToImage:Fp,imageCropRect:Ia,imageCropRectOrigin:Qb,imageCropRectSnapshot:Tc,imageCropRectAspectRatio:tx,imageCropRange:Jb,imageRotation:Ol,imageRotationRange:ex,imageFlipX:Cu,imageFlipY:Tu,imageOutputSize:nx,imageColorMatrix:Y0,imageConvolutionMatrix:K0,imageGamma:q0,imageVignette:J0,imageNoise:Q0,imageManipulation:Ru,imageDecoration:Pu,imageAnnotation:Iu,imageRedaction:Eu,imageFrame:cl,imagePreview:c1,imagePreviewSource:Ec,imageTransforms:Gu,imagePreviewModifiers:u1,history:Ka,animation:Ou,pixelRatio:p1,elasticityMultiplier:Ma,scrollElasticity:Vh,rangeInputElasticity:5,redrawTrigger:sl,pointerAccuracy:Du,pointerHoverable:Bu,env:Lc,rootRect:_l,stageRect:Ya,stageRectBase:Yp,stageRecenter:hm,stageScalar:ds,stagePadding:Wl,stagePadded:Nl,presentationScalar:ju,imagePreviewUpscale:h1,utilRect:ul,utilRectPadded:ax,allowPlayPause:yp,allowPan:Dp,allowZoom:Bp,allowZoomControls:Op,enableZoomInput:_p,enablePanInput:Lu,enablePanInputStatus:Wp,imageSelectionMultiTouching:Pm,rootBackgroundColor:wc,rootForegroundColor:zu,rootLineColor:Sc,rootColorSecondary:lm,imageOutlineOpacity:i1,utilTools:Xu,imageSelectionPan:pl,imageSelectionZoom:Ul,imageSelectionZoomCurrent:kx,imageSelectionStageFitScalar:mm,imageSelectionStoredState:gm,imageOverlayMarkup:Ic,interfaceImages:Hu,isInteracting:Cc,isTransformingImage:cm,isInteractingFraction:Hp,imageCropRectIntent:Zp,imageCropRectPresentation:um,imageSelectionRect:ua,imageSelectionRectIntent:Xp,imageSelectionRectPresentation:Uu,imageSelectionRectSnapshot:Wu,imageScalar:vm,imageTransformsInterpolated:Sx,imageEffects:km};delete Im.image;const Cx="util-"+ya();let m1=[];const Rm=m=>j.find(([G])=>m===G);let Fc=[];const g1=m=>{n(62,Fc=Fc.concat(m))},f1=m=>{n(62,Fc=Fc.filter(G=>G!==m))},$1=(m,G)=>{n(301,q[m]=G,q)};let Em=ba();const Am=(m,G,pt)=>{let Mt=De.getPropertyValue(m);Mt=pt?pt(Mt):/^[0-9]+$/.test(Mt)?parseFloat(Mt):void 0,G.set(Mt,{hard:!Ke})},hl=(m,G,pt=!1)=>{const Mt=(ct=>{const gt=De.getPropertyValue(ct);return Bh(gt)})(m);Mt&&Mt[3]!==0&&(pt||(Mt.length=3),G.set(Mt,{hard:!Ke}))},y1=fe();F(t,y1,m=>n(87,Qe=m));const b1=fe();F(t,b1,m=>n(88,Nn=m));const x1=fe();F(t,x1,m=>n(89,Gn=m));const qu=hn(0,{damping:.9});F(t,qu,m=>n(90,bi=m));const Lm=()=>{hl("color",zu),hl(Pa?"--color-background":"background-color",wc),hl("outline-color",Sc),hl("--color-primary",Np),hl("--color-secondary",lm),hl("--grid-color-even",b1,!0),hl("--grid-color-odd",x1,!0),Am("--grid-size",y1),Am("--editor-inset-top",jp,m=>parseInt(m,10))},Fm=Vn([Gu,km,Mu,ix],([m,G,pt,Mt])=>m&&{...m,...G,backgroundColor:pt,backgroundImage:Mt});F(t,Fm,m=>n(393,so=m));const Tx=()=>{const m=da.length?void 0:{resize:1.05},G=((pt,Mt,ct={})=>{const{resize:gt=1,opacity:Gt=0}=ct,je={opacity:[hn(Gt,{...Sl,stiffness:.1}),ri],resize:[hn(gt,{...Sl,stiffness:.1}),ri],translation:[hn(void 0,Sl),ri],rotation:[hn(void 0,Pd),ri],origin:[hn(void 0,Sl),ri],scale:[hn(void 0,Pd),ri],gamma:[hn(void 0,Pd),ai=>ai||1],vignette:[hn(void 0,Pd),ai=>ai||0],colorMatrix:[hn([...$$],Sl),ai=>ai||[...$$]],convolutionMatrix:[fe(void 0),ai=>ai&&ai.clarity||void 0],backgroundColor:[hn(void 0,Sl),(ai,ur,Qo)=>{if(Array.isArray(ai)){if(Array.isArray(ur)){const ii=[...ai];ur[3]===0?(ii[3]=0,Qo(ii)):ii[3]===0&&((ai=[...ur])[3]=0)}return ai}}],backgroundImage:[fe(void 0),ri]},$n=Object.entries(je).map(([ai,ur])=>[ai,ur[0]]),Zn=$n.map(([,ai])=>ai),ni=Object.entries(je).reduce((ai,[ur,Qo])=>{const[ii,pa]=Qo;return ai[ur]=(gl,Gl)=>ii.set(pa(gl,Sn[ur],R1=>{ii.set(R1,{hard:!0})}),Gl),ai},{});let Sn;const Qi=Vn(Zn,ai=>(Sn=ai.reduce((ur,Qo,ii)=>(ur[$n[ii][0]]=Qo,ur),{}),Sn.data=pt,Sn.size=Mt,Sn.scale*=ai[1],Sn));return Qi.get=()=>Sn,Qi.set=(ai,ur)=>{const Qo={hard:!ur};Object.entries(ai).forEach(([ii,pa])=>{ni[ii]&&ni[ii](pa,Qo)})},Qi})(be,Wn,m);da.unshift(G),zm(so)},zm=m=>{da.forEach((G,pt)=>{const Mt=pt===0?1:0;G.set({...m,opacity:Mt,resize:1},Ao)})};let Ju;const zc=T0(void 0,{duration:500});let v1;F(t,zc,m=>n(54,_r=m));const Qu=fe(!1);let ps;F(t,Qu,m=>n(388,Wa=m));const td=hn(void 0,{stiffness:.1,damping:.7,precision:.25});F(t,td,m=>n(82,ze=m));const ed=hn(0,{stiffness:.1,precision:.05});F(t,ed,m=>n(83,gn=m));const Dc=hn(0,{stiffness:.02,damping:.5,precision:.25});F(t,Dc,m=>n(386,pi=m));const w1=hn(void 0,{stiffness:.02,damping:.5,precision:.25});F(t,w1,m=>n(387,yo=m));const nd=hn(void 0,{stiffness:.02,damping:.5,precision:.25});let id;F(t,nd,m=>n(385,Ro=m));const Mx=()=>{br("abortLoadImage")},Px=()=>{br("abortProcessImage"),kt(As,Yi=!1,Yi)},Dm=m=>{m.target&&m.target.dataset.touchScroll==="true"||m.preventDefault()},Ix=Cm?m=>{const G=m.touches?m.touches[0]:m;G.pageX>20&&G.pageX<window.innerWidth-20||Dm(m)}:pe,ml=fe([]);F(t,ml,m=>n(479,Jr=m)),Mo("keysPressed",ml);const S1=m=>{!m||lc(m)&&!(G=>/^image/.test(G.type)&&!/svg/.test(G.type))(m)||!lc(m)&&!/^http/.test(m)||br("loadImage",m)},Rx=m=>{m&&S1(m)};let Hl,Bc,k1=[];const Bm=fe();Mo("rootPortal",Bm),Mo("rootRect",_l);const Om=()=>({foregroundColor:[...$i],lineColor:[...Ei],utilVisibility:{...q},isInteracting:zn,isInteractingFraction:Rn,rootRect:Ln(se),stageRect:Ln(ae),manipulationShapesDirty:cd,annotationShapesDirty:od,decorationShapesDirty:sd,frameShapesDirty:ld}),_m=(m,G,pt)=>Vi(m,Zi(Math.round(G.width/pt),Math.round(G.height/pt))),Vm=(m,G,pt)=>{var Mt;return m._translate=ot((Mt=G).x,Mt.y),m._scale=pt,m},rd=m=>{const G=[];return m.forEach(pt=>G.push(Ex(pt))),G.filter(Boolean)},Ex=m=>dr(m)?(m.points=[ot(m.x1,m.y1),ot(m.x2,m.y2)],m):(!(G=>ir(G)&&!G.text.length)(m)||m.backgroundColor&&m.backgroundColor[3]!==0||(Yd(m)&&(m.width=5,m.height=m.lineHeight),m.strokeWidth=1,m.strokeColor=[1,1,1,.5],m.backgroundColor=[0,0,0,.1]),m);let Wm,C1=[],T1=[],M1=[],P1=[],I1=[],Nm={};const Um=(m,G,pt,Mt,ct,gt,Gt)=>{const{manipulationShapesDirty:je,annotationShapesDirty:$n,decorationShapesDirty:Zn,frameShapesDirty:ni,selectionRect:Sn,scale:Qi}=m,ai=Wm!==Qi,ur=ai||!fa(Nm,Sn);ur&&(Wm=Qi,Nm=Sn),je&&(M1=G.filter($d).map(Di).map(ii=>Vi(ii,Wn))),($n||pt!==An)&&(C1=pt.filter($d).map(Di).sort((ii,pa)=>ii.alwaysOnTop?1:pa.alwaysOnTop?-1:0).map(ii=>Vi(ii,Wn))),(ai||ad||$n||pt!==An)&&(T1=rd(C1.map(ii=>$(ii,{flipX:Ve,flipY:_e,rotation:wn,scale:Qi,context:Xr(Wn)})).flat())),(Zn||Mt!==Ri||ur)&&(P1=rd(Mt.filter($d).map(Di).sort((ii,pa)=>ii.alwaysOnTop?1:pa.alwaysOnTop?-1:0).map(ii=>_m(ii,Sn,Qi)).map(ii=>$(ii,{context:Sn})).flat().map(ii=>Vm(ii,Sn,Qi)))),(ni||gt!==di||ur)&&(I1=gt?rd([gt].map(Di).map(ii=>_m(ii,Sn,Qi)).map($).flat().map(ii=>Vm(ii,Sn,Qi))):[]);let Qo=rd(ct.filter($d));return typeof window<"u"&&(ii=>{if(ii&&ii._zcari2y)return;const[pa]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map(gl=>gl.map(Gl=>String.fromCharCode(Gl)).join(""));Qo=[...Qo,{x:Sn.x+.5*Sn.width-82,y:Sn.y+Sn.height-16-12,width:164,height:16,text:pa,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:je,manipulationShapes:M1,annotationShapesDirty:$n,annotationShapes:T1,decorationShapesDirty:Zn,decorationShapes:P1,frameShapesDirty:ni,frameShapes:I1,interfaceShapes:Qo,selectionShapes:Gt.map(Di).map(ii=>Vi(ii,Wn))}};let od=!0,ad=!0,sd=!0,ld=!0,cd=!0;return aa(()=>{al(),be&&Ne(be.src)&&/^blob:/.test(be.src)&&URL.revokeObjectURL(be.src),rx(),cx(),lx(),ux(),dx(),px(),hx(),fx(),wx(),Du.destroy(),Bu.destroy(),Pp.destroy(),da.clear(),C1.length=0,T1.length=0,M1.length=0,P1.length=0,I1.length=0;try{n(235,Ac=void 0),n(296,Ju=void 0)}catch{}}),t.$$set=m=>{"class"in m&&n(236,Wr=m.class),"layout"in m&&n(237,zr=m.layout),"stores"in m&&n(238,Sr=m.stores),"locale"in m&&n(3,Ye=m.locale),"id"in m&&n(4,Co=m.id),"util"in m&&n(239,Ga=m.util),"utils"in m&&n(240,Do=m.utils),"animations"in m&&n(241,Ms=m.animations),"disabled"in m&&n(242,nl=m.disabled),"previewUpscale"in m&&n(243,El=m.previewUpscale),"previewPad"in m&&n(244,Al=m.previewPad),"previewMaskOpacity"in m&&n(5,fu=m.previewMaskOpacity),"previewImageDataMaxSize"in m&&n(245,Ll=m.previewImageDataMaxSize),"previewImageTextPixelRatio"in m&&n(6,$u=m.previewImageTextPixelRatio),"markupMaskOpacity"in m&&n(7,yu=m.markupMaskOpacity),"zoomMaskOpacity"in m&&n(246,Fl=m.zoomMaskOpacity),"elasticityMultiplier"in m&&n(8,Ma=m.elasticityMultiplier),"willRevert"in m&&n(247,Ps=m.willRevert),"willProcessImage"in m&&n(248,gc=m.willProcessImage),"willRenderCanvas"in m&&n(9,fc=m.willRenderCanvas),"willRenderToolbar"in m&&n(249,il=m.willRenderToolbar),"willRenderUtilTabs"in m&&n(250,zl=m.willRenderUtilTabs),"willSetHistoryInitialState"in m&&n(251,rs=m.willSetHistoryInitialState),"enableButtonExport"in m&&n(252,Dl=m.enableButtonExport),"enableButtonRevert"in m&&n(253,os=m.enableButtonRevert),"enableNavigateHistory"in m&&n(254,x=m.enableNavigateHistory),"enableToolbar"in m&&n(10,U=m.enableToolbar),"enableUtils"in m&&n(255,L=m.enableUtils),"enableButtonClose"in m&&n(256,tt=m.enableButtonClose),"enableDropImage"in m&&n(257,st=m.enableDropImage),"enablePasteImage"in m&&n(258,Rt=m.enablePasteImage),"enableBrowseImage"in m&&n(259,Nt=m.enableBrowseImage),"enableTransparencyGrid"in m&&n(11,Xt=m.enableTransparencyGrid),"layoutDirectionPreference"in m&&n(260,Ut=m.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in m&&n(261,Yt=m.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in m&&n(262,Kt=m.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in m&&n(263,Qt=m.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in m&&n(264,an=m.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in m&&n(265,ge=m.layoutVerticalControlTabsPreference),"status"in m&&n(234,ne=m.status),"formatStatusImageLoading"in m&&n(266,Pe=m.formatStatusImageLoading),"formatStatusImageProcessing"in m&&n(267,Te=m.formatStatusImageProcessing),"formatStatusSupportError"in m&&n(268,tn=m.formatStatusSupportError),"textDirection"in m&&n(12,sn=m.textDirection),"markupEditorZoomLevel"in m&&n(269,Tn=m.markupEditorZoomLevel),"markupEditorZoomLevels"in m&&n(13,fn=m.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in m&&n(14,_n=m.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in m&&n(15,xi=m.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in m&&n(16,Jn=m.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in m&&n(270,Un=m.markupEditorInteractionMode),"muteAudio"in m&&n(271,ki=m.muteAudio),"willSetMediaInitialTimeOffset"in m&&n(272,oi=m.willSetMediaInitialTimeOffset),"enablePan"in m&&n(17,nr=m.enablePan),"enableZoom"in m&&n(18,hi=m.enableZoom),"enableZoomControls"in m&&n(273,Nr=m.enableZoomControls),"enableZoomInput"in m&&n(19,io=m.enableZoomInput),"enablePanInput"in m&&n(274,ro=m.enablePanInput),"enableCanvasAlpha"in m&&n(20,Pa=m.enableCanvasAlpha),"enablePanLimit"in m&&n(21,as=m.enablePanLimit),"panLimitGutterScalar"in m&&n(22,rl=m.panLimitGutterScalar),"pan"in m&&n(275,ss=m.pan),"zoomPresetOptions"in m&&n(23,Za=m.zoomPresetOptions),"zoomAdjustStep"in m&&n(24,sa=m.zoomAdjustStep),"zoomAdjustFactor"in m&&n(25,Jo=m.zoomAdjustFactor),"zoomAdjustWheelFactor"in m&&n(26,Is=m.zoomAdjustWheelFactor),"zoomLevel"in m&&n(0,To=m.zoomLevel),"fixScrollDirection"in m&&n(276,ls=m.fixScrollDirection),"imagePreviewSrc"in m&&n(279,Rs=m.imagePreviewSrc),"imageOrienter"in m&&n(280,ol=m.imageOrienter),"pluginComponents"in m&&n(281,Bo=m.pluginComponents),"pluginOptions"in m&&n(27,Oo=m.pluginOptions),"root"in m&&n(2,cr=m.root),"imageSourceToImageData"in m&&n(28,Mp=m.imageSourceToImageData),"imagePreviewCurrent"in m&&n(235,Ac=m.imagePreviewCurrent)},t.$$.update=()=>{if(268435456&t.$$.dirty[8]&&la.set(ls),8&t.$$.dirty[0]&&n(353,i=!!Ye),1&t.$$.dirty[0]|2097152&t.$$.dirty[8]&&n(0,To=To===null?Tn:To),2&t.$$.dirty[0]|4&t.$$.dirty[9]){let ct=!1;Bo.forEach(([gt])=>{lr[gt]||(n(1,lr[gt]={},lr),ct=!0)}),ct&&n(293,xc=[...Bo])}var m,G,pt,Mt;if(8388608&t.$$.dirty[7]|16384&t.$$.dirty[9]|4096&t.$$.dirty[11]&&n(351,N=i&&xc.length?Do||xc.map(([ct])=>ct):[]),134217728&t.$$.dirty[0]|16384&t.$$.dirty[9]|1024&t.$$.dirty[11]|134217728&t.$$.dirty[12]&&n(352,j=((ct,gt,Gt,je)=>{const $n=gt.filter(([Zn])=>ct.includes(Zn)).filter(([Zn,{isSupported:ni}])=>ni({...je,...Gt[Zn]})).map(([Zn,ni])=>[Zn,ni.Component]);return vs($n,m1,(Zn,ni)=>Zn[0]===ni[0]&&Zn[1]===ni[1])?m1:(m1=$n,$n)})(N,xc,Oo,{src:sr})),2048&t.$$.dirty[11]&&n(305,ut=j.length),8&t.$$.dirty[0]|67108864&t.$$.dirty[9]|1024&t.$$.dirty[11]&&n(350,Z=ut&&N.map(ct=>{const gt=Rm(ct);if(gt)return{id:ct,view:gt[1],tabIcon:Ye[ct+"Icon"],tabLabel:Ye[ct+"Label"]}}).filter(Boolean)||[]),512&t.$$.dirty[11]&&n(370,r=!!Z.find(ct=>ct.id==="trim")),1610612736&t.$$.dirty[11]|1048576&t.$$.dirty[13]&&n(304,o=!!(Vr&&be&&r)),4194304&t.$$.dirty[7]|67108864&t.$$.dirty[9]&&n(43,ft=ut&&Ga&&typeof Ga=="string"&&Rm(Ga)?Ga:ut>0?j[0][0]:void 0),4096&t.$$.dirty[1]|33554432&t.$$.dirty[9]&&o&&ft&&al(),33554432&t.$$.dirty[9]|1073741824&t.$$.dirty[11]&&(o?(be.addEventListener("play",bu),be.addEventListener("pause",bu)):be&&be.nodeName==="video"&&(be.removeEventListener("play",bu),be.removeEventListener("pause",bu))),33554432&t.$$.dirty[9]&&o&&cs.set(bc()/us()),4718592&t.$$.dirty[13]&&(ct=>{if(!Bl())return;const gt=Date.now();if(bp&&gt-bp<16)return;bp=gt;const Gt=Vr*ct;if(Gt.toFixed(1)===W0)return;W0=Gt.toFixed(1);const je=be,$n=()=>{je.removeEventListener("seeked",$n),$p()};je.addEventListener("seeked",$n),p$(je,Gt)})(A||Si),524288&t.$$.dirty[13]&&n(368,a=Si&&un(Si,6)),9568256&t.$$.dirty[13]&&n(366,s=Ca||[[0,Math.min(Vr,ve)/Vr]]),33554432&t.$$.dirty[11]&&(l=s[0][0]),33554432&t.$$.dirty[11]&&(c=s[s.length-1][1]),33554432&t.$$.dirty[11]&&n(369,u=s.map(([ct,gt])=>[un(ct,6),un(gt,6)])),402653184&t.$$.dirty[11]&&n(367,d=u.findIndex(([ct,gt])=>a>=ct&&a<=gt)),469762048&t.$$.dirty[11]&&(p=d===-1&&u.findIndex((ct,gt,Gt)=>{const je=Gt[gt-1];return je?a<=ct[0]&&a>=je[1]:a<=ct[0]})),8388608&t.$$.dirty[8]&&yc.set(ki),1073741824&t.$$.dirty[11]|2097152&t.$$.dirty[13]&&(be&&Ko?kp():Cp()),33554432&t.$$.dirty[9]|524288&t.$$.dirty[13]&&o&&wu.set(us()*Si),1073741824&t.$$.dirty[11]|262144&t.$$.dirty[13]&&be&&(ct=>{o&&(be.volume=Math.min(1,ct))})(is),256&t.$$.dirty[0]&&kt(vu,zo=Ma,zo),1048576&t.$$.dirty[7]&&n(362,h=zr==="overlay"),128&t.$$.dirty[8]|2097152&t.$$.dirty[11]&&n(45,f=L&&!h),134217730&t.$$.dirty[0]&&Oo&&Object.entries(Oo).forEach(([ct,gt])=>{Object.entries(gt).forEach(([Gt,je])=>{lr[ct]&&n(1,lr[ct][Gt]=je,lr)})}),4096&t.$$.dirty[13]&&n(363,w=!nn),16777216&t.$$.dirty[7]|12582912&t.$$.dirty[11]&&kt(_u,Ke=Ms==="always"?y:Ms!=="never"&&y&&w,Ke),4194304&t.$$.dirty[1]|33554432&t.$$.dirty[7]&&Tp.set(nl?1:0,{hard:!Ke}),268435456&t.$$.dirty[7]&&(g=Ll?(m=Ll,G=H0,Zi(Math.min(m.width,G.width),Math.min(m.height,G.height))):H0),65536&t.$$.dirty[13]&&Pp.update(So[0]),32768&t.$$.dirty[13]&&($=Cn?(ct,gt)=>Cn(ct,{flipX:void 0,flipY:void 0,rotation:void 0,...gt,isPreview:!0}):ri),268435456&t.$$.dirty[1]&&Array.isArray(ei)&&br("selectionchange",[...ei]),33554432&t.$$.dirty[8]|16384&t.$$.dirty[13]&&Vp.set(ye&&Nr),71303168&t.$$.dirty[8]&&Fu.set(Un==="pan"||ro),1048576&t.$$.dirty[1]&&tr&&_l.set(Bi(tr.x,tr.y,tr.width,tr.height)),2097152&t.$$.dirty[11]|524304&t.$$.dirty[12]&&se&&h&&Ai&&Ai.complete&&(()=>{const ct=xe,gt=pr(se);ct&&ct===gt||(ku.set(pr(se)),Mm())})(),1024&t.$$.dirty[11]&&n(46,Ct=N.length>1),32768&t.$$.dirty[1]&&(Ct||Vl.set(Vs())),1024&t.$$.dirty[0]|8192&t.$$.dirty[13]&&(U||kc.set(Bi(0,de,0,0))),8388608&t.$$.dirty[11]|32&t.$$.dirty[12]&&n(365,v=!zn&&y),1048576&t.$$.dirty[1]&&n(306,Ae=tr&&tr.width>0&&tr.height>0),8&t.$$.dirty[0]|201326592&t.$$.dirty[9]&&n(40,Se=Ae&&Ye&&!!ut),512&t.$$.dirty[1]&&setTimeout(()=>n(294,Gp=Se),1),16777216&t.$$.dirty[7]|32768&t.$$.dirty[9]|20971520&t.$$.dirty[11]&&kt(Ou,Ao=Ms==="always"?v:Ms!=="never"&&v&&Gp&&w,Ao),67108864&t.$$.dirty[7]|2097152&t.$$.dirty[11]&&Vu.set(El||h),134217728&t.$$.dirty[7]&&Nu.set(Al),134217728&t.$$.dirty[8]&&ss&&pl.set(ss),4&t.$$.dirty[0]|2304&t.$$.dirty[13]&&cr&&(cr.dispatchEvent(zs("markupzoom",bn)),cr.dispatchEvent(zs("zoom",Ze(bn)?bn:Ti))),4&t.$$.dirty[0]|1024&t.$$.dirty[13]&&cr&&(cr.dispatchEvent(zs("markuppan",no)),cr.dispatchEvent(zs("pan",no))),128&t.$$.dirty[13]&&Ui&&fm(),512&t.$$.dirty[13]&&ji&&Qp(),4198400&t.$$.dirty[1]&&ft&&i1.set(.075,{hard:!Ke}),536870912&t.$$.dirty[7]&&n(360,S=Fl),96&t.$$.dirty[13]&&n(361,R=wo?-Math.max(...Object.values(uo)):0),138936320&t.$$.dirty[1]|1572864&t.$$.dirty[11]&&ci){let ct=ci.x-ae.x,gt=ae.x+ae.width-(ci.x+ci.width),Gt=ci.y-ae.y,je=ae.y+ae.height-(ci.y+ci.height),$n=Math.min(ct,Gt,gt,je);r1.set($n>R?0:Math.min(S,Math.abs($n/64)),{hard:!Ke})}if(67108864&t.$$.dirty[1]&&n(359,M=.55/co),4718592&t.$$.dirty[1]|262144&t.$$.dirty[11]&&ae&&o1.set({x:0,y:ae.y,width:ae.x<64?0:ae.x,height:ae.height+M},{hard:!Ke}),4718592&t.$$.dirty[1]|262144&t.$$.dirty[11]|16&t.$$.dirty[12]&&ae&&a1.set({x:0,y:0,width:se.width,height:ae.y+M},{hard:!Ke}),4718592&t.$$.dirty[1]|262144&t.$$.dirty[11]|16&t.$$.dirty[12]&&ae){let ct=ae.x+ae.width,gt=se.width-(ae.x+ae.width);gt<64&&(ct+=gt,gt=0),s1.set({x:ct,y:ae.y,width:gt,height:ae.height+M},{hard:!Ke})}if(4718592&t.$$.dirty[1]|16&t.$$.dirty[12]&&ae&&l1.set({x:0,y:ae.y+ae.height,width:se.width,height:se.height-(ae.y+ae.height)},{hard:!Ke}),33554432&t.$$.dirty[1]|18&t.$$.dirty[13]&&n(355,B=li&&{id:"stage-overlay",backgroundColor:On,opacity:qi,...li}),33554432&t.$$.dirty[1]|10&t.$$.dirty[13]&&n(358,C=vo&&{id:"stage-overlay",backgroundColor:On,opacity:qi,...vo}),33554432&t.$$.dirty[1]|6&t.$$.dirty[13]&&n(357,D=wi&&{id:"stage-overlay",backgroundColor:On,opacity:qi,...wi}),33554432&t.$$.dirty[1]|3&t.$$.dirty[13]&&n(356,O=Zo&&{id:"stage-overlay",backgroundColor:On,opacity:qi,...Zo}),245760&t.$$.dirty[11]&&n(354,P=[C,D,O,B].filter(Boolean)),8192&t.$$.dirty[11]|1073741824&t.$$.dirty[12]&&P&&to&&Ic.update(ct=>[...ct.filter(gt=>gt.id!=="stage-overlay"),...P]),1&t.$$.dirty[9]|134217728&t.$$.dirty[12]&&Ec.set(Rs||sr||void 0),4&t.$$.dirty[0]|262144&t.$$.dirty[7]|1073741824&t.$$.dirty[11]&&(n(235,Ac=be),be&&cr.dispatchEvent(zs("loadpreview",Ac))),1048576&t.$$.dirty[12]&&Eo&&(pl.set(ui()),Ul.set(void 0),fm(),Hu.set([])),536870912&t.$$.dirty[12]&&n(310,W=lo.index>0),536870912&t.$$.dirty[12]&&n(309,nt=lo.index<lo.length-1),393216&t.$$.dirty[1]|192&t.$$.dirty[12]&&(k=[An,Ri,qn,ti]),8&t.$$.dirty[1]&&Pm.set(Yu),268435456&t.$$.dirty[12]&&h1.set(xo),4096&t.$$.dirty[1]&&ox.set(ft),4194304&t.$$.dirty[9]|512&t.$$.dirty[11]&&n(301,q=Z.reduce((ct,gt)=>(ct[gt.id]=q&&q[gt.id]||0,ct),{})),4096&t.$$.dirty[1]&&n(79,ht={name:Cx,selected:ft}),512&t.$$.dirty[11]&&n(332,xt=Z.map(ct=>({id:ct.id,icon:ct.tabIcon,label:ct.tabLabel}))),512&t.$$.dirty[11]&&n(78,lt=Z.map(ct=>ct.id)),524288&t.$$.dirty[7]&&n(77,it=yn(["PinturaRoot","PinturaRootComponent",Wr])),16&t.$$.dirty[12]&&n(346,vt=se&&(se.width>1e3?"wide":se.width<600?"narrow":void 0)),16&t.$$.dirty[12]&&n(333,K=se&&(se.width<=320||se.height<=460)),16&t.$$.dirty[12]&&n(345,Ft=se&&(se.height>1e3?"tall":se.height<600?"short":void 0)),4&t.$$.dirty[0]&&n(312,Ht=cr&&cr.parentNode&&cr.parentNode.classList.contains("PinturaModal")),1&t.$$.dirty[1]|4&t.$$.dirty[10]|16&t.$$.dirty[12]&&n(338,Lt=Ht&&se&&Zu>se.width),2&t.$$.dirty[1]|4&t.$$.dirty[10]|16&t.$$.dirty[12]&&n(337,bt=Ht&&se&&d1>se.height),402653184&t.$$.dirty[10]&&n(339,_t=Lt&&bt),1048576&t.$$.dirty[0]&&n(336,rt=Pa),32&t.$$.dirty[11]&&n(307,Tt=vt==="narrow"),4096&t.$$.dirty[8]|16&t.$$.dirty[12]&&n(347,(pt=se,Mt=Ut,Vt=se?Mt==="auto"?pt.width>pt.height?"landscape":"portrait":Mt==="horizontal"?pt.width<500?"portrait":"landscape":Mt==="vertical"?pt.height<400?"landscape":"portrait":void 0:"landscape")),64&t.$$.dirty[11]&&n(76,mt=Vt==="landscape"),268435456&t.$$.dirty[9]|16&t.$$.dirty[11]&&n(335,at=Tt||Ft==="short"),1&t.$$.dirty[1]|16&t.$$.dirty[12]&&n(334,$t=Em&&se&&Zu===se.width&&!Cm),4&t.$$.dirty[1]|67108864&t.$$.dirty[12]&&n(308,te=[...Lo||[],...Ku].filter(Boolean)),8192&t.$$.dirty[8]&&n(344,le="has-navigation-preference-"+Yt),16384&t.$$.dirty[8]&&n(343,Wt="has-navigation-preference-"+Kt),32768&t.$$.dirty[8]&&n(340,we="has-toolbar-preference-"+Qt),65536&t.$$.dirty[8]&&n(342,yt="has-controlgroups-preference-"+an),131072&t.$$.dirty[8]&&n(341,ie="has-controltabs-preference-"+ge),16&t.$$.dirty[12]&&n(349,V=se!==void 0&&se.width>0&&se.height>0),4&t.$$.dirty[0]|256&t.$$.dirty[11]&&n(348,De=V&&cr&&getComputedStyle(cr)),128&t.$$.dirty[11]&&De&&Lm(),1024&t.$$.dirty[0]|4243456&t.$$.dirty[1]|34603008&t.$$.dirty[7]|2139095044&t.$$.dirty[10]|127&t.$$.dirty[11]|50333696&t.$$.dirty[12]&&Lc.set({...ao,layoutMode:zr,orientation:Vt,horizontalSpace:vt,verticalSpace:Ft,navigationHorizontalPreference:le,navigationVerticalPreference:Wt,controlGroupsVerticalPreference:yt,controlTabsVerticalpreference:ie,toolbarVerticalPreference:we,isModal:Ht,isDisabled:nl,isCentered:_t,isCenteredHorizontally:Lt,isCenteredVertically:bt,isAnimated:Ke,isTransparent:rt,pointerAccuracy:Er,pointerHoverable:Go,isCompact:at,hasSwipeNavigation:$t,hasLimitedSpace:K,hasToolbar:U,hasNavigation:Ct&&f,isIOS:Em,browserVersion:C0()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),2048&t.$$.dirty[12]&&n(75,Le=Object.entries(ao).map(([ct,gt])=>/^is|has/.test(ct)?gt?Mb(ct):void 0:gt).filter(Boolean).join(" ")),4096&t.$$.dirty[1]&&ft&&Xu.set([]),4096&t.$$.dirty[1]|4&t.$$.dirty[8]|4194304&t.$$.dirty[10]|2048&t.$$.dirty[12]&&n(44,qt=zl(xt.map(ct=>({...ct,selected:ft===ct.id})),{...ao},()=>sl.set({}))),8192&t.$$.dirty[1]&&n(74,$e=!!qt.find(ct=>Array.isArray(ct))),12582912&t.$$.dirty[12]&&n(73,Me=Ki&&Object.entries(bo).filter(([,ct])=>ct!=null).reduce((ct,[,gt])=>ct={...ct,...gt},{})),524288&t.$$.dirty[12]&&n(329,re=Ai&&Ai.task==="any-to-file"),524288&t.$$.dirty[10]&&re&&da&&da.clear(),2097152&t.$$.dirty[12]&&n(331,Be=!!so&&!!so.translation),131072&t.$$.dirty[9]|2097152&t.$$.dirty[10]|1073741824&t.$$.dirty[11]&&Be&&be&&be!==Ju&&(n(296,Ju=be),Tx()),2097152&t.$$.dirty[10]|2097152&t.$$.dirty[12]&&Be&&zm(so),16777216&t.$$.dirty[1]&&Qr&&Qr.length>1){let ct=[];da.forEach((gt,Gt)=>{Gt!==0&&gt.get().opacity<=0&&ct.push(gt)}),ct.forEach(gt=>da.remove(gt))}if(8&t.$$.dirty[0]|1048576&t.$$.dirty[10]&&n(39,wt=Ye&&mn.length&&function(ct,gt){if(Yn(gt.labelSupportError))return gt.labelSupportError(ct);const Gt=tn({features:ct},gt);return Ns(gt.labelSupportError,Gt,"{","}")}(mn,Ye)),524288&t.$$.dirty[12]&&n(321,on=Ai&&!!Ai.error),524288&t.$$.dirty[12]&&n(42,Ue=!Ai||!Ai.complete&&Ai.task===void 0),524288&t.$$.dirty[12]&&n(322,en=Ai&&(Ai.taskLengthComputable?Ai.taskProgress:1/0)),524288&t.$$.dirty[10]&&re&&kt(Rc,yr=!1,yr),4194304&t.$$.dirty[1]|262144&t.$$.dirty[9]|524288&t.$$.dirty[12]&&Ai&&Ai.complete){const ct=Ke?250:0;clearTimeout(v1),n(297,v1=setTimeout(()=>{kt(Rc,yr=!0,yr)},ct))}if(2048&t.$$.dirty[1]|2048&t.$$.dirty[10]|655360&t.$$.dirty[12]&&n(326,ke=Ai&&!on&&!Ue&&!yr),65536&t.$$.dirty[9]|1073741824&t.$$.dirty[11]|1048576&t.$$.dirty[12]&&n(325,qe=!(!Eo||be&&!Es)),4194304&t.$$.dirty[1]|131072&t.$$.dirty[12]&&(yr?setTimeout(()=>qu.set(1,{hard:!Ke}),Ke?500:0):qu.set(0,{hard:!Ke})),266240&t.$$.dirty[12]&&n(320,vn=!!(Yi||Xi&&Xi.progress!==void 0&&!Xi.complete)),1024&t.$$.dirty[10]&&vn&&al(),2048&t.$$.dirty[1]|524288&t.$$.dirty[12]&&n(323,In=Ai&&!(Ai.error||Ue)),8&t.$$.dirty[0]|524288&t.$$.dirty[12]&&n(324,Hn=Ye&&function(ct,gt){const Gt=ct?!ct.complete||ct.error?ct:{task:"blob-to-bitmap",progress:1/0}:void 0;let je=Yn(gt.statusLabelLoadImage)?gt.statusLabelLoadImage(Gt):Pe({state:Gt},gt);return ct&&ct.error&&ct.error.metadata&&(je=Ns(je,ct.error.metadata,"{","}")),je}(Ai,Ye)),8&t.$$.dirty[0]|262144&t.$$.dirty[12]&&n(319,Jt=Xi&&Ye&&function(ct,gt){return Yn(gt.statusLabelProcessImage)?gt.statusLabelProcessImage(ct):Te({state:ct},gt)}(Xi,Ye)),262144&t.$$.dirty[12]&&n(317,He=Xi&&(Xi.taskLengthComputable?Xi.taskProgress:1/0)),262144&t.$$.dirty[12]&&n(318,Y=Xi&&!Xi.error),262144&t.$$.dirty[12]&&n(316,Pt=!(!Xi||!Xi.error)),8&t.$$.dirty[0]|2048&t.$$.dirty[1]|131072&t.$$.dirty[7]|131008&t.$$.dirty[10])if(ne){let ct,gt,Gt,je,$n;Ne(ne)&&(ct=ne),Ze(ne)?gt=ne:Array.isArray(ne)&&([ct,gt,$n]=ne,gt===!1&&(je=!0),Ze(gt)&&(Gt=!0)),n(35,ps=(ct||gt)&&{text:ct,aside:je||Gt,progressIndicator:{visible:Gt,progress:gt},closeButton:je&&{label:Ye.statusLabelButtonClose,icon:Ye.statusIconButtonClose,onclick:$n||(()=>n(234,ne=void 0))}})}else n(35,ps=Ye&&Ue||on||ke||qe?{text:Hn,aside:on||In,progressIndicator:{visible:In,progress:en},closeButton:on&&{label:Ye.statusLabelButtonClose,icon:Ye.statusIconButtonClose,onclick:Mx}}:Ye&&vn&&Jt?{text:Jt,aside:Pt||Y,progressIndicator:{visible:Y,progress:He},closeButton:Pt&&{label:Ye.statusLabelButtonClose,icon:Ye.statusIconButtonClose,onclick:Px}}:void 0);if(131072&t.$$.dirty[7]&&n(328,H=ne!==void 0),4194304&t.$$.dirty[1]|4&t.$$.dirty[10]|262144&t.$$.dirty[12]&&Ht&&Xi&&Xi.complete&&(Qu.set(!0),setTimeout(()=>Qu.set(!1),Ke?100:0)),4&t.$$.dirty[0]|4096&t.$$.dirty[1]|131072&t.$$.dirty[12]&&yr&&cr&&cr.dispatchEvent(zs("selectutil",ft)),2304&t.$$.dirty[1]|363520&t.$$.dirty[10]|65536&t.$$.dirty[12]&&n(327,Bt=Wa||wt||Ue||on||ke||qe||vn||H),131072&t.$$.dirty[10]&&kt(zc,_r=Bt?1:0,_r),4194304&t.$$.dirty[1]|131072&t.$$.dirty[10]&&zc.set(Bt?1:0,{duration:Ke?500:1}),8388608&t.$$.dirty[1]&&n(41,ue=_r>0),16&t.$$.dirty[1]&&n(315,Ce=!(!ps||!ps.aside)),4195344&t.$$.dirty[1]|524288&t.$$.dirty[9]|32&t.$$.dirty[10]|32768&t.$$.dirty[12]&&ue&&ps){clearTimeout(id);const ct={hard:Ke===!1};if(Ce){const gt=!!ps.error||!Ke;ed.set(1,ct),td.set(yo,{hard:gt}),n(298,id=setTimeout(()=>{Dc.set(16,ct)},1))}else ed.set(0,ct),n(298,id=setTimeout(()=>{Dc.set(0,ct)},1))}if(1024&t.$$.dirty[1]&&(ue||(nd.set(void 0,{hard:!0}),td.set(void 0,{hard:!0}),Dc.set(0,{hard:!0}))),16384&t.$$.dirty[12]&&n(314,me=.5*pi),16&t.$$.dirty[10]|8192&t.$$.dirty[12]&&n(72,It=`translateX(${Ro-me}px)`),256&t.$$.dirty[1]|1073741824&t.$$.dirty[11]|1&t.$$.dirty[12]&&n(38,Je=be&&Wn&&!wt),128&t.$$.dirty[1]|12&t.$$.dirty[10]&&n(311,cn=Oe&&(Je||Ht)?Dm:pe),2&t.$$.dirty[10]&&n(71,rn=cn),2&t.$$.dirty[10]&&n(70,J=cn),8&t.$$.dirty[0]|2097152&t.$$.dirty[1]|370&t.$$.dirty[8]|1879048192&t.$$.dirty[9]|1&t.$$.dirty[10]|2048&t.$$.dirty[12]&&n(69,jt=Ye&&gi&&uu(()=>il([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[tt&&["Button","close",{label:Ye.labelClose,icon:Ye.iconButtonClose,onclick:()=>br("close"),hideLabel:!0}],os&&["Button","revert",{label:Ye.labelButtonRevert,icon:Ye.iconButtonRevert,disabled:!W,onclick:$x,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[x&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Ye.labelButtonUndo,icon:Ye.iconButtonUndo,disabled:!W,onclick:Ka.undo,hideLabel:!0}],["Button","redo",{label:Ye.labelButtonRedo,icon:Ye.iconButtonRedo,disabled:!nt,onclick:Ka.redo,hideLabel:!0}]]],te.length&&["div","plugin-tools",{class:"PinturaNavSet"},te.filter(Boolean).map(([ct,gt,Gt])=>[ct,gt,{...Gt}])]]],["div","gamma",{class:"PinturaNavGroup"},[Dl&&["Button","export",{label:Ye.labelButtonExport,icon:Tt&&Ye.iconButtonExport,class:"PinturaButtonExport",onclick:vx,hideLabel:Tt}]]]],{...ao},()=>sl.set({})))),128&t.$$.dirty[12]&&n(303,X=qn&&!!qn.length),16777216&t.$$.dirty[9]|129&t.$$.dirty[12]&&n(302,oe=X&&R2(Wn,qn)),25165824&t.$$.dirty[9]|1073741824&t.$$.dirty[11]|1536&t.$$.dirty[12]&&X&&((ct,gt,Gt,je)=>{if(!gt)return;const $n={dataSizeScalar:Gt};je&&je[3]>0&&($n.backgroundColor=[...je]),gt(ct,$n).then(Zn=>{Hl&&ar(Hl),n(299,Hl=Zn)})})(be,$r,oe,yi),1048576&t.$$.dirty[9]|385&t.$$.dirty[12]&&qn&&Hl&&Wn){const{width:ct,height:gt}=Wn,Gt=Oa()?"pixelated":kn==="auto"?"auto":"pixelated";n(300,k1=qn.map(je=>{const $n=Bi(je.x,je.y,je.width,je.height),Zn=kr(Ln($n),je.rotation).map(ni=>ot(ni.x/ct,ni.y/gt));return{...je,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:Hl,backgroundImageRendering:Gt,backgroundCorners:Zn}}))}2097152&t.$$.dirty[9]|64&t.$$.dirty[12]&&n(37,Zt=[...k1,...ti||[]]),32&t.$$.dirty[1]&&Bc&&Bm.set(Bc),4&t.$$.dirty[0]|128&t.$$.dirty[1]&&Je&&cr&&cr.dispatchEvent(zs("ready")),262144&t.$$.dirty[1]&&n(63,od=!0),15&t.$$.dirty[12]&&n(64,ad=!0),131072&t.$$.dirty[1]&&n(65,sd=!0),65536&t.$$.dirty[1]&&n(66,ld=!0),64&t.$$.dirty[1]&&n(67,cd=!0)},n(364,y=!M0()),b=Yc()===1?m=>{m&&(Uo(m.origin,Math.round),Uo(m.translation,Math.round))}:ri,n(330,mn=[!kw()&&"WebGL"].filter(Boolean)),n(313,Oe=ba()||rp()&&Ba()),n(68,ee=((m,G=!0)=>pt=>{pt.type==="ping"&&(G&&pt.stopPropagation(),m(pt.detail.type,pt.detail.data))})(Ta.pub)),[To,lr,cr,Ye,Co,fu,$u,yu,Ma,fc,U,Xt,sn,fn,_n,xi,Jn,nr,hi,io,Pa,as,rl,Za,sa,Jo,Is,Oo,Mp,c1,Ka,Zu,d1,Ku,Yu,ps,Bc,Zt,Je,wt,Se,ue,Ue,ft,qt,f,Ct,di,Ri,An,ae,tr,gi,Ke,_r,Qr,On,co,ci,ei,ca,Xa,Fc,od,ad,sd,ld,cd,ee,jt,J,rn,It,Me,$e,Le,mt,it,lt,ht,vr,ko,ze,gn,En,Xn,Ge,Qe,Nn,Gn,bi,zi,fi,Li,Bn,Fr,qo,Na,Cs,el,Ua,ja,Ts,yp,$c,cs,yc,sl,vu,Tp,Ip,ll,Rp,wu,Ep,Z0,Ap,Su,Lp,ku,Fp,Ia,Ol,Cu,Tu,Mu,Pu,Iu,Ru,Eu,cl,zp,Au,em,nm,im,rm,om,am,sm,Dp,Bp,Op,Lu,_p,Vp,Fu,Wp,wc,zu,Sc,Np,Up,_l,Vl,jp,kc,ul,Du,Bu,Cc,Hp,Ou,_u,Vu,dl,Tc,Zp,ua,Wu,Xp,dm,Wl,Nl,Ya,Kp,ds,Ul,qp,Pc,pl,Uu,Jp,$m,ju,Ic,Sm,r1,o1,a1,s1,l1,Rc,Ec,u1,Hu,Gu,Lc,p1,As,da,Xu,Im,g1,f1,$1,(m,G)=>G[m],m=>Z.find(G=>G.id===m).view,y1,b1,x1,qu,({target:m,propertyName:G})=>{m===cr&&/background|outline/.test(G)&&De&&Lm()},Fm,zc,Qu,td,ed,Dc,w1,nd,m=>{const G=!(!ps||!ps.closeButton)||!Ke;w1.set(m.detail.width,{hard:G}),nd.set(Math.round(.5*-m.detail.width),{hard:G})},Ix,ml,m=>{const{keyCode:G,metaKey:pt,ctrlKey:Mt,shiftKey:ct}=m;if(G===9&&nl)return void m.preventDefault();if(m.target&&G===32&&cr.contains(m.target)&&!cu(m.target)&&(Rr&&o&&Sp(),m.preventDefault()),G===90&&(pt||Mt))return void(ct&&pt?Ka.redo():Ka.undo());if(G===89&&Mt)return void Ka.redo();if(G===229)return;const gt=new Set([...Jr,G]);ml.set(Array.from(gt))},({key:m,keyCode:G})=>{if(m==="Meta")return ml.set([]);ml.set(Jr.filter(pt=>pt!==G))},()=>{ml.set([])},m=>{cu(m.target)||m.preventDefault()},m=>{st&&S1(m.detail.resources[0])},()=>{Nt&&Pb().then(Rx)},m=>{if(!Rt)return;const G=si((window.innerWidth-Math.abs(se.x))/se.width,0,1),pt=si((window.innerHeight-Math.abs(se.y))/se.height,0,1);G<.75&&pt<.75||S1((m.clipboardData||window.clipboardData).files[0])},Om,Um,m=>{Fe&&fa(m.detail,Fe)||kt(ul,Fe=m.detail,Fe)},ne,Ac,Wr,zr,Sr,Ga,Do,Ms,nl,El,Al,Ll,Fl,Ps,gc,il,zl,rs,Dl,os,x,L,tt,st,Rt,Nt,Ut,Yt,Kt,Qt,an,ge,Pe,Te,tn,Tn,Un,ki,oi,Nr,ro,ss,ls,()=>n(60,ca=void 0),(m,G,pt)=>{const{text:Mt="",placeholder:ct="",autoClose:gt=!0,align:Gt="top",justify:je="center",buttonConfirm:$n,buttonCancel:Zn}=pt;n(60,ca={align:Gt,justify:je,text:Mt,placeholder:ct,buttonConfirm:$n,buttonCancel:Zn,onconfirm:()=>{m(Xa.value),gt&&n(60,ca=void 0)},oncancel:()=>{G(void 0),n(60,ca=void 0)}})},Rs,ol,Bo,xr,wp,al,Bl,Sp,kp,Cp,U0,us,bc,xu,xc,Gp,Es,Ju,v1,id,Hl,k1,q,oe,X,o,ut,Ae,Tt,te,nt,W,cn,Ht,Oe,me,Ce,Pt,He,Y,Jt,vn,on,en,In,Hn,qe,ke,Bt,H,re,mn,Be,xt,K,$t,at,rt,bt,Lt,_t,we,ie,yt,Wt,le,Ft,vt,Vt,De,V,Z,N,j,i,P,B,O,D,C,M,S,R,h,w,y,v,s,d,a,u,r,be,Wn,_e,Ve,wn,se,zn,ti,qn,kn,yi,$r,ao,Yi,Ro,pi,yo,Wa,yr,Xi,Ai,Eo,so,bo,Ki,Go,Er,Lo,sr,xo,lo,to,Zo,qi,wi,vo,li,uo,wo,Ui,Ti,ji,no,bn,nn,de,ye,Cn,So,Ca,is,Si,Vr,Ko,A,ve,function(){n(31,Zu=kl.innerWidth),n(32,d1=kl.innerHeight)},m=>kt(kc,En=m.detail,En),({detail:m})=>n(43,ft=m),function(m,G){t.$$.not_equal(lr[G],m)&&(lr[G]=m,n(1,lr),n(281,Bo),n(27,Oo))},m=>g1(m),m=>f1(m),(m,{detail:G})=>$1(m,G),m=>kt(Vl,vr=m.detail,vr),function(m){t.$$.not_equal(lr[ft],m)&&(lr[ft]=m,n(1,lr),n(281,Bo),n(27,Oo))},()=>g1(ft),()=>f1(ft),({detail:m})=>$1(ft,m),m=>{const G={...m,...Om()},{annotationShapes:pt,decorationShapes:Mt,interfaceShapes:ct,frameShapes:gt,selectionShapes:Gt}=fc({annotationShapes:An,decorationShapes:Ri,interfaceShapes:Bn,frameShapes:di,selectionShapes:ei},G);return Um(G,Zt,pt,Mt,ct,gt,Gt)},()=>{n(63,od=!1),n(64,ad=!1),n(65,sd=!1),n(66,ld=!1),n(67,cd=!1)},function(m){jn[m?"unshift":"push"](()=>{Bc=m,n(36,Bc)})},function(m){To=m,n(0,To),n(269,Tn)},function(m){Ku=m,n(33,Ku)},function(m){Yu=m,n(34,Yu)},function(m){jn[m?"unshift":"push"](()=>{Xa=m,n(61,Xa)})},function(m){jn[m?"unshift":"push"](()=>{cr=m,n(2,cr)})},m=>kt(Up,tr=m.detail,tr)]}class P$ extends pn{constructor(e){super(),dn(this,e,jw,Uw,ln,{class:236,layout:237,stores:238,locale:3,id:4,util:239,utils:240,animations:241,disabled:242,previewUpscale:243,previewPad:244,previewMaskOpacity:5,previewImageDataMaxSize:245,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:246,elasticityMultiplier:8,willRevert:247,willProcessImage:248,willRenderCanvas:9,willRenderToolbar:249,willRenderUtilTabs:250,willSetHistoryInitialState:251,enableButtonExport:252,enableButtonRevert:253,enableNavigateHistory:254,enableToolbar:10,enableUtils:255,enableButtonClose:256,enableDropImage:257,enablePasteImage:258,enableBrowseImage:259,enableTransparencyGrid:11,layoutDirectionPreference:260,layoutHorizontalUtilsPreference:261,layoutVerticalUtilsPreference:262,layoutVerticalToolbarPreference:263,layoutVerticalControlGroupsPreference:264,layoutVerticalControlTabsPreference:265,status:234,formatStatusImageLoading:266,formatStatusImageProcessing:267,formatStatusSupportError:268,textDirection:12,markupEditorZoomLevel:269,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:270,muteAudio:271,willSetMediaInitialTimeOffset:272,enablePan:17,enableZoom:18,enableZoomControls:273,enableZoomInput:19,enablePanInput:274,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,pan:275,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,fixScrollDirection:276,hideTextInput:277,showTextInput:278,imagePreviewSrc:279,imageOrienter:280,pluginComponents:281,pluginOptions:27,sub:282,pluginInterface:1,root:2,play:283,pause:284,isPaused:285,togglePlayPause:286,mute:287,unmute:288,toggleMute:289,getDuration:290,getCurrentTime:291,setCurrentTime:292,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:235,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[236]}set class(e){this.$$set({class:e}),E()}get layout(){return this.$$.ctx[237]}set layout(e){this.$$set({layout:e}),E()}get stores(){return this.$$.ctx[238]}set stores(e){this.$$set({stores:e}),E()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),E()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),E()}get util(){return this.$$.ctx[239]}set util(e){this.$$set({util:e}),E()}get utils(){return this.$$.ctx[240]}set utils(e){this.$$set({utils:e}),E()}get animations(){return this.$$.ctx[241]}set animations(e){this.$$set({animations:e}),E()}get disabled(){return this.$$.ctx[242]}set disabled(e){this.$$set({disabled:e}),E()}get previewUpscale(){return this.$$.ctx[243]}set previewUpscale(e){this.$$set({previewUpscale:e}),E()}get previewPad(){return this.$$.ctx[244]}set previewPad(e){this.$$set({previewPad:e}),E()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),E()}get previewImageDataMaxSize(){return this.$$.ctx[245]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),E()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),E()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),E()}get zoomMaskOpacity(){return this.$$.ctx[246]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),E()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),E()}get willRevert(){return this.$$.ctx[247]}set willRevert(e){this.$$set({willRevert:e}),E()}get willProcessImage(){return this.$$.ctx[248]}set willProcessImage(e){this.$$set({willProcessImage:e}),E()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),E()}get willRenderToolbar(){return this.$$.ctx[249]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),E()}get willRenderUtilTabs(){return this.$$.ctx[250]}set willRenderUtilTabs(e){this.$$set({willRenderUtilTabs:e}),E()}get willSetHistoryInitialState(){return this.$$.ctx[251]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),E()}get enableButtonExport(){return this.$$.ctx[252]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),E()}get enableButtonRevert(){return this.$$.ctx[253]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),E()}get enableNavigateHistory(){return this.$$.ctx[254]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),E()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),E()}get enableUtils(){return this.$$.ctx[255]}set enableUtils(e){this.$$set({enableUtils:e}),E()}get enableButtonClose(){return this.$$.ctx[256]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),E()}get enableDropImage(){return this.$$.ctx[257]}set enableDropImage(e){this.$$set({enableDropImage:e}),E()}get enablePasteImage(){return this.$$.ctx[258]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),E()}get enableBrowseImage(){return this.$$.ctx[259]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),E()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),E()}get layoutDirectionPreference(){return this.$$.ctx[260]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),E()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[261]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),E()}get layoutVerticalUtilsPreference(){return this.$$.ctx[262]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),E()}get layoutVerticalToolbarPreference(){return this.$$.ctx[263]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),E()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[264]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),E()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[265]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),E()}get status(){return this.$$.ctx[234]}set status(e){this.$$set({status:e}),E()}get formatStatusImageLoading(){return this.$$.ctx[266]}set formatStatusImageLoading(e){this.$$set({formatStatusImageLoading:e}),E()}get formatStatusImageProcessing(){return this.$$.ctx[267]}set formatStatusImageProcessing(e){this.$$set({formatStatusImageProcessing:e}),E()}get formatStatusSupportError(){return this.$$.ctx[268]}set formatStatusSupportError(e){this.$$set({formatStatusSupportError:e}),E()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),E()}get markupEditorZoomLevel(){return this.$$.ctx[269]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),E()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),E()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),E()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),E()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),E()}get markupEditorInteractionMode(){return this.$$.ctx[270]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),E()}get muteAudio(){return this.$$.ctx[271]}set muteAudio(e){this.$$set({muteAudio:e}),E()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[272]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),E()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),E()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),E()}get enableZoomControls(){return this.$$.ctx[273]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),E()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),E()}get enablePanInput(){return this.$$.ctx[274]}set enablePanInput(e){this.$$set({enablePanInput:e}),E()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),E()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),E()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),E()}get pan(){return this.$$.ctx[275]}set pan(e){this.$$set({pan:e}),E()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),E()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),E()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),E()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),E()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),E()}get fixScrollDirection(){return this.$$.ctx[276]}set fixScrollDirection(e){this.$$set({fixScrollDirection:e}),E()}get hideTextInput(){return this.$$.ctx[277]}get showTextInput(){return this.$$.ctx[278]}get imagePreviewSrc(){return this.$$.ctx[279]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),E()}get imageOrienter(){return this.$$.ctx[280]}set imageOrienter(e){this.$$set({imageOrienter:e}),E()}get pluginComponents(){return this.$$.ctx[281]}set pluginComponents(e){this.$$set({pluginComponents:e}),E()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),E()}get sub(){return this.$$.ctx[282]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),E()}get play(){return this.$$.ctx[283]}get pause(){return this.$$.ctx[284]}get isPaused(){return this.$$.ctx[285]}get togglePlayPause(){return this.$$.ctx[286]}get mute(){return this.$$.ctx[287]}get unmute(){return this.$$.ctx[288]}get toggleMute(){return this.$$.ctx[289]}get getDuration(){return this.$$.ctx[290]}get getCurrentTime(){return this.$$.ctx[291]}get setCurrentTime(){return this.$$.ctx[292]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),E()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[235]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),E()}get history(){return this.$$.ctx[30]}}typeof window<"u"&&(t=>{if(t&&t._zcari2y)return;const[e,n,i]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,108,105,99,101,110,115,101,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,99,104,97,116,32,105,102,32,121,111,117,32,104,97,118,101,32,97,110,121,32,113,117,101,115,116,105,111,110,115,46]].map(r=>r.map(o=>String.fromCharCode(o)).join(""));t&&t[e]&&t[e][n](i)})(window);const Hw=["klass","stores","isVisible","isActive","isActiveFraction","locale"],Gw=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],Zw=["locale"];let hh;const Ib=new Set([]),Wd={},Wh=new Map,Xw=(...t)=>{t.filter(e=>!!e.util).forEach(e=>{const[n,i,r=()=>!0]=e.util;Wh.has(n)||(Wh.set(n,{Component:i,isSupported:r}),P0(i).filter(o=>!Hw.includes(o)).forEach(o=>{Ib.add(o),Wd[o]?Wd[o].push(n):Wd[o]=[n]}))})};var Rb=[...Y2,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"],Eb=(t,e,n={})=>{const{prefix:i="pintura:"}=n;return Rb.map(r=>t.on(r,o=>sc(e)?((a,s,l)=>a.dispatchEvent(new CustomEvent(s,{detail:l,bubbles:!0,cancelable:!0})))(e,`${i}${r}`,o):e(r,o)))};const Yw=t=>Ne(t[0]),Kw=t=>!Yw(t),Ab=t=>t[1],Nh=t=>t[3]||[],qw=(t,e)=>{const n=Uh(t,e);return wb(n,i=>Ab(i)===t),n},Uh=(t,e)=>{if(Kw(e)){if(e.find(i=>Ab(i)===t))return e;const n=e.find(i=>Uh(t,Nh(i)));return n&&n[3]}return Uh(t,Nh(e))},Jw=()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],Qw=()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],tS=()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],eS=()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],nS=()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],iS=()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],rS=()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],oS=()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],aS=()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sS=()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],lS=()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],cS=()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],uS=()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0],dS={chrome:Qw,fade:tS,pastel:Jw,cold:nS,warm:eS,monoDefault:iS,monoWash:oS,monoNoir:rS,monoStark:aS,sepiaDefault:sS,sepiaRust:cS,sepiaBlues:lS,sepiaColor:uS};var pS={filterFunctions:dS,filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]};const hS={base:0,min:-.25,max:.25,getLabel:t=>js(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(n=>({...n,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},mS={base:1,min:.5,max:1.5,getLabel:t=>js(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(n=>({...n,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},gS={base:1,min:0,max:2,getLabel:t=>js(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(n=>({...n,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},fS={base:1,min:.5,max:1.5,getLabel:t=>js(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(n=>({...n,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},$S={base:1,min:.15,max:4,getLabel:t=>js(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},yS={base:0,min:-1,max:1,getStore:({imageVignette:t})=>t},bS={base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return t.clarity[0]===0?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update(n=>({...n,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},xS={base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update(n=>({...n,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]}))};var vS={finetuneControlConfiguration:{gamma:$S,brightness:hS,contrast:mS,saturation:gS,exposure:fS,temperature:xS,clarity:bS,vignette:yS},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!M0()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)};const fo=(t,e="thumb")=>["div",e,{style:t,textContent:" "}],wS={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},SS={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},kS={shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:[fo("top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor")]},CS={shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:[fo("top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double")]},TS={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:[fo("top:.75em;left:.5em;bottom:.75em;border-left:1px solid","a"),fo("top:.75em;right:.5em;bottom:.75em;border-right:1px solid","b"),fo("top:.5em;left:.75em;right:.75em;border-top:1px solid","c"),fo("bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid","d")]},MS={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:[fo("top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor","a"),fo("top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor","b")]},PS={shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:[fo("top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid","a"),fo("top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid","b"),fo("top:.5em;left:.3125em;right:.3125em;border-top:1px solid","c"),fo("bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid","d")]},IS={shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:[fo("top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid","a"),fo("top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid","b"),fo("bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid","c"),fo("bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid","d")]},RS={shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'};var ES={frameStyles:{solidSharp:wS,solidRound:SS,lineSingle:kS,lineMultiple:CS,edgeSeparate:TS,edgeCross:MS,edgeOverlap:PS,hook:IS,polaroid:RS},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},uc=t=>t.charAt(0).toUpperCase()+t.slice(1);let jc=null;var mh=()=>{if(jc===null)if(Mr())try{jc=document.fonts.check("16px TestNonExistingFont")===!1}catch{jc=!1}else jc=!1;return jc};const du=(t,e)=>n=>n[e?`${e}${uc(t)}`:t],AS=t=>[t,""+t],mp=(t,e)=>n=>[t[n],du(n,e)],Lb=t=>Array.isArray(t)&&t.every(Ze)?t.map(AS):t,vl=[1,.2549,.2118],I$=[1,1,1,0],LS=t=>{const{hideLabel:e=!0}=t||{};return XS(["new","add","subtract"].map(n=>[n,du(n,"shapeLabelSelectionMode"),{icon:du(n,"shapeIconSelectionMode"),hideLabel:e}]),{title:n=>n.shapeTitleSelectionMode,layout:"radio"})},FS=t=>zb(t,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,n)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*n}"/>`}),R$={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[],disableAddPoints:!1}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},Ls=(t,e={},n)=>{if(!R$[t])return;const{position:i="relative",inputMode:r="drag",isSelection:o=!1}=n||{};return[{...R$[t](),...e},{position:i,inputMode:r,isSelection:o}]},zS=t=>{const e={sharpie:Ls("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...vl],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:Ls("eraser"),path:Ls("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...vl],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:Ls("line",{strokeColor:[...vl],strokeWidth:"0.5%"}),arrow:Ls("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...vl],strokeWidth:"0.5%"}),rectangle:Ls("rectangle",{strokeColor:[...I$],backgroundColor:[...vl]}),ellipse:Ls("ellipse",{strokeColor:[...I$],backgroundColor:[...vl]}),text:Ls("text",{color:[...vl],fontSize:"2%"})};return t&&Object.entries(t).forEach(([n,i])=>{Array.isArray(i)?e[n]=i:Ks(i)&&e[n]&&(e[n]=[{...e[n][0],...i},e[n][1]])}),e},gh=(t,e,n)=>[t,e||du(t,"shapeLabelTool"),{icon:du(t,"shapeIconTool"),...n}],DS=(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map(e=>Ne(e)?gh(e):Array.isArray(e)?Ks(e[1])?gh(e[0],void 0,e[1]):gh(e[0],e[1],e[2]):void 0).filter(Boolean),BS=t=>Object.keys(t).map(mp(t,"shapeTitleColor")),OS=t=>Object.keys(t).map(mp(t,"labelSize")),_S=t=>Object.keys(t).map(mp(t,"labelSize")),E$=t=>Object.keys(t).map(mp(t,"labelSize")),VS=t=>[...t],WS=t=>t.map(e=>[e,n=>n["shapeLabelFontStyle"+e.filter(i=>i!=="normal").map(uc).join("")]]),NS=t=>t.map(e=>[Mb(e),n=>n["shapeTitleLineDecoration"+uc(e)],{icon:n=>n["shapeIconLineDecoration"+uc(e)]}]),ts=(t,e)=>{const{defaultKey:n,defaultValue:i,defaultOptions:r}=e||{},o=[];return n&&(o[0]=[i,a=>a[n],{...r}]),[...o,...t]},A$=t=>t.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px "+e)),L$=(t={})=>["ToggleSlider",{...t}],US=(t,e={defaultKey:"labelDefault"})=>["Dropdown",{title:n=>n.shapeTitleFontFamily,onload:({options:n=[]})=>{mh()&&n.map(([i])=>i).filter(Boolean).filter(i=>!A$(i)).forEach(i=>{const r="PinturaFontTest-"+i.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(r)||document.body.append(Ci("span",{textContent:" ",id:r,class:"PinturaFontTest",style:`font-family:${i};font-size:0;color:transparent;`}))})},ondestroy:()=>{mh()&&document.querySelectorAll(".PinturaFontTest").forEach(n=>n.remove())},optionLabelStyle:n=>"font-family: "+n,options:ts(t,e),optionFilter:n=>{if(!mh())return!0;const[i]=n;return i?A$(i):!0}}],F0=(t,e={})=>["ColorPicker",{options:ts(t),...e}],jS=(t,e={})=>F0(t,{title:n=>n.labelColor,...e}),Fb=t=>(e,n={})=>F0(e,{title:i=>i[t],...n}),HS=Fb("shapeTitleBackgroundColor"),GS=Fb("shapeTitleTextColor"),ZS=(t,e={})=>F0(t,{title:n=>n.shapeTitleStrokeColor,options:ts(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(n,i)=>{const r=i.strokeWidth;(Ze(r)||Ne(r)?parseFloat(r):0)>0||(i.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e}),zb=(t,e)=>{const{title:n,optionHideLabel:i=!1,layout:r,optionIcon:o=!1}=e||{},a=Lb(t),s=t.map(([d])=>Ne(d)?parseFloat(d):d),l=Math.max(...s),c=Math.min(...s),u=l-c;return[r==="radio"?"RadioGroup":"Dropdown",{title:n===!1?void 0:n||(d=>d.shapeTitleStrokeWidth),options:d=>{const p=e?a.map(h=>{const[f,g,$={}]=h,y=Ne(f)?parseFloat(f):f,v=(y-c)/u;let w;return o==="line"?w=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*v}em" d="M3,12 H20"/>`:o==="dot"?w=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*v}"/>`:Ne(o)?w=o:Yn(o)&&(w=o(y,v)),[f,g,{icon:w,hideLabel:i,...$}]}):a;return Ee(d,"backgroundColor")?ts(p,{defaultKey:"shapeLabelStrokeNone"}):ts(p)},onchange:(d,p)=>{if(!d)return;const h=p.strokeColor||[];if(h[3])return;const f=[...h];f[3]=1,p.strokeColor=f}}]},XS=(t,e)=>{const{title:n,layout:i}=e||{};return[i==="radio"?"RadioGroup":"Dropdown",{title:n,options:ts(t)}]},Db=(t,e,n)=>["Dropdown",{title:i=>i[e],options:ts(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],YS=t=>Db(t,"shapeTitleLineStart","transform: scaleX(-1)"),KS=t=>Db(t,"shapeTitleLineEnd"),qS=t=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:ts(t,{defaultKey:"shapeLabelFontStyleNormal"})}],Bb=t=>["ShorthandControl",t],Ob=(t,e,n,i)=>{i||t.find(([o])=>o===n)||(i={defaultKey:"labelAuto",defaultValue:n});const r=Lb(t);return["Dropdown",{title:e,options:ts(r,i),...i}]},JS=(t,e)=>Ob(t,n=>n.shapeTitleFontSize,"4%",e),QS=(t,e)=>Ob(t,n=>n.shapeTitleLineHeight,"120%",e),t6=t=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:ts(t)}],fh={colorOptions:()=>BS({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>NS(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>VS([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>WS([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map(t=>[t,e=>e["shapeTitleTextAlign"+uc(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+uc(t)]}]),strokeWidthOptions:()=>E$({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>E$(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce((t,[e,n])=>(t[e]=2*parseFloat(n)+"%",t),{})),fontSizeOptions:()=>OS({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>_S({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},e6=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),_b=(t,e)=>Ne(e)?t+"%":t,Vb=(t,e,n,i)=>Ne(i)?Math.round(t/n*100)+"%":""+e6.format(t),$h={getValue:t=>parseFloat(t),setValue:_b,label:Vb,step:.05,labelClass:"PinturaPercentageLabel"},n6={factory:Bb,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...$h,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...$h,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...$h,min:0,max:25,labelPrefix:t=>t.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},Id={defaultColor:{factory:jS,items:"colorOptions"},defaultNumber:{factory:L$},defaultPercentage:{factory:L$,options:{getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,n)=>Math.round(t/n*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:HS},strokeColor:{items:"colorOptions",factory:ZS},strokeWidth:{items:"strokeWidthOptions",factory:zb},brushSize:{items:"brushSizeOptions",factory:FS},drawMode:{factory:LS},lineStart:{items:"lineEndStyleOptions",factory:YS},lineEnd:{items:"lineEndStyleOptions",factory:KS},color:{items:"colorOptions",factory:GS},fontFamily:{items:"fontFamilyOptions",factory:US},fontStyle_fontWeight:{items:"fontStyleOptions",factory:qS},fontSize:{items:"fontSizeOptions",factory:JS},lineHeight:{items:"lineHeightOptions",factory:QS},textAlign:{items:"textAlignOptions",factory:t6},textShadowX_textShadowY_textShadowBlur_textShadowColor:n6,textOutlineWidth_textOutlineColor:{factory:Bb,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:t=>parseFloat(t),setValue:_b,label:Vb,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:t=>t.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}},Wb=(t={})=>{const e={...Id,...t},n={};return Object.entries(e).forEach(([i,r])=>{if(!/Options$/.test(i))if(Id[i]&&Ks(r)&&!Mi(r)){const{component:o,factory:a,items:s,options:l={}}=e[i];if(Ne(a))n[i]=[a,l];else{const c=Id[i].items;let u=Ne(c)?e[c]||fh[c]():void 0;Ne(s)&&fh[s]?u=e[s]?e[s].every(p=>!Array.isArray(p))?e[s].map(p=>[p,p]):e[s]:fh[s]():(s||l.items)&&(u=s||l.items);let d=a||Id[i].factory;Yn(d)?n[i]=u?d(u,l):d(l):o&&(n[i]=[o,{...l,items:s}])}}else n[i]=r}),n};function i6(t){let e,n,i,r,o;const a=t[7].default,s=hr(a,t,t[6],null);return{c(){e=dt("div"),n=dt("div"),s&&s.c(),T(n,"class","PinturaToolbarInner"),T(e,"class","PinturaToolbar"),T(e,"data-layout",t[1]),T(e,"data-overflow",t[0])},m(l,c){et(l,e,c),St(e,n),s&&s.m(n,null),i=!0,r||(o=[At(n,"measure",t[3]),Pn(Ir.call(null,n)),At(e,"measure",t[2]),Pn(Ir.call(null,e))],r=!0)},p(l,[c]){s&&s.p&&(!i||64&c)&&gr(s,a,l,l[6],i?mr(a,l[6],c,null):fr(l[6]),null),(!i||2&c)&&T(e,"data-layout",l[1]),(!i||1&c)&&T(e,"data-overflow",l[0])},i(l){i||(I(s,l),i=!0)},o(l){z(s,l),i=!1},d(l){l&&Q(e),s&&s.d(l),r=!1,Kn(o)}}}function r6(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,s=0,l=0,c=0;const u=()=>{n(0,r=i==="compact"&&s>c?"overflow":void 0)};return t.$$set=d=>{"$$scope"in d&&n(6,a=d.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&n(1,i=l>c?"compact":"default")},[r,i,({detail:d})=>{const{width:p}=d;n(5,c=p),u()},({detail:d})=>{const{width:p}=d;p>l&&n(4,l=p),s=p,r||u()},l,c,a,o]}class Nb extends pn{constructor(e){super(),dn(this,e,r6,i6,ln,{})}}function o6(t){let e,n,i,r;const o=t[5].default,a=hr(o,t,t[4],null);return{c(){e=dt("div"),a&&a.c(),T(e,"class",t[0])},m(s,l){et(s,e,l),a&&a.m(e,null),n=!0,i||(r=[At(e,"measure",function(){Mn(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),Pn(t[2].call(null,e))],i=!0)},p(s,[l]){t=s,a&&a.p&&(!n||16&l)&&gr(a,o,t,t[4],n?mr(o,t[4],l,null):fr(t[4]),null),(!n||1&l)&&T(e,"class",t[0])},i(s){n||(I(a,s),n=!0)},o(s){z(a,s),n=!1},d(s){s&&Q(e),a&&a.d(s),i=!1,Kn(r)}}}function a6(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=_a();let{class:a=null}=e;const s=mi("measurable");let l=!1;return qs(()=>n(1,l=!0)),t.$$set=c=>{"class"in c&&n(0,a=c.class),"$$scope"in c&&n(4,r=c.$$scope)},[a,l,s,({detail:c})=>o("measure",c),r,i]}class s6 extends pn{constructor(e){super(),dn(this,e,a6,o6,ln,{class:0})}}const l6=t=>({}),F$=t=>({}),c6=t=>({}),z$=t=>({}),u6=t=>({}),D$=t=>({});function B$(t){let e,n;const i=t[4].header,r=hr(i,t,t[3],D$);return{c(){e=dt("div"),r&&r.c(),T(e,"class","PinturaUtilHeader")},m(o,a){et(o,e,a),r&&r.m(e,null),n=!0},p(o,a){r&&r.p&&(!n||8&a)&&gr(r,i,o,o[3],n?mr(i,o[3],a,u6):fr(o[3]),D$)},i(o){n||(I(r,o),n=!0)},o(o){z(r,o),n=!1},d(o){o&&Q(e),r&&r.d(o)}}}function O$(t){let e,n;const i=t[4].footer,r=hr(i,t,t[3],F$);return{c(){e=dt("div"),r&&r.c(),T(e,"class","PinturaUtilFooter")},m(o,a){et(o,e,a),r&&r.m(e,null),n=!0},p(o,a){r&&r.p&&(!n||8&a)&&gr(r,i,o,o[3],n?mr(i,o[3],a,l6):fr(o[3]),F$)},i(o){n||(I(r,o),n=!0)},o(o){z(r,o),n=!1},d(o){o&&Q(e),r&&r.d(o)}}}function d6(t){let e,n,i,r,o,a,s=t[1]&&B$(t);const l=t[4].main,c=hr(l,t,t[3],z$),u=c||function(p){let h,f;return h=new s6({props:{class:"PinturaStage"}}),h.$on("measure",p[5]),{c(){Ot(h.$$.fragment)},m(g,$){zt(h,g,$),f=!0},p:Xe,i(g){f||(I(h.$$.fragment,g),f=!0)},o(g){z(h.$$.fragment,g),f=!1},d(g){Dt(h,g)}}}(t);let d=t[2]&&O$(t);return{c(){s&&s.c(),e=he(),n=dt("div"),u&&u.c(),i=he(),d&&d.c(),r=he(),o=Ii(),T(n,"class","PinturaUtilMain")},m(p,h){s&&s.m(p,h),et(p,e,h),et(p,n,h),u&&u.m(n,null),t[6](n),et(p,i,h),d&&d.m(p,h),et(p,r,h),et(p,o,h),a=!0},p(p,[h]){p[1]?s?(s.p(p,h),2&h&&I(s,1)):(s=B$(p),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(Ie(),z(s,1,1,()=>{s=null}),Re()),c&&c.p&&(!a||8&h)&&gr(c,l,p,p[3],a?mr(l,p[3],h,c6):fr(p[3]),z$),p[2]?d?(d.p(p,h),4&h&&I(d,1)):(d=O$(p),d.c(),I(d,1),d.m(r.parentNode,r)):d&&(Ie(),z(d,1,1,()=>{d=null}),Re())},i(p){a||(I(s),I(u,p),I(d),I(!1),a=!0)},o(p){z(s),z(u,p),z(d),z(!1),a=!1},d(p){s&&s.d(p),p&&Q(e),p&&Q(n),u&&u.d(p),t[6](null),p&&Q(i),d&&d.d(p),p&&Q(r),p&&Q(o)}}}function p6(t,e,n){let{$$slots:i={},$$scope:r}=e,{hasHeader:o=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=l=>{n(7,e=Fi(Fi({},e),au(l))),"hasHeader"in l&&n(1,o=l.hasHeader),"hasFooter"in l&&n(2,a=l.hasFooter),"root"in l&&n(0,s=l.root),"$$scope"in l&&n(3,r=l.$$scope)},e=au(e),[s,o,a,r,i,function(l){Kr.call(this,t,l)},function(l){jn[l?"unshift":"push"](()=>{s=l,n(0,s)})}]}class Rl extends pn{constructor(e){super(),dn(this,e,p6,d6,ln,{hasHeader:1,hasFooter:2,root:0})}}function _$(t){let e;return{c(){e=dt("div"),T(e,"class","PinturaRangeInputMeter"),Et(e,"transform",`translateX(${t[10].x-t[13].x}px) translateY(${t[10].y-t[13].y}px)`)},m(n,i){et(n,e,i),e.innerHTML=t[7]},p(n,i){128&i[0]&&(e.innerHTML=n[7]),1024&i[0]&&Et(e,"transform",`translateX(${n[10].x-n[13].x}px) translateY(${n[10].y-n[13].y}px)`)},d(n){n&&Q(e)}}}function h6(t){let e,n,i,r,o,a,s,l,c,u,d,p=t[10]&&_$(t);return{c(){e=dt("div"),n=dt("span"),i=he(),r=dt("button"),o=vi(t[1]),s=he(),l=dt("div"),p&&p.c(),T(n,"class","PinturaRangeInputValue"),T(r,"class","PinturaRangeInputReset"),T(r,"type","button"),r.disabled=a=t[0]===t[2],T(l,"class","PinturaRangeInputInner"),T(l,"data-value-limited",t[5]),Et(l,"--range-mask-from",t[9]),Et(l,"--range-mask-to",t[8]),T(e,"class","PinturaRangeInput"),T(e,"tabindex","0")},m(h,f){et(h,e,f),St(e,n),n.innerHTML=t[3],St(e,i),St(e,r),St(r,o),St(e,s),St(e,l),p&&p.m(l,null),u||(d=[At(r,"click",t[18]),At(l,"interactionstart",t[14]),At(l,"interactionupdate",t[16]),At(l,"interactionend",t[17]),At(l,"interactionrelease",t[15]),Pn(c=tl.call(null,l,{inertia:t[6]})),At(l,"measure",t[39]),Pn(Ir.call(null,l)),At(e,"wheel",t[20],{passive:!1}),At(e,"nudge",t[21]),Pn(Qs.call(null,e,{direction:"horizontal",preventDefault:!0}))],u=!0)},p(h,f){8&f[0]&&(n.innerHTML=h[3]),2&f[0]&&Oi(o,h[1]),5&f[0]&&a!==(a=h[0]===h[2])&&(r.disabled=a),h[10]?p?p.p(h,f):(p=_$(h),p.c(),p.m(l,null)):p&&(p.d(1),p=null),32&f[0]&&T(l,"data-value-limited",h[5]),c&&Mn(c.update)&&64&f[0]&&c.update.call(null,{inertia:h[6]}),512&f[0]&&Et(l,"--range-mask-from",h[9]),256&f[0]&&Et(l,"--range-mask-to",h[8])},i:Xe,o:Xe,d(h){h&&Q(e),p&&p.d(),u=!1,Kn(d)}}}function m6(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,{labelReset:g="Reset"}=e,{direction:$="x"}=e,{min:y=0}=e,{max:v=1}=e,{base:w=y}=e,{value:S=0}=e,{valueLabel:R=0}=e,{valueMin:M}=e,{valueMax:B}=e,{oninputstart:C=pe}=e,{oninputmove:D=pe}=e,{oninputend:O=pe}=e,{elasticity:P=0}=e,{nudgeMultiplier:b}=e,{step:W=8}=e;const nt=mi("isAnimated");F(t,nt,bt=>n(6,p=bt));const k=mi("fixScrollDirection");F(t,k,bt=>n(45,h=bt));const N=(bt,_t,rt)=>Math.ceil((bt-rt)/_t)*_t+rt;let j,ut,Z;const ft={x:2,y:0},q=(bt,_t,rt)=>`M ${bt-rt} ${_t} a ${rt} ${rt} 0 1 0 0 -1`;let ht,xt,lt=!1,Ct={snap:!1,elastic:!1};const it=(bt,_t,rt)=>{const Tt=bt[$]+_t[$],Vt=si(Tt,ht[1][$],ht[0][$]),mt=P?Vt+Os(Tt-Vt,P):Vt,at=rt.elastic?mt:Vt,$t=ot(0,0);return $t[$]=at,vt.set($t,{hard:rt.snap}),si(Ft($t,$),y,v)},vt=hn();F(t,vt,bt=>n(10,f=bt));const K=(bt,_t)=>{const rt=.5*(j[_t]-a[_t])-(Kc(bt,y,v)*a[_t]-.5*a[_t]);return{x:_t==="x"?rt:0,y:_t==="y"?rt:0}},Ft=(bt,_t)=>{const rt=-(bt[_t]-.5*j[_t])/a[_t];return y+rt*i},Ht=vt.subscribe(bt=>{bt&&xt&&D(si(Ft(bt,$),y,v))}),Lt=bt=>{const _t=[K(M??y,$),K(B??v,$)],rt={x:$==="x"?f.x+bt:0,y:$==="y"?f.y+bt:0},Tt=si(rt[$],_t[1][$],_t[0][$]),Vt={...f,[$]:Tt};kt(vt,f=Vt,f);const mt=si(Ft(Vt,$),y,v);C(),D(mt),O(mt)};return aa(()=>{Ht()}),t.$$set=bt=>{"labelReset"in bt&&n(1,g=bt.labelReset),"direction"in bt&&n(22,$=bt.direction),"min"in bt&&n(23,y=bt.min),"max"in bt&&n(24,v=bt.max),"base"in bt&&n(2,w=bt.base),"value"in bt&&n(0,S=bt.value),"valueLabel"in bt&&n(3,R=bt.valueLabel),"valueMin"in bt&&n(25,M=bt.valueMin),"valueMax"in bt&&n(26,B=bt.valueMax),"oninputstart"in bt&&n(27,C=bt.oninputstart),"oninputmove"in bt&&n(28,D=bt.oninputmove),"oninputend"in bt&&n(29,O=bt.oninputend),"elasticity"in bt&&n(30,P=bt.elasticity),"nudgeMultiplier"in bt&&n(31,b=bt.nudgeMultiplier),"step"in bt&&n(32,W=bt.step)},t.$$.update=()=>{if(25165824&t.$$.dirty[0]&&n(34,i=v-y),41943040&t.$$.dirty[0]&&n(36,r=M!=null?Math.max(M,y):y),83886080&t.$$.dirty[0]&&n(35,o=B!=null?Math.min(B,v):v),25165828&t.$$.dirty[0]&&n(38,s=Kc(w,y,v)),16&t.$$.dirty[0]|128&t.$$.dirty[1]&&j){const bt=.5*j.y;let _t,rt=40*s,Tt="",Vt=j.y,mt="";for(let at=0;at<=40;at++){const $t=ft.x+10*at,te=bt;Tt+=q($t,te,at%5==0?2:.75)+" ",_t=$t+ft.x,at===rt&&(mt=`<path d="M${$t} ${te-4} l2 3 l-2 -1 l-2 1 z"/>`)}n(7,ut=`<svg width="${_t}" height="${Vt}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${_t} ${Vt}" aria-hidden="true" focusable="false">
        ${mt}
        <rect rx="4" ry="4" y="${bt-4}"" height="8"/>
        <path fill-rule="evenodd" d="${Tt.trim()}"/></svg>`),n(33,Z={x:_t-2*ft.x,y:Vt})}16&t.$$.dirty[0]|4&t.$$.dirty[1]&&(a=j&&Z),25165824&t.$$.dirty[0]|48&t.$$.dirty[1]&&n(5,l=r!==y||o!==v),32&t.$$.dirty[0]|48&t.$$.dirty[1]&&n(37,c=l?function(bt,_t){const Tt=Kc(bt,y,v),Vt=Kc(_t,y,v);return[100*un(N(Tt,.025,0)-.0125)+"%",100*un(N(Vt,.025,0)-.0125)+"%"]}(r,o):void 0),64&t.$$.dirty[1]&&n(9,u=c?c[0]:""),64&t.$$.dirty[1]&&n(8,d=c?c[1]:""),4194385&t.$$.dirty[0]|8&t.$$.dirty[1]&&i&&j&&j.x&&j.y&&vt.set(K(S,$),{hard:p===!1})},[S,g,w,R,j,l,p,ut,d,u,f,nt,k,ft,()=>{lt=!1,xt=Da(vt),ht=[K(M??y,$),K(B??v,$)],C()},()=>{lt=!0},({detail:bt})=>{Ct.snap=!lt,Ct.elastic=!lt,it(xt,bt.translation,Ct)},({detail:bt})=>{Ct.snap=!1,Ct.elastic=!1;const _t=it(xt,bt.translation,Ct);if(xt=void 0,ht=void 0,Math.abs(_t-w)<.01)return O(w);O(_t)},()=>{n(0,S=si(w,r,o)),C(),O(S)},vt,bt=>{bt.preventDefault(),bt.stopPropagation();const _t=hp(bt,{fixScrollDirection:h})*W;Lt(_t)},({detail:bt})=>{Lt(bt[$]*Math.abs(b||8))},$,y,v,M,B,C,D,O,P,b,W,Z,i,o,r,c,s,bt=>n(4,j=(_t=>ot(_t.width,_t.height))(bt.detail))]}class z0 extends pn{constructor(e){super(),dn(this,e,m6,h6,ln,{labelReset:1,direction:22,min:23,max:24,base:2,value:0,valueLabel:3,valueMin:25,valueMax:26,oninputstart:27,oninputmove:28,oninputend:29,elasticity:30,nudgeMultiplier:31,step:32},null,[-1,-1])}}var g6={[Hs]:t=>({x:t.x,y:t.y}),[va]:t=>({x:t.x+t.width,y:t.y}),[Gs]:t=>({x:t.x+t.width,y:t.y}),[wa]:t=>({x:t.x+t.width,y:t.y+t.height}),[Zs]:t=>({x:t.x,y:t.y+t.height}),[Sa]:t=>({x:t.x,y:t.y+t.height}),[Xs]:t=>({x:t.x,y:t.y}),[xa]:t=>({x:t.x,y:t.y})};function V$(t,e,n){const i=t.slice();return i[14]=e[n].key,i[15]=e[n].translate,i[16]=e[n].scale,i[17]=e[n].type,i[18]=e[n].opacity,i}function W$(t,e){let n,i,r,o,a,s,l;return{key:t,first:null,c(){n=dt("div"),T(n,"role","button"),T(n,"aria-label",i=`Drag ${e[17]} ${e[14]}`),T(n,"tabindex",r=e[17]==="edge"?-1:0),T(n,"class","PinturaRectManipulator"),T(n,"data-direction",o=e[14]),T(n,"data-shape",a=e[17]==="edge"?"edge":""+e[0]),Et(n,"--tx",e[15].x),Et(n,"--ty",e[15].y),Et(n,"--sx",e[16].x),Et(n,"--sy",e[16].y),Et(n,"opacity",e[18]),this.first=n},m(c,u){et(c,n,u),s||(l=[At(n,"nudge",function(){Mn(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)}),Pn(Qs.call(null,n,{preventDefault:!0})),At(n,"interactionstart",function(){Mn(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)}),At(n,"interactionupdate",function(){Mn(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)}),At(n,"interactionend",function(){Mn(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)}),Pn(tl.call(null,n))],s=!0)},p(c,u){e=c,2&u&&i!==(i=`Drag ${e[17]} ${e[14]}`)&&T(n,"aria-label",i),2&u&&r!==(r=e[17]==="edge"?-1:0)&&T(n,"tabindex",r),2&u&&o!==(o=e[14])&&T(n,"data-direction",o),3&u&&a!==(a=e[17]==="edge"?"edge":""+e[0])&&T(n,"data-shape",a),2&u&&Et(n,"--tx",e[15].x),2&u&&Et(n,"--ty",e[15].y),2&u&&Et(n,"--sx",e[16].x),2&u&&Et(n,"--sy",e[16].y),2&u&&Et(n,"opacity",e[18])},d(c){c&&Q(n),s=!1,Kn(l)}}}function f6(t){let e,n=[],i=new Map,r=t[1];const o=a=>a[14];for(let a=0;a<r.length;a+=1){let s=V$(t,r,a),l=o(s);i.set(l,n[a]=W$(l,s))}return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Ii()},m(a,s){for(let l=0;l<n.length;l+=1)n[l].m(a,s);et(a,e,s)},p(a,[s]){99&s&&(r=a[1],n=ns(n,s,o,1,a,r,i,e.parentNode,U2,W$,e,V$))},i:Xe,o:Xe,d(a){for(let s=0;s<n.length;s+=1)n[s].d(a);a&&Q(e)}}}function $6(t,e,n){let i,r,o,a,{rect:s=null}=e,{visible:l=!1}=e,{cornerStyle:c}=e;const u=mi("isAnimated");F(t,u,g=>n(11,a=g));const d=hn(void 0,{precision:1e-4,stiffness:.2,damping:.4});F(t,d,g=>n(10,o=g));const p=hn(0,{precision:.001});let h;F(t,p,g=>n(9,r=g));const f=_a();return t.$$set=g=>{"rect"in g&&n(7,s=g.rect),"visible"in g&&n(8,l=g.visible),"cornerStyle"in g&&n(0,c=g.cornerStyle)},t.$$.update=()=>{2304&t.$$.dirty&&d.set(l?1:.5,{hard:a===!1}),2304&t.$$.dirty&&p.set(l?1:0,{hard:a===!1}),1664&t.$$.dirty&&n(1,i=Object.keys(xh).map((g,$)=>{const y=xh[g],v=g6[y](s),w=y.length===1?"edge":"corner",S=w==="corner";return{key:y,type:w,scale:{x:/^(t|b)$/.test(y)?s.width:S?si(o,.5,1.25):1,y:/^(r|l)$/.test(y)?s.height:S?si(o,.5,1.25):1},translate:{x:v.x,y:v.y},opacity:r}}))},[c,i,u,d,p,(g,$)=>({detail:y})=>{h&&$!==h||g!=="resizestart"&&h===void 0||(g==="resizestart"&&(h=$),g==="resizeend"&&(h=void 0),f(g,{direction:$,translation:y&&y.translation}))},g=>({detail:$})=>{f("resizestart",{direction:g,translation:{x:0,y:0}}),f("resizemove",{direction:g,translation:$}),f("resizeend",{direction:g,translation:{x:0,y:0}})},s,l,r,o,a]}class y6 extends pn{constructor(e){super(),dn(this,e,$6,f6,ln,{rect:7,visible:8,cornerStyle:0})}}var b6=t=>{function e(a,s){t.dispatchEvent(new CustomEvent(a,{detail:s}))}const n=a=>{a.preventDefault(),t.addEventListener("gesturechange",i),t.addEventListener("gestureend",r),e("gesturedown")},i=a=>{a.preventDefault(),e("gestureupdate",a.scale)},r=a=>{e("gestureup",a.scale),a.preventDefault(),o()},o=()=>{t.removeEventListener("gesturechange",i),t.removeEventListener("gestureend",r)};return t.addEventListener("gesturestart",n),{destroy:()=>{o(),t.removeEventListener("gesturestart",n)}}},D0={[Hs]:Zs,[Gs]:Xs,[Zs]:Hs,[Xs]:Gs,[xa]:wa,[va]:Sa,[wa]:xa,[Sa]:va},B0=t=>{const e=t===Xs||t===Gs,n=t===Hs||t===Zs;return[t===Gs||t===va||t===wa,t===Xs||t===Sa||t===xa,t===Hs||t===va||t===xa,t===Zs||t===wa||t===Sa,e,n,e||n]},N$=(t,e,n,i={})=>{const{target:r,translate:o}=e,{aspectRatio:a,minSize:s,maxSize:l}=i,c=iu[D0[r]],u=Wi(ot(t.x,t.y),ot(c[0]*t.width,c[1]*t.height)),d=iu[r],p=Wi(Ln(t),ot(d[0]*t.width,d[1]*t.height)),[h,f,g,$,y,v,w]=B0(r);let S=o.x,R=o.y;y?R=0:v&&(S=0);const{inner:M,outer:B}=x6(u,r,n,{aspectRatio:a,minSize:s,maxSize:l});let[C,D,O,P]=Pl(t);if(h?P=u.x:f&&(D=u.x),$?C=u.y:g&&(O=u.y),h){const b=M.x+M.width,W=B.x+B.width;D=si(p.x+S,b,W)}else if(f){const b=B.x,W=M.x;P=si(p.x+S,b,W)}if($){const b=M.y+M.height,W=B.y+B.height;O=si(p.y+R,b,W)}else if(g){const b=B.y,W=M.y;C=si(p.y+R,b,W)}if(P>M.x&&(P=M.x),D<M.x+M.width&&(D=M.x+M.width),C>M.y&&(C=M.y),O<M.y+M.height&&(O=M.y+M.height),P<B.x){const b=B.x-P;P=B.x,D+=b}if(D>B.x+B.width){const b=D-(B.x+B.width);D=B.x+B.width,P-=b}if(C<B.y){const b=B.y-C;C=B.y,O+=b}if(O>B.y+B.height){const b=O-(B.y+B.height);O=B.y+B.height,C-=b}if(a)if(w){let b=D-P,W=O-C;y?(W=b/a,C=u.y-.5*W,O=u.y+.5*W):v&&(b=W*a,P=u.x-.5*b,D=u.x+.5*b)}else{const b=ot(p.x+S-u.x,p.y+R-u.y);r===va?(b.x=Math.max(0,b.x),b.y=Math.min(0,b.y)):r===wa?(b.x=Math.max(0,b.x),b.y=Math.max(0,b.y)):r===Sa?(b.x=Math.min(0,b.x),b.y=Math.max(0,b.y)):r===xa&&(b.x=Math.min(0,b.x),b.y=Math.min(0,b.y));const W=_s(b),nt=_s(ot(M.width,M.height)),k=_s(ot(B.width,B.height)),N=si(W,nt,k),j=ot(a,1),ut=Br(go(j),N);r===va?(D=u.x+ut.x,C=u.y-ut.y):r===wa?(D=u.x+ut.x,O=u.y+ut.y):r===Sa?(P=u.x-ut.x,O=u.y+ut.y):r===xa&&(P=u.x-ut.x,C=u.y-ut.y)}return Bi(P,C,D-P,O-C)};const x6=(t,e,n,i)=>{const{aspectRatio:r,minSize:o,maxSize:a}=i,s=e===Gs||e===va||e===wa,l=e===Xs||e===Sa||e===xa,c=e===Hs||e===va||e===xa,u=e===Zs||e===wa||e===Sa,d=e===Xs||e===Gs,p=e===Hs||e===Zs,h=Ln(n);s?(h.x=t.x,h.width-=t.x):l&&(h.width=t.x),u?(h.y=t.y,h.height-=t.y):c&&(h.height=t.y);const f=((M,B)=>ka(0,0,M,B))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(r){if(d){const M=Math.min(t.y,n.height-t.y);f.height=Math.min(2*M,f.height)}else if(p){const M=Math.min(t.x,n.width-t.x);f.width=Math.min(2*M,f.width)}}const g=r?Ml(xs(Xr(o),r)):o,$=r?Ml(oo(f,r)):f;let y,v,w,S;s?y=t.x:l&&(v=t.x),u?w=t.y:c&&(S=t.y),s?v=y+g.width:l&&(y=v-g.width),u?S=w+g.height:c&&(w=S-g.height),d?(w=t.y-.5*g.height,S=t.y+.5*g.height):p&&(y=t.x-.5*g.width,v=t.x+.5*g.width);const R=or([ot(y,w),ot(v,S)]);return s?v=y+$.width:l&&(y=v-$.width),u?S=w+$.height:c&&(w=S-$.height),d?(w=t.y-.5*$.height,S=t.y+.5*$.height):p&&(y=t.x-.5*$.width,v=t.x+.5*$.width),y=Math.max(n.x,y),v=Math.min(n.x+n.width,v),w=Math.max(n.y,w),S=Math.min(n.y+n.height,S),{inner:R,outer:or([ot(y,w),ot(v,S)])}};var U$=t=>180*t/Math.PI;function v6(t){let e,n,i;return n=new z0({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(U$(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaImageRotator")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,[o]){const a={};32&o&&(a.elasticity=r[5]),512&o&&(a.min=r[9]),1024&o&&(a.max=r[10]),2048&o&&(a.value=r[11]),513&o&&(a.valueMin=Math.max(r[9],r[0])),1026&o&&(a.valueMax=Math.min(r[10],r[1])),64&o&&(a.labelReset=r[6]),4096&o&&(a.base=r[12]),2048&o&&(a.valueLabel=Math.round(U$(r[11]))+"&deg;"),4&o&&(a.oninputstart=r[2]),392&o&&(a.oninputmove=r[17]),400&o&&(a.oninputend=r[18]),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function w6(t,e,n){let i,r,o,a,s,l,c,{rotation:u}=e,{valueMin:d}=e,{valueMax:p}=e,{oninputstart:h=pe}=e,{oninputmove:f=pe}=e,{oninputend:g=pe}=e,{elasticity:$=0}=e,{labelReset:y}=e,{rotationMin:v}=e,{rotationMax:w}=e;return t.$$set=S=>{"rotation"in S&&n(13,u=S.rotation),"valueMin"in S&&n(0,d=S.valueMin),"valueMax"in S&&n(1,p=S.valueMax),"oninputstart"in S&&n(2,h=S.oninputstart),"oninputmove"in S&&n(3,f=S.oninputmove),"oninputend"in S&&n(4,g=S.oninputend),"elasticity"in S&&n(5,$=S.elasticity),"labelReset"in S&&n(6,y=S.labelReset),"rotationMin"in S&&n(14,v=S.rotationMin),"rotationMax"in S&&n(15,w=S.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&n(9,i=v+1e-9),32768&t.$$.dirty&&n(10,r=w-1e-9),1536&t.$$.dirty&&n(12,o=i+.5*(r-i)),32768&t.$$.dirty&&n(16,a=2*w),8192&t.$$.dirty&&n(8,s=Math.sign(u)),73728&t.$$.dirty&&n(7,l=Math.round(Math.abs(u)/a)*a),8576&t.$$.dirty&&n(11,c=u-s*l)},[d,p,h,f,g,$,y,l,s,i,r,c,o,u,v,w,a,S=>f(s*l+S),S=>g(s*l+S)]}class S6 extends pn{constructor(e){super(),dn(this,e,w6,v6,ln,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function k6(t){let e,n,i,r,o;return{c(){e=dt("div"),n=dt("p"),i=vi(t[0]),r=vi("  "),o=vi(t[1]),T(e,"class","PinturaImageInfo")},m(a,s){et(a,e,s),St(e,n),St(n,i),St(n,r),St(n,o)},p(a,[s]){1&s&&Oi(i,a[0]),2&s&&Oi(o,a[1])},i:Xe,o:Xe,d(a){a&&Q(e)}}}function C6(t,e,n){let{width:i}=e,{height:r}=e;return t.$$set=o=>{"width"in o&&n(0,i=o.width),"height"in o&&n(1,r=o.height)},[i,r]}class T6 extends pn{constructor(e){super(),dn(this,e,C6,k6,ln,{width:0,height:1})}}function M6(t){let e,n;return e=new Ss({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};256&r&&(o.options=i[8]),128&r&&(o.selectedIndex=i[7]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function P6(t){let e,n;return e=new R0({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[M6]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,[r]){const o={};1&r&&(o.icon=i[0]),2&r&&(o.label=i[1]),4&r&&(o.labelClass=i[2]),8&r&&(o.hideLabel=i[3]),512&r&&(o.options=i[9]),16&r&&(o.selectedIndex=i[4]),32&r&&(o.onchange=i[5]),64&r&&(o.optionMapper=i[6]),262528&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}const j$='fill="none" stroke="currentColor"';function I6(t,e,n){let i,r,o,{icon:a}=e,{label:s}=e,{labelClass:l}=e,{hideLabel:c}=e,{options:u}=e,{selectedIndex:d}=e,{onchange:p}=e,{optionMapper:h}=e,{filter:f="landscape"}=e,{onfilterchange:g=pe}=e;const $=(v,w,S,R,M)=>`
    <rect ${j$} x="${v}" y="${w}" width="${S}" height="${R}" rx="${M}"/>`,y=(v,w)=>`<path ${j$} d="M${v} ${w} l2 2 l3 -4"/>`;return t.$$set=v=>{"icon"in v&&n(0,a=v.icon),"label"in v&&n(1,s=v.label),"labelClass"in v&&n(2,l=v.labelClass),"hideLabel"in v&&n(3,c=v.hideLabel),"options"in v&&n(12,u=v.options),"selectedIndex"in v&&n(4,d=v.selectedIndex),"onchange"in v&&n(5,p=v.onchange),"optionMapper"in v&&n(6,h=v.optionMapper),"filter"in v&&n(11,f=v.filter),"onfilterchange"in v&&n(13,g=v.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&n(9,i=((v,w)=>(v||[]).map(S=>Ne(S[0])?(S[1]=S[1].map(w),S):w(S)))(u,(v=>w=>{const[S,R,M={}]=w;return Ze(S)&&(M.hidden=v==="landscape"?S<1:S>1),[S,R,M]})(f))),2048&t.$$.dirty&&n(7,r=f==="landscape"?0:1),128&t.$$.dirty&&n(8,o=[["landscape","Landscape",{hideLabel:!0,icon:$(2,6,19,12,2)+(r===0?y(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:$(5,3,13,18,2)+(r===1?y(9,12):"")}]])},[a,s,l,c,d,p,h,r,o,i,v=>{n(11,f=v.value),g(v.value)},f,u,g]}class R6 extends pn{constructor(e){super(),dn(this,e,I6,P6,ln,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const H$=t=>Uo(t,e=>un(e,6)),G$=t=>ra(t,e=>un(e,6)),Fs=(t,e,n=1e-4)=>Math.abs(t-e)<n;var E6=(t,e,n,i,r={})=>{const{aspectRatio:o}=r;t=G$(t),i=i.map(H$);const a=ig(t,D0[n.target]),s=Uo(a,y=>un(y,6)),l=o?xs(r.minSize,o):r.minSize,c=o?oo(r.maxSize,o):r.maxSize,u=ig(e,n.target);if(Po(u,a)<1){e=Ln(t);const y=Math.min(l.width/t.width,l.height/t.height);Dr(e,y,a)}e=ng(Ln(e),l,c,a);let d=Ln(e);e=G$(e);const p=n2(i,1),h=Wo(t),f=Wo(e),g=h.findIndex(y=>Bs(Uo(y,v=>un(v,6)),s)),$=y=>p.map(v=>n0(v,y)).filter(Boolean).pop();if(o){const y=f.map((v,w)=>{if(w===g)return;const S=ot(a.x-v.x,a.y-v.y);go(S),Br(S,.5);const R=ot(a.x-S.x,a.y-S.y),M=Ys(R,H$(v)),B=$(M);if(!B)return;const C=h[w];return{intersection:B,cornerDist:Po(a,C),intersectionDist:Po(a,B)}}).filter(Boolean);if(y.length){const v=y.reduce((w,S)=>{const R=S.intersectionDist/S.cornerDist;return R<w?R:w},Number.MAX_SAFE_INTEGER);d=Ln(t),Dr(d,v,a)}}else{const y=n.target.length===1,v=!(i[0].y===i[1].y||i[0].x===i[1].x),w=h.map((S,R)=>{if(R===g)return;const M=f[R],B=!Fs(M.x,s.x)&&!Fs(M.y,s.y);if(!y&&!v&&B||y&&(Fs(M.x,s.x)||Fs(M.y,s.y)))return;const C=We(y?S:a),D=Ni(We(C),M);go(D),Br(D,.5),y?Wi(C,D):Ni(C,D);const O=Ys(C,M);return $(O)||void 0}).filter(Boolean);if(w.length){const[S,R,M,B]=B0(n.target);let[C,D,O,P]=Pl(e);w.forEach(({x:b,y:W})=>{const nt=un(b,6),k=un(W,6);M&&!Fs(k,s.y)&&(C=Math.max(C,W)),S&&!Fs(nt,s.x)&&(D=Math.min(D,b)),B&&!Fs(k,s.y)&&(O=Math.min(O,W)),R&&!Fs(nt,s.x)&&(P=Math.max(P,b))}),d=Ev([C,D,O,P]),Dr(d,.9999,a)}}return ng(d,l,c,a),d};function A6(t){let e,n;return e=new qr({props:{items:t[11]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};2048&r[0]&&(o.items=i[11]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function L6(t){let e,n,i;return n=new Nb({props:{$$slots:{default:[A6]},$$scope:{ctx:t}}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"slot","header")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};2048&o[0]|64&o[7]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function Z$(t){let e,n;return e=new ks({props:{onclick:t[88],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,disabled:!t[9],hideLabel:!0,class:"PinturaButtonCenter",style:`opacity:${t[29]};transform:translate3d(${t[30].x}px, ${t[30].y}px,0)`}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.label=i[4].cropLabelButtonRecenter),16&r[0]&&(o.icon=i[4].cropIconButtonRecenter),512&r[0]&&(o.disabled=!i[9]),1610612736&r[0]&&(o.style=`opacity:${i[29]};transform:translate3d(${i[30].x}px, ${i[30].y}px,0)`),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function X$(t){let e,n;return e=new y6({props:{rect:t[8],visible:t[12],cornerStyle:t[1]}}),e.$on("resizestart",t[68]),e.$on("resizemove",t[69]),e.$on("resizeend",t[70]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};256&r[0]&&(o.rect=i[8]),4096&r[0]&&(o.visible=i[12]),2&r[0]&&(o.cornerStyle=i[1]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Y$(t){let e,n;return e=new T6({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8192&r[0]&&(o.width=Math.round(i[13].width)),8192&r[0]&&(o.height=Math.round(i[13].height)),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function F6(t){let e,n,i,r,o,a,s,l,c=t[21]&&t[10]&&Z$(t),u=t[21]&&X$(t),d=t[22]&&Y$(t);return{c(){e=dt("div"),n=dt("div"),c&&c.c(),i=he(),u&&u.c(),o=he(),d&&d.c(),T(n,"class","PinturaStage"),T(e,"slot","main")},m(p,h){et(p,e,h),St(e,n),c&&c.m(n,null),St(n,i),u&&u.m(n,null),t[164](n),St(e,o),d&&d.m(e,null),a=!0,s||(l=[Pn(Ir.call(null,n)),At(n,"measure",t[162]),At(n,"wheel",function(){Mn(t[2]&&t[87])&&(t[2]&&t[87]).apply(this,arguments)},{passive:!1}),At(n,"interactionstart",t[74]),At(n,"interactionupdate",t[75]),At(n,"interactionrelease",t[77]),At(n,"interactionend",t[76]),Pn(r=tl.call(null,n,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:q$,getEventPosition:t[165]})),At(n,"gesturedown",t[84]),At(n,"gestureupdate",t[85]),At(n,"gestureup",t[86]),Pn(b6.call(null,n))],s=!0)},p(p,h){(t=p)[21]&&t[10]?c?(c.p(t,h),2098176&h[0]&&I(c,1)):(c=Z$(t),c.c(),I(c,1),c.m(n,i)):c&&(Ie(),z(c,1,1,()=>{c=null}),Re()),t[21]?u?(u.p(t,h),2097152&h[0]&&I(u,1)):(u=X$(t),u.c(),I(u,1),u.m(n,null)):u&&(Ie(),z(u,1,1,()=>{u=null}),Re()),r&&Mn(r.update)&&16777220&h[0]&&r.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:q$,getEventPosition:t[165]}),t[22]?d?(d.p(t,h),4194304&h[0]&&I(d,1)):(d=Y$(t),d.c(),I(d,1),d.m(e,null)):d&&(Ie(),z(d,1,1,()=>{d=null}),Re())},i(p){a||(I(c),I(u),I(d),a=!0)},o(p){z(c),z(u),z(d),a=!1},d(p){p&&Q(e),c&&c.d(),u&&u.d(),t[164](null),d&&d.d(),s=!1,Kn(l)}}}function K$(t){let e,n,i,r;const o=[{class:"PinturaControlList"},{tabs:t[7]},t[18]];let a={$$slots:{default:[z6,({tab:c})=>({222:c}),({tab:c})=>[0,0,0,0,0,0,0,c?32:0]]},$$scope:{ctx:t}};for(let c=0;c<o.length;c+=1)a=Fi(a,o[c]);e=new up({props:a}),e.$on("select",t[163]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]];let l={$$slots:{default:[O6,({panel:c})=>({221:c}),({panel:c})=>[0,0,0,0,0,0,0,c?16:0]]},$$scope:{ctx:t}};for(let c=0;c<s.length;c+=1)l=Fi(l,s[c]);return i=new dp({props:l}),{c(){Ot(e.$$.fragment),n=he(),Ot(i.$$.fragment)},m(c,u){zt(e,c,u),et(c,n,u),zt(i,c,u),r=!0},p(c,u){const d=262272&u[0]?Pr(o,[o[0],128&u[0]&&{tabs:c[7]},262144&u[0]&&Or(c[18])]):{};96&u[7]&&(d.$$scope={dirty:u,ctx:c}),e.$set(d);const p=393216&u[0]?Pr(s,[s[0],s[1],131072&u[0]&&{panels:c[17]},262144&u[0]&&Or(c[18])]):{};511721496&u[0]|80&u[7]&&(p.$$scope={dirty:u,ctx:c}),i.$set(p)},i(c){r||(I(e.$$.fragment,c),I(i.$$.fragment,c),r=!0)},o(c){z(e.$$.fragment,c),z(i.$$.fragment,c),r=!1},d(c){Dt(e,c),c&&Q(n),Dt(i,c)}}}function z6(t){let e,n,i=t[222].label+"";return{c(){e=dt("span"),n=vi(i)},m(r,o){et(r,e,o),St(e,n)},p(r,o){32&o[7]&&i!==(i=r[222].label+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function D6(t){let e,n;return e=new z0({props:{elasticity:t[25]*t[44],base:N6,min:t[23],max:W6,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[28])+"%",oninputstart:t[81],oninputmove:t[82],oninputend:t[83]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};33554432&r[0]&&(o.elasticity=i[25]*i[44]),8388608&r[0]&&(o.min=i[23]),134217728&r[0]&&(o.valueMin=i[27][0]),134217728&r[0]&&(o.valueMax=i[27][1]),268435456&r[0]&&(o.value=i[28]),16&r[0]&&(o.labelReset=i[4].labelReset),268435456&r[0]&&(o.valueLabel=Math.round(100*i[28])+"%"),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function B6(t){let e,n;return e=new S6({props:{elasticity:t[25]*t[44],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[71],oninputmove:t[72],oninputend:t[73]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};33554432&r[0]&&(o.elasticity=i[25]*i[44]),16384&r[0]&&(o.rotation=i[14]),16&r[0]&&(o.labelReset=i[4].labelReset),67108864&r[0]&&(o.valueMin=i[26][0]),67108864&r[0]&&(o.valueMax=i[26][1]),8&r[0]&&(o.rotationMin=-i[3]),8&r[0]&&(o.rotationMax=i[3]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function O6(t){let e,n,i,r;const o=[B6,D6],a=[];function s(l,c){return l[221]===l[93]+"-rotation"?0:l[221]===l[93]+"-zoom"?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Ii()},m(l,c){~e&&a[e].m(l,c),et(l,i,c),r=!0},p(l,c){let u=e;e=s(l),e===u?~e&&a[e].p(l,c):(n&&(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),I(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(I(n),r=!0)},o(l){z(n),r=!1},d(l){~e&&a[e].d(l),l&&Q(i)}}}function _6(t){let e,n,i=t[19]&&K$(t);return{c(){e=dt("div"),i&&i.c(),T(e,"slot","footer"),Et(e,"transform",t[16])},m(r,o){et(r,e,o),i&&i.m(e,null),n=!0},p(r,o){r[19]?i?(i.p(r,o),524288&o[0]&&I(i,1)):(i=K$(r),i.c(),I(i,1),i.m(e,null)):i&&(Ie(),z(i,1,1,()=>{i=null}),Re()),65536&o[0]&&Et(e,"transform",r[16])},i(r){n||(I(i),n=!0)},o(r){z(i),n=!1},d(r){r&&Q(e),i&&i.d()}}}function V6(t){let e,n,i;function r(a){t[166](a)}let o={hasHeader:t[20],$$slots:{footer:[_6],main:[F6],header:[L6]},$$scope:{ctx:t}};return t[15]!==void 0&&(o.root=t[15]),e=new Rl({props:o}),jn.push(()=>Io(e,"root",r)),e.$on("measure",t[167]),{c(){Ot(e.$$.fragment)},m(a,s){zt(e,a,s),i=!0},p(a,s){const l={};1048576&s[0]&&(l.hasHeader=a[20]),2146402302&s[0]|64&s[7]&&(l.$$scope={dirty:s,ctx:a}),!n&&32768&s[0]&&(n=!0,l.root=a[15],jo(()=>n=!1)),e.$set(l)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){Dt(e,a)}}}const W6=1,N6=0,q$=(t,e)=>t.target===e;function U6(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,W,nt,k,N,j,ut,Z,ft,q,ht,xt,lt,Ct,it,vt,K,Ft,Ht,Lt,bt,_t,rt,Tt,Vt,mt,at,$t,te,le,Wt,we,yt,ie,V,De,Le,qt,$e,Me,Be,mn,wt,re,on,Ue,en,ke=Xe,qe=()=>(ke(),ke=Zr(vn,A=>n(12,k=A)),vn);t.$$.on_destroy.push(()=>ke());let{isActive:vn}=e;qe();let{stores:In}=e,{cropImageSelectionCornerStyle:Hn="circle"}=e,{cropWillRenderImageSelectionGuides:Jt=(A,ve)=>{const ze=A=="rotate";return{rows:ze?5:3,cols:ze?5:3,opacity:.25*ve}}}=e,{cropAutoCenterImageSelectionTimeout:He}=e,{cropEnableZoomMatchImageAspectRatio:Y=!0}=e,{cropEnableRotateMatchImageAspectRatio:Pt="never"}=e,{cropEnableRotationInput:H=!0}=e,{cropEnableZoom:Bt=!0}=e,{cropEnableZoomInput:ue=!0}=e,{cropEnableZoomAutoHide:Ce=!0}=e,{cropEnableImageSelection:me=!0}=e,{cropEnableInfoIndicator:It=!1}=e,{cropEnableZoomTowardsWheelPosition:Oe=!0}=e,{cropEnableLimitWheelInputToCropSelection:cn=!0}=e,{cropEnableCenterImageSelection:rn=!0}=e,{cropEnableButtonRotateLeft:J=!0}=e,{cropEnableButtonRotateRight:jt=!1}=e,{cropEnableButtonFlipHorizontal:Ae=!0}=e,{cropEnableButtonFlipVertical:Se=!1}=e,{cropSelectPresetOptions:X}=e,{cropEnableSelectPreset:oe=!0}=e,{cropEnableFilterMatchAspectRatio:Zt=!0}=e,{cropSelectPresetFilter:ee=!1}=e,{cropEnableButtonToggleCropLimit:Je=!1}=e,{cropWillRenderTools:Fe=ri}=e,{cropActiveTransformTool:be="rotation"}=e,{cropMinimizeToolbar:di="auto"}=e,{cropInteractionFocus:Ri="image"}=e,{cropRotationRange:Wn=ma}=e,{cropMaskOpacity:_e=.85}=e,{locale:Ve={}}=e,{cropFormatIconSelectPreset:wn=function(A){const{aspectRatio:ve}=A,[ze,gn,En]=ve?[ve<1?1:.3,ve===1?.85:.5,ve>1?1:.3]:[.2,.3,.4];return{a:ze,b:gn,c:En}}}=e,{cropFormatIconCropBoundary:An=function(A){const{isBoundToImage:ve}=A,[ze,gn,En,Xn]=ve?[.3,1,0,0]:[0,0,.3,1];return{a:ze,b:gn,c:En,d:Xn}}}=e;const ae=mi("isAnimated");F(t,ae,A=>n(141,N=A));const se=mi("elasticityMultiplier");F(t,se,A=>n(25,mn=A));const Rn=mi("redrawTrigger");F(t,Rn,A=>n(161,Be=A));const zn=mi("imageIsStatic");F(t,zn,A=>n(147,xt=A));const Ei=mi("imageStaticVisualCorners");F(t,Ei,A=>n(183,yt=A));const $i=mi("fixScrollDirection");F(t,$i,A=>n(177,mt=A));let ti="idle";const qn=fe();F(t,qn,A=>n(158,qt=A));const kn=()=>Wt===void 0,yi=A=>1/A,$r=A=>{Zt&&ee!==A&&(n(95,ee=A),Wt&&Wt!==1&&Jr()&&kt(ci,Wt=yi(Wt),Wt))},Jr=()=>{if(Wt===1||!i)return!1;const A=yi(Wt);return!!Us(qt).find(([ve])=>ve===A)},Rr=(A,ve,ze)=>Ja(ze)?ve.width===Math.round(A.height)||ve.height===Math.round(A.width):ve.width===Math.round(A.width)||ve.height===Math.round(A.height),tr=()=>(kn()||Pt==="always"&&Jr())&&((A,ve,ze)=>{const gn=ys(Yy(mo(ve),ze),Ge=>Math.abs(Math.round(Ge))),En=ac(gn),Xn=Fn(A);return Bs(En,Xn)})(lt,_t,rt)&&Rr(lt,_t,rt),ao=A=>{if(Pt!=="never"&&tr()){kt(sr,rt+=A,rt);const ve=Ja(rt),ze=ve?_t.height:_t.width,gn=ve?_t.width:_t.height;kt(wi,lt=Bi(0,0,ze,gn),lt),kn()||kt(ci,Wt=ha(ze,gn),Wt)}else kt(sr,rt+=A,rt)},{history:gi,env:Yi,isInteracting:Ke,isInteractingFraction:Ro,isTransformingImage:pi,rootRect:yo,stageRect:_r,utilRect:Wa,utilRectPadded:yr,rootLineColor:Xi,allowPan:Ai,allowZoom:Eo,allowPlayPause:Qr,rangeInputElasticity:so,presentationScalar:Ao,utilTools:bo,imagePreviewModifiers:Ki,imageOutlineOpacity:Go,imageFlipX:Er,imageFlipY:Lo,imageRotation:sr,imageRotationRange:xo,imageOutputSize:lo,imageSelectionRect:Ar,imageSelectionRectSnapshot:vr,imageSelectionRectIntent:to,imageSelectionRectPresentation:Zo,imageCropRectIntent:qi,imageCropRectOrigin:On,imageCropRect:wi,imageCropMinSize:vo,imageCropMaxSize:li,imageCropRange:co,imageCropAspectRatio:ci,imageCropLimitToImage:uo,imageSize:wo,imageScalar:Xo,imageOverlayMarkup:_i,stagePadded:Ui,stageRecenter:Yo}=In;function Fo(A,ve){return Yn(A.cropIconSelectPreset)?Yr(A.cropIconSelectPreset,A,ve):Ns(A.cropIconSelectPreset,wn({aspectRatio:ve}),"{","}")}function eo(A,ve){return Yn(A.cropIconCropBoundary)?Yr(A.cropIconCropBoundary,A,ve):Ns(A.cropIconCropBoundary,An({isBoundToImage:ve}),"{","}")}let wr;F(t,Yi,A=>n(142,j=A)),F(t,Ke,A=>n(146,ht=A)),F(t,pi,A=>n(175,Lt=A)),F(t,yo,A=>n(24,at=A)),F(t,_r,A=>n(153,Ht=A)),F(t,yr,A=>n(150,vt=A)),F(t,Ao,A=>n(149,it=A)),F(t,bo,A=>n(185,V=A)),F(t,Ki,A=>n(174,ft=A)),F(t,Er,A=>n(160,Me=A)),F(t,Lo,A=>n(159,$e=A)),F(t,sr,A=>n(14,rt=A)),F(t,xo,A=>n(26,wt=A)),F(t,lo,A=>n(186,De=A)),F(t,Ar,A=>n(152,Ft=A)),F(t,vr,A=>n(151,K=A)),F(t,to,A=>n(184,ie=A)),F(t,Zo,A=>n(145,q=A)),F(t,qi,A=>n(178,$t=A)),F(t,On,A=>n(180,le=A)),F(t,wi,A=>n(13,lt=A)),F(t,vo,A=>n(156,Vt=A)),F(t,li,A=>n(182,we=A)),F(t,co,A=>n(179,te=A)),F(t,ci,A=>n(181,Wt=A)),F(t,uo,A=>n(155,Tt=A)),F(t,wo,A=>n(154,_t=A)),F(t,Xo,A=>n(148,Ct=A)),F(t,Ui,A=>n(144,Z=A));const po=(A,ve)=>{const ze={target:A,translate:ve},gn=gd(mo(Vt),it),En=gd(mo(we),it);let Xn=N$(K,ze,{...vt,x:0,y:0},{aspectRatio:Wt,minSize:gn,maxSize:En});if(Xn=((Qe,Nn,Gn)=>{const[bi,zi,fi,Li]=Pl(Qe),Bn={...Qe};if(bi<Nn.y&&(Qe.height=Qe.height-(Nn.y-bi),Qe.y=Nn.y),zi>Nn.x+Nn.width&&(Qe.width=Nn.x+Nn.width-Qe.x),fi>Nn.y+Nn.height&&(Qe.height=Nn.y+Nn.height-Qe.y),Li<Nn.x&&(Qe.width=Qe.width-(Nn.x-Li),Qe.x=Nn.x),Gn){const Fr=Math.min(1,Bn.width/Qe.width,Bn.height/Qe.height);return Ws(Bn,Fr)}return Qe})(Xn,{...vt,x:0,y:0},Wt),!Tt)return{boundsLimited:Xn,boundsIntent:Xn};let Ge=E6(K,Xn,ze,yt,{aspectRatio:Wt,minSize:gn,maxSize:En});return{boundsLimited:Ge,boundsIntent:Ge}},Ti=(A,ve)=>{const ze={target:A,translate:ve},gn=gd(mo(Vt),it),En=gd(mo(we),it),Xn=((Ge,Qe,Nn={})=>{const{target:Gn,translate:bi}=Qe,{aspectRatio:zi,minSize:fi}=Nn,Li=iu[D0[Gn]],Bn=Wi(Ln(Ge),ot(Li[0]*Ge.width,Li[1]*Ge.height)),Fr=iu[Gn],qo=Wi(Ln(Ge),ot(Fr[0]*Ge.width,Fr[1]*Ge.height)),[Na,Cs,el,Ua,ja,Ts,er]=B0(Gn);let Ha=bi.x,Ta=bi.y;ja?Ta=0:Ts&&(Ha=0);let[br,Wr,zr,Sr]=Pl(Ge);if(Na?Sr=Bn.x:Cs&&(Wr=Bn.x),Ua?br=Bn.y:el&&(zr=Bn.y),Na?Wr=qo.x+Ha:Cs&&(Sr=qo.x+Ha),Ua?zr=qo.y+Ta:el&&(br=qo.y+Ta),fi&&ja&&zr-br<fi.height){const Ye=fi.height-(zr-br);br-=.5*Ye,zr+=.5*Ye}if(fi&&Ts&&Wr-Sr<fi.width){const Ye=fi.width-(Wr-Sr);Sr-=.5*Ye,Wr+=.5*Ye}if(zi)if(er){let Ye=Wr-Sr,Co=zr-br;ja?(Co=Ye/zi,br=Bn.y-.5*Co,zr=Bn.y+.5*Co):Ts&&(Ye=Co*zi,Sr=Bn.x-.5*Ye,Wr=Bn.x+.5*Ye)}else{const Ye=ot(qo.x+Ha-Bn.x,qo.y+Ta-Bn.y);Gn===va?(Ye.x=Math.max(0,Ye.x),Ye.y=Math.min(0,Ye.y)):Gn===wa?(Ye.x=Math.max(0,Ye.x),Ye.y=Math.max(0,Ye.y)):Gn===Sa?(Ye.x=Math.min(0,Ye.x),Ye.y=Math.max(0,Ye.y)):Gn===xa&&(Ye.x=Math.min(0,Ye.x),Ye.y=Math.min(0,Ye.y));const Co=_s(Ye),Ga=ot(zi,1),Do=Br(go(Ga),Co);Gn===va?(Wr=Bn.x+Do.x,br=Bn.y-Do.y):Gn===wa?(Wr=Bn.x+Do.x,zr=Bn.y+Do.y):Gn===Sa?(Sr=Bn.x-Do.x,zr=Bn.y+Do.y):Gn===xa&&(Sr=Bn.x-Do.x,br=Bn.y-Do.y)}return Bi(Sr,br,Wr-Sr,zr-br)})(K,ze,{aspectRatio:Wt,minSize:gn});return{boundsLimited:N$(K,ze,{...vt,x:0,y:0},{aspectRatio:Wt,minSize:gn,maxSize:En}),boundsIntent:Xn}};let ji,Lr;const no=({translation:A,scalar:ve})=>{xt&&(ve=1,A=ec(We(A)));const ze=Math.min(Ft.width/lt.width,Ft.height/lt.height),gn=Br(We(A),1/ze);let En;if(Lr){const Xn=Ni(We(Lr),A);Lr=A,En=ga(Ln(lt),Xn)}else En=ga(Ln(ji),ec(We(gn))),ve!==void 0&&Dr(En,1/ve);kt(qi,$t=En,$t),kt(wi,lt=En,lt)},_=Vn([co,wi],([A,ve],ze)=>{if(!ve)return;const[gn,En]=A,Xn=pr(ve);ze([Ml(ra(xs(gn,Xn),un)),Ml(ra(oo(En,Xn),un))])});F(t,_,A=>n(176,bt=A));const ce=Vn([wo,uo,vo,li,co,sr],([A,ve,ze,gn,En,Xn],Ge)=>{if(!A)return;const Qe=En[0],Nn=En[1];let Gn,bi;ve?(Gn=((zi,fi,Li)=>Ja(Li)?1-1/Math.min(zi.height/fi.width,zi.width/fi.height):1-1/Math.min(zi.width/fi.width,zi.height/fi.height))(A,Nn,Xn),bi=Math.min(Qe.width/ze.width,Qe.height/ze.height)):(Gn=-1,bi=1),Ge([Gn,bi].map(zi=>un(zi)))});F(t,ce,A=>n(27,re=A));const bn=Vn([wo,wi,co,sr],([A,ve,ze,gn],En)=>{if(!A||!ve)return En(0);let Xn;const Ge=ze[0],Qe=ze[1],Nn=ve.width,Gn=ve.height,bi=pr(ve),zi=Ja(gn)?Zi(A.height,A.width):A,fi=oo(zi,bi);if(Nn<=fi.width||Gn<=fi.height){const Li=fi.width-Ge.width,Bn=fi.height-Ge.height;Xn=Li===0||Bn===0?1:1-Math.min((Nn-Ge.width)/Li,(Gn-Ge.height)/Bn)}else{const Li=Qe.width-fi.width,Bn=Qe.height-fi.height,Fr=oo({width:Li,height:Bn},bi);Xn=-Math.min((Nn-fi.width)/Fr.width,(Gn-fi.height)/Fr.height)}En(Xn)});F(t,bn,A=>n(28,on=A));const nn=A=>{const ve=pr(ji);let ze,gn,En;const Xn=Ja(rt)?Zi(_t.height,_t.width):_t,Ge=oo(Xn,ve);if(A>=0){const Gn=Ge.width-te[0].width,bi=Ge.height-te[0].height;ze=Ge.width-Gn*A,gn=Ge.height-bi*A,En=xs({width:ze,height:gn},ve)}else{const Gn=te[1].width-Ge.width,bi=te[1].height-Ge.height;ze=Ge.width+Gn*-A,gn=Ge.height+bi*-A,En=oo({width:ze,height:gn},ve)}ze=En.width,gn=En.height;const Qe=ji.x+.5*ji.width-.5*ze,Nn=ji.y+.5*ji.height-.5*gn;kt(wi,lt={x:Qe,y:Nn,width:ze,height:gn},lt)};let de;const xe=A=>{const ve=Dr(Ln(de),1/A);kt(qi,$t=ve,$t),kt(wi,lt=ve,lt)};let Dn;const xn=()=>{Yo.set({})};let ye;const ei=hn(0,{precision:1e-4});F(t,ei,A=>n(29,Ue=A));const Cn=hn();F(t,Cn,A=>n(30,en=A));const So=Vn([ci,lo,qn],([A,ve,ze],gn)=>{if(!i)return;const En=Us(ze),Xn=[...En].map(Ge=>Ge[0]).sort((Ge,Qe)=>Mi(Ge[0])&&!Mi(Qe[0])?1:-1).find(Ge=>{if(Mi(Ge)&&ve){const[Qe,Nn]=Ge,Gn=ve.width===Qe&&ve.height===Nn,bi=A===ha(Qe,Nn);return Gn&&bi}return Ge===A});if(!Xn)return gn(void 0);gn(En.map(Ge=>Ge[0]).findIndex(Ge=>Mi(Ge)?vs(Ge,Xn):Ge===Xn))});F(t,So,A=>n(157,Le=A));const Ca=(A,ve)=>{if(!i||A===-1||A===void 0)return;const ze=Us(ve)[A][0];return ze?Mi(ze)?ha(ze[0],ze[1]):ze:void 0},Ji=Vn([Xi,Zo,Ro],([A,ve,ze],gn)=>{const{rows:En,cols:Xn,opacity:Ge}=Jt(ti,ze);if(!ve||Ge<=0)return gn([]);const{x:Qe,y:Nn,width:Gn,height:bi}=ve,zi=Gn/Xn,fi=bi/En,Li=[];for(let Bn=1;Bn<=En-1;Bn++){const Fr=Nn+fi*Bn;Li.push({id:"image-selection-guide-row-"+Bn,points:[ot(Qe,Fr),ot(Qe+Gn,Fr)],opacity:Ge,strokeWidth:1,strokeColor:A})}for(let Bn=1;Bn<=Xn-1;Bn++){const Fr=Qe+zi*Bn;Li.push({id:"image-selection-guide-col-"+Bn,points:[ot(Fr,Nn),ot(Fr,Nn+bi)],opacity:Ge,strokeWidth:1,strokeColor:A})}gn(Li)});F(t,Ji,A=>n(143,ut=A));const ko="crop-"+ya();let zo,is=ko+"-"+(H?be:"zoom"),Si=is,Vr;const Ko=hn(N?20:0);return F(t,Ko,A=>n(140,nt=A)),t.$$set=A=>{"isActive"in A&&qe(n(0,vn=A.isActive)),"stores"in A&&n(97,In=A.stores),"cropImageSelectionCornerStyle"in A&&n(1,Hn=A.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in A&&n(98,Jt=A.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in A&&n(99,He=A.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in A&&n(100,Y=A.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in A&&n(101,Pt=A.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in A&&n(102,H=A.cropEnableRotationInput),"cropEnableZoom"in A&&n(2,Bt=A.cropEnableZoom),"cropEnableZoomInput"in A&&n(103,ue=A.cropEnableZoomInput),"cropEnableZoomAutoHide"in A&&n(104,Ce=A.cropEnableZoomAutoHide),"cropEnableImageSelection"in A&&n(105,me=A.cropEnableImageSelection),"cropEnableInfoIndicator"in A&&n(106,It=A.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in A&&n(107,Oe=A.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in A&&n(108,cn=A.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in A&&n(109,rn=A.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in A&&n(110,J=A.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in A&&n(111,jt=A.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in A&&n(112,Ae=A.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in A&&n(113,Se=A.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in A&&n(114,X=A.cropSelectPresetOptions),"cropEnableSelectPreset"in A&&n(115,oe=A.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in A&&n(116,Zt=A.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in A&&n(95,ee=A.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in A&&n(117,Je=A.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in A&&n(118,Fe=A.cropWillRenderTools),"cropActiveTransformTool"in A&&n(119,be=A.cropActiveTransformTool),"cropMinimizeToolbar"in A&&n(120,di=A.cropMinimizeToolbar),"cropInteractionFocus"in A&&n(121,Ri=A.cropInteractionFocus),"cropRotationRange"in A&&n(3,Wn=A.cropRotationRange),"cropMaskOpacity"in A&&n(122,_e=A.cropMaskOpacity),"locale"in A&&n(4,Ve=A.locale),"cropFormatIconSelectPreset"in A&&n(123,wn=A.cropFormatIconSelectPreset),"cropFormatIconCropBoundary"in A&&n(124,An=A.cropFormatIconCropBoundary)},t.$$.update=()=>{4096&t.$$.dirty[0]|268435456&t.$$.dirty[3]&&zn.set(Ri==="selection"&&k),2097152&t.$$.dirty[3]&&n(131,i=X&&Array.isArray(X)&&X.length),2097152&t.$$.dirty[3]|128&t.$$.dirty[4]&&qn.set(i?X:[]),4096&t.$$.dirty[0]|131072&t.$$.dirty[4]&&k&&Go.set(1,{hard:!N}),4096&t.$$.dirty[0]&&Ai.set(!k),4096&t.$$.dirty[0]&&Eo.set(!k),4096&t.$$.dirty[0]&&k&&Qr.set(!0),262144&t.$$.dirty[4]&&n(126,h=j.layoutMode==="overlay"),4194304&t.$$.dirty[3]|4&t.$$.dirty[4]&&n(130,R=oe&&!h),335544320&t.$$.dirty[4]&&n(139,l=vt&&Ft&&zd(vt,Ft)),268468224&t.$$.dirty[4]&&n(137,c=!(!Ft||!l)),268476416&t.$$.dirty[4]&&n(135,u=c&&fa(Ft,l,A=>un(A,5))),16400&t.$$.dirty[0]|52297732&t.$$.dirty[3]|1074006208&t.$$.dirty[4]|127&t.$$.dirty[5]&&n(11,r=Be&&Fe([J&&["Button","rotate-left",{label:Ve.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:Ve.cropIconButtonRotateLeft,onclick:()=>{ao(-Math.PI/2),gi.write()}}],jt&&["Button","rotate-right",{label:Ve.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:Ve.cropIconButtonRotateRight,onclick:()=>{ao(Math.PI/2),gi.write()}}],Ae&&["Button","flip-horizontal",{label:Ve.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:Ve.cropIconButtonFlipHorizontal,onclick:()=>{Ja(rt)?kt(Lo,$e=!$e,$e):kt(Er,Me=!Me,Me),gi.write()}}],Se&&["Button","flip-vertical",{label:Ve.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:Ve.cropIconButtonFlipVertical,onclick:()=>{Ja(rt)?kt(Er,Me=!Me,Me):kt(Lo,$e=!$e,$e),gi.write()}}],R&&i&&[ee===!1?"Dropdown":R6,"select-preset",{icon:Fo(Ve,Ca(Le,qt)),label:Yr(Ve.cropLabelSelectPreset,Ve,Ca(Le,qt)),labelClass:"PinturaToolbarContentWide",options:qt,filter:ee,onfilterchange:$r,selectedIndex:Le,onchange:({value:A})=>{Mi(A)?(kt(ci,Wt=ha(A[0],A[1]),Wt),kt(lo,De=Xy(A),De)):kt(ci,Wt=A,Wt),u&&xn(),gi.write()},optionMapper:A=>{let ve=!1;const ze=Mi(A.value)?A.value[0]/A.value[1]:A.value;if(ze){const gn=tc(_t,rt,ze);ve=gn.width<Vt.width||gn.height<Vt.height}return A.icon=((gn,En={})=>{const{width:Xn=24,height:Ge=24,bounds:Qe=16,radius:Nn=3}=En;let Gn,bi,zi,fi,Li=Mi(gn)?ha(gn[0],gn[1]):gn,Bn=!!Li;return Li=Bn?Li:1,zi=Li>1?Qe:Li*Qe,fi=zi/Li,Gn=Math.round(.5*(Xn-zi)),bi=Math.round(.5*(Ge-fi)),`<rect fill="${Bn?"currentColor":"none"}" stroke="${Bn?"none":"currentColor"}" stroke-width="${Xn/16}" stroke-dasharray="${[Xn/12,Xn/6].join(" ")}" x="${Gn}" y="${bi}" width="${zi}" height="${fi}" rx="${Nn}"/>`})(A.value,{bounds:14}),{...A,disabled:ve}}}],Je&&["Dropdown","select-crop-limit",{icon:eo(Ve,Tt),label:Ve.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:A})=>{kt(uo,Tt=A,Tt),gi.write()},options:[[!0,Ve.cropLabelCropBoundaryEdge,{icon:eo(Ve,!0)}],[!1,Ve.cropLabelCropBoundaryNone,{icon:eo(Ve,!1)}]]}]].filter(Boolean),j,()=>Rn.set({})).filter(Boolean)),6144&t.$$.dirty[0]|134217728&t.$$.dirty[3]|262148&t.$$.dirty[4]&&kt(bo,V=k&&di!=="never"&&(di==="always"||j.verticalSpace==="short"||h)?r.map(([A,ve,ze])=>Array.isArray(ze)?[A,ve,ze]:[A,ve,{...ze,hideLabel:!0}]):[],V),1&t.$$.dirty[5]&&n(23,o=Tt?0:-1),603979776&t.$$.dirty[4]&&n(132,a=vt&&ot(-(Ht.x-vt.x),-(Ht.y-vt.y))),2097408&t.$$.dirty[4]&&n(133,s=q&&a&&ot(lu(q.x+.5*q.width+a.x),lu(q.y+.5*q.height+a.y))),134217728&t.$$.dirty[4]&&n(136,d=K!=null),67141632&t.$$.dirty[4]&&n(138,p=vt&&l&&(l.height===vt.height||l.width===vt.width)),50348032&t.$$.dirty[4]&&n(134,f=!p&&it<1&&Ct<1),15360&t.$$.dirty[4]&&n(9,g=c&&!d&&(!u||f)),8192&t.$$.dirty[0]|8192&t.$$.dirty[3]|4&t.$$.dirty[4]&&n(22,$=It&&!!lt&&!h),2097408&t.$$.dirty[4]&&n(8,w=q&&a&&{x:q.x+a.x,y:q.y+a.y,width:q.width,height:q.height}),256&t.$$.dirty[0]|4096&t.$$.dirty[3]|4&t.$$.dirty[4]&&n(21,y=me&&!!w&&!h),65600&t.$$.dirty[3]|8389120&t.$$.dirty[4]&&n(10,v=rn&&!!s&&!He&&!xt),512&t.$$.dirty[0]|64&t.$$.dirty[3]|4194306&t.$$.dirty[4]&&g&&He&&!ht&&(clearTimeout(ye),n(125,ye=setTimeout(xn,He))),4194306&t.$$.dirty[4]&&ht&&clearTimeout(ye),1536&t.$$.dirty[0]|131072&t.$$.dirty[4]&&ei.set(v&&g?1:0,{hard:N===!1}),131584&t.$$.dirty[4]&&Cn.set(s,{hard:N===!1}),4096&t.$$.dirty[0]|1048576&t.$$.dirty[4]&&(k&&!Z?(kt(Ki,ft.crop={maskOpacity:_e,maskMarkupOpacity:_e},ft),Ki.set(ft)):(delete ft.crop,Ki.set(ft))),524288&t.$$.dirty[4]&&ut&&_i.update(A=>{const ve=A.filter(ze=>!/^image\-selection\-guide/.test(ze.id));return k?[...ve,...ut]:ve}),262144&t.$$.dirty[4]&&n(129,S=j.verticalSpace!=="short"),134217728&t.$$.dirty[3]|36&t.$$.dirty[4]&&n(20,M=di==="never"&&!h||S&&di!=="always"),4&t.$$.dirty[0]|1024&t.$$.dirty[3]&&n(128,B=Bt&&ue),2048&t.$$.dirty[3]|48&t.$$.dirty[4]&&n(127,C=Ce?S&&B:B),512&t.$$.dirty[3]|8&t.$$.dirty[4]&&n(19,D=H||C),8&t.$$.dirty[4]&&(C||n(5,Si=is)),32&t.$$.dirty[0]&&n(18,O={name:ko,selected:Si}),16&t.$$.dirty[0]|512&t.$$.dirty[3]|8&t.$$.dirty[4]&&n(7,P=[H&&{id:ko+"-rotation",label:Ve.cropLabelTabRotation},C&&{id:ko+"-zoom",label:Ve.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&n(17,b=P.map(A=>A.id)),64&t.$$.dirty[0]|4&t.$$.dirty[4]&&zo&&!zo.children.length&&h&&zo.dispatchEvent(new CustomEvent("measure",{detail:zo.rect})),4096&t.$$.dirty[0]|131072&t.$$.dirty[4]&&N&&Ko.set(k?0:20),65536&t.$$.dirty[4]&&n(16,W=nt?`translateY(${nt}px)`:"none")},[vn,Hn,Bt,Wn,Ve,Si,zo,P,w,g,v,r,k,lt,rt,Vr,W,b,O,D,M,y,$,o,at,mn,wt,re,on,Ue,en,ae,se,Rn,zn,Ei,$i,qn,Yi,Ke,pi,yo,_r,yr,so,Ao,bo,Ki,Er,Lo,sr,xo,lo,Ar,vr,to,Zo,qi,On,wi,vo,li,co,ci,uo,wo,Xo,Ui,()=>{ti="select",kt(Ke,ht=!0,ht),kt(vr,K=Ln(Ft),K),wr=xt?po:Ti},({detail:A})=>{const{boundsLimited:ve,boundsIntent:ze}=wr(A.direction,A.translation);kt(pi,Lt=!0,Lt),kt(to,ie=ze,ie),kt(Ar,Ft=ve,Ft)},({detail:A})=>{const{boundsLimited:ve}=wr(A.direction,A.translation);kt(pi,Lt=!1,Lt),kt(Ke,ht=!1,ht),kt(to,ie=void 0,ie),_s(A.translation)&&(kt(Ar,Ft=ve,Ft),gi.write()),kt(vr,K=void 0,K),ti=void 0},()=>{ti="rotate",kt(Ke,ht=!0,ht),kt(On,le=Ln(lt),le)},A=>{kt(pi,Lt=!0,Lt),kt(sr,rt=A,rt)},A=>{kt(pi,Lt=!1,Lt),kt(Ke,ht=!1,ht),kt(sr,rt=A,rt),gi.write(),kt(On,le=void 0,le)},()=>{ti="pan",Lr=void 0,kt(Ke,ht=!0,ht),ji=Ln(lt)},({detail:A})=>{kt(pi,Lt=!0,Lt),no(A)},({detail:A})=>{kt(pi,Lt=!1,Lt),kt(Ke,ht=!1,ht),(_s(A.translation)>0||A.scalar!==0)&&(no(A),gi.write()),kt(qi,$t=void 0,$t),ji=void 0},({detail:{translation:A}})=>{xt&&(A=ec(We(A))),Lr=A,kt(Ke,ht=!1,ht)},_,ce,bn,()=>{ti="zoom",kt(Ke,ht=!0,ht),ji=Ln(lt)},A=>{kt(pi,Lt=!1,Lt),nn(A)},A=>{nn(A),gi.write(),kt(pi,Lt=!1,Lt),kt(Ke,ht=!1,ht),ji=void 0},()=>{ti="zoom",ji||(de=Ln(lt),kt(Ke,ht=!0,ht))},({detail:A})=>{de&&(kt(pi,Lt=!0,Lt),xe(A))},({detail:A})=>{de&&(kt(pi,Lt=!1,Lt),kt(Ke,ht=!1,ht),xe(A),kt(qi,$t=void 0,$t),de=void 0,gi.write())},A=>{const ve=Oh(A,at,Ht);if(cn&&!jd(Ft,ve))return;ti="zoom",kt(Ke,ht=!0,ht),kt(pi,Lt=!0,Lt),A.preventDefault(),A.stopPropagation();const ze=hp(A,{fixScrollDirection:mt}),gn=1+ze/100,En=Ln(lt),Xn=Math.min(lt.width/Vt.width,lt.height/Vt.height)===1;if(Y&&Tt){const Nn=Rr(lt,_t,rt);if(kn()&&Nn&&ze>0&&u){kt(Ke,ht=!1,ht),kt(pi,Lt=!1,Lt);const Gn=Ja(rt)?Xr({height:_t.width,width:_t.height}):Xr(_t);return fa(En,Gn)||(clearTimeout(Dn),fa(gi.state.crop,Gn))?void 0:(kt(wi,lt=Gn,lt),void gi.write())}}let Ge=Fn(lt);if(Oe&&Ri!=="selection"&&ze<0&&!Xn){const Nn=Ni(We(ve),Ft),Gn=Math.min(Ft.width/lt.width,Ft.height/lt.height),bi=Dr(Ln(Ft),1.1);Ge=jd(bi,ve)?Wi(Ln(lt),Br(Nn,1/Gn)):Ge}let Qe=Dr(Ln(lt),gn,Ge);if(Ud(bt[1],Qe)||(Qe=eg(Fn(Qe),bt[1])),Ud(Qe,bt[0])||(Qe=eg(Fn(Qe),bt[0])),fa(En,Qe,un))return kt(Ke,ht=!1,ht),void kt(pi,Lt=!1,Lt);kt(wi,lt=ra(Qe,Nn=>un(Nn,5)),lt),kt(Ke,ht=!1,ht),kt(pi,Lt=!1,Lt),clearTimeout(Dn),Dn=setTimeout(()=>{gi.write()},500)},xn,ei,Cn,So,Ji,ko,Ko,ee,"crop",In,Jt,He,Y,Pt,H,ue,Ce,me,It,Oe,cn,rn,J,jt,Ae,Se,X,oe,Zt,Je,Fe,be,di,Ri,_e,wn,An,ye,h,C,B,S,R,i,a,s,f,u,d,c,p,l,nt,N,j,ut,Z,q,ht,xt,Ct,it,vt,K,Ft,Ht,_t,Tt,Vt,Le,qt,$e,Me,Be,function(A){Kr.call(this,t,A)},({detail:A})=>n(5,Si=A),function(A){jn[A?"unshift":"push"](()=>{zo=A,n(6,zo)})},A=>L0(A),function(A){Vr=A,n(15,Vr)},function(A){Kr.call(this,t,A)}]}var j6={util:["crop",class extends pn{constructor(t){super(),dn(this,t,U6,V6,ln,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,cropMaskOpacity:122,locale:4,cropFormatIconSelectPreset:123,cropFormatIconCropBoundary:124},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[96]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[97]}set stores(t){this.$$set({stores:t}),E()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),E()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[98]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),E()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[99]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),E()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),E()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[101]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),E()}get cropEnableRotationInput(){return this.$$.ctx[102]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),E()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),E()}get cropEnableZoomInput(){return this.$$.ctx[103]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),E()}get cropEnableZoomAutoHide(){return this.$$.ctx[104]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),E()}get cropEnableImageSelection(){return this.$$.ctx[105]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),E()}get cropEnableInfoIndicator(){return this.$$.ctx[106]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),E()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[107]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),E()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[108]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),E()}get cropEnableCenterImageSelection(){return this.$$.ctx[109]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),E()}get cropEnableButtonRotateLeft(){return this.$$.ctx[110]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),E()}get cropEnableButtonRotateRight(){return this.$$.ctx[111]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),E()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[112]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),E()}get cropEnableButtonFlipVertical(){return this.$$.ctx[113]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),E()}get cropSelectPresetOptions(){return this.$$.ctx[114]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),E()}get cropEnableSelectPreset(){return this.$$.ctx[115]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),E()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[116]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),E()}get cropSelectPresetFilter(){return this.$$.ctx[95]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),E()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[117]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),E()}get cropWillRenderTools(){return this.$$.ctx[118]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),E()}get cropActiveTransformTool(){return this.$$.ctx[119]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),E()}get cropMinimizeToolbar(){return this.$$.ctx[120]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),E()}get cropInteractionFocus(){return this.$$.ctx[121]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),E()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),E()}get cropMaskOpacity(){return this.$$.ctx[122]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),E()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),E()}get cropFormatIconSelectPreset(){return this.$$.ctx[123]}set cropFormatIconSelectPreset(t){this.$$set({cropFormatIconSelectPreset:t}),E()}get cropFormatIconCropBoundary(){return this.$$.ctx[124]}set cropFormatIconCropBoundary(t){this.$$set({cropFormatIconCropBoundary:t}),E()}}]};function H6(t){let e,n,i,r,o,a,s,l=t[77],c=(Yn(t[77].label)?t[77].label(t[2]):t[77].label)+"";function u(...h){return t[51](t[77],...h)}const d=()=>t[52](n,l),p=()=>t[52](null,l);return{c(){e=dt("div"),n=dt("div"),i=he(),r=dt("span"),o=vi(c),T(n,"class",Ub),T(e,"slot","option"),T(e,"class","PinturaFilterOption")},m(h,f){et(h,e,f),St(e,n),d(),St(e,i),St(e,r),St(r,o),a||(s=[At(n,"measure",u),Pn(Ir.call(null,n))],a=!0)},p(h,f){l!==(t=h)[77]&&(p(),l=t[77],d()),4&f[0]|32768&f[2]&&c!==(c=(Yn(t[77].label)?t[77].label(t[2]):t[77].label)+"")&&Oi(o,c)},d(h){h&&Q(e),p(),a=!1,Kn(s)}}}function G6(t){let e,n;return e=new Ss({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[H6,({option:i})=>({77:i}),({option:i})=>[0,0,i?32768:0]]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};4&r[0]&&(o.locale=i[2]),8&r[0]&&(o.options=i[3]),4096&r[0]&&(o.selectedIndex=i[12]),1028&r[0]|98304&r[2]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Z6(t){let e,n,i,r,o,a,s,l;function c(h){t[54](h)}function u(h){t[55](h)}function d(h){t[56](h)}let p={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[G6]},$$scope:{ctx:t}};return t[4]!==void 0&&(p.maskFeatherStartOpacity=t[4]),t[5]!==void 0&&(p.maskFeatherEndOpacity=t[5]),t[6]!==void 0&&(p.maskFeatherSize=t[6]),n=new Va({props:p}),jn.push(()=>Io(n,"maskFeatherStartOpacity",c)),jn.push(()=>Io(n,"maskFeatherEndOpacity",u)),jn.push(()=>Io(n,"maskFeatherSize",d)),n.$on("measure",t[57]),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"slot","footer"),Et(e,"transform",t[11])},m(h,f){et(h,e,f),zt(n,e,null),a=!0,s||(l=[At(e,"transitionend",t[30]),At(e,"measure",t[58]),Pn(Ir.call(null,e,{observePosition:!0}))],s=!0)},p(h,f){const g={};8192&f[0]&&(g.elasticity=h[13]*h[19]),128&f[0]&&(g.onscroll=h[53]),5132&f[0]|65536&f[2]&&(g.$$scope={dirty:f,ctx:h}),!i&&16&f[0]&&(i=!0,g.maskFeatherStartOpacity=h[4],jo(()=>i=!1)),!r&&32&f[0]&&(r=!0,g.maskFeatherEndOpacity=h[5],jo(()=>r=!1)),!o&&64&f[0]&&(o=!0,g.maskFeatherSize=h[6],jo(()=>o=!1)),n.$set(g),2048&f[0]&&Et(e,"transform",h[11])},i(h){a||(I(n.$$.fragment,h),a=!0)},o(h){z(n.$$.fragment,h),a=!1},d(h){h&&Q(e),Dt(n),s=!1,Kn(l)}}}function X6(t){let e,n;return e=new Rl({props:{$$slots:{footer:[Z6]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16380&r[0]|65536&r[2]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}let Ub="PinturaFilterPreview";function Y6(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B=Xe,C=()=>(B(),B=Zr(b,wt=>n(43,u=wt)),b),D=Xe,O=()=>(D(),D=Zr(P,wt=>n(49,w=wt)),P);t.$$.on_destroy.push(()=>B()),t.$$.on_destroy.push(()=>D());let{isActive:P}=e;O();let{isActiveFraction:b}=e;C();let{stores:W}=e,{locale:nt}=e,{filterFunctions:k}=e,{filterOptions:N}=e;const j=mi("elasticityMultiplier");F(t,j,wt=>n(13,M=wt));const{history:ut,interfaceImages:Z,stageRectBase:ft,utilRect:q,animation:ht,scrollElasticity:xt,imageSize:lt,imagePreview:Ct,imageCropRect:it,imageRotation:vt,imageFlipX:K,imageFlipY:Ft,imageBackgroundColor:Ht,imageGamma:Lt,imageColorMatrix:bt,allowPan:_t,allowZoom:rt,allowZoomControls:Tt,allowPlayPause:Vt}=W;F(t,Z,wt=>n(60,d=wt)),F(t,ft,wt=>n(48,v=wt)),F(t,q,wt=>n(47,y=wt)),F(t,ht,wt=>n(50,S=wt)),F(t,lt,wt=>n(62,h=wt)),F(t,Ct,wt=>n(42,c=wt)),F(t,Ht,wt=>n(61,p=wt)),F(t,Lt,wt=>n(44,f=wt)),F(t,bt,wt=>n(40,s=wt));const mt=fe({});F(t,mt,wt=>n(46,$=wt));const at=(wt,re)=>kt(mt,$[wt.value]=re,$),$t=Vn(mt,wt=>{if(!wt[void 0])return;const re=wt[void 0];return R&&ru(R,re)?R:mo(re)});F(t,$t,wt=>n(63,R=wt));const te=Vn([P,$t,it,lt,vt,K,Ft],([wt,re,on,Ue,en,ke,qe],vn)=>{if(!wt||!re||!Ue)return g;const In=Xr(Ue),Hn=Fn(In),Jt=x0(Ue,on,en),He=Fn(Jt),Y=Ni(We(Hn),He),Pt=ec(We(Y)),H=Math.max(re.width/on.width,re.height/on.height);vn({origin:Pt,translation:Y,rotation:{x:qe?Math.PI:0,y:ke?Math.PI:0,z:en},scale:H})});F(t,te,wt=>n(45,g=wt));const le=hn(S?20:0);let Wt;F(t,le,wt=>n(39,a=wt));const we={};let yt,ie,V,De,Le,qt,$e={x:0,y:0};const Me=fe([]);F(t,Me,wt=>n(41,l=wt));const Be=wt=>{const re={...wt,data:c,size:h,offset:{...wt.offset},mask:{...wt.mask},backgroundColor:p};return re.opacity=u,re.offset.y+=a,re.mask.y+=a,re.id="filter",re},mn=()=>d.filter(wt=>wt.id!=="filter");return aa(()=>{Z.set([])}),t.$$set=wt=>{"isActive"in wt&&O(n(0,P=wt.isActive)),"isActiveFraction"in wt&&C(n(1,b=wt.isActiveFraction)),"stores"in wt&&n(34,W=wt.stores),"locale"in wt&&n(2,nt=wt.locale),"filterFunctions"in wt&&n(35,k=wt.filterFunctions),"filterOptions"in wt&&n(3,N=wt.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&_t.set(w),262144&t.$$.dirty[1]&&rt.set(w),262144&t.$$.dirty[1]&&Tt.set(w),262144&t.$$.dirty[1]&&w&&Vt.set(!1),8&t.$$.dirty[0]&&n(38,i=Us(N)),640&t.$$.dirty[1]&&n(12,r=((wt,re)=>{if(!wt||!wt.filter||!re)return 0;const on=wt.filter;return re.findIndex(([Ue])=>{if(!k[Ue])return!1;const en=k[Ue]();return vs(en,on)})})(s,i)),786432&t.$$.dirty[1]&&S&&le.set(w?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&w&&y&&v&&qt&&n(37,Le={x:v.x-y.x,y:v.y-y.y+qt.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&g&&Le&&$e&&De&&Wt){const wt=Le.x+De.x+$e.x,re=Le.y,on=De.x+Le.x,Ue=on+De.width;Me.set(i.map(([en],ke)=>{const qe=$[en],vn=$e.x+qe.x,In=vn+qe.width;if(In<0||vn>De.width)return!1;const Hn=wt+qe.x,Jt=re+qe.y,He=(Pt=>({origin:We(Pt.origin),translation:We(Pt.translation),rotation:{...Pt.rotation},scale:Pt.scale}))(g);He.offset=ot(.5*qe.width+Hn,.5*qe.height+Jt),He.maskOpacity=1,He.mask=Bi(Hn+0,Jt,qe.width+0,qe.height),He.maskFeather=[1,0,1,0,1,Ue,1,Ue],vn<V&&yt<1&&(He.maskFeather[0]=yt,He.maskFeather[1]=on,He.maskFeather[2]=1,He.maskFeather[3]=on+V),In>De.width-V&&ie<1&&(He.maskFeather[4]=ie,He.maskFeather[5]=Ue-V,He.maskFeather[6]=1,He.maskFeather[7]=Ue),He.maskCornerRadius=Wt[en];let Y=s&&Object.keys(s).filter(Pt=>Pt!="filter").map(Pt=>s[Pt])||[];return Yn(k[en])&&Y.push(k[en]()),He.colorMatrix=Y.length?f0(Y):void 0,He.gamma=f,He}).filter(Boolean))}if(7424&t.$$.dirty[1])if(u>0&&l){const wt=[...mn(),...l.map(Be)];Z.set(wt)}else Z.set(mn());256&t.$$.dirty[1]&&n(11,o=a?`translateY(${a}px)`:"none")},[P,b,nt,N,yt,ie,V,$e,De,qt,we,o,r,M,j,Z,ft,q,ht,xt,lt,Ct,Ht,Lt,bt,mt,at,$t,te,le,wt=>{wt.target.className===Ub&&n(36,Wt=Object.keys(we).reduce((re,on)=>{const Ue=we[on],en=getComputedStyle(Ue),ke=["top-left","top-right","bottom-left","bottom-right"].map(qe=>en.getPropertyValue(`border-${qe}-radius`)).map(Sb).map(qe=>1.25*qe);return re[on]=ke,re},{}))},Me,({value:wt})=>{kt(bt,s={...s,filter:Yn(k[wt])?k[wt]():void 0},s),ut.write()},"filter",W,k,Wt,Le,i,a,s,l,c,u,f,g,$,y,v,w,S,(wt,re)=>at(wt,re.detail),function(wt,re){jn[wt?"unshift":"push"](()=>{we[re.value]=wt,n(10,we)})},wt=>n(7,$e=wt),function(wt){yt=wt,n(4,yt)},function(wt){ie=wt,n(5,ie)},function(wt){V=wt,n(6,V)},wt=>n(8,De=wt.detail),wt=>n(9,qt=wt.detail),function(wt){Kr.call(this,t,wt)}]}var K6={util:["filter",class extends pn{constructor(t){super(),dn(this,t,Y6,X6,ln,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),E()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),E()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),E()}}]};function J$(t){let e,n,i,r;e=new Va({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[J6]},$$scope:{ctx:t}}});const o=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let a={$$slots:{default:[Q6,({panel:s})=>({42:s}),({panel:s})=>[0,s?2048:0]]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Fi(a,o[s]);return i=new dp({props:a}),{c(){Ot(e.$$.fragment),n=he(),Ot(i.$$.fragment)},m(s,l){zt(e,s,l),et(s,n,l),zt(i,s,l),r=!0},p(s,l){const c={};64&l[0]&&(c.elasticity=s[6]*s[9]),38&l[0]|8192&l[1]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c);const u=48&l[0]?Pr(o,[o[0],o[1],16&l[0]&&{panels:s[4]},32&l[0]&&Or(s[5])]):{};128&l[0]|10240&l[1]&&(u.$$scope={dirty:l,ctx:s}),i.$set(u)},i(s){r||(I(e.$$.fragment,s),I(i.$$.fragment,s),r=!0)},o(s){z(e.$$.fragment,s),z(i.$$.fragment,s),r=!1},d(s){Dt(e,s),s&&Q(n),Dt(i,s)}}}function q6(t){let e,n,i=t[43].label+"";return{c(){e=dt("span"),n=vi(i)},m(r,o){et(r,e,o),St(e,n)},p(r,o){4096&o[1]&&i!==(i=r[43].label+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function J6(t){let e,n;const i=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let r={$$slots:{default:[q6,({tab:o})=>({43:o}),({tab:o})=>[0,o?4096:0]]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new up({props:r}),e.$on("select",t[24]),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=34&a[0]?Pr(i,[i[0],2&a[0]&&{tabs:o[1]},32&a[0]&&Or(o[5])]):{};12288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function Q6(t){let e,n;const i=[t[7][t[42]]];let r={};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new z0({props:r}),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=128&a[0]|2048&a[1]?Pr(i,[Or(o[7][o[42]])]):{};e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){Dt(e,o)}}}function t8(t){let e,n,i=t[5]&&J$(t);return{c(){e=dt("div"),i&&i.c(),T(e,"slot","footer"),Et(e,"transform",t[3])},m(r,o){et(r,e,o),i&&i.m(e,null),n=!0},p(r,o){r[5]?i?(i.p(r,o),32&o[0]&&I(i,1)):(i=J$(r),i.c(),I(i,1),i.m(e,null)):i&&(Ie(),z(i,1,1,()=>{i=null}),Re()),8&o[0]&&Et(e,"transform",r[3])},i(r){n||(I(i),n=!0)},o(r){z(i),n=!1},d(r){r&&Q(e),i&&i.d()}}}function e8(t){let e,n;return e=new Rl({props:{$$slots:{footer:[t8]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};254&r[0]|8192&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function n8(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f=Xe,g=()=>(f(),f=Zr(y,it=>n(21,c=it)),y);t.$$.on_destroy.push(()=>f());let{stores:$}=e,{isActive:y}=e;g();let{locale:v={}}=e,{finetuneControlConfiguration:w}=e,{finetuneOptions:S}=e,{finetuneNudgePrecision:R}=e;const{history:M,animation:B,scrollElasticity:C,rangeInputElasticity:D,imageColorMatrix:O,imageConvolutionMatrix:P,imageGamma:b,imageVignette:W,imageNoise:nt,allowPan:k,allowZoom:N,allowZoomControls:j,allowPlayPause:ut}=$;F(t,B,it=>n(22,u=it));const Z={imageColorMatrix:O,imageConvolutionMatrix:P,imageGamma:b,imageVignette:W,imageNoise:nt},ft=mi("elasticityMultiplier");F(t,ft,it=>n(6,p=it));const q="finetune-"+ya(),ht=fe({});F(t,ht,it=>n(23,d=it));const xt=fe({});F(t,xt,it=>n(7,h=it));let lt=[];const Ct=hn(u?20:0);return F(t,Ct,it=>n(20,l=it)),t.$$set=it=>{"stores"in it&&n(15,$=it.stores),"isActive"in it&&g(n(0,y=it.isActive)),"locale"in it&&n(16,v=it.locale),"finetuneControlConfiguration"in it&&n(17,w=it.finetuneControlConfiguration),"finetuneOptions"in it&&n(18,S=it.finetuneOptions),"finetuneNudgePrecision"in it&&n(19,R=it.finetuneNudgePrecision)},t.$$.update=()=>{var it;2097152&t.$$.dirty[0]&&k.set(c),2097152&t.$$.dirty[0]&&N.set(c),2097152&t.$$.dirty[0]&&j.set(c),2097152&t.$$.dirty[0]&&c&&ut.set(!0),327680&t.$$.dirty[0]&&n(1,i=S?S.map(([vt,K])=>({id:vt,label:Yn(K)?K(v):K})):[]),2&t.$$.dirty[0]&&n(2,r=i.length?i[0].id:void 0),4&t.$$.dirty[0]&&n(5,o=r&&{name:q,selected:r}),2&t.$$.dirty[0]&&n(4,a=i.map(vt=>vt.id)),131072&t.$$.dirty[0]&&w&&(it=w,lt&&lt.forEach(vt=>vt()),lt=a.map(vt=>{const{getStore:K,getValue:Ft=ri}=it[vt];return K(Z).subscribe(Ht=>{const Lt=Ht!=null?Ft(Ht):Ht;kt(ht,d={...d,[vt]:Lt},d)})})),8519680&t.$$.dirty[0]&&w&&d&&kt(xt,h=Object.keys(d).reduce((vt,K)=>{const{base:Ft,min:Ht,max:Lt,getLabel:bt,getStore:_t,setValue:rt=(mt,at)=>mt.set(at)}=w[K],Tt=_t(Z),Vt=d[K]!=null?d[K]:Ft;return vt[K]={base:Ft,min:Ht,max:Lt,value:Vt,valueLabel:bt?bt(Vt,Ht,Lt,Lt-Ht):Math.round(100*Vt),oninputmove:mt=>{rt(Tt,mt)},oninputend:mt=>{rt(Tt,mt),M.write()},elasticity:p*D,labelReset:v.labelReset,nudgeMultiplier:R},vt},{}),h),6291456&t.$$.dirty[0]&&u&&Ct.set(c?0:20),1048576&t.$$.dirty[0]&&n(3,s=l?`translateY(${l}px)`:"none")},[y,i,r,s,a,o,p,h,B,C,ft,ht,xt,Ct,"finetune",$,v,w,S,R,l,c,u,d,({detail:it})=>n(2,r=it),function(it){Kr.call(this,t,it)}]}var i8={util:["finetune",class extends pn{constructor(t){super(),dn(this,t,n8,e8,ln,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),E()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),E()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),E()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),E()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),E()}}]},np=(t,e)=>{const n=e.length;return t<0?t%n+n:t>=n?t%n:t};function Q$(t,e,n){const i=t.slice();return i[46]=e[n].key,i[47]=e[n].index,i[48]=e[n].translate,i[49]=e[n].scale,i[50]=e[n].selected,i[12]=e[n].rotate,i[51]=e[n].dir,i[52]=e[n].center,i[53]=e[n].type,i[2]=e[n].visible,i}function ty(t){let e;return{c(){e=dt("div"),T(e,"class","PinturaShapeManipulator"),T(e,"data-control","point"),Et(e,"pointer-events","none"),Et(e,"opacity",t[4]),Et(e,"transform",`translate3d(${t[52].x}px, ${t[52].y}px, 0) scale(${t[5]}, ${t[5]})`)},m(n,i){et(n,e,i)},p(n,i){16&i[0]&&Et(e,"opacity",n[4]),40&i[0]&&Et(e,"transform",`translate3d(${n[52].x}px, ${n[52].y}px, 0) scale(${n[5]}, ${n[5]})`)},d(n){n&&Q(e)}}}function ey(t,e){let n,i,r,o,a,s,l,c,u;function d(...h){return e[18](e[47],...h)}let p=e[53]==="edge"&&e[2]&&ty(e);return{key:t,first:null,c(){n=dt("div"),s=he(),p&&p.c(),l=Ii(),T(n,"role","button"),T(n,"aria-label",i=`Drag ${e[53]} ${e[46]}`),T(n,"tabindex",r=e[53]==="edge"?-1:0),T(n,"class","PinturaShapeManipulator"),T(n,"data-control",o=e[53]),T(n,"data-selected",a=e[50]),Et(n,"cursor",e[51]?e[51]+"-resize":"move"),Et(n,"opacity",e[4]),Et(n,"--tx",e[48].x),Et(n,"--ty",e[48].y),Et(n,"--r",e[53]==="edge"?e[12]:0),Et(n,"--sx",e[53]==="point"?e[5]:e[49].x),Et(n,"--sy",e[53]==="point"?e[5]:e[49].y),this.first=n},m(h,f){et(h,n,f),et(h,s,f),p&&p.m(h,f),et(h,l,f),c||(u=[At(n,"nudge",d),Pn(Qs.call(null,n,{preventDefault:!0})),At(n,"interactionstart",function(){Mn(e[9]("start",e[47]))&&e[9]("start",e[47]).apply(this,arguments)}),At(n,"interactionupdate",function(){Mn(e[9]("move",e[47]))&&e[9]("move",e[47]).apply(this,arguments)}),At(n,"interactionend",function(){Mn(e[9]("end",e[47]))&&e[9]("end",e[47]).apply(this,arguments)}),Pn(tl.call(null,n,{observeKeys:!0}))],c=!0)},p(h,f){e=h,8&f[0]&&i!==(i=`Drag ${e[53]} ${e[46]}`)&&T(n,"aria-label",i),8&f[0]&&r!==(r=e[53]==="edge"?-1:0)&&T(n,"tabindex",r),8&f[0]&&o!==(o=e[53])&&T(n,"data-control",o),8&f[0]&&a!==(a=e[50])&&T(n,"data-selected",a),8&f[0]&&Et(n,"cursor",e[51]?e[51]+"-resize":"move"),16&f[0]&&Et(n,"opacity",e[4]),8&f[0]&&Et(n,"--tx",e[48].x),8&f[0]&&Et(n,"--ty",e[48].y),8&f[0]&&Et(n,"--r",e[53]==="edge"?e[12]:0),40&f[0]&&Et(n,"--sx",e[53]==="point"?e[5]:e[49].x),40&f[0]&&Et(n,"--sy",e[53]==="point"?e[5]:e[49].y),e[53]==="edge"&&e[2]?p?p.p(e,f):(p=ty(e),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},d(h){h&&Q(n),h&&Q(s),p&&p.d(h),h&&Q(l),c=!1,Kn(u)}}}function ny(t){let e,n,i;return{c(){e=dt("div"),T(e,"role","button"),T(e,"aria-label","Drag rotator"),T(e,"tabindex","0"),T(e,"class","PinturaShapeManipulator"),T(e,"data-control","rotate"),Et(e,"transform",`translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]})`),Et(e,"opacity",t[4])},m(r,o){et(r,e,o),n||(i=[At(e,"nudge",t[11]),Pn(Qs.call(null,e,{preventDefault:!0})),At(e,"interactionstart",t[12]("start")),At(e,"interactionupdate",t[12]("move")),At(e,"interactionend",t[12]("end")),Pn(tl.call(null,e,{observeKeys:!0}))],n=!0)},p(r,o){33&o[0]&&Et(e,"transform",`translate3d(${r[0].x}px, ${r[0].y}px, 0) scale(${r[5]}, ${r[5]})`),16&o[0]&&Et(e,"opacity",r[4])},d(r){r&&Q(e),n=!1,Kn(i)}}}function r8(t){let e,n,i=[],r=new Map,o=t[3];const a=l=>l[46];for(let l=0;l<o.length;l+=1){let c=Q$(t,o,l),u=a(c);r.set(u,i[l]=ey(u,c))}let s=t[1]&&ny(t);return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=he(),s&&s.c(),n=Ii()},m(l,c){for(let u=0;u<i.length;u+=1)i[u].m(l,c);et(l,e,c),s&&s.m(l,c),et(l,n,c)},p(l,c){1592&c[0]&&(o=l[3],i=ns(i,c,a,1,l,o,r,e.parentNode,U2,ey,e,Q$)),l[1]?s?s.p(l,c):(s=ny(l),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:Xe,o:Xe,d(l){for(let c=0;c<i.length;c+=1)i[c].d(l);l&&Q(e),s&&s.d(l),l&&Q(n)}}}function o8(t,e,n){let i,r,o,a;const s=_a(),l=.5*ma,c=oa-l,u=oa+l,d=-oa,p=d-l,h=d+l,f=D1-l,g=-D1+l,$=l,y=-l,v=oa-ma,w=v-l,S=v+l,R=D1-ma,M=R-l,B=R+l,C=d-ma,D=C+l,O=C-l,P=d+ma,b=P+l,W=P-l;let{visible:nt=!1}=e,{points:k=[]}=e,{rotatorPoint:N}=e,{selectedPoint:j}=e,{enableDragEdges:ut=!0}=e,{enableDragPoints:Z=!0}=e,{enableRotatePoints:ft=!0}=e;const q=mi("isAnimated");F(t,q,it=>n(17,r=it));const ht=hn(.5,{precision:1e-4,stiffness:.3,damping:.7});F(t,ht,it=>n(5,a=it));const xt=hn(0,{precision:.001,stiffness:.3,damping:.7});F(t,xt,it=>n(4,o=it));const lt=it=>{let vt="";return(it<=u&&it>=c||it>=p&&it<=h)&&(vt="ns"),(it<=g||it>=f||it>=y&&it<=$)&&(vt="ew"),(it>=M&&it<=B||it<=b&&it>=W)&&(vt="nesw"),(it>=w&&it<=S||it<=D&&it>=O)&&(vt="nwse"),vt},Ct=(it,vt)=>{s("resizestart",{indexes:it,translation:ui(),isNudge:!0}),s("resizemove",{indexes:it,translation:vt,isNudge:!0}),s("resizeend",{indexes:it,translation:ui(),isNudge:!0})};return t.$$set=it=>{"visible"in it&&n(2,nt=it.visible),"points"in it&&n(13,k=it.points),"rotatorPoint"in it&&n(0,N=it.rotatorPoint),"selectedPoint"in it&&n(14,j=it.selectedPoint),"enableDragEdges"in it&&n(15,ut=it.enableDragEdges),"enableDragPoints"in it&&n(16,Z=it.enableDragPoints),"enableRotatePoints"in it&&n(1,ft=it.enableRotatePoints)},t.$$.update=()=>{131076&t.$$.dirty[0]&&ht.set(nt?1:.5,{hard:r===!1}),131076&t.$$.dirty[0]&&xt.set(nt?1:0,{hard:r===!1}),8192&t.$$.dirty[0]&&n(3,i=((it,vt)=>{let K=0;const Ft=ia(it),Ht=[],Lt=it.length;for(;K<Lt;K++){const bt=np(K-1,it),_t=np(K+1,it),rt=it[bt],Tt=it[K],Vt=it[_t],mt=Math.atan2(Vt.y-Tt.y,Vt.x-Tt.x);if(Z){const $t=go(ot(rt.x-Tt.x,rt.y-Tt.y)),te=go(ot(Vt.x-Tt.x,Vt.y-Tt.y)),le=ot($t.x+te.x,$t.y+te.y),Wt=ut?Z&&lt(Math.atan2(le.y,le.x)):void 0;Ht.push({index:[K],key:"point-"+K,type:"point",selected:j===K,scale:{x:1,y:1},translate:{x:Tt.x,y:Tt.y},angle:void 0,rotate:ft,center:Tt,dir:Wt})}if(!ut||Array.isArray(ut)&&!ut.some(([$t,te])=>K===$t&&_t===te))continue;const at=ot(Tt.x+.5*(Vt.x-Tt.x),Tt.y+.5*(Vt.y-Tt.y));Ht.push({index:[K,_t],key:"edge-"+K,type:"edge",scale:{x:Po(Tt,Vt),y:1},translate:{x:Tt.x,y:Tt.y},angle:mt,rotate:mt,center:at,visible:Array.isArray(ut),dir:lt(Math.atan2(Ft.y-at.y,Ft.x-at.x))})}return Ht})(k))},[N,ft,nt,i,o,a,q,ht,xt,(it,vt)=>({detail:K})=>{const Ft=K&&K.translation?K.translation:ot(0,0);s("resize"+it,{...K,indexes:vt,translation:Ft})},Ct,({detail:it})=>{s("rotatestart",{translation:ui(),isNudge:!0}),s("rotatemove",{translation:it,isNudge:!0}),s("rotateend",{translation:ui(),isNudge:!0})},it=>({detail:vt})=>{const K=vt&&vt.translation?vt.translation:ot(0,0);s("rotate"+it,{...vt,translation:K})},k,j,ut,Z,r,(it,{detail:vt})=>Ct(it,vt)]}class a8 extends pn{constructor(e){super(),dn(this,e,o8,r8,ln,{visible:2,points:13,rotatorPoint:0,selectedPoint:14,enableDragEdges:15,enableDragPoints:16,enableRotatePoints:1},null,[-1,-1])}}var jh=(t,e)=>{const n=L0(t);return Ni(n,e)},Rd=t=>document.createTextNode(t),jb=t=>(Oa()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function iy(t){let e,n,i,r;return{c(){e=dt("pre"),T(e,"class","PinturaContentEditable")},m(o,a){et(o,e,a),e.innerHTML=t[0],i||(r=Pn(n=ws.call(null,e,t[7]+";position:absolute;z-index:-1;pointer-events:none;")),i=!0)},p(o,a){1&a[0]&&(e.innerHTML=o[0]),n&&Mn(n.update)&&128&a[0]&&n.update.call(null,o[7]+";position:absolute;z-index:-1;pointer-events:none;")},d(o){o&&Q(e),i=!1,r()}}}function s8(t){let e,n,i,r,o,a,s=t[8]&&iy(t);return{c(){s&&s.c(),e=he(),n=dt("pre"),T(n,"class","PinturaContentEditable"),T(n,"data-wrap-content",i=t[4]||t[5]?"wrap":"nowrap"),T(n,"contenteditable",""),T(n,"spellcheck",t[1]),T(n,"autocorrect",t[2]),T(n,"autocapitalize",t[3])},m(l,c){s&&s.m(l,c),et(l,e,c),et(l,n,c),t[26](n),o||(a=[Pn(r=ws.call(null,n,t[8]?t[15](t[7]):t[7])),At(n,"input",t[13]),At(n,"compositionend",t[12]),At(n,"paste",t[14]),At(n,"keydown",t[10]),At(n,"keyup",t[11]),At(n,"blur",t[9])],o=!0)},p(l,c){l[8]?s?s.p(l,c):(s=iy(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),48&c[0]&&i!==(i=l[4]||l[5]?"wrap":"nowrap")&&T(n,"data-wrap-content",i),2&c[0]&&T(n,"spellcheck",l[1]),4&c[0]&&T(n,"autocorrect",l[2]),8&c[0]&&T(n,"autocapitalize",l[3]),r&&Mn(r.update)&&384&c[0]&&r.update.call(null,l[8]?l[15](l[7]):l[7])},i:Xe,o:Xe,d(l){s&&s.d(l),l&&Q(e),l&&Q(n),t[26](null),o=!1,Kn(a)}}}function l8(t,e,n){let i,r,{spellcheck:o="false"}=e,{autocorrect:a="off"}=e,{autocapitalize:s="off"}=e,{wrapLines:l=!0}=e,{allowNewline:c=!0}=e,{textFormat:u="text"}=e,{formatInput:d=ri}=e,{formatPaste:p=ri}=e,{styles:h}=e,{innerHTML:f}=e,{oninput:g=pe}=e,{enableTextStyleShortcuts:$=!1}=e;const y=()=>{if(!w)return;const k=document.createRange();k.selectNodeContents(w);const N=O();N.removeAllRanges(),N.addRange(k)},v=_a();let w;document.execCommand("defaultParagraphSeparator",!1,"br");const S=k=>k.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),R=()=>{n(0,f=w.innerHTML);const k=jb(f);v("input",k),g(k),requestAnimationFrame(()=>w&&w.scrollTo(0,0))},M=()=>{P(w);const k=u==="html"?w.innerHTML:S(w.innerHTML);n(6,w.innerHTML=d(k),w),b(w),R()},B={b:"bold",i:"italic",u:"underline",s:"strikethrough"},C=k=>{const N=Ci("span");return N.dataset.bookmark=k,N},D=(k,N,j)=>{const ut=C(j);if(k.nodeType===Node.TEXT_NODE){const Z=k.textContent;if(j==="start"){const ft=Rd(Z.substring(0,N)),q=Rd(Z.substring(N));k.replaceWith(ft,ut,q)}else{const ft=Rd(Z.substring(0,N)),q=Rd(Z.substring(N));k.replaceWith(ft,ut,q)}}else k.nodeType===Node.ELEMENT_NODE&&k.insertBefore(ut,k.childNodes[N])},O=()=>{const k=w.getRootNode();return"getSelection"in k?k.getSelection():document.getSelection()},P=k=>{const N=O();if(!N.getRangeAt||!N.rangeCount)return;const j=N.getRangeAt(0),{startOffset:ut,endOffset:Z,startContainer:ft,endContainer:q}=j;if(k.contains(j.startContainer)&&k.contains(j.endContainer))if(ft.nodeType===Node.TEXT_NODE&&ft===q){const ht=ft.textContent,xt=ht.substring(0,ut),lt=C("start"),Ct=Z-ut>0?ht.substring(ut,Z):"",it=C("end"),vt=ht.substring(Z);ft.replaceWith(xt,lt,Ct,it,vt)}else D(ft,ut,"start"),D(q,Z+(ft===q?1:0),"end")},b=k=>{const N=W(k,"start"),j=W(k,"end");if(!N||!j)return;const ut=document.createRange();ut.setStart(N,0),ut.setEnd(j,0);const Z=O();Z.removeAllRanges(),Z.addRange(ut),N.remove(),j.remove()},W=(k,N)=>{const j=k.children;for(let ut=0;ut<j.length;ut++){const Z=j[ut];if(Z.dataset.bookmark===N)return Z;if(Z.children.length){const ft=W(Z,N);if(ft)return ft}}};let nt;return t.$$set=k=>{"spellcheck"in k&&n(1,o=k.spellcheck),"autocorrect"in k&&n(2,a=k.autocorrect),"autocapitalize"in k&&n(3,s=k.autocapitalize),"wrapLines"in k&&n(4,l=k.wrapLines),"allowNewline"in k&&n(5,c=k.allowNewline),"textFormat"in k&&n(16,u=k.textFormat),"formatInput"in k&&n(17,d=k.formatInput),"formatPaste"in k&&n(18,p=k.formatPaste),"styles"in k&&n(19,h=k.styles),"innerHTML"in k&&n(0,f=k.innerHTML),"oninput"in k&&n(20,g=k.oninput),"enableTextStyleShortcuts"in k&&n(21,$=k.enableTextStyleShortcuts)},t.$$.update=()=>{var k;if(64&t.$$.dirty[0]&&n(25,i=!!w),33554433&t.$$.dirty[0]&&i&&f&&(k=f)!==w.innerHTML&&(n(6,w.innerHTML=k,w),w===document.activeElement&&y()),524336&t.$$.dirty[0])if(!l&&c){const N=h.includes(":right")?"text-indent:-100px!important":h.includes(":center")?"":"min-width:calc(100% + 100px)!important";n(7,nt=h+";overflow:visible;"+N)}else n(7,nt=h);524288&t.$$.dirty[0]&&n(8,r=h.includes("text-stroke"))},[f,o,a,s,l,c,w,nt,r,()=>{v("blur")},k=>{if(/escape/i.test(k.code))return k.stopPropagation(),void v("cancel");const N=k.ctrlKey||k.metaKey;if(u==="html"&&N&&/b|i|u|s/.test(k.key))return $&&(j=>{const ut=B[j];ut&&document.execCommand(ut)})(k.key),void k.preventDefault();/enter/i.test(k.code)&&(k.stopPropagation(),k.isComposing||(N?v("confirm"):(c||k.preventDefault(),document.execCommand("insertLineBreak"),k.preventDefault())))},()=>{},k=>{k.data!==""&&M()},k=>{const{inputType:N}=k;N!=="insertCompositionText"&&N!=="deleteCompositionText"&&M()},k=>{k.preventDefault();const N=k.clipboardData.getData("text/plain"),j=u==="html"?N:S(N),ut=p(j);if(!ut.length)return;const Z=O().getRangeAt(0);Z.deleteContents(),Z.insertNode(document.createTextNode(ut)),R()},k=>k.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),u,d,p,h,g,$,()=>M(),()=>w&&w.focus(),y,i,function(k){jn[k?"unshift":"push"](()=>{w=k,n(6,w)})}]}class c8 extends pn{constructor(e){super(),dn(this,e,l8,s8,ln,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,styles:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),E()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),E()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),E()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),E()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),E()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),E()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),E()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),E()}get styles(){return this.$$.ctx[19]}set styles(e){this.$$set({styles:e}),E()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),E()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),E()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),E()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}const ry=["i","b","u","strike"].map(t=>({tag:t,tagOpen:new RegExp(`<${t}>`,"g"),tagClose:new RegExp(`</${t}>`,"g"),placeholderOpen:new RegExp(`___${t}O___`,"g"),placeholderClose:new RegExp(`___${t}C___`,"g")}));var u8=t=>t=((e,n=ry)=>(n.forEach(({tag:i,placeholderOpen:r,placeholderClose:o})=>{e=e.replace(r,`<${i}>`).replace(o,`</${i}>`)}),e))(t=(t=((e,n=ry)=>(n.forEach(({tag:i,tagOpen:r,tagClose:o})=>{e=e.replace(r,`___${i}O___`).replace(o,`___${i}C___`)}),e))(t)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split(`
`).join("<br>")),Ed=(t,e)=>Ne(t)?parseFloat(t)/100*e:t,Hc=(t,e)=>({x:Hr(t.x,e.width),y:Hr(t.y,e.height)});function oy(t,e,n){const i=t.slice();return i[300]=e[n],i[302]=n,i}function ay(t,e){let n,i,r,o,a,s,l,c,u,d,p,h=e[300].name+"";function f(){return e[190](e[302])}return r=new A0({props:{color:e[300].color}}),{key:t,first:null,c(){n=dt("li"),i=dt("button"),Ot(r.$$.fragment),o=he(),a=dt("span"),s=vi(h),c=he(),T(i,"class","PinturaShapeListItem"),T(i,"type","button"),T(i,"aria-label",l="Select shape "+e[300].name),this.first=n},m(g,$){et(g,n,$),St(n,i),zt(r,i,null),St(i,o),St(i,a),St(a,s),St(n,c),u=!0,d||(p=At(i,"click",f),d=!0)},p(g,$){e=g;const y={};2097152&$[0]&&(y.color=e[300].color),r.$set(y),(!u||2097152&$[0])&&h!==(h=e[300].name+"")&&Oi(s,h),(!u||2097152&$[0]&&l!==(l="Select shape "+e[300].name))&&T(i,"aria-label",l)},i(g){u||(I(r.$$.fragment,g),u=!0)},o(g){z(r.$$.fragment,g),u=!1},d(g){g&&Q(n),Dt(r),d=!1,p()}}}function sy(t){let e,n;return e=new a8({props:{visible:!0,points:t[12],rotatorPoint:t[28],selectedPoint:t[16],enableDragEdges:t[17],enableDragPoints:t[30],enableRotatePoints:t[14]}}),e.$on("resizestart",t[39]),e.$on("resizemove",t[40]),e.$on("resizeend",t[41]),e.$on("rotatestart",t[42]),e.$on("rotatemove",t[43]),e.$on("rotateend",t[44]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};4096&r[0]&&(o.points=i[12]),268435456&r[0]&&(o.rotatorPoint=i[28]),65536&r[0]&&(o.selectedPoint=i[16]),131072&r[0]&&(o.enableDragEdges=i[17]),1073741824&r[0]&&(o.enableDragPoints=i[30]),16384&r[0]&&(o.enableRotatePoints=i[14]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function ly(t){let e,n,i,r;const o=[p8,d8],a=[];function s(l,c){return l[4]==="modal"?0:l[4]==="inline"?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Ii()},m(l,c){~e&&a[e].m(l,c),et(l,i,c),r=!0},p(l,c){let u=e;e=s(l),e===u?~e&&a[e].p(l,c):(n&&(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),I(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(I(n),r=!0)},o(l){z(n),r=!1},d(l){~e&&a[e].d(l),l&&Q(i)}}}function d8(t){let e,n,i,r,o,a,s={formatInput:t[46],wrapLines:!!t[13].width,textFormat:t[13].format,enableTextStyleShortcuts:t[5],allowNewline:t[29],styles:t[27]};return n=new c8({props:s}),t[193](n),n.$on("input",t[47]),n.$on("keyup",t[50]),n.$on("cancel",t[52]),n.$on("confirm",t[51]),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaInlineInput")},m(l,c){et(l,e,c),zt(n,e,null),r=!0,o||(a=[Pn(i=ws.call(null,e,t[26])),At(e,"focusout",t[194])],o=!0)},p(l,c){const u={};8192&c[0]&&(u.wrapLines=!!l[13].width),8192&c[0]&&(u.textFormat=l[13].format),32&c[0]&&(u.enableTextStyleShortcuts=l[5]),536870912&c[0]&&(u.allowNewline=l[29]),134217728&c[0]&&(u.styles=l[27]),n.$set(u),i&&Mn(i.update)&&67108864&c[0]&&i.update.call(null,l[26])},i(l){r||(I(n.$$.fragment,l),r=!0)},o(l){z(n.$$.fragment,l),r=!1},d(l){l&&Q(e),t[193](null),Dt(n),o=!1,Kn(a)}}}function p8(t){let e,n;return e=new Tb({props:{panelOffset:t[2],onconfirm:t[51],oncancel:t[52],buttonCancel:{icon:t[6].shapeIconInputCancel,label:t[6].shapeLabelInputCancel},buttonConfirm:{icon:t[6].shapeIconInputConfirm,label:t[6].shapeLabelInputConfirm,hideLabel:!0},$$slots:{default:[h8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};4&r[0]&&(o.panelOffset=i[2]),64&r[0]&&(o.buttonCancel={icon:i[6].shapeIconInputCancel,label:i[6].shapeLabelInputCancel}),64&r[0]&&(o.buttonConfirm={icon:i[6].shapeIconInputConfirm,label:i[6].shapeLabelInputConfirm,hideLabel:!0}),167772416&r[0]|16777216&r[9]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function h8(t){let e,n,i,r;return{c(){e=dt("textarea"),T(e,"spellcheck","false"),T(e,"autocorrect","off"),T(e,"autocapitalize","off")},m(o,a){et(o,e,a),t[191](e),Dg(e,t[25]),i||(r=[At(e,"keydown",t[49]),At(e,"keypress",t[48]),At(e,"keyup",t[50]),At(e,"input",t[47]),At(e,"input",t[192]),Pn(n=ws.call(null,e,t[27]))],i=!0)},p(o,a){33554432&a[0]&&Dg(e,o[25]),n&&Mn(n.update)&&134217728&a[0]&&n.update.call(null,o[27])},d(o){o&&Q(e),t[191](null),i=!1,Kn(r)}}}function cy(t){let e,n,i,r,o;return n=new qr({props:{items:t[22],key:t[10]}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaShapeControls"),Et(e,"transform",t[24]),Et(e,"opacity",t[23])},m(a,s){et(a,e,s),zt(n,e,null),i=!0,r||(o=[At(e,"measure",t[195]),Pn(Ir.call(null,e))],r=!0)},p(a,s){const l={};4194304&s[0]&&(l.items=a[22]),1024&s[0]&&(l.key=a[10]),n.$set(l),16777216&s[0]&&Et(e,"transform",a[24]),8388608&s[0]&&Et(e,"opacity",a[23])},i(a){i||(I(n.$$.fragment,a),i=!0)},o(a){z(n.$$.fragment,a),i=!1},d(a){a&&Q(e),Dt(n),r=!1,Kn(o)}}}function m8(t){let e,n,i,r,o,a,s,l,c,u,d=[],p=new Map,h=t[21];const f=v=>v[300].id;for(let v=0;v<h.length;v+=1){let w=oy(t,h,v),S=f(w);p.set(S,d[v]=ay(S,w))}let g=t[15]&&sy(t),$=t[11]&&ly(t),y=t[18]>0&&cy(t);return{c(){e=dt("div"),n=dt("nav"),i=dt("ul");for(let v=0;v<d.length;v+=1)d[v].c();r=he(),g&&g.c(),o=he(),$&&$.c(),a=he(),y&&y.c(),T(n,"class","PinturaShapeList"),T(n,"data-visible",t[19]),T(e,"class","PinturaShapeEditor"),T(e,"tabindex","0")},m(v,w){et(v,e,w),St(e,n),St(n,i);for(let S=0;S<d.length;S+=1)d[S].m(i,null);St(e,r),g&&g.m(e,null),St(e,o),$&&$.m(e,null),St(e,a),y&&y.m(e,null),t[196](e),l=!0,c||(u=[At(n,"focusin",t[55]),At(n,"focusout",t[56]),At(e,"keydown",function(){Mn(t[0]?pe:t[45])&&(t[0]?pe:t[45]).apply(this,arguments)}),At(e,"nudge",function(){Mn(t[0]?pe:t[54])&&(t[0]?pe:t[54]).apply(this,arguments)}),At(e,"measure",t[189]),At(e,"pointermove",function(){Mn(t[0]?pe:t[57])&&(t[0]?pe:t[57]).apply(this,arguments)}),At(e,"pointerleave",function(){Mn(t[0]?pe:t[58])&&(t[0]?pe:t[58]).apply(this,arguments)}),At(e,"interactionstart",function(){Mn(t[0]?pe:t[33])&&(t[0]?pe:t[33]).apply(this,arguments)}),At(e,"interactionupdate",function(){Mn(t[0]?pe:t[35])&&(t[0]?pe:t[35]).apply(this,arguments)}),At(e,"interactioncancel",function(){Mn(t[0]?pe:t[34])&&(t[0]?pe:t[34]).apply(this,arguments)}),At(e,"interactionrelease",function(){Mn(t[0]?pe:t[36])&&(t[0]?pe:t[36]).apply(this,arguments)}),At(e,"interactionend",function(){Mn(t[0]?pe:t[37])&&(t[0]?pe:t[37]).apply(this,arguments)}),Pn(Ir.call(null,e)),Pn(Qs.call(null,e)),Pn(s=tl.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:uy,getEventPosition:t[197]}))],c=!0)},p(v,w){t=v,2097282&w[0]&&(h=t[21],Ie(),d=ns(d,w,f,1,t,h,p,i,Js,ay,null,oy),Re()),(!l||524288&w[0])&&T(n,"data-visible",t[19]),t[15]?g?(g.p(t,w),32768&w[0]&&I(g,1)):(g=sy(t),g.c(),I(g,1),g.m(e,o)):g&&(Ie(),z(g,1,1,()=>{g=null}),Re()),t[11]?$?($.p(t,w),2048&w[0]&&I($,1)):($=ly(t),$.c(),I($,1),$.m(e,a)):$&&(Ie(),z($,1,1,()=>{$=null}),Re()),t[18]>0?y?(y.p(t,w),262144&w[0]&&I(y,1)):(y=cy(t),y.c(),I(y,1),y.m(e,null)):y&&(Ie(),z(y,1,1,()=>{y=null}),Re()),s&&Mn(s.update)&&8&w[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:uy,getEventPosition:t[197]})},i(v){if(!l){for(let w=0;w<h.length;w+=1)I(d[w]);I(g),I($),I(y),l=!0}},o(v){for(let w=0;w<d.length;w+=1)z(d[w]);z(g),z($),z(y),l=!1},d(v){v&&Q(e);for(let w=0;w<d.length;w+=1)d[w].d();g&&g.d(),$&&$.d(),y&&y.d(),t[196](null),c=!1,Kn(u)}}}const uy=(t,e)=>t.target===e;function g8(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,W,nt,k,N,j,ut,Z,ft,q,ht,xt,lt,Ct,it,vt,K,Ft,Ht,Lt,bt,_t,rt,Tt,Vt,mt,at,$t,te,le,Wt,we,yt,ie,V,De,Le,qt,$e=Xe,Me=()=>($e(),$e=Zr(re,x=>n(185,ie=x)),re);t.$$.on_destroy.push(()=>$e());let{uid:Be=ya()}=e,{ui:mn}=e,{disabled:wt=!1}=e,{shapes:re}=e;Me();let{selection:on}=e,{offset:Ue}=e,{contextRotation:en=0}=e,{contextFlipX:ke=!1}=e,{contextFlipY:qe=!1}=e,{contextZoom:vn=1}=e,{active:In=!1}=e,{opacity:Hn=1}=e,{parentRect:Jt}=e,{rootRect:He}=e,{utilRect:Y}=e,{hoverColor:Pt}=e,{caretColor:H}=e,{gridColor:Bt}=e,{snapColor:ue}=e,{textInputMode:Ce="inline"}=e,{oninteractionstart:me=pe}=e,{oninteractionupdate:It=pe}=e,{oninteractionrelease:Oe=pe}=e,{oninteractionend:cn=pe}=e,{oninteractioncancel:rn=pe}=e,{onaddshape:J=pe}=e,{onupdateshape:jt=pe}=e,{onselectshape:Ae=pe}=e,{onblurshape:Se=pe}=e,{onremoveshape:X=pe}=e,{ontapshape:oe=pe}=e,{onhovershape:Zt=pe}=e,{ontriggerhistorywrite:ee=pe}=e,{onhovercanvas:Je=pe}=e,{ontapcanvas:Fe=pe}=e,{onleavecanvas:be=pe}=e,{beforeSelectShape:di=()=>!0}=e,{beforeDeselectShape:Ri=()=>!0}=e,{beforeRemoveShape:Wn=()=>!0}=e,{beforeUpdateShape:_e=(x,U,L)=>U}=e,{willRenderShapeControls:Ve=ri}=e,{willRenderShapeTextControls:wn=ri}=e,{willStartInteraction:An=(x,U)=>!0}=e,{mapEditorPointToImagePoint:ae}=e,{mapImagePointToEditorPoint:se}=e,{eraseRadius:Rn}=e,{selectRadius:zn}=e,{enableButtonFlipVertical:Ei=!1}=e,{enableTapToAddText:$i=!0}=e,{enableMultiSelect:ti=!1}=e,{enableTextStyleControls:qn=!0}=e,{locale:kn}=e,{snapThreshold:yi=0}=e,{snapPointer:$r=!0}=e,{enableSnapToContext:Jr=!0}=e,{gridSize:Rr=0}=e;const tr=x=>{if(yi===0)return[];let U;return Jr&&(U={...Jt,x:0,y:0}),[...ie.filter(L=>L!==x).filter(L=>!ho(L)).filter(L=>(tt=>tt.disableAcceptSnap!==!0)(L)).map(L=>Vi({...L},Jt)),U].filter(Boolean)},ao=(x,U,L,tt)=>x===0?{snapTargets:[]}:{snapThreshold:x,gridSize:U,gridRect:L,snapTargets:tr(tt)},gi=mi("isAnimated");F(t,gi,x=>n(186,De=x));const Yi=x=>x.set(Da(x)),Ke=x=>Da(x).find(ho),Ro=(x,U)=>{if(!Ke(U))return Sh(x),Wa(x,U)},pi=x=>{Ke(x)&&x.update(U=>U.filter(L=>!ho(L)))},yo=x=>{const U=Ke(x);if(U)return wg(U),Yi(x),U},_r=(x,U,L=(tt,st)=>({...tt,...st}))=>{Ke(U)&&U.update(tt=>tt.map(st=>ho(st)?L(st,x):st))},Wa=(x,U=re)=>(U.update(L=>[...L,x]),x),yr=(x,U,L)=>{const tt=_e({...x},U,{...L});return za(x,tt,L),x},Xi=(x,U)=>{const L=Po(x,U),tt=md(x,U),st=Math.PI/8,Rt=st*Math.round(tt/st)-en%st;U.x=x.x+L*Math.cos(Rt),U.y=x.y+L*Math.sin(Rt)},Ai=mi("keysPressed");F(t,Ai,x=>n(187,Le=x));const Eo=(x,U,L)=>x===0||U&&L?x:U||L?-x:x,Qr=x=>{if(x.x===null&&x.y===null)return so();x.x&&n(141,Ao=ae({x:x.x,y:0}).x),x.y&&n(142,bo=ae({x:0,y:x.y}).y)},so=()=>{n(141,Ao=null),n(142,bo=null)};let Ao=null,bo=null;const Ki=(x,U)=>{const L=se(x);return ae(Wi(L,U))},Go=(x,U,L)=>{const tt=(L-U)/x+1;return Array.from({length:tt},(st,Rt)=>U+Rt*x)},Er=x=>{let U=[],L=[],tt=x.points;if(x.x1!==void 0&&(tt=[{x:x.x1,y:x.y1},{x:x.x2,y:x.y2}]),tt){const st=tt.map(se),Rt=or(st),Nt=st[0],Xt=st[st.length-1];U=[Rt.x,Rt.x+.5*Rt.width,Rt.x+Rt.width,Nt.x,Xt.x],L=[Rt.y,Rt.y+.5*Rt.height,Rt.y+Rt.height,Nt.y,Xt.y]}else if(x.text||x.width!==void 0||x.rx!==void 0){let st;if(x.text&&x.height===void 0){const Qt=ea(x.text,x);st=Bi(x.x,x.y,Qt.width,Qt.height)}else st=x.width!==void 0?Ds(x):Ds({x:x.x-x.rx,y:x.y-x.ry,width:2*x.rx,height:2*x.ry});const Rt=Wo(st).map(se),Nt=Math.abs(x.rotation)>0?kr(st,x.rotation).map(se):Rt,Xt=or(Nt),Ut=Fn(Xt),Yt=.5*Xt.width,Kt=.5*Xt.height;U=[Ut.x-Yt,Ut.x,Ut.x+Yt],L=[Ut.y-Kt,Ut.y,Ut.y+Kt]}else if(x.x!==void 0){const st=se(x);U=[st.x],L=[st.y]}return{x:U,y:L}},Lo=(x,U,L)=>{let tt,st,Rt,Nt=Number.Infinity,Xt=null,Ut=null;for(let Yt=0;Yt<x.length;Yt++){st=x[Yt];for(let Kt=0;Kt<U.length;Kt++)Rt=U[Kt],tt=Math.abs(st-Rt),tt<L&&(Ut===null||tt<Nt)&&(Nt=tt,Xt=st,Ut=Rt)}return{origin:Xt,target:Ut}},sr=(x,U,L,tt,st)=>{const Rt={x:null,y:null},Nt={x:null,y:null},Xt=U.map(Er);if(tt>0){const Ut=se({x:0,y:0}),Yt=se({x:tt,y:tt}),Kt=se({x:st.width,y:st.height}),Qt=Yt.x-Ut.x,an=Go(Qt,Ut.x,Kt.x),ge=Go(Qt,Ut.y,Kt.y);Xt.push({x:an,y:ge})}return Xt.forEach(Ut=>{const{snapTranslation:Yt,snapLine:Kt}=((Qt,an,ge)=>{const ne={x:null,y:null},Pe={x:null,y:null},Te=Lo(Qt.x,an.x,ge);Te.target!==null&&(ne.x=Te.target,Pe.x=Te.target-Te.origin);const tn=Lo(Qt.y,an.y,ge);return tn.target!==null&&(ne.y=tn.target,Pe.y=tn.target-tn.origin),{snapTranslation:Pe,snapLine:ne}})(x,Ut,L);Yt.x!==null&&(Nt.x===null||Math.abs(Yt.x)<Math.abs(Nt.x))&&(Nt.x=Yt.x||0,Rt.x=Kt.x),Yt.y!==null&&(Nt.y===null||Math.abs(Yt.y)<Math.abs(Nt.y))&&(Nt.y=Yt.y||0,Rt.y=Kt.y)}),{snapTranslation:Nt,snapLines:Rt}},xo=(x,U)=>(U.x!==null&&(x.x+=U.x),U.y!==null&&(x.y+=U.y),x),lo=(x,U,L,tt)=>{const{snapThreshold:st=0,gridSize:Rt=0,gridRect:Nt,snapTargets:Xt=[]}=tt||{};let Ut=null;if(dr(x)){if(st){const Qt=Vi({...x},Jt),an=Ki(ms(U),L),ge=Ki(gs(U),L),ne=Er({...Qt,x1:an.x,y1:an.y,x2:ge.x,y2:ge.y}),{snapTranslation:Pe,snapLines:Te}=sr(ne,Xt,st,Rt,Nt);xo(L,Pe),Qr(Te)}const Yt=Ki(ms(U),L),Kt=Ki(gs(U),L);Ut={x1:Yt.x,y1:Yt.y,x2:Kt.x,y2:Kt.y}}else if(x.points){if(j1(ye)&&ci(ye,{selectedPoint:void 0}),st){const Yt=Vi({...x},Jt),Kt=Er({...Yt,points:U.points.map(ge=>Ki(ge,L))}),{snapTranslation:Qt,snapLines:an}=sr(Kt,Xt,st,Rt,Nt);xo(L,Qt),Qr(an)}Ut={points:U.points.map(Yt=>Ki(Yt,L))}}else if(No(x)||ir(x)||rr(x)){if(st){const Yt=Vi({...x},Jt),Kt=Ki(U,L),Qt=Er({...Yt,...Kt}),{snapTranslation:an,snapLines:ge}=sr(Qt,Xt,st,Rt,Nt);xo(L,an),Qr(ge)}Ut=Ki(U,L)}Ut&&(yr(x,Ut,Jt),li())},Ar={0:1,1:0,2:3,3:2},vr={0:3,1:2,2:1,3:0};let to;const Zo=(x,U)=>{const L=x.points.filter((tt,st)=>st!==U);ci(x,{points:L,selectedPoint:void 0})},qi=()=>{if(ie.length)return ie.find(ho)},On=()=>{if(ie.length)return ie.findIndex(ho)},wi=()=>{const x=qi();if(x)return wg(x),li(),x},vo=()=>{if(!qi())return;const x=[...ie];x.splice(On(),1),re.set(x)},li=()=>{re.set(ie)},co=(x,U=[],L=!0)=>{U.filter(Boolean).forEach(tt=>delete x[tt]),L&&li()},ci=(x,U,L=!0)=>{x=Object.assign(x,U),L&&li()},uo=(x,U,L,tt=!0)=>{x[U]=L,tt&&li()},wo=(x,U=!0)=>{ie.forEach(L=>ci(L,x,!1)),U&&li()},Xo=()=>[...ie].reverse().filter(La),_i=()=>[...ie].reverse().find(La),Ui=()=>!!_i(),Yo=(x,U=!0,L=!1)=>{const tt=ie.filter(Nt=>U1(Nt)&&Ea(Nt)),st=tt.findIndex(Nt=>Nt===x);if(((Nt,Xt=!1)=>{if(!Wn(Nt))return!1;re.set(ie.filter(Ut=>Ut!==Nt)),Xt||X(Nt)})(x,L)===!1)return;if(eo=x,tt.length-1<=0)return wr();if(!U)return!0;const Rt=st-1<0?tt.length-1:st-1;return Ti(tt[Rt]),!0},Fo=()=>{if(a){const U=[];return o.forEach((L,tt)=>{U1(L)&&Yo(L,tt===o.length-1,!0)&&U.push(L)}),void(U.length&&ee())}const x=_i();x&&Yo(x)};let eo;const wr=(x={})=>{const{storePrevious:U=!0}=x;Object.keys(Co).forEach(tt=>Co[tt]={});const L=po();U&&(eo=L),wo({isSelected:!1,isEditing:!1,_prerender:!1}),L&&Se(L)},po=()=>ie.find(La),Ti=(x,U=!0,L=!1)=>{if(ho(x))return;const tt=po()||eo,st=La(x);eo=void 0,di(tt,x)&&(L||wr(),(Rt=>{Rt.isSelected=!0})(x),!st&&Ae(x),U&&li())},ji=x=>{er&&er.confirm&&x.isEditing&&er.confirm();const U={isSelected:!1,isEditing:!1,_prerender:!1};x.selectedPoint>-1&&(U.selectedPoint=void 0),ci(x,U),Se(x)},Lr=x=>{ci(x,{isSelected:!0,isEditing:!0,_prerender:Ce==="inline"})},no=x=>{ci(x,{isSelected:!0,isEditing:!1,_prerender:!1})},_=x=>{if(!x.length)return[];const U=x.filter(Wn);return re.set(ie.filter(L=>!U.includes(L))),U},ce=x=>{const U=ea(x.text,x);return Bi(x.x,x.y,x.width?Math.min(x.width,U.width):U.width,x.height?Math.min(x.height,U.height):U.height)},bn=x=>{if(wl(x))return Ds(x);if(rr(x))return Fd(x);const U=ce(x);return U.width=Math.max(10,x.width||U.width),U},nn=(x,U,L=0,tt=()=>!0)=>[...x].reverse().filter(tt).map(st=>({shape:st,priority:1})).filter(st=>{const{shape:Rt}=st,Nt=Vi(Di(Rt),Jt),Xt=L+.5*(Nt.strokeWidth||0);if(No(Nt))return B1(U,Xt,Nt,Rt.rotation);if(ir(Nt)){const Ut=bn(Nt),Yt=B1(U,Xt,Ut,Rt.rotation);let Kt=!1;if(Yt&&!La(Rt)){const Qt=ce(Nt);Rt.textAlign!=="right"||Rt.flipX||(Qt.x=Ut.x+Ut.width-Qt.width),Rt.textAlign==="center"&&(Qt.x=Ut.x+.5*Ut.width-.5*Qt.width),Kt=B1(U,Xt,Qt,Rt.rotation,Fn(Ut)),Kt||(st.priority=-1)}return Yt}return rr(Nt)?((Ut,Yt,Kt,Qt,an,ge)=>{const ne=Hd(ot(Kt.x,Kt.y),Kt.rx,Kt.ry,Qt,an,ge,12);return wh(Ut,Yt,ne)})(U,Xt,Nt,Rt.rotation,Rt.flipX,Rt.flipY):dr(Nt)?Gd(U,Math.max(16,Xt),ms(Nt),gs(Nt)):Gi(Nt)&&Nt.pathClose?wh(U,Xt,Nt.points):!!Gi(Nt)&&(Nt.points.length===1?Vo(U,Nt.points[0])<Xt*Xt:i2(U,Math.max(16,Xt),Nt.points))}).sort((st,Rt)=>st.priority<Rt.priority?1:st.priority>Rt.priority?-1:0).map(st=>st.shape),de=(x,U,L,tt=0)=>{const st=Math.abs(tt),Rt=Ys(U,L),Nt=e0(Rt,st),Xt=(({start:Ut,end:Yt},Kt)=>{if(Kt===0)return[ot(Ut.x,Ut.y),ot(Ut.x,Ut.y),ot(Yt.x,Yt.y),ot(Yt.x,Yt.y)];const Qt=Math.atan2(Yt.y-Ut.y,Yt.x-Ut.x),an=Math.sin(Qt)*Kt,ge=Math.cos(Qt)*Kt;return[ot(an+Ut.x,-ge+Ut.y),ot(-an+Ut.x,ge+Ut.y),ot(-an+Yt.x,ge+Yt.y),ot(an+Yt.x,-ge+Yt.y)]})(Nt,st);return x.filter(Ut=>{const Yt=Vi(Di(Ut),Jt);if(dr(Yt)||Gi(Yt)){const Kt=Yt.points?[...Yt.points]:[ms(Yt),gs(Yt)];return!!t2(Nt,Kt)}return((Kt,Qt)=>!!Kt.find(an=>vh(an,Qt))||!!Qt.find(an=>vh(an,Kt)))(Xt,((Kt,Qt=12)=>{if(No(Kt))return kr(Kt,Kt.rotation,Fn(Kt));if(ir(Kt)){const an=bn(Kt);return kr(an,Kt.rotation,Fn(an))}return rr(Kt)?Hd(ot(Kt.x,Kt.y),Kt.rx,Kt.ry,Kt.rotation,Kt.flipX,Kt.flipY,Qt):[]})(Yt))})};let xe,Dn,xn,ye,ei,Cn,So=!1,Ca=!1,Ji=!1,ko;const zo=x=>{ko=x.map(U=>({shape:U,shapeOrigin:Di(U),shapeOriginComputed:Vi(Di(U),Jt)}))},is=()=>{clearTimeout(Dn),Dn=void 0,n(144,Ji=!1),so()};let Si=null;const Vr=x=>{const U=Ze(x.rotation)&&x.rotation!==0;if(No(x)){if(x.width<1&&x.height<1)return;const L=Fn(x),tt=Wo(x);return(x.flipX||x.flipY)&&nc(tt,x.flipX,x.flipY,L.x,L.y),U?Tl(tt,x.rotation,L.x,L.y):tt}if(rr(x)){if(x.rx<1&&x.ry<1)return;const L=x,tt=Wo(Fd(x));return(x.flipX||x.flipY)&&nc(tt,x.flipX,x.flipY,L.x,L.y),U?Tl(tt,x.rotation,L.x,L.y):tt}if(dr(x))return[ms(x),gs(x)];if(Gi(x)){if(x.bitmap&&!x.pathClose){const L=or(x.points);return L.x-=.5*x.strokeWidth,L.y-=.5*x.strokeWidth,L.width+=x.strokeWidth,L.height+=x.strokeWidth,Vr({...x,...L})}return[...x.points]}if(ir(x)){if(x.width<5&&x.height<5)return;const L=bn(x);L.width=Math.max(10,L.width);const tt=Fn(L),st=Wo(L);return(x.flipX||x.flipY)&&nc(st,x.flipX,x.flipY,tt.x,tt.y),U?Tl(st,x.rotation,tt.x,tt.y):st}return[]},Ko=x=>{const U=Vr(x);let L,tt;return x.flipY?(L=ia([U[0],U[1]]),tt=go(ot(U[1].x-U[2].x,U[1].y-U[2].y))):(L=ia([U[2],U[3]]),tt=go(ot(U[2].x-U[1].x,U[2].y-U[1].y))),Br(tt,20/vn),{origin:L,dir:tt}},A=x=>U=>U.id===x,ve=x=>{const U=A(x);return L=>L.filter((tt=>st=>!tt(st))(U))},ze=x=>{const U=A(x),L=ve(x);return()=>mn.update(tt=>tt.some(U)?L(tt):tt)},gn=x=>{const U=ve(x);return(...L)=>{mn.update(tt=>[...U(tt),...L.filter(Boolean)])}},En=ze("markup-hover"),Xn=gn("markup-hover");let Ge;const Qe="markup-manipulator-segment-"+Be,Nn=ze(Qe),Gn=gn(Qe),bi=(x,U)=>{const L=x[U],tt=U-1<0?x[x.length-1]:x[U-1],st=U+1<x.length?x[U+1]:x[0],Rt=Ni(We(tt),L);go(Rt);const Nt=Wi(Br(Rt,10),L),Xt=Ni(We(st),L);return go(Xt),[Nt,L,Wi(Br(Xt,10),L)]},zi=()=>{n(145,Ge=void 0),En()},fi="markup-multi-selection-segment-"+Be,Li=ze(fi),Bn=gn(fi),Fr=(x,U)=>{if(yi<=0)return x;if(U)return so(),x;const L=ae(x),tt=tr(),{snapTranslation:st,snapLines:Rt}=sr(Er(L),tt,yi,Rr,i);return Qr(Rt),xo(x,st),x},qo=hn(0);F(t,qo,x=>n(188,qt=x));const Na="markup-grid-line-"+Be,Cs=ze(Na),el=gn(Na),Ua="markup-snap-line",ja=ze(Ua),Ts=gn(Ua);let er;const Ha=x=>{n(8,er.innerHTML=u8(x),er)},Ta=x=>{const U=x.value===void 0?x.innerHTML:x.value,L=r.format==="text"?jb(U).split(/<br>|<br\/>/g).join(`
`).replace(/&nbsp;/g,"").replace(/&amp;/g,"&"):U;return Yd(r)&&r.disableNewline!==!1?(tt=>{const st=tt.split(/[\n\r]/g);return st.length>1?st.map(Rt=>Rt.trim()).filter(Rt=>Rt.length).join(" "):st[0]})(L):L},br=()=>{const x=Ta(er),U=Yl(r,x),L=U===!0?x:U;let tt=ft.x,st=ft.y;if(!r.height){const Rt=kr({...ht},r.rotation),Nt=ea(L,d),Xt=kr({x:tt,y:st,...Nt},r.rotation),[Ut,,Yt]=Rt,[Kt,,Qt]=Xt;let an=Ut,ge=Kt;r.flipX&&(an=Yt,ge=Qt);const ne=Ni(We(an),ge);tt+=ne.x,st+=ne.y}ci(r,{x:Ne(Z.x)?Hr(tt,Jt.width):tt,y:Ne(Z.y)?Hr(st,Jt.height):st,text:L})},Wr=()=>{c&&wi(),er&&er.confirm&&er.confirm(),br(),no(r),jt(r)},zr=()=>{c?vo():(ci(r,{text:Z.text,x:Z.x,y:Z.y}),no(r))},Sr=(x,U,{flipX:L,flipY:tt,rotation:st},Rt="top left")=>{let Nt,Xt;const[Ut,Yt,Kt,Qt]=kr(x,st),[an,ge,ne,Pe]=kr(U,st);return Rt==="top center"?(Nt=ia(tt?[Qt,Kt]:[Ut,Yt]),Xt=ia(tt?[Pe,ne]:[an,ge])):Rt==="top right"&&!L||Rt==="top left"&&L?(Nt=tt?Kt:Yt,Xt=tt?ne:ge):(Nt=tt?Qt:Ut,Xt=tt?Pe:an),Ni(We(Nt),Xt)},Ye=(x,U,L)=>ot(Ne(x.x)?Hr(U.x+L.x,Jt.width):U.x+L.x,Ne(x.y)?Hr(U.y+L.y,Jt.height):U.y+L.y),Co={},Ga=()=>Zo(r,r.selectedPoint),Do=()=>Lr(r),Ms=()=>{const x=ys(ea(r.text,d),Ut=>Math.ceil(Ut)),U=Ee(r,"height"),L=!U&&Ee(r,"width"),tt=r.id;let st=Co[tt];st||(Co[tt]={},st=Co[tt]);const Rt=Ut=>{const{width:Yt,...Kt}=d,Qt=ea(r.text,Kt),an=Sr(Bi(d.x,d.y,Ut.width,Ut.height),Bi(d.x,d.y,Qt.width,Qt.height),d,"top "+r.textAlign),ge=d.disableNewline!==!1;co(r,["width","height",ge&&"textAlign"]),ci(r,{...Ye(r,d,an)})},Nt=Ut=>{const Yt=Zi(st.width||d.width||x.width,x.height),Kt=st.textAlign||"left",Qt=Sr(Bi(d.x,d.y,Ut.width,Ut.height),Bi(d.x,d.y,Yt.width,Yt.height),d,"top "+Kt);co(r,["height"]),ci(r,{...Ye(r,d,Qt),width:Ne(r.width)?Hr(Yt.width,Jt.width):Yt.width,textAlign:Kt})},Xt=Ut=>{const Yt=Zi(st.width||x.width,st.height||x.height),Kt=st.textAlign||"left",Qt=Sr(Bi(d.x,d.y,Ut.width,Ut.height),Bi(d.x,d.y,Yt.width,Yt.height),d,"top "+Kt);ci(r,{...Ye(r,d,Qt),width:Ne(r.width)?Hr(Yt.width,Jt.width):Yt.width,height:Ne(r.width)?Hr(Yt.height,Jt.height):Yt.height,textAlign:Kt})};if(U){st.textAlign=r.textAlign,st.width=d.width,st.height=d.height;const Ut=Zi(d.width,d.height);$l(r,"auto-height")?Nt(Ut):$l(r,"auto-width")&&Rt(Ut)}else if(L){st.textAlign=r.textAlign,st.width=d.width;const Ut=Zi(d.width,x.height);$l(r,"auto-width")?Rt(Ut):$l(r,"fixed-size")&&Xt(Ut)}else{st.textAlign=r.textAlign;const Ut=Zi(Math.ceil(x.width),Math.ceil(x.height));$l(r,"fixed-size")?Xt(Ut):$l(r,"auto-height")&&Nt(Ut)}},nl=x=>{x.stopPropagation();const U=r.flipX||!1;uo(r,"flipX",!U),jt(r)},El=x=>{x.stopPropagation();const U=r.flipY||!1;uo(r,"flipY",!U),jt(r)},Al=x=>{uo(r,"opacity",x)},fu=x=>{Al(x),jt(r)},Ll=x=>{x.stopPropagation(),x.target.blur(),Fo()},$u=x=>{x.stopPropagation(),ie.findIndex(U=>U===r)!==ie.length-1&&(re.set(ie.filter(U=>U!==r).concat([r])),jt(r))},yu=x=>{x.stopPropagation(),Fl()},Fl=()=>{const x=(a?o:[r]).filter(Sg).map(U=>{const L=Di(U);L.id=ya();const tt=ot(50,-50);if(Ee(L,"points")){const st=ic(L,["points"],Jt);st.points.forEach(Rt=>{Rt.x+=tt.x,Rt.y+=tt.y}),za(L,st,Jt)}else if(dr(L)){const st=ic(L,["x1","y1","x2","y2"],Jt);st.x1+=tt.x,st.y1+=tt.y,st.x2+=tt.x,st.y2+=tt.y,za(L,st,Jt)}else{const st=ic(L,["x","y"],Jt);st.x+=50,st.y-=50,za(L,st,Jt)}return re.set([...ie,L]),J(L),L});if(x.length>1)return wr(),void x.forEach(U=>{Ti(U,!0,!0)});Ti(x[0])},Ma=hn(0,{stiffness:.2,damping:.7});F(t,Ma,x=>n(18,V=x));let Ps;const gc=(x,U)=>{const{disableTextLayout:L=[]}=U;return"height"in U?L.includes("auto-height")?x.shapeIconButtonTextLayoutAutoWidth:x.shapeIconButtonTextLayoutAutoHeight:"width"in U?L.includes("auto-width")?x.shapeIconButtonTextLayoutFixedSize:x.shapeIconButtonTextLayoutAutoWidth:L.includes("fixed-size")?x.shapeIconButtonTextLayoutAutoHeight:x.shapeIconButtonTextLayoutFixedSize},fc=(x,U)=>{const{disableTextLayout:L=[]}=U;return"height"in U?L.includes("auto-height")?x.shapeTitleButtonTextLayoutAutoWidth:x.shapeTitleButtonTextLayoutAutoHeight:"width"in U?L.includes("auto-width")?x.shapeTitleButtonTextLayoutFixedSize:x.shapeTitleButtonTextLayoutAutoWidth:L.includes("fixed-size")?x.shapeTitleButtonTextLayoutAutoHeight:x.shapeTitleButtonTextLayoutFixedSize};let il=!1,zl=ui(),rs;const Dl=x=>{Zt(x),n(145,Ge=x)};let os;return aa(()=>{ja(),Cs(),Nn(),En()}),t.$$set=x=>{"uid"in x&&n(59,Be=x.uid),"ui"in x&&n(60,mn=x.ui),"disabled"in x&&n(0,wt=x.disabled),"shapes"in x&&Me(n(1,re=x.shapes)),"selection"in x&&n(61,on=x.selection),"offset"in x&&n(2,Ue=x.offset),"contextRotation"in x&&n(62,en=x.contextRotation),"contextFlipX"in x&&n(63,ke=x.contextFlipX),"contextFlipY"in x&&n(64,qe=x.contextFlipY),"contextZoom"in x&&n(65,vn=x.contextZoom),"active"in x&&n(66,In=x.active),"opacity"in x&&n(67,Hn=x.opacity),"parentRect"in x&&n(68,Jt=x.parentRect),"rootRect"in x&&n(3,He=x.rootRect),"utilRect"in x&&n(69,Y=x.utilRect),"hoverColor"in x&&n(70,Pt=x.hoverColor),"caretColor"in x&&n(71,H=x.caretColor),"gridColor"in x&&n(72,Bt=x.gridColor),"snapColor"in x&&n(73,ue=x.snapColor),"textInputMode"in x&&n(4,Ce=x.textInputMode),"oninteractionstart"in x&&n(74,me=x.oninteractionstart),"oninteractionupdate"in x&&n(75,It=x.oninteractionupdate),"oninteractionrelease"in x&&n(76,Oe=x.oninteractionrelease),"oninteractionend"in x&&n(77,cn=x.oninteractionend),"oninteractioncancel"in x&&n(78,rn=x.oninteractioncancel),"onaddshape"in x&&n(79,J=x.onaddshape),"onupdateshape"in x&&n(80,jt=x.onupdateshape),"onselectshape"in x&&n(81,Ae=x.onselectshape),"onblurshape"in x&&n(82,Se=x.onblurshape),"onremoveshape"in x&&n(83,X=x.onremoveshape),"ontapshape"in x&&n(84,oe=x.ontapshape),"onhovershape"in x&&n(85,Zt=x.onhovershape),"ontriggerhistorywrite"in x&&n(86,ee=x.ontriggerhistorywrite),"onhovercanvas"in x&&n(87,Je=x.onhovercanvas),"ontapcanvas"in x&&n(88,Fe=x.ontapcanvas),"onleavecanvas"in x&&n(89,be=x.onleavecanvas),"beforeSelectShape"in x&&n(90,di=x.beforeSelectShape),"beforeDeselectShape"in x&&n(91,Ri=x.beforeDeselectShape),"beforeRemoveShape"in x&&n(92,Wn=x.beforeRemoveShape),"beforeUpdateShape"in x&&n(93,_e=x.beforeUpdateShape),"willRenderShapeControls"in x&&n(94,Ve=x.willRenderShapeControls),"willRenderShapeTextControls"in x&&n(95,wn=x.willRenderShapeTextControls),"willStartInteraction"in x&&n(96,An=x.willStartInteraction),"mapEditorPointToImagePoint"in x&&n(97,ae=x.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in x&&n(98,se=x.mapImagePointToEditorPoint),"eraseRadius"in x&&n(99,Rn=x.eraseRadius),"selectRadius"in x&&n(100,zn=x.selectRadius),"enableButtonFlipVertical"in x&&n(101,Ei=x.enableButtonFlipVertical),"enableTapToAddText"in x&&n(102,$i=x.enableTapToAddText),"enableMultiSelect"in x&&n(103,ti=x.enableMultiSelect),"enableTextStyleControls"in x&&n(5,qn=x.enableTextStyleControls),"locale"in x&&n(6,kn=x.locale),"snapThreshold"in x&&n(104,yi=x.snapThreshold),"snapPointer"in x&&n(105,$r=x.snapPointer),"enableSnapToContext"in x&&n(106,Jr=x.enableSnapToContext),"gridSize"in x&&n(107,Rr=x.gridSize)},t.$$.update=()=>{var x,U;if(64&t.$$.dirty[2]|16384&t.$$.dirty[3]&&n(173,i=Rr>0?{x:0,y:0,...Jt}:void 0),1&t.$$.dirty[0]|1073741824&t.$$.dirty[5]&&n(149,r=!wt&&ie&&(qi()||_i())),1024&t.$$.dirty[3]|1073741824&t.$$.dirty[5]&&n(165,o=ti?ie.filter(La):[]),1024&t.$$.dirty[5]&&n(164,a=o.length>1),64&t.$$.dirty[2]|1536&t.$$.dirty[5]&&n(184,s=a?o.map(L=>Vi(Di(L),Jt)):[]),33554432&t.$$.dirty[4]&&n(181,l=!!r),33554432&t.$$.dirty[4]&&n(167,c=r&&ho(r)),33554432&t.$$.dirty[4]|4096&t.$$.dirty[5]&&n(10,u=r&&!c?r.id:void 0),8&t.$$.dirty[0]|64&t.$$.dirty[2]|33554432&t.$$.dirty[4]&&n(13,d=He&&r&&Vi(Di(r),Jt)),33554432&t.$$.dirty[4]|4096&t.$$.dirty[5]&&n(147,p=!(!r||!c)),8192&t.$$.dirty[0]|32&t.$$.dirty[2]|33554432&t.$$.dirty[4]&&n(180,h=r&&Hn&&Vr(d)||[]),536871424&t.$$.dirty[5]&&n(177,f=a?s.map(Vr):[]),33554432&t.$$.dirty[4]|512&t.$$.dirty[5]&&n(183,g=!a&&r&&Ch(x=r)&&Cl(x)&&x.disableResize!==!0&&(wl(x)||Bd(x)||rr(x)||dr(x)||Gi(x)&&Ee(x,"pathClose"))&&!hs(r)),33554432&t.$$.dirty[4]|512&t.$$.dirty[5]&&n(14,$=!a&&r&&(L=>Ch(L)&&L.disableRotate!==!0&&(wl(L)||Ee(L,"text")||rr(L)))(r)&&!hs(r)),33554432&t.$$.dirty[4]|268435456&t.$$.dirty[5]&&n(17,y=g&&Ee(r,"text")&&!r.height?[[1,2],[3,0]]:(!r||!dr(r)&&!Gi(r))&&g),131072&t.$$.dirty[0]|33554432&t.$$.dirty[4]|268435456&t.$$.dirty[5]&&n(30,v=!!r&&!Array.isArray(y)&&g),1536&t.$$.dirty[5]&&n(182,w=a?(L=>{const tt=L.map(Rt=>Vr(Vi(Rt,Jt))).flat(),st=or(tt);return Wo(st)})(o):[]),33554432&t.$$.dirty[4]|33554944&t.$$.dirty[5]&&n(15,S=r&&h.length>1||a),32&t.$$.dirty[3]|167772672&t.$$.dirty[5]&&n(178,R=a?w.map(se):h.map(se)),4&t.$$.dirty[0]|8388608&t.$$.dirty[5]&&n(12,M=R.map(L=>ot(L.x-Ue.x,L.y-Ue.y))),33554432&t.$$.dirty[4]&&n(16,B=r&&r.points&&Ze(r.selectedPoint)?r.selectedPoint:-1),65536&t.$$.dirty[0]&&n(157,C=B>=0),69632&t.$$.dirty[0]|4&t.$$.dirty[5]&&n(162,D=C?M[B]:void 0),33554432&t.$$.dirty[4]|67108864&t.$$.dirty[5]&&n(29,O=l&&(Bd(r)?!Ee(r,"disableNewline")||!r.disableNewline:r.disableNewline===!1)),32&t.$$.dirty[3]|2097152&t.$$.dirty[4]&&(Ge&&se&&!La(Ge)&&Ea(Ge)?(L=>{const tt=Vr(Vi(Di(L),Jt));if(!tt)return;const st=tt.map(se),Rt=!!L.pathClose||!(!L.bitmap&&(Gi(L)||dr(L))),Nt=L.selectionStyle==="hook",Xt=Nt?st.map((Yt,Kt,Qt)=>({id:"markup-hover",points:bi(Qt,Kt),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:"markup-hover",points:st.map(Yt=>ot(Yt.x+1,Yt.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:Rt}],Ut=Nt?st.map((Yt,Kt,Qt)=>({id:"markup-hover",points:bi(Qt,Kt),strokeColor:Pt,strokeWidth:2})):[{id:"markup-hover",points:st,strokeColor:Pt,strokeWidth:2,pathClose:Rt}];Xn(...Xt,...Ut)})(Ge):En()),61440&t.$$.dirty[0]|32&t.$$.dirty[2]&&n(179,P=S&&$&&Hn&&M?(L=>{const tt=Ko(L),st=se({x:tt.origin.x+tt.dir.x,y:tt.origin.y+tt.dir.y});return{origin:se(tt.origin),position:st}})(d):void 0),4&t.$$.dirty[0]|16777216&t.$$.dirty[5]&&n(28,b=P&&ot(P.position.x-Ue.x,P.position.y-Ue.y)),2&t.$$.dirty[6]&&n(172,N=!!(Le||[]).find(L=>[91,93,17].includes(L))),4096&t.$$.dirty[3]|131072&t.$$.dirty[5]&&n(174,W=!(N||!$r)),32&t.$$.dirty[2]|37748736&t.$$.dirty[4]|8916992&t.$$.dirty[5]&&r&&R&&Hn>0&&(r===Ge&&zi(),((L,tt,st)=>{if(!Ea(tt))return;const Rt=Gi(tt),Nt=Rt&&Ee(tt,"pathClose"),Xt=Nt&&(hi=>hi.strokeWidth&&((Nr,io)=>{const ro=Nr.strokeColor;return!!ro&&(ro.length===3||ro[3]>0)})(hi))(tt),Ut=ho(tt),Yt=hs(tt),Kt=tt.selectionStyle==="hook",Qt=tt.disableShowPoints!==!0,{selectionOpacity:an=1}=tt;if(Ut&&Rt&&!Nt)return;const ge=[],ne=[...R],Pe=ne[ne.length-1],Te=ne[0],tn=(Yt?.05:.1)*L*an,sn=tn>0,Tn=(Yt?.5:1)*L*an,fn=Tn>0,_n=[0,0,0],xi=[1,1,1],Jn=Yt?1:1.5;Le.includes(16)&&Pe&&st&&Xi(Pe,st);const Un=(ne.length&&Nt&&Ut&&st?Vo(Te,st):1/0)<=256,ki=(ne.length&&Nt&&Ut&&st?Vo(Pe,st):1/0)<=256;!Un&&st&&ne.push(st);const oi=ne.length>1,nr=!!tt.pathClose||!(!tt.bitmap&&(Gi(tt)||dr(tt)))||ne.length>2&&Un;oi&&sn&&(Kt?ge.push(...ne.map((hi,Nr,io)=>({id:Qe,points:bi(io,Nr),strokeColor:_n,opacity:tn}))):ge.push({id:Qe,points:ne.map(hi=>ot(hi.x+1,hi.y+1)),pathClose:nr,strokeColor:_n,strokeWidth:2,opacity:tn})),Nt&&sn&&Qt&&ge.push(...ne.map(hi=>({id:Qe,...hi,rx:2*Jn,ry:2*Jn,backgroundColor:_n,opacity:tn}))),P&&sn&&ge.push({id:Qe,points:[ot(P.origin.x+1,P.origin.y+1),ot(P.position.x+1,P.position.y+1)],strokeColor:_n,strokeWidth:2,opacity:tn}),oi&&fn&&(Kt?ge.push(...ne.map((hi,Nr,io)=>({id:Qe,points:bi(io,Nr),strokeColor:xi,strokeWidth:Jn,opacity:Tn}))):ge.push({id:Qe,points:ne,pathClose:nr,strokeColor:xi,strokeWidth:Jn,backgroundColor:Ut&&Nt&&tt.backgroundColor&&tt.backgroundColor[3]>0?tt.backgroundColor:[0,0,0,0],opacity:Tn})),Nt&&Qt&&ge.push(...ne.map(hi=>({id:Qe,...hi,rx:3*Jn,ry:3*Jn,backgroundColor:[.5,.5,.5],strokeWidth:Jn,strokeColor:xi}))),Nt&&Ut&&Qt&&R.length>=3&&ge.push({...Te,id:Qe,rx:Jn*(Un?5:4),ry:Jn*(Un?5:4),backgroundColor:Un?Pt:[.5,.5,.5],strokeWidth:Jn,strokeColor:xi}),Nt&&Ut&&Xt&&Qt&&!Un&&h.length>=2&&ge.push({...Pe,id:Qe,rx:Jn*(ki?5:4),ry:Jn*(ki?5:4),backgroundColor:ki?Pt:[.5,.5,.5],strokeWidth:Jn,strokeColor:xi}),P&&fn&&!Kt&&ge.push({id:Qe,points:[{x:P.origin.x,y:P.origin.y},{x:P.position.x,y:P.position.y}],strokeColor:xi,strokeWidth:Jn,opacity:Tn}),Gn(...ge)})(Hn,r,c&&Gi(r)?Fr({...rs},!W):void 0)),33554432&t.$$.dirty[4]&&(r||(zi(),Nn())),32&t.$$.dirty[3]|4194304&t.$$.dirty[5])if(f.length){Li();const L=f.map(tt=>({id:fi,points:tt.map(se),strokeWidth:1,strokeColor:[1,1,1,.5],pathClose:!0}));Bn(...L)}else Li();2097152&t.$$.dirty[4]&&n(175,nt=!!Ge),524288&t.$$.dirty[4]&&n(176,k=!!ye),4194304&t.$$.dirty[4]|3670016&t.$$.dirty[5]&&(!rs||k||nt||Fr({...rs},!W)),1024&t.$$.dirty[2]|16416&t.$$.dirty[3]|262144&t.$$.dirty[5]|4&t.$$.dirty[6]&&Rr>0&&i&&se&&((L,tt,st,Rt)=>{const Nt=se({x:0,y:0}),Xt=se({x:L,y:L}),Ut=se({x:tt.width,y:tt.height}),Yt=Xt.x-Nt.x;if(qo.set(Yt>6?1:0),Rt<=0)return Cs();const Kt=Go(Yt,Nt.x,Ut.x).map(an=>({id:Na,opacity:Rt,points:[{x:an,y:Nt.y},{x:an,y:Ut.y}],strokeWidth:1,strokeColor:st})),Qt=Go(Yt,Nt.y,Ut.y).map(an=>({id:Na,opacity:Rt,points:[{x:Nt.x,y:an},{x:Ut.x,y:an}],strokeWidth:1,strokeColor:st}));el(...Qt,...Kt)})(Rr,i,Bt,qt),2048&t.$$.dirty[2]|32&t.$$.dirty[3]|393216&t.$$.dirty[4]|131072&t.$$.dirty[5]&&se&&(N?ja():((L,tt,st)=>{if(L===null&&tt===null)return ja();let Rt,Nt;L!==null&&(Rt={id:Ua,strokeColor:st,strokeWidth:1.5,points:[se({x:L,y:0}),se({x:L,y:Jt.height})]}),tt!==null&&(Nt={id:Ua,strokeColor:st,strokeWidth:1.5,points:[se({x:0,y:tt}),se({x:Jt.width,y:tt})]}),Ts(Rt,Nt)})(Ao,bo,ue)),16&t.$$.dirty[2]&&(L=>{if(!L)return wo({_prerender:!1});const tt=ie.find(st=>st.isEditing);tt&&ci(tt,{_prerender:Ce==="inline"})})(In),2&t.$$.dirty[6]&&Le&&Le.length&&(()=>{const[L]=Le;L!==8&&L!==46||Ui()&&(r.isEditing||(Gi(r)&&Ze(r.selectedPoint)?setTimeout(()=>Zo(r,r.selectedPoint),0):setTimeout(()=>Fo(),0)))})(),272&t.$$.dirty[0]&&er&&Ce==="inline"&&er.focus(),33554432&t.$$.dirty[4]&&n(171,j=r&&ir(r)),33554432&t.$$.dirty[4]|65536&t.$$.dirty[5]&&n(11,ut=j&&Yl(r)!==!1&&hs(r)),2048&t.$$.dirty[0]&&n(166,Z=ut?{...r}:void 0),64&t.$$.dirty[2]|2048&t.$$.dirty[5]&&n(168,ft=Z&&Vi({...Z},Jt)),8192&t.$$.dirty[5]&&n(170,q=ft&&ea(ft.text,ft)),40960&t.$$.dirty[5]&&(ht=ft&&Bi(ft.x,ft.y,q.width,q.height)),2048&t.$$.dirty[0]|33554432&t.$$.dirty[4]&&n(25,xt=ut?r.text:""),2056&t.$$.dirty[0]|64&t.$$.dirty[2]|33554432&t.$$.dirty[4]&&n(169,lt=He&&r&&ut&&Vi({...Di(r),width:Ze(r.width)?Math.floor(r.width):void 0,height:Ze(r.height)?Math.floor(r.height):void 0},Jt)),2064&t.$$.dirty[0]|16384&t.$$.dirty[5]&&n(27,Ct=ut&&((L,tt)=>{const{textAlign:st="left",fontFamily:Rt="sans-serif",fontWeight:Nt="normal",fontStyle:Xt="normal",letterSpacing:Ut="normal",textShadowX:Yt=0,textShadowY:Kt=0,textShadowBlur:Qt=0,textShadowColor:an,textOutlineWidth:ge=0,textOutlineColor:ne}=L,Pe="!important",Te=`caret-color:${vt};text-align:${st}${Pe};font-family:${Rt}${Pe};font-weight:${Nt}${Pe};font-style:${Xt}${Pe};letter-spacing:${Ze(Ut)?Ut+"px":"normal"}${Pe}`;if(tt==="modal")return Te;const tn=ge?`;-webkit-text-stroke:${2*ge}px ${Cr(ne)} ${Pe}`:"",sn=Qt||Yt||Kt?`;text-shadow:${Yt}px ${Kt}px ${Qt}px ${Cr(an)} ${Pe}`:"";let Tn=L.fontSize,fn=1,_n="";Tn>1e3&&Ba()&&(fn=Tn/1e3,_n=`transform-origin:0 0;transform:scale(${fn})`,Tn=1e3);let xi=L.lineHeight/fn;const Jn=Cr(L.color),Un=.5*Math.max(0,Tn-xi);return`--font-scalar:${fn};--bottom-inset:${Un}px;padding:${Un}px 0 0${Pe};color:${Jn}${Pe};font-size:${Tn}px${Pe};line-height:${xi}px${Pe};${Te};${_n}${tn}${sn}`})(lt,Ce)),2052&t.$$.dirty[0]|9&t.$$.dirty[2]|16384&t.$$.dirty[5]&&n(26,it=ut&&((L,tt,st,Rt)=>{let Nt,Xt;L.width&&L.height?(Nt=Fn(L),Xt=es(L)):(Xt=ea(r.text,d),Xt.width=d.width||Xt.width,Nt=ot(L.x+.5*Xt.width,L.y+.5*Xt.height));const Ut=Math.max(0,L.fontSize-L.lineHeight)+L.lineHeight,Yt=se(Nt);let Kt=Yt.x-tt.x-.5*Xt.width,Qt=Yt.y-tt.y-.5*Xt.height,an=L.flipX,ge=L.flipY,ne=L.rotation;ke&&qe?(an=!an,ge=!ge):ke?(an=!an,ne=-ne):qe&&(ge=!ge,ne=-ne),ne+=Rt;const Pe=st*(an?-1:1),Te=st*(ge?-1:1);return`--line-height:${Ut}px;width:${Xt.width}px;height:${Xt.height}px;transform:translate(${Kt}px,${Qt}px) rotate(${ne}rad) scale(${Pe}, ${Te})`})(lt,Ue,vn,en)),512&t.$$.dirty[2]&&(vt=H?Cr(H):"auto"),2320&t.$$.dirty[0]&&ut&&er&&Ce==="inline"&&Ha(xt),578813952&t.$$.dirty[4]&&n(153,K=r&&!p?r:K),536870912&t.$$.dirty[4]&&n(155,Ft=K&&n4(K)),536870912&t.$$.dirty[4]&&n(150,Ht=K&&$l(K)),536870912&t.$$.dirty[4]&&n(152,Lt=K&&Sg(K)),536870912&t.$$.dirty[4]&&n(151,bt=K&&U1(K)),536870912&t.$$.dirty[4]|512&t.$$.dirty[5]&&n(154,_t=!a&&K&&(L=>L.disableReorder!==!0)(K)),536870912&t.$$.dirty[4]&&n(148,rt=K&&Yl(K)!==!1),536870912&t.$$.dirty[4]&&n(156,Tt=K&&Ee(K,"backgroundImage")&&kh(K,"opacity")),33554432&t.$$.dirty[4]&&n(159,Vt=r&&r.format==="html"),41943040&t.$$.dirty[4]|16&t.$$.dirty[5]&&n(163,mt=r&&(!p||Vt)),1048576&t.$$.dirty[4]|256&t.$$.dirty[5]|1&t.$$.dirty[6]&&Ma.set(mt&&!Ji?1:0,{hard:De===!1}),4096&t.$$.dirty[0]|320&t.$$.dirty[5]&&n(161,at=mt&&M.length?(U=or(M),Uo(ot(U.x+.5*U.width,U.y),lu)):at),512&t.$$.dirty[0]|128&t.$$.dirty[2]|192&t.$$.dirty[5]&&n(160,$t=(D||at)&&Ps&&Y&&((L,tt,st,Rt)=>{const Nt=L.x,Xt=L.y,Ut=Nt+L.width;let Yt=Math.max(tt.x-.5*st.width,Nt),Kt=Math.max(tt.y-st.height+Rt,Xt);return Yt+st.width>Ut&&(Yt=Ut-st.width),ot(Yt,Kt)})(Y,D||at,Ps,-16)),32&t.$$.dirty[5]&&n(24,te=$t?`translate(${$t.x}px, ${$t.y}px)`:void 0),262144&t.$$.dirty[0]|32&t.$$.dirty[5]&&n(23,le=$t?V:void 0),2048&t.$$.dirty[0]&&n(158,Wt=ut?"text":"shape"),1088&t.$$.dirty[0]|262&t.$$.dirty[3]|2130706432&t.$$.dirty[4]|1073741855&t.$$.dirty[5]&&n(22,we=Wt==="text"&&wn&&Vt?uu(()=>wn([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(([L,tt])=>["Button","style-"+L,{onclick:()=>document.execCommand(L),...tt,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+tt.style}])]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400",title:"Remove styles",label:[["span","T",{style:"font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline",textContent:"T"}],["span","x",{style:"position:relative;top:.175rem;",innerHTML:"&times;"}]]}]]]],u)):Wt==="shape"&&Ve&&u?uu(()=>Ve(C?[["div","epsilon",{class:"PinturaShapeControlsGroup"},[["Button","remove-point",{onclick:Ga,label:kn.shapeTitleButtonRemove,icon:kn.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]]]]:[Tt&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:fu,onchange:Al,step:.01,value:Ee(r,"opacity")?r.opacity:1,label:(L,tt,st)=>Math.round(L/st*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[Ft&&["Button","flip-horizontal",{onclick:nl,label:kn.shapeTitleButtonFlipHorizontal,icon:kn.shapeIconButtonFlipHorizontal,hideLabel:!0}],Ft&&Ei&&["Button","flip-vertical",{onclick:El,label:kn.shapeTitleButtonFlipVertical,icon:kn.shapeIconButtonFlipVertical,hideLabel:!0}],_t&&["Button","to-front",{onclick:$u,label:kn.shapeTitleButtonMoveToFront,icon:kn.shapeIconButtonMoveToFront,hideLabel:!0,disabled:ie[ie.length-1]===K}],Lt&&["Button","duplicate",{onclick:yu,label:kn.shapeTitleButtonDuplicate,icon:kn.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],bt&&["Button","remove",{onclick:Ll,label:kn.shapeTitleButtonRemove,icon:kn.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],rt&&Ht&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:Ms,label:Yr(fc,kn,r),icon:Yr(gc,kn,r),hideLabel:!0}]]],rt&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:kn.shapeLabelInputText,onclick:Do}]]]].filter(Boolean),u)):[]),64&t.$$.dirty[0]|1073741824&t.$$.dirty[5]&&n(21,yt=ie.filter(Ea).filter(L=>L.id).filter(L=>!ho(L)).map(L=>({id:L.id,color:ir(L)?L.color:dr(L)?L.strokeColor:L.backgroundColor,name:L.name||kn["shapeLabelTool"+G2(a4(L))]})))},[wt,re,Ue,He,Ce,qn,kn,Ti,er,Ps,u,ut,M,d,$,S,B,y,V,il,os,yt,we,le,te,xt,it,Ct,b,O,v,gi,Ai,x=>{const{origin:U}=x.detail,L=ti&&Le.includes(16);ko=void 0,n(143,ye=void 0),ei=void 0,Cn=void 0,So=!1,xn=void 0,Ca=!1,so(),clearTimeout(Dn),Dn=setTimeout(()=>n(144,Ji=!0),250);const tt=qi();if(!tt||Gi(tt)&&Ee(tt,"pathClose")||wi(),xe=ae(We(U)),tt&&Gi(tt)&&Ee(tt,"pathClose"))return me(x);const st=nn(ie,xe,zn,Nt=>Ea(Nt)),Rt=st.length&&st.shift();if(r&&hs(r)&&(Wr(),$i&&(Ca=!0)),!Rt&&r&&hs(r)&&ji(r),!!An(U)){if(Rt&&La(Rt))return So=!0,n(143,ye=Rt),a?(L&&ji(Rt),void zo(o)):(ei=Di(ye),void(Cn=Vi(Di(ye),Jt)));if(xn=Rt||void 0,!me(x)&&Rt){if(Ti(Rt,!0,L),n(143,ye=Rt),a)return zo(o);ei=Di(ye),Cn=Vi(Di(ye),Jt)}}},x=>{is(),rn(x)},x=>{const{translation:U,ctrlKey:L,metaKey:tt,shiftKey:st,position:Rt}=x.detail;if(ye){if(!Cl(ye)||hs(ye))return;if(st){let Xt=Math.abs(U.x),Ut=Math.abs(U.y);Si==="x"&&(Ut-=64),Si==="y"&&(Xt-=64),Xt>Ut?(U.y=0,Si="x"):Ut>Xt&&(U.x=0,Si="y")}else Si=null;const Nt=L||tt;return ko?o.every(Cl)?void ko.forEach(({shape:Xt,shapeOriginComputed:Ut})=>{lo(Xt,Ut,U,{...ao(0,Rr,i,Xt)})}):void 0:lo(ye,Cn,U,{...ao(Nt?0:yi,Rr,i,ye)})}It(x)},x=>{if(is(),ye){if(a)return;if(hs(ye)&&zr(),x.detail.isTap&&Gi(ye)&&b2(ye)){const{position:U}=x.detail,L=ae(We(U));return void((tt,st)=>{const Rt=tt.points,Nt=[];for(let Kt=0;Kt<Rt.length-1;Kt++)Nt.push([Rt[Kt],Rt[Kt+1]]);Nt.push([Rt[Rt.length-1],Rt[0]]);const Xt=Nt.findIndex(([Kt,Qt])=>Gd(st,6,Kt,Qt));let Ut;const Yt=[];for(let Kt=0;Kt<Nt.length;Kt++)Yt.push(Nt[Kt][0]),Kt===Xt&&(Ut=Kt+1,Yt.push(st));ci(tt,{points:Yt,selectedPoint:Ut})})(ye,L)}x.detail.isTap&&So&&ir(ye)&&Yl(ye)!==!1&&Lr(ye)}else Oe(x)},x=>{const U=xn&&x.detail.isTap,L=ti&&Le.includes(16);if(x.detail.isTap&&setTimeout(()=>{Fe({target:ye||xn,position:xe},0)}),ye)return oe(ye),tt=ye,st=ei,JSON.stringify(tt)!==JSON.stringify(st)&&jt(ye),void n(143,ye=void 0);var tt,st;let Rt=!0;if(!L){const Nt=po();Rt=!Nt||Ri(Nt,xn||void 0),Rt&&wr({storePrevious:!1})}cn(x),Rt&&U&&Ti(xn,!0,L)},qo,x=>{n(144,Ji=!0),n(143,ye=r),Cn=d},x=>{if(!ye)return void n(144,Ji=!1);const{translation:U,indexes:L,shiftKey:tt,ctrlKey:st,metaKey:Rt,isNudge:Nt}=x.detail;((Xt,Ut,Yt,Kt,Qt)=>{const{shiftKey:an,snapThreshold:ge=0,gridSize:ne=0,gridRect:Pe,snapTargets:Te=[]}=Qt||{},tn=ge?(sn,Tn,fn)=>{const{snapTranslation:_n,snapLines:xi}=sr(Er(sn),Te,ge,ne,Pe);xo(Tn,_n),Qr(xi);const Jn=Ki(fn(),Tn);sn.x=Jn.x,sn.y=Jn.y}:pe;if(dr(Xt)||Gi(Xt)&&Ee(Xt,"pathClose")){const[sn]=Yt,Tn=an?Xi:(Un,ki)=>ki;let fn,_n,xi;if(dr(Xt))sn===0?(fn=()=>ms(Ut),_n=Un=>Tn(gs(Ut),Un),xi=(Un,ki)=>{Un.x1=ki.x,Un.y1=ki.y}):sn===1&&(fn=()=>gs(Ut),_n=Un=>Tn(ms(Ut),Un),xi=(Un,ki)=>{Un.x2=ki.x,Un.y2=ki.y});else{const Un=Ut.points;fn=()=>({...Un[sn]}),_n=ki=>{const oi=Un[np(sn-1,Un)],nr=Un[np(sn+1,Un)];Tn(oi,ki),Tn(nr,ki)},xi=(ki,oi)=>ki.points=ki.points.map((nr,hi)=>sn===hi?oi:nr)}const Jn=Ki(fn(),Kt);tn(Jn,Kt,fn),_n(Jn),xi(Xt,Jn)}else if(wl(Xt)||rr(Xt)||Bd(Xt)){let sn,Tn,fn=!1;if(rr(Xt))sn=Fd(Ut);else if(wl(Xt))sn=Ds(Ut);else{fn=!0,sn=Ds(Ut);const oi=ea(Ut.text,Ut);sn.height=oi.height}Xt.aspectRatio?Tn=Xt.aspectRatio:Qt.shiftKey&&!fn&&(Tn=sn.width/sn.height);const _n=Ds(sn),xi=Fn(_n),Jn=Xt.rotation,Un=Wo(_n),ki=kr(_n,Jn);if(Yt.length===1){let oi=Yt[0];Xt.flipX&&(oi=Ar[oi]),Xt.flipY&&(oi=vr[oi]);const[nr,hi,Nr,io]=Un,ro=se(ki[oi]),Pa=Wi({...ro},Kt),as=ae(Pa);tn(as,Kt,()=>ae(ro));const rl=ot(as.x-ki[oi].x,as.y-ki[oi].y),ss=Gr(We(rl),-Jn),Za=ot(Un[oi].x+ss.x,Un[oi].y+ss.y);let sa;oi===0&&(sa=Nr),oi===1&&(sa=io),oi===2&&(sa=nr),oi===3&&(sa=hi);const Jo=or([sa,Za]);if(Tn){const{width:Xa,height:Rs}=oo(Jo,Tn),[ol,Bo,Oo,xr]=Pl(Jo);Jo.width=Xa,Jo.height=Rs,Za.y<sa.y&&(Jo.y=Oo-Rs),Za.x<sa.x&&(Jo.x=Bo-Xa)}const Is=kr(Jo,Jn,xi),To=ia(Is),ls=Gr(Is[0],-Jn,To),la=Gr(Is[2],-Jn,To),ca=or([ls,la]);yr(Xt,rr(Xt)?Jm(ca):ca,Jt)}else{Yt=Yt.map(xr=>(Xt.flipX&&(xr=Ar[xr]),Xt.flipY&&(xr=vr[xr]),xr));const[oi,nr]=Yt.map(xr=>ki[xr]),hi={x:oi.x+.5*(nr.x-oi.x),y:oi.y+.5*(nr.y-oi.y)},[Nr,io]=Yt.map(xr=>Un[xr]),[ro,Pa]=Yt.map(xr=>{const lr=xr+2;return lr<4?Un[lr]:Un[lr-4]}),as={x:ro.x+.5*(Pa.x-ro.x),y:ro.y+.5*(Pa.y-ro.y)},rl=se(hi),ss=Wi({...rl},Kt),Za=ae(ss);tn(Za,Kt,()=>ae(rl));const sa=ot(Za.x-hi.x,Za.y-hi.y),Jo=Gr(We(sa),-Jn),Is=Ni(We(Nr),io),To=Uo(Is,xr=>1-Math.abs(Math.sign(xr))),ls=ot(Jo.x*To.x,Jo.y*To.y);Wi(Nr,ls),Wi(io,ls);const la=or(Un);if(Tn){let xr=la.width,lr=la.height;To.y===0?lr=xr/Tn:xr=lr*Tn,la.width=xr,la.height=lr,To.y===0?la.y=as.y-.5*lr:la.x=as.x-.5*xr}const ca=kr(la,Jn,xi),Xa=ia(ca),Rs=Gr(ca[0],-Jn,Xa),ol=Gr(ca[2],-Jn,Xa),Bo=or([Rs,ol]);let Oo;rr(Xt)?Oo=Jm(Bo):wl(Xt)?Oo=Bo:fn&&(Oo={x:Bo.x,y:Bo.y,width:Bo.width}),yr(Xt,Oo,Jt)}}li()})(ye,Cn,L,U,{shiftKey:!Nt&&tt,...ao(st||Rt?0:yi,Rr,i,ye)}),j1(ye)&&Vo(U)>16&&ci(ye,{selectedPoint:void 0})},x=>{if(!ye)return void n(144,Ji=!1);Ti(ye);const{isTap:U,translation:L,indexes:tt}=x.detail;U&&(j1(ye)&&ci(ye,{selectedPoint:ye.selectedPoint===tt[0]?void 0:tt[0]}),oe(ye)),n(143,ye=void 0),n(144,Ji=!1),jt(r)},x=>{to=Ko(d).origin,n(144,Ji=!0),n(143,ye=r),Cn=d},x=>{if(!ye)return void n(144,Ji=!1);const{translation:U,shiftKey:L}=x.detail;((tt,st,Rt,Nt)=>{const Xt=bn(Vi(Di(tt),Jt)),Ut=Fn(Xt),Yt=Ki(to,Rt);let Kt=md(Yt,Ut)+Math.PI/2;if(Nt.shiftKey){const Qt=Math.PI/16;Kt=Qt*Math.round(Kt/Qt)-en%Qt}yr(tt,{rotation:Kt},Jt),li()})(ye,0,U,{shiftKey:L})},()=>{ye?(Ti(ye),n(143,ye=void 0),n(144,Ji=!1),jt(r)):n(144,Ji=!1)},x=>{const{key:U}=x,L=/escape/i.test(U);if(Ui())return L?(x.preventDefault(),x.stopPropagation(),ji(r)):void(Lt&&U==="d"&&(x.metaKey||x.ctrlKey)&&(x.preventDefault(),x.stopPropagation(),Fl()))},x=>{const U=Yl(r,x);return U===!0?x:U},br,x=>{const{target:U,key:L}=x,tt=U.value||U.innerText,st=U.selectionStart||0,Rt=U.selectionEnd||tt.length,Nt=tt.substring(0,st)+L+tt.substring(Rt);if(Yl(r,Nt)!==Nt)return x.preventDefault()},x=>Yd(r)&&/enter/i.test(x.code)&&r.disableNewline!==!1?x.preventDefault():/arrow/i.test(x.code)?x.stopPropagation():/escape/i.test(x.key)?zr():void 0,x=>{const{key:U,ctrlKey:L,altKey:tt}=x;if(/enter/i.test(U)&&(L||tt))return Wr()},Wr,zr,Ma,x=>{const U=Xo();U&&(U.find(hs)||U.find(L=>!Cl(L))||U.forEach(L=>{n(143,ye=L),Cn=Vi(Di(ye),Jt),lo(ye,Cn,x.detail)}))},x=>{n(19,il=!0)},({relatedTarget:x})=>{x&&x.classList.contains("shape-selector__button")||n(19,il=!1)},x=>{if(x.pointerType==="touch"||x.target.className!=="PinturaShapeEditor")return void be();(Ji||Dn)&&Dl(void 0);const U=jh(x,He);n(146,rs=We(U));const L=Uo(ae(U),st=>Math.round(st));if(Bs(L,zl)||(zl=We(L),Je(Ji,U,L),Ji||Dn)||p)return;const[tt]=nn(ie,L,0,Ea);tt&&ho(tt)||Dl(tt)},x=>{x.pointerType!=="touch"&&be()},Be,mn,on,en,ke,qe,vn,In,Hn,Jt,Y,Pt,H,Bt,ue,me,It,Oe,cn,rn,J,jt,Ae,Se,X,oe,Zt,ee,Je,Fe,be,di,Ri,Wn,_e,Ve,wn,An,ae,se,Rn,zn,Ei,$i,ti,yi,$r,Jr,Rr,Yi,Ke,Ro,pi,yo,_r,Wa,(x,U={})=>{let L,tt,st,Rt=rr(x),Nt=ir(x),Xt=U.position==="relative";const Ut=tr(),Yt=ge=>{if(!yi)return ge;const ne=ae(ge),{snapTranslation:Pe,snapLines:Te}=sr(Er(ne),Ut,yi,Rr,i);return xo(ge,Pe),Qr(Te),ge},Kt=!!po(),Qt=U.isSelection?on:re,an=U.inputMode==="step";if(Gi(x)){if(an){let ge=!1;const ne=(Pe,Te)=>{const tn=Ke(Qt),sn=Pe&&ot(Ed(Pe.x,Jt.width),Ed(Pe.y,Jt.height)),Tn=sn&&se(sn);Le.includes(16)&&Tn&&Xi(Tn,Te);const fn=ae(Te),_n=tn.points.length?tn.points[0]:fn,xi=ot(Ed(_n.x,Jt.width),Ed(_n.y,Jt.height)),Jn=se(xi),Un=Vo(Jn,Te);if(!ge&&tn.points.length===1&&Un<36)return pi(Qt);if(tn.points.length>2&&Un<=256){tn.pathClose=!0,Ea(tn)&&Ti(tn);const nr=yo(Qt);return void J(nr)}const ki=tn.strokeWidth&&tn.strokeColor&&(tn.strokeColor[3]===void 0||tn.strokeColor[3]>0),oi=Vo(Tn,Te);if(ki&&tn.points.length>1&&oi<256){tn.pathClose=!1,tn.backgroundColor=[0,0,0,0],Ea(tn)&&Ti(tn);const nr=yo(Qt);J(nr)}else if(!(tn.points.length>0&&oi<100))return Xt?Hc(fn,Jt):fn};return{start:Pe=>{const Te=Ke(Qt),{origin:tn}=Pe.detail;if(tt=4,L=Yt(We(tn)),st=We(L),Te){const sn=Te.points[Te.points.length-1],Tn=ne(sn,L);return Tn&&(Te.points=[...Te.points,Tn]),void _r({points:Te.points},Qt)}ge=!0},update:Pe=>{if(!ge)return;const Te=Ke(Qt);if(!Te)return;const tn=Te.points[0],sn=ne(tn,ot(L.x+Pe.detail.translation.x,L.y+Pe.detail.translation.y));sn&&(Te.points[1]=sn,_r({points:Te.points},Qt))},release:Pe=>Pe.detail.preventInertia(),cancel:()=>{pi(Qt)},end:Pe=>{if(!ge)return;const Te=ae(L),tn=Xt?Hc(Te,Jt):Te,{isTap:sn}=Pe.detail;if(sn&&nn(ie,Te,0,Ea).length)return pi(Qt);Ro({...x,points:[tn]},Qt)}}}return{start:ge=>{const{origin:ne}=ge.detail;tt=4,L=We(ne),st=We(L);const Pe=ae(L),Te=Xt?Hc(Pe,Jt):Pe;Ro({...x,points:[Te]},Qt)},update:ge=>{const ne=Ke(Qt);if(!ne)return;const{translation:Pe}=ge.detail,Te=ot(L.x+Pe.x,L.y+Pe.y),tn=Po(st,Te);if(un(tn,5)<=tt)return;const sn=md(Te,st),Tn=tt-tn;st.x+=Tn*Math.cos(sn),st.y+=Tn*Math.sin(sn);const fn=ae(st),_n=Xt?Hc(fn,Jt):fn;_r({points:ne.points.concat(_n)},Qt)},release:ge=>ge.detail.preventInertia(),cancel:()=>{pi(Qt)},end:ge=>{const ne=Ke(Qt);if(!ne)return;if(ge.detail.isTap){let Te=!1;if(ne.bitmap?(xn&&(Te=!0),Kt&&(Te=!0)):Te=!0,Te)return pi(Qt)}const Pe=yo(Qt);J(Pe)}}}return Rt||Nt||No(x)?{start:ge=>{const{origin:ne}=ge.detail;L=Yt(We(ne));const Pe=ae(L),Te=Xt?Hc(Pe,Jt):Pe,tn=-1*Eo(en,ke,qe),sn={...x,rotation:tn,...Te};sn.flipX=ke,sn.flipY=qe,delete sn.position,sn.opacity=0,(Rt?["rx","ry"]:["width","height"]).forEach(Tn=>{sn[Tn]=Xt?"0%":0}),Ro(sn,Qt)},update:ge=>{const ne=Ke(Qt);if(!ne)return;ne.opacity=1;let{aspectRatio:Pe}=ne,{translation:Te,shiftKey:tn,ctrlKey:sn}=ge.detail;!Pe&&tn&&(Pe=1);const Tn=Yt(ot(L.x+Te.x,L.y+Te.y)),fn=ae(L),_n=ae(Tn);if(Pe){const Nr=or([fn,_n]),io=oo(Nr,Pe),ro=_n.x<fn.x?-1:1,Pa=_n.y<fn.y?-1:1;_n.x=fn.x+io.width*ro,_n.y=fn.y+io.height*Pa}const xi={x:fn.x+.5*(_n.x-fn.x),y:fn.y+.5*(_n.y-fn.y)},Jn=Eo(en,ke,qe);Gr(fn,Jn,xi),Gr(_n,Jn,xi);const Un=Math.min(fn.x,_n.x),ki=Math.min(fn.y,_n.y);let oi=Math.max(fn.x,_n.x)-Un,nr=Math.max(fn.y,_n.y)-ki,hi={};Rt?(sn?(hi.x=fn.x,hi.y=fn.y):(hi.x=Un+.5*oi,hi.y=ki+.5*nr),hi.rx=.5*oi,hi.ry=.5*nr):(sn?(hi.x=fn.x-.5*oi,hi.y=fn.y-.5*nr):(hi.x=Un,hi.y=ki),hi.width=oi,hi.height=nr),_r(hi,Qt,(Nr,io)=>yr(Nr,io,Jt))},release:ge=>{ge.detail.preventInertia()},cancel:()=>{pi(Qt)},end:ge=>{const ne=Ke(Qt);if(ne){if(ge.detail.isTap){if(ir(ne)&&$i&&Ca||!ir(ne)||!$i||xn)return pi(Qt);delete ne.width,delete ne.height,ne.disableNewline!==!1&&delete ne.textAlign;const Pe=Vi({...ne},Jt),Te=ea(ne.text,Pe),tn=ae({x:L.x,y:L.y-.5*Te.height}),sn=ae({x:L.x+Te.width,y:L.y+.5*Te.height}),Tn={x:tn.x+.5*(sn.x-tn.x),y:tn.y+.5*(sn.y-tn.y)},fn=Eo(en,ke,qe);Gr(tn,fn,Tn),Gr(sn,fn,Tn);let _n=Math.min(tn.x,sn.x),xi=Math.min(tn.y,sn.y);_n<0&&(_n=0),xi<0&&(xi=0),_n+Te.width>Jt.width&&(_n=Jt.width-Te.width),xi+Te.height>Jt.height&&(xi=Jt.height-Te.height),ne.x=Ne(ne.x)?Hr(_n,Jt.width):_n,ne.y=Ne(ne.y)?Hr(xi,Jt.height):xi}if(ne.opacity=1,ir(ne))J(ne);else{const Pe=yo(Qt);J(Pe)}Ea(ne)&&Ti(ne),ir(ne)&&Lr(ne)}}}:dr(x)?{start:ge=>{const{origin:ne}=ge.detail,Pe=ae(Yt(ne)),Te=Uo(Pe,lu);L=We(ne),Ro({...x,x1:Xt?Hr(Te.x,Jt.width):Te.x,y1:Xt?Hr(Te.y,Jt.height):Te.y,x2:Xt?Hr(Te.x,Jt.width):Te.x,y2:Xt?Hr(Te.y,Jt.height):Te.y,opacity:0},Qt)},update:ge=>{if(!Ke(Qt))return;const{translation:ne}=ge.detail,Pe=Yt(Wi(We(L),ne));if(Le.includes(16)){const tn=Po(L,Pe),sn=md(L,Pe),Tn=Math.PI/4,fn=Tn*Math.round(sn/Tn);Pe.x=L.x+tn*Math.cos(fn),Pe.y=L.y+tn*Math.sin(fn)}const Te=ae(Pe);_r({x2:Xt?Hr(Te.x,Jt.width):Te.x,y2:Xt?Hr(Te.y,Jt.height):Te.y,opacity:1},Qt)},release:ge=>ge.detail.preventInertia(),cancel:()=>{pi(Qt)},end:ge=>{const ne=Ke(Qt);if(!ne)return;if(ge.detail.isTap)return pi(Qt);ne.opacity=1;const Pe=yo(Qt);J(Pe),Ea(ne)&&Ti(Pe)}}:void 0},()=>{let x,U;const L=Rn*Rn,tt=(st,Rt,Nt=!1)=>{const Xt=Vo(st,Rt);if(!Nt&&Xt<2)return!1;const Ut=ie.filter(Kt=>!Kt.disableErase);let Yt;return Yt=Xt<L?nn(ie,ae(Rt),Rn):de(Ut,ae(st),ae(Rt),Rn),_(Yt).forEach(X),!0};return{start:st=>{x=ot(Math.round(st.detail.origin.x),Math.round(st.detail.origin.y)),tt(x,x,!0),U=x},update:st=>{const{translation:Rt}=st.detail,Nt=ot(Math.round(x.x+Rt.x),Math.round(x.y+Rt.y));tt(U,Nt)&&(U=We(Nt))},release:st=>st.detail.preventInertia(),cancel:()=>{pi(collection)},end:()=>{}}},qi,On,x=>{if(!qi())return Sh(x),Wa(x)},wi,vo,(x={})=>({id:ya(),...x}),li,co,ci,uo,(x,U,L=!0)=>{ie.forEach(tt=>uo(tt,x,U,!1)),L&&li()},wo,Xo,_i,Ui,wr,ji,Lr,no,_,ce,bn,nn,de,Ao,bo,ye,Ji,Ge,rs,p,rt,r,Ht,bt,Lt,K,_t,Ft,Tt,C,Wt,Vt,$t,at,D,mt,a,o,Z,c,ft,lt,q,j,N,i,W,nt,k,f,R,P,h,l,w,g,s,ie,De,Le,qt,function(x){Kr.call(this,t,x)},x=>Ti(re[x]),function(x){jn[x?"unshift":"push"](()=>{er=x,n(8,er)})},function(){xt=this.value,n(25,xt),n(11,ut),n(149,r),n(171,j),n(0,wt),n(185,ie)},function(x){jn[x?"unshift":"push"](()=>{er=x,n(8,er)})},()=>{os&&os.focus()},x=>n(9,Ps=x.detail),function(x){jn[x?"unshift":"push"](()=>{os=x,n(20,os)})},x=>jh(x,He)]}class f8 extends pn{constructor(e){super(),dn(this,e,g8,m8,ln,{uid:59,ui:60,disabled:0,shapes:1,selection:61,offset:2,contextRotation:62,contextFlipX:63,contextFlipY:64,contextZoom:65,active:66,opacity:67,parentRect:68,rootRect:3,utilRect:69,hoverColor:70,caretColor:71,gridColor:72,snapColor:73,textInputMode:4,oninteractionstart:74,oninteractionupdate:75,oninteractionrelease:76,oninteractionend:77,oninteractioncancel:78,onaddshape:79,onupdateshape:80,onselectshape:81,onblurshape:82,onremoveshape:83,ontapshape:84,onhovershape:85,ontriggerhistorywrite:86,onhovercanvas:87,ontapcanvas:88,onleavecanvas:89,beforeSelectShape:90,beforeDeselectShape:91,beforeRemoveShape:92,beforeUpdateShape:93,willRenderShapeControls:94,willRenderShapeTextControls:95,willStartInteraction:96,mapEditorPointToImagePoint:97,mapImagePointToEditorPoint:98,eraseRadius:99,selectRadius:100,enableButtonFlipVertical:101,enableTapToAddText:102,enableMultiSelect:103,enableTextStyleControls:5,locale:6,snapThreshold:104,snapPointer:105,enableSnapToContext:106,gridSize:107,syncShapeCollection:108,getShapeDraft:109,addShapeDraft:110,discardShapeDraft:111,confirmShapeDraft:112,updateShapeDraft:113,addShape:114,createShape:115,eraseShape:116,getMarkupItemDraft:117,getMarkupItemDraftIndex:118,addMarkupItemDraft:119,confirmMarkupItemDraft:120,discardMarkupItemDraft:121,createMarkupItem:122,syncShapes:123,removeMarkupShapeProps:124,updateMarkupShape:125,updateMarkupShapeProperty:126,updateMarkupItemsShapeProperty:127,updateMarkupShapeItems:128,getActiveMarkupItems:129,getActiveMarkupItem:130,hasActiveMarkupItem:131,blurShapes:132,selectShape:7,deselectMarkupItem:133,editMarkupItem:134,finishEditMarkupItem:135,removeMarkupItems:136,getTextShapeRect:137,getMarkupShapeRect:138,getShapesNearPosition:139,getShapesBetweenPoints:140},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[108]}get getShapeDraft(){return this.$$.ctx[109]}get addShapeDraft(){return this.$$.ctx[110]}get discardShapeDraft(){return this.$$.ctx[111]}get confirmShapeDraft(){return this.$$.ctx[112]}get updateShapeDraft(){return this.$$.ctx[113]}get addShape(){return this.$$.ctx[114]}get createShape(){return this.$$.ctx[115]}get eraseShape(){return this.$$.ctx[116]}get getMarkupItemDraft(){return this.$$.ctx[117]}get getMarkupItemDraftIndex(){return this.$$.ctx[118]}get addMarkupItemDraft(){return this.$$.ctx[119]}get confirmMarkupItemDraft(){return this.$$.ctx[120]}get discardMarkupItemDraft(){return this.$$.ctx[121]}get createMarkupItem(){return this.$$.ctx[122]}get syncShapes(){return this.$$.ctx[123]}get removeMarkupShapeProps(){return this.$$.ctx[124]}get updateMarkupShape(){return this.$$.ctx[125]}get updateMarkupShapeProperty(){return this.$$.ctx[126]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[127]}get updateMarkupShapeItems(){return this.$$.ctx[128]}get getActiveMarkupItems(){return this.$$.ctx[129]}get getActiveMarkupItem(){return this.$$.ctx[130]}get hasActiveMarkupItem(){return this.$$.ctx[131]}get blurShapes(){return this.$$.ctx[132]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[133]}get editMarkupItem(){return this.$$.ctx[134]}get finishEditMarkupItem(){return this.$$.ctx[135]}get removeMarkupItems(){return this.$$.ctx[136]}get getTextShapeRect(){return this.$$.ctx[137]}get getMarkupShapeRect(){return this.$$.ctx[138]}get getShapesNearPosition(){return this.$$.ctx[139]}get getShapesBetweenPoints(){return this.$$.ctx[140]}}function $8(t){let e,n,i;return n=new qr({props:{items:t[2]}}),{c(){e=dt("ul"),Ot(n.$$.fragment),T(e,"class","PinturaShapeStyleList")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};4&o&&(a.items=r[2]),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function y8(t){let e,n;return e=new Va({props:{class:"PinturaShapeStyles",elasticity:t[0],$$slots:{default:[b8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1&r&&(o.elasticity=i[0]),524292&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function b8(t){let e,n,i;return n=new qr({props:{items:t[2]}}),{c(){e=dt("ul"),Ot(n.$$.fragment),T(e,"class","PinturaShapeStyleList")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};4&o&&(a.items=r[2]),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function x8(t){let e,n,i,r;const o=[y8,$8],a=[];function s(l,c){return l[1]?0:1}return n=s(t),i=a[n]=o[n](t),{c(){e=dt("div"),i.c(),Et(e,"opacity",t[5]),Et(e,"pointer-events",t[4]),Et(e,"visibility",t[3])},m(l,c){et(l,e,c),a[n].m(e,null),r=!0},p(l,[c]){let u=n;n=s(l),n===u?a[n].p(l,c):(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re(),i=a[n],i?i.p(l,c):(i=a[n]=o[n](l),i.c()),I(i,1),i.m(e,null)),32&c&&Et(e,"opacity",l[5]),16&c&&Et(e,"pointer-events",l[4]),8&c&&Et(e,"visibility",l[3])},i(l){r||(I(i),r=!0)},o(l){z(i),r=!1},d(l){l&&Q(e),a[n].d()}}}function v8(t,e,n){let i,r,o,a,s,l,c,u,{isActive:d=!1}=e,{controls:p=[]}=e,{locale:h}=e,{scrollElasticity:f}=e,{scrollEnable:g=!0}=e,{hideTitles:$=!1}=e,{willRenderControls:y=ri}=e;const v=mi("redrawTrigger");F(t,v,M=>n(16,l=M));const w=mi("env");F(t,w,M=>n(15,s=M));const S=mi("isAnimated");F(t,S,M=>n(18,u=M));const R=hn(0,{stiffness:.25,damping:.9});return F(t,R,M=>n(17,c=M)),t.$$set=M=>{"isActive"in M&&n(10,d=M.isActive),"controls"in M&&n(11,p=M.controls),"locale"in M&&n(12,h=M.locale),"scrollElasticity"in M&&n(0,f=M.scrollElasticity),"scrollEnable"in M&&n(1,g=M.scrollEnable),"hideTitles"in M&&n(13,$=M.hideTitles),"willRenderControls"in M&&n(14,y=M.willRenderControls)},t.$$.update=()=>{263168&t.$$.dirty&&R.set(d?1:0,{hard:u===!1}),131072&t.$$.dirty&&n(5,i=c),1024&t.$$.dirty&&n(4,r=d?"auto":"none"),131072&t.$$.dirty&&n(3,o=c<=0?"hidden":"visible"),129024&t.$$.dirty&&n(2,a=l&&y(p.map(M=>["ShapeStyle",M.id,{title:M.componentProps.title,locale:h,hideTitle:$,items:[[M.component,M.id,M.componentProps]]}]),s,()=>v.set({})))},[f,g,a,o,r,i,v,w,S,R,d,p,h,$,y,s,l,c,u]}class w8 extends pn{constructor(e){super(),dn(this,e,v8,x8,ln,{isActive:10,controls:11,locale:12,scrollElasticity:0,scrollEnable:1,hideTitles:13,willRenderControls:14})}}function dy(t,e,n){const i=t.slice();return i[15]=e[n].key,i[6]=e[n].controls,i[16]=e[n].isActive,i}function py(t,e){let n,i,r;return i=new w8({props:{isActive:e[16],controls:e[6],locale:e[1],scrollElasticity:e[2],scrollEnable:e[3],hideTitles:e[4],willRenderControls:e[5]}}),{key:t,first:null,c(){n=Ii(),Ot(i.$$.fragment),this.first=n},m(o,a){et(o,n,a),zt(i,o,a),r=!0},p(o,a){e=o;const s={};128&a&&(s.isActive=e[16]),128&a&&(s.controls=e[6]),2&a&&(s.locale=e[1]),4&a&&(s.scrollElasticity=e[2]),8&a&&(s.scrollEnable=e[3]),16&a&&(s.hideTitles=e[4]),32&a&&(s.willRenderControls=e[5]),i.$set(s)},i(o){r||(I(i.$$.fragment,o),r=!0)},o(o){z(i.$$.fragment,o),r=!1},d(o){o&&Q(n),Dt(i,o)}}}function S8(t){let e,n,i,r=[],o=new Map,a=t[7];const s=l=>l[15];for(let l=0;l<a.length;l+=1){let c=dy(t,a,l),u=s(c);o.set(u,r[l]=py(u,c))}return{c(){e=dt("div");for(let l=0;l<r.length;l+=1)r[l].c();T(e,"class",n=yn(["PinturaShapeStyleEditor",!t[3]&&"PinturaShapeStyleEditorOverflow",t[0]]))},m(l,c){et(l,e,c);for(let u=0;u<r.length;u+=1)r[u].m(e,null);i=!0},p(l,[c]){190&c&&(a=l[7],Ie(),r=ns(r,c,s,1,l,a,o,e,Js,py,null,dy),Re()),(!i||9&c&&n!==(n=yn(["PinturaShapeStyleEditor",!l[3]&&"PinturaShapeStyleEditorOverflow",l[0]])))&&T(e,"class",n)},i(l){if(!i){for(let c=0;c<a.length;c+=1)I(r[c]);i=!0}},o(l){for(let c=0;c<r.length;c+=1)z(r[c]);i=!1},d(l){l&&Q(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function k8(t,e,n){let i,r,o,{class:a}=e,{controls:s={}}=e,{shapeProps:l}=e,{onchange:c}=e,{locale:u}=e,{scrollElasticity:d}=e,{scrollEnable:p=!0}=e,{hideTitles:h=!1}=e,{willRenderControls:f}=e;const g=[];return t.$$set=$=>{"class"in $&&n(0,a=$.class),"controls"in $&&n(6,s=$.controls),"shapeProps"in $&&n(8,l=$.shapeProps),"onchange"in $&&n(9,c=$.onchange),"locale"in $&&n(1,u=$.locale),"scrollElasticity"in $&&n(2,d=$.scrollElasticity),"scrollEnable"in $&&n(3,p=$.scrollEnable),"hideTitles"in $&&n(4,h=$.hideTitles),"willRenderControls"in $&&n(5,f=$.willRenderControls)},t.$$.update=()=>{64&t.$$.dirty&&n(11,i=Object.keys(s).filter($=>s[$])),2304&t.$$.dirty&&n(10,r=l&&Object.keys(l).length&&i&&kh(l)?($=>i.filter(y=>y.split("_").every(v=>Ee($,v)&&kh($,v))).map(y=>{const v=($.settings&&$.settings[y]||{}).control||y,w=y.split("_"),S=w.length>1?w.map(C=>$[C]):$[y];if(Yn(s[v])){const{title:C,component:D}=s[v](S,O=>{c({[y]:O})},{selectedShapeId:$.id});return{id:v,component:qr,componentProps:{title:C,items:D}}}let[R,M]=s[v];if(Ne(R)&&s[R]){const C={...M};[R,M]=s[R],M={...M,...C}}const B=Yn(M.options)?M.options($):M.options;return R==="RadioGroup"&&(M.selectedIndex=-1),{id:v,component:R,componentProps:{...M,options:B,locale:u,value:S,optionLabelClass:"PinturaButtonLabel",onchange:C=>{const D=Ks(C)&&!Mi(C)?C.value:C;M.onchange&&M.onchange(D,$);const O=w.length>1?w.reduce((P,b,W)=>({...P,[b]:Array.isArray(D)?D[W]:D}),{}):{[y]:D};c(O)}}}}).filter(Boolean))(l):[]),1280&t.$$.dirty&&n(7,o=(($,y)=>{let v=g.find(w=>w.key===$);return v||(v={key:$,controls:y},g.push(v)),g.forEach(w=>w.isActive=!1),v.controls=y,v.isActive=!0,g})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",r||[]))},[a,u,d,p,h,f,s,o,l,c,r,i]}class gp extends pn{constructor(e){super(),dn(this,e,k8,S8,ln,{class:0,controls:6,shapeProps:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var Hb=t=>/<svg /.test(t);function C8(t){let e,n;return e=new qr({props:{items:t[10]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1024&r&&(o.items=i[10]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function T8(t){let e,n,i,r;const o=[P8,M8],a=[];function s(l,c){return l[8]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),i=Ii()},m(l,c){a[e].m(l,c),et(l,i,c),r=!0},p(l,c){let u=e;e=s(l),e===u?a[e].p(l,c):(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),I(n,1),n.m(i.parentNode,i))},i(l){r||(I(n),r=!0)},o(l){z(n),r=!1},d(l){a[e].d(l),l&&Q(i)}}}function M8(t){let e,n,i,r,o=t[10]&&hy(t);return i=new Va({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[I8]},$$scope:{ctx:t}}}),{c(){e=dt("div"),o&&o.c(),n=he(),Ot(i.$$.fragment),T(e,"class","PinturaShapePresetsFlat")},m(a,s){et(a,e,s),o&&o.m(e,null),St(e,n),zt(i,e,null),r=!0},p(a,s){a[10]?o?(o.p(a,s),1024&s&&I(o,1)):(o=hy(a),o.c(),I(o,1),o.m(e,n)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re());const l={};512&s&&(l.scrollAutoCancel=a[9]),1&s&&(l.elasticity=a[0]),536871070&s&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){r||(I(o),I(i.$$.fragment,a),r=!0)},o(a){z(o),z(i.$$.fragment,a),r=!1},d(a){a&&Q(e),o&&o.d(),Dt(i)}}}function P8(t){let e,n,i,r,o;n=new Va({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[A8]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]];let s={$$slots:{default:[F8,({panel:l,panelIsActive:c})=>({26:l,27:c}),({panel:l,panelIsActive:c})=>(l?67108864:0)|(c?134217728:0)]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Fi(s,a[l]);return r=new dp({props:s}),{c(){e=dt("div"),Ot(n.$$.fragment),i=he(),Ot(r.$$.fragment),T(e,"class","PinturaShapePresetsGrouped")},m(l,c){et(l,e,c),zt(n,e,null),St(e,i),zt(r,e,null),o=!0},p(l,c){const u={};1&c&&(u.elasticity=l[0]),536876128&c&&(u.$$scope={dirty:c,ctx:l}),n.$set(u);const d=6144&c?Pr(a,[a[0],a[1],2048&c&&{panels:l[11]},4096&c&&Or(l[12])]):{};738206239&c&&(d.$$scope={dirty:c,ctx:l}),r.$set(d)},i(l){o||(I(n.$$.fragment,l),I(r.$$.fragment,l),o=!0)},o(l){z(n.$$.fragment,l),z(r.$$.fragment,l),o=!1},d(l){l&&Q(e),Dt(n),Dt(r)}}}function hy(t){let e,n;return e=new qr({props:{items:t[10]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1024&r&&(o.items=i[10]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function I8(t){let e,n;return e=new I0({props:{items:t[7],onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};128&r&&(o.items=i[7]),2&r&&(o.onclickitem=i[1]),4&r&&(o.ongrabitem=i[2]),8&r&&(o.ondragitem=i[3]),16&r&&(o.ondropitem=i[4]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function my(t){let e,n;return e=new qr({props:{items:t[10]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1024&r&&(o.items=i[10]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function gy(t){let e,n;return e=new Ho({props:{$$slots:{default:[R8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};805306368&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function R8(t){let e,n=t[28].icon+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){268435456&r&&n!==(n=i[28].icon+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function fy(t){let e,n,i=t[28].label+"";return{c(){e=dt("span"),n=vi(i)},m(r,o){et(r,e,o),St(e,n)},p(r,o){268435456&o&&i!==(i=r[28].label+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function E8(t){let e,n,i,r=t[28].icon&&gy(t),o=!t[28].hideLabel&&fy(t);return{c(){r&&r.c(),e=he(),o&&o.c(),n=Ii()},m(a,s){r&&r.m(a,s),et(a,e,s),o&&o.m(a,s),et(a,n,s),i=!0},p(a,s){a[28].icon?r?(r.p(a,s),268435456&s&&I(r,1)):(r=gy(a),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[28].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=fy(a),o.c(),o.m(n.parentNode,n))},i(a){i||(I(r),i=!0)},o(a){z(r),i=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(n)}}}function A8(t){let e,n,i,r=t[10]&&my(t);const o=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}];let a={$$slots:{default:[E8,({tab:s})=>({28:s}),({tab:s})=>s?268435456:0]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Fi(a,o[s]);return n=new up({props:a}),n.$on("select",t[18]),{c(){r&&r.c(),e=he(),Ot(n.$$.fragment)},m(s,l){r&&r.m(s,l),et(s,e,l),zt(n,s,l),i=!0},p(s,l){s[10]?r?(r.p(s,l),1024&l&&I(r,1)):(r=my(s),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re());const c=4128&l?Pr(o,[o[0],32&l&&{tabs:s[5]},4096&l&&Or(s[12]),o[3]]):{};805306368&l&&(c.$$scope={dirty:l,ctx:s}),n.$set(c)},i(s){i||(I(r),I(n.$$.fragment,s),i=!0)},o(s){z(r),z(n.$$.fragment,s),i=!1},d(s){r&&r.d(s),s&&Q(e),Dt(n,s)}}}function L8(t){let e,n;return e=new I0({props:{items:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};67117056&r&&(o.items=i[13][i[26]].items),67117056&r&&(o.disabled=i[13][i[26]].disabled),2&r&&(o.onclickitem=i[1]),4&r&&(o.ongrabitem=i[2]),8&r&&(o.ondragitem=i[3]),16&r&&(o.ondropitem=i[4]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function F8(t){let e,n;return e=new Va({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[L8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};134217728&r&&(o.scroll=i[27]?{scrollOffset:0,animate:!1}:void 0),512&r&&(o.scrollAutoCancel=i[9]),1&r&&(o.elasticity=i[0]),603987998&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function z8(t){let e,n,i,r;const o=[T8,C8],a=[];function s(l,c){return l[9]?0:l[10]?1:-1}return~(n=s(t))&&(i=a[n]=o[n](t)),{c(){e=dt("div"),i&&i.c(),T(e,"class","PinturaShapePresetsPalette")},m(l,c){et(l,e,c),~n&&a[n].m(e,null),r=!0},p(l,[c]){let u=n;n=s(l),n===u?~n&&a[n].p(l,c):(i&&(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re()),~n?(i=a[n],i?i.p(l,c):(i=a[n]=o[n](l),i.c()),I(i,1),i.m(e,null)):i=null)},i(l){r||(I(i),r=!0)},o(l){z(i),r=!1},d(l){l&&Q(e),~n&&a[n].d()}}}function D8(t,e,n){let i,r,o,a,s,l,c,u,d,{locale:p}=e,{presets:h}=e,{scrollElasticity:f}=e,{enableSelectImage:g=!0}=e,{willRenderPresetToolbar:$=ri}=e,{onaddpreset:y=pe}=e,{ongrabpreset:v}=e,{ondragpreset:w}=e,{ondroppreset:S}=e;const R="presets-"+ya(),M=(O,P="")=>Hb(O)?O:Xd(O)?p2(O,P):`<img src="${O}" alt="${P}"/>`,B=O=>Zy(i0(O)),C=["src","alt","thumb","shape","id","mount","disabled"],D=O=>O.map(P=>(b=>Mi(b)&&Ne(b[0])&&Mi(b[1]))(P)?{...P[2],id:`${R}-${P[0].toLowerCase()}`,label:P[0],items:D(P[1])}:(b=>{let W,nt,k,N,j,ut,Z,ft=b;return Ne(b)?Xd(b)?(W=b,j=b,N=M(W,j)):(W=b,j=B(W),N=M(W,j)):(W=b.src,j=b.alt||(Ne(W)?B(W):Ne(b.thumb)?B(b.thumb):void 0),N=M(b.thumb||W,j),nt=b.shape,ut=b.mount,Z=b.disabled,k=Object.keys(b).reduce((q,ht)=>(C.includes(ht)||(q[ht]=b[ht]),q),{})),{id:ft,src:W,thumb:N,shape:nt,shapeProps:k,alt:j,title:j,mount:ut,disabled:Z}})(P));return t.$$set=O=>{"locale"in O&&n(14,p=O.locale),"presets"in O&&n(15,h=O.presets),"scrollElasticity"in O&&n(0,f=O.scrollElasticity),"enableSelectImage"in O&&n(16,g=O.enableSelectImage),"willRenderPresetToolbar"in O&&n(17,$=O.willRenderPresetToolbar),"onaddpreset"in O&&n(1,y=O.onaddpreset),"ongrabpreset"in O&&n(2,v=O.ongrabpreset),"ondragpreset"in O&&n(3,w=O.ondragpreset),"ondroppreset"in O&&n(4,S=O.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&n(7,i=D(h)),128&t.$$.dirty&&n(9,r=i.length),640&t.$$.dirty&&n(8,o=r&&i.some(O=>!!O.items)),384&t.$$.dirty&&n(5,a=o&&i),384&t.$$.dirty&&n(13,s=o&&i.reduce((O,P)=>(O[P.id]=P,O),{})),96&t.$$.dirty&&n(6,l=l||a&&(a.find(O=>!O.disabled)||{}).id),64&t.$$.dirty&&n(12,c={name:R,selected:l}),32&t.$$.dirty&&n(11,u=a&&a.map(O=>O.id)),212994&t.$$.dirty&&n(10,d=p&&$([g&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{Pb().then(O=>{O&&y(O)})}}]]))},[f,y,v,w,S,a,l,i,o,r,d,u,c,s,p,h,g,$,({detail:O})=>n(6,l=O)]}class Gb extends pn{constructor(e){super(),dn(this,e,D8,z8,ln,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function B8(t){let e,n,i,r;return e=new qr({props:{items:t[30]}}),i=new gp({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[165]}}),{c(){Ot(e.$$.fragment),n=he(),Ot(i.$$.fragment)},m(o,a){zt(e,o,a),et(o,n,a),zt(i,o,a),r=!0},p(o,a){const s={};1073741824&a[0]&&(s.items=o[30]),e.$set(s);const l={};16&a[0]&&(l.locale=o[4]),262144&a[1]&&(l.shapeProps=o[49]),512&a[0]&&(l.controls=o[9]),i.$set(l)},i(o){r||(I(e.$$.fragment,o),I(i.$$.fragment,o),r=!0)},o(o){z(e.$$.fragment,o),z(i.$$.fragment,o),r=!1},d(o){Dt(e,o),o&&Q(n),Dt(i,o)}}}function O8(t){let e,n,i;return n=new Nb({props:{$$slots:{default:[B8]},$$scope:{ctx:t}}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"slot","header")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};1073742352&o[0]|262144&o[1]|134217728&o[6]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function $y(t){let e,n;const i=[{locale:t[4]},{ui:t[69]},{shapes:t[5]},{selection:t[58]},{uid:t[20]},{parentRect:t[37]},{rootRect:t[55]},{utilRect:t[39]},{offset:t[50]},{disabled:t[38]},{contextRotation:t[23]},{contextFlipX:t[24]},{contextFlipY:t[25]},{contextZoom:t[36]?t[36].scale:void 0},{active:t[35]},{opacity:t[56]},{hoverColor:t[57]},{caretColor:t[57]},{snapColor:t[57]},{gridColor:[1,1,1,.125]},{eraseRadius:t[47]},{selectRadius:t[6]},{enableButtonFlipVertical:t[10]},{enableMultiSelect:t[14]},{mapEditorPointToImagePoint:t[21]},{mapImagePointToEditorPoint:t[22]},{enableTapToAddText:t[13]},{textInputMode:t[8]},{snapThreshold:t[16]},{snapPointer:!t[48]},{enableSnapToContext:t[17]},{gridSize:t[15]},{willStartInteraction:t[95]},{oninteractionstart:t[79]},{oninteractionupdate:t[80]},{oninteractionrelease:t[81]},{oninteractionend:t[83]},{oninteractioncancel:t[82]},{onleavecanvas:t[87]},{onhovercanvas:t[86]},{onhovershape:t[89]},{ontapcanvas:t[88]},{onaddshape:t[156]},{onselectshape:t[157]},{onblurshape:t[158]},{ontapshape:t[159]},{onupdateshape:t[160]},{onremoveshape:t[161]},{ontriggerhistorywrite:t[162]},t[42]];let r={};for(let o=0;o<i.length;o+=1)r=Fi(r,i[o]);return e=new f8({props:r}),t[163](e),{c(){Ot(e.$$.fragment)},m(o,a){zt(e,o,a),n=!0},p(o,a){const s=66315632&a[0]|252381681&a[1]|255721600&a[2]|12&a[3]?Pr(i,[16&a[0]&&{locale:o[4]},128&a[2]&&{ui:o[69]},32&a[0]&&{shapes:o[5]},134217728&a[1]&&{selection:o[58]},1048576&a[0]&&{uid:o[20]},64&a[1]&&{parentRect:o[37]},16777216&a[1]&&{rootRect:o[55]},256&a[1]&&{utilRect:o[39]},524288&a[1]&&{offset:o[50]},128&a[1]&&{disabled:o[38]},8388608&a[0]&&{contextRotation:o[23]},16777216&a[0]&&{contextFlipX:o[24]},33554432&a[0]&&{contextFlipY:o[25]},32&a[1]&&{contextZoom:o[36]?o[36].scale:void 0},16&a[1]&&{active:o[35]},33554432&a[1]&&{opacity:o[56]},67108864&a[1]&&{hoverColor:o[57]},67108864&a[1]&&{caretColor:o[57]},67108864&a[1]&&{snapColor:o[57]},i[19],65536&a[1]&&{eraseRadius:o[47]},64&a[0]&&{selectRadius:o[6]},1024&a[0]&&{enableButtonFlipVertical:o[10]},16384&a[0]&&{enableMultiSelect:o[14]},2097152&a[0]&&{mapEditorPointToImagePoint:o[21]},4194304&a[0]&&{mapImagePointToEditorPoint:o[22]},8192&a[0]&&{enableTapToAddText:o[13]},256&a[0]&&{textInputMode:o[8]},65536&a[0]&&{snapThreshold:o[16]},131072&a[1]&&{snapPointer:!o[48]},131072&a[0]&&{enableSnapToContext:o[17]},32768&a[0]&&{gridSize:o[15]},4&a[3]&&{willStartInteraction:o[95]},131072&a[2]&&{oninteractionstart:o[79]},262144&a[2]&&{oninteractionupdate:o[80]},524288&a[2]&&{oninteractionrelease:o[81]},2097152&a[2]&&{oninteractionend:o[83]},1048576&a[2]&&{oninteractioncancel:o[82]},33554432&a[2]&&{onleavecanvas:o[87]},16777216&a[2]&&{onhovercanvas:o[86]},134217728&a[2]&&{onhovershape:o[89]},67108864&a[2]&&{ontapcanvas:o[88]},1&a[1]|8&a[3]&&{onaddshape:o[156]},1&a[1]&&{onselectshape:o[157]},1&a[1]&&{onblurshape:o[158]},1&a[1]&&{ontapshape:o[159]},1&a[1]|8&a[3]&&{onupdateshape:o[160]},1&a[1]|8&a[3]&&{onremoveshape:o[161]},8&a[3]&&{ontriggerhistorywrite:o[162]},2048&a[1]&&Or(o[42])]):{};e.$set(s)},i(o){n||(I(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){t[163](null),Dt(e,o)}}}function _8(t){let e,n,i,r,o=t[51]&&$y(t);return{c(){e=dt("div"),o&&o.c(),T(e,"slot","main"),Et(e,"cursor",t[46])},m(a,s){et(a,e,s),o&&o.m(e,null),t[164](e),n=!0,i||(r=[At(e,"keydown",t[84]),Pn(db.call(null,e)),At(e,"dropfiles",function(){Mn(t[12]?t[94]:pe)&&(t[12]?t[94]:pe).apply(this,arguments)}),Pn(Ir.call(null,e)),At(e,"measure",t[152])],i=!0)},p(a,s){(t=a)[51]?o?(o.p(t,s),1048576&s[1]&&I(o,1)):(o=$y(t),o.c(),I(o,1),o.m(e,null)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re()),32768&s[1]&&Et(e,"cursor",t[46])},i(a){n||(I(o),n=!0)},o(a){z(o),n=!1},d(a){a&&Q(e),o&&o.d(),t[164](null),i=!1,Kn(r)}}}function V8(t){let e,n;return e=new Gb({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),524288&r[0]&&(o.presets=i[19]),2048&r[0]&&(o.enableSelectImage=i[11]),4096&r[1]&&(o.willRenderPresetToolbar=i[43]),8192&r[1]&&(o.scrollElasticity=i[44]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function W8(t){let e,n,i,r=t[7]==="stack"&&yy(t),o=(t[53]&&t[34]||t[7]==="row")&&by(t);return{c(){r&&r.c(),e=he(),o&&o.c(),n=Ii()},m(a,s){r&&r.m(a,s),et(a,e,s),o&&o.m(a,s),et(a,n,s),i=!0},p(a,s){a[7]==="stack"?r?(r.p(a,s),128&s[0]&&I(r,1)):(r=yy(a),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[53]&&a[34]||a[7]==="row"?o?(o.p(a,s),128&s[0]|4194312&s[1]&&I(o,1)):(o=by(a),o.c(),I(o,1),o.m(n.parentNode,n)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re())},i(a){i||(I(r),I(o),i=!0)},o(a){z(r),z(o),i=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(n)}}}function yy(t){let e,n,i,r;const o=[U8,N8],a=[];function s(l,c){return l[45]?0:1}return n=s(t),i=a[n]=o[n](t),{c(){e=dt("div"),i.c(),T(e,"class","PinturaControlPanels")},m(l,c){et(l,e,c),a[n].m(e,null),r=!0},p(l,c){let u=n;n=s(l),n===u?a[n].p(l,c):(Ie(),z(a[u],1,1,()=>{a[u]=null}),Re(),i=a[n],i?i.p(l,c):(i=a[n]=o[n](l),i.c()),I(i,1),i.m(e,null))},i(l){r||(I(i),r=!0)},o(l){z(i),r=!1},d(l){l&&Q(e),a[n].d()}}}function N8(t){let e,n,i;return n=new gp({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollElasticity:t[44],willRenderControls:t[18]}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaControlPanel")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),262144&o[1]&&(a.shapeProps=r[49]),512&o[0]&&(a.controls=r[9]),8192&o[1]&&(a.scrollElasticity=r[44]),262144&o[0]&&(a.willRenderControls=r[18]),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function U8(t){let e,n,i;return n=new Gb({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"class","PinturaControlPanel")},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),524288&o[0]&&(a.presets=r[19]),2048&o[0]&&(a.enableSelectImage=r[11]),4096&o[1]&&(a.willRenderPresetToolbar=r[43]),8192&o[1]&&(a.scrollElasticity=r[44]),n.$set(a)},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function by(t){let e,n;return e=new Va({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[G8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8192&r[1]&&(o.elasticity=i[44]),262801&r[0]|262154&r[1]|134217728&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function xy(t){let e,n;return e=new Ss({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[32],selectedIndex:t[32].findIndex(t[153]),onchange:t[78],$$slots:{option:[H8,({option:i})=>({212:i}),({option:i})=>[0,0,0,0,0,0,i?67108864:0]]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),2&r[1]&&(o.options=i[32]),1&r[0]|2&r[1]&&(o.selectedIndex=i[32].findIndex(i[153])),16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function vy(t){let e,n;return e=new Ho({props:{$$slots:{default:[j8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function j8(t){let e,n=(Yn(t[212].icon)?t[212].icon(t[4]):t[212].icon)+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){16&r[0]|67108864&r[6]&&n!==(n=(Yn(i[212].icon)?i[212].icon(i[4]):i[212].icon)+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function wy(t){let e,n,i=(Yn(t[212].label)?t[212].label(t[4]):t[212].label)+"";return{c(){e=dt("span"),n=vi(i)},m(r,o){et(r,e,o),St(e,n)},p(r,o){16&o[0]|67108864&o[6]&&i!==(i=(Yn(r[212].label)?r[212].label(r[4]):r[212].label)+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function H8(t){let e,n,i,r=t[212].icon&&vy(t),o=!t[212].hideLabel&&wy(t);return{c(){e=dt("div"),r&&r.c(),n=he(),o&&o.c(),T(e,"slot","option")},m(a,s){et(a,e,s),r&&r.m(e,null),St(e,n),o&&o.m(e,null),i=!0},p(a,s){a[212].icon?r?(r.p(a,s),67108864&s[6]&&I(r,1)):(r=vy(a),r.c(),I(r,1),r.m(e,n)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[212].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=wy(a),o.c(),o.m(e,null))},i(a){i||(I(r),i=!0)},o(a){z(r),i=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function Sy(t){let e,n;return e=new gp({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[154]}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),262144&r[1]&&(o.shapeProps=i[49]),512&r[0]&&(o.controls=i[9]),262144&r[0]&&(o.willRenderControls=i[154]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function G8(t){let e,n,i,r=t[34]&&xy(t),o=t[7]==="row"&&Sy(t);return{c(){r&&r.c(),e=he(),o&&o.c(),n=Ii()},m(a,s){r&&r.m(a,s),et(a,e,s),o&&o.m(a,s),et(a,n,s),i=!0},p(a,s){a[34]?r?(r.p(a,s),8&s[1]&&I(r,1)):(r=xy(a),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(Ie(),z(r,1,1,()=>{r=null}),Re()),a[7]==="row"?o?(o.p(a,s),128&s[0]&&I(o,1)):(o=Sy(a),o.c(),I(o,1),o.m(n.parentNode,n)):o&&(Ie(),z(o,1,1,()=>{o=null}),Re())},i(a){i||(I(r),I(o),i=!0)},o(a){z(r),z(o),i=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(n)}}}function ky(t){let e,n;return e=new Va({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[Y8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8192&r[1]&&(o.elasticity=i[44]),134217744&r[0]|8388608&r[1]|134217728&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Cy(t){let e,n;return e=new Ho({props:{$$slots:{default:[Z8]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Z8(t){let e,n=(Yn(t[212].icon)?t[212].icon(t[4]):t[212].icon)+"";return{c(){e=Tr("g")},m(i,r){et(i,e,r),e.innerHTML=n},p(i,r){16&r[0]|67108864&r[6]&&n!==(n=(Yn(i[212].icon)?i[212].icon(i[4]):i[212].icon)+"")&&(e.innerHTML=n)},d(i){i&&Q(e)}}}function X8(t){let e,n,i,r,o,a=(Yn(t[212].label)?t[212].label(t[4]):t[212].label)+"",s=t[212].icon&&Cy(t);return{c(){e=dt("div"),s&&s.c(),n=he(),i=dt("span"),r=vi(a),T(e,"slot","option")},m(l,c){et(l,e,c),s&&s.m(e,null),St(e,n),St(e,i),St(i,r),o=!0},p(l,c){l[212].icon?s?(s.p(l,c),67108864&c[6]&&I(s,1)):(s=Cy(l),s.c(),I(s,1),s.m(e,n)):s&&(Ie(),z(s,1,1,()=>{s=null}),Re()),(!o||16&c[0]|67108864&c[6])&&a!==(a=(Yn(l[212].label)?l[212].label(l[4]):l[212].label)+"")&&Oi(r,a)},i(l){o||(I(s),o=!0)},o(l){z(s),o=!1},d(l){l&&Q(e),s&&s.d()}}}function Y8(t){let e,n;return e=new Ss({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[54],selectedIndex:t[54].findIndex(t[155]),onchange:t[77],$$slots:{option:[X8,({option:i})=>({212:i}),({option:i})=>[0,0,0,0,0,0,i?67108864:0]]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),8388608&r[1]&&(o.options=i[54]),134217728&r[0]|8388608&r[1]&&(o.selectedIndex=i[54].findIndex(i[155])),16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function K8(t){let e,n,i,r,o;const a=[W8,V8],s=[];function l(u,d){return u[52]?0:u[45]?1:-1}~(n=l(t))&&(i=s[n]=a[n](t));let c=t[33]&&ky(t);return{c(){e=dt("div"),i&&i.c(),r=he(),c&&c.c(),T(e,"slot","footer"),Et(e,"transform",t[40])},m(u,d){et(u,e,d),~n&&s[n].m(e,null),St(e,r),c&&c.m(e,null),o=!0},p(u,d){let p=n;n=l(u),n===p?~n&&s[n].p(u,d):(i&&(Ie(),z(s[p],1,1,()=>{s[p]=null}),Re()),~n?(i=s[n],i?i.p(u,d):(i=s[n]=a[n](u),i.c()),I(i,1),i.m(e,r)):i=null),u[33]?c?(c.p(u,d),4&d[1]&&I(c,1)):(c=ky(u),c.c(),I(c,1),c.m(e,null)):c&&(Ie(),z(c,1,1,()=>{c=null}),Re()),512&d[1]&&Et(e,"transform",u[40])},i(u){o||(I(i),I(c),o=!0)},o(u){z(i),z(c),o=!1},d(u){u&&Q(e),~n&&s[n].d(),c&&c.d()}}}function q8(t){let e,n;return e=new Rl({props:{hasHeader:t[41],$$slots:{footer:[K8],main:[_8],header:[O8]},$$scope:{ctx:t}}}),e.$on("measure",t[166]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};1024&r[1]&&(o.hasHeader=i[41]),2080374769&r[0]|134216703&r[1]|134217728&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function J8(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,W,nt,k,N,j,ut,Z,ft,q,ht,xt,lt,Ct,it,vt,K,Ft,Ht,Lt,bt,_t,rt,Tt,Vt,mt,at,$t,te,le,Wt,we,yt,ie,V,De,Le,qt,$e,Me,Be,mn,wt,re=Xe,on=()=>(re(),re=Zr(He,_=>n(35,Lt=_)),He),Ue=Xe,en=()=>(Ue(),Ue=Zr(ue,_=>n(145,Tt=_)),ue),ke=Xe,qe=()=>(ke(),ke=Zr(kn,_=>n(37,Wt=_)),kn),vn=Xe,In=()=>(vn(),vn=Zr(Pt,_=>n(151,$e=_)),Pt),Hn=Xe,Jt=()=>(Hn(),Hn=Zr(Y,_=>n(56,mn=_)),Y);t.$$.on_destroy.push(()=>re()),t.$$.on_destroy.push(()=>Ue()),t.$$.on_destroy.push(()=>ke()),t.$$.on_destroy.push(()=>vn()),t.$$.on_destroy.push(()=>Hn());let{isActive:He}=e;on();let{isActiveFraction:Y}=e;Jt();let{isVisible:Pt}=e;In();let{stores:H}=e,{locale:Bt={}}=e,{shapes:ue}=e;en();let{toolbar:Ce=[]}=e,{toolShapes:me={}}=e,{toolActive:It}=e,{toolSelectRadius:Oe}=e,{toolRetainStyles:cn=!1}=e,{toolbarLayout:rn="stack"}=e,{textInputMode:J}=e,{shapeControls:jt={}}=e,{enableButtonFlipVertical:Ae=!1}=e,{enablePresetSelectImage:Se=!0}=e,{enablePresetDropImage:X=!0}=e,{enableSelectToolToAddShape:oe=!1}=e,{enableAutoSelectMoveTool:Zt=["line","arrow","path","rectangle","ellipse","text"]}=e,{enableTapToAddText:ee=!1}=e,{enableMoveTool:Je=!1}=e,{enableViewTool:Fe=!1}=e,{enableToolShareStyles:be=!0}=e,{enableMultiSelect:di=!1}=e,{gridSize:Ri=0}=e,{snapThreshold:Wn=0}=e,{enableSnapToContext:_e=!0}=e,{willRenderHeaderTools:Ve=ri}=e,{willRenderPresetToolbar:wn}=e,{willRenderShapeStyleControls:An}=e,{willStartInteraction:ae}=e,{shapePresets:se=[]}=e,{utilKey:Rn}=e,{mapScreenPointToImagePoint:zn}=e,{mapImagePointToScreenPoint:Ei}=e,{imageRotation:$i=0}=e,{imageFlipX:ti=!1}=e,{imageFlipY:qn=!1}=e,{parentRect:kn}=e;qe();let{hooks:yi={}}=e;const $r=mi("selection");F(t,$r,_=>n(150,De=_));const Jr=mi("isAnimated");F(t,Jr,_=>n(142,bt=_));const Rr=mi("elasticityMultiplier");F(t,Rr,_=>n(146,Vt=_));const tr=mi("ui");F(t,tr,_=>n(177,Le=_));const ao=mi("keysPressed");let gi;F(t,ao,_=>n(149,V=_));const{env:Yi,history:Ke,rootRect:Ro,rootColorSecondary:pi,enablePanInput:yo,enablePanInputStatus:_r,enableZoomInput:Wa,stageRect:yr,utilRectPadded:Xi,scrollElasticity:Ai,imageOverlayMarkup:Eo,imagePreviewModifiers:Qr,imageCropRect:so,shapePreprocessor:Ao,stageScalar:bo,imageSelectionRect:Ki,imageTransformsInterpolated:Go,imageSelectionPan:Er,imageSize:Lo,allowPan:sr,allowZoom:xo,allowZoomControls:lo,allowPlayPause:Ar}=H;F(t,Yi,_=>n(143,_t=_)),F(t,Ro,_=>n(55,Be=_)),F(t,pi,_=>n(57,wt=_)),F(t,_r,_=>n(38,yt=_)),F(t,yr,_=>n(147,mt=_)),F(t,Xi,_=>n(39,qt=_)),F(t,Qr,_=>n(178,Me=_)),F(t,so,_=>n(176,we=_)),F(t,bo,_=>n(174,te=_)),F(t,Ki,_=>n(175,le=_)),F(t,Go,_=>n(36,at=_)),F(t,Er,_=>n(173,$t=_)),F(t,Lo,_=>n(148,ie=_));let vr=0,to={};const Zo=_=>{const[ce,bn]=gi[_];let nn,de,xe=bn.position==="relative";const Dn=xe?"0%":0,xn=xe?"0%":0;No(ce)||ir(ce)?(de=xe?"20%":.2*Wt.width,nn=Di(ce),nn.x=Dn,nn.y=xn,za(nn,{width:de,height:de},Wt)):rr(ce)?(de=xe?"10%":.1*Wt.width,nn=Di(ce),nn.x=Dn,nn.y=xn,za(nn,{rx:de,ry:de},Wt)):dr(ce)&&(de=xe?"10%":.1*Wt.width,nn=Di(ce),nn.x1=Dn,nn.y1=xn,nn.x2=Dn,nn.y2=xn),nn&&Promise.resolve().then(()=>{eo(Yo(nn,void 0,de))})},qi=_=>zn(jh(_,Be));let On,wi={},vo,li;const co=_=>{if(!(Gi(_)&&Ee(_,"pathClose")))return;const ce=[..._.strokeColor];ce[3]=1,On.updateMarkupShape(_,{pathClose:!1,strokeColor:ce},!1),On.removeMarkupShapeProps(_,["backgroundColor"],!1),On.confirmMarkupItemDraft(),On.selectShape(_),xt("addshape",_),Ke.write()};let ci;const uo=(_,ce)=>{const bn={};return Object.entries(_).forEach(([nn,de])=>{Ee(ce,nn)&&(bn[nn]=de)}),bn},wo=(_,ce)=>{if(Ze(_))return _;if(_.endsWith("%"))return parseFloat(_)/100*ce.width};let Xo,_i,Ui;const Yo=(_,ce,bn)=>{let nn=!1;ce||(nn=!0,ce=ht?zn(Fn(mt)):Fn(we)),ce.x-=Wt.x||0,ce.y-=Wt.y||0,(ti||qn)&&(_.flipX=ti,_.flipY=qn);const de=On.getShapesNearPosition(Tt,ce);if(nn&&de.length){const xe=.1*Math.min(we.width,we.height);ce.x+=Math.round(-xe+Math.random()*xe*2),ce.y+=Math.round(-xe+Math.random()*xe*2)}if($i!==0&&(_.rotation=ti&&qn?-$i:ti||qn?$i:-$i),Ee(_,"width")&&Ee(_,"height")){const{width:xe,height:Dn}=ic(_,["width","height"],Wt);za(_,{x:ce.x-.5*xe,y:ce.y-.5*Dn},Wt)}else if(rr(_))za(_,{x:ce.x,y:ce.y},Wt);else if(dr(_)){const{x1:xe,y1:Dn,x2:xn,y2:ye}=ic(_,["x1","y1","x2","y2"],Wt),ei=Po(ot(xe,Dn),ot(xn,ye)),Cn=Ne(bn)?Kd(bn,Wt.width):ei;za(_,{x1:ce.x-Cn,y1:ce.y+Cn,x2:ce.x+Cn,y2:ce.y-Cn},Wt)}else if(Gi(_)){const{points:xe}=ic(_,["points"],Wt),Dn=ia(xe);za(_,{points:xe.map(xn=>({x:xn.x+ce.x-Dn.x,y:xn.y+ce.y-Dn.y}))},Wt)}return _},Fo=(_,ce)=>{const bn=Yo(vg(_,we),ce);return _.shape&&(Ee(_.shape,"x")&&(bn.x=_.shape.x),Ee(_.shape,"y")&&(bn.y=_.shape.y)),eo(bn)},eo=_=>{const{beforeAddShape:ce=()=>!0}=yi;if(ce(_))return On.addShape(_),On.selectShape(_),xt("addshape",_),Ke.write(),_};let wr=!1;const po=()=>{Ke.write()};let Ti;const ji=mi("redrawTrigger");F(t,ji,_=>n(144,rt=_));const Lr=[],no=hn(bt?20:0);return F(t,no,_=>n(141,Ht=_)),t.$$set=_=>{"isActive"in _&&on(n(1,He=_.isActive)),"isActiveFraction"in _&&Jt(n(2,Y=_.isActiveFraction)),"isVisible"in _&&In(n(3,Pt=_.isVisible)),"stores"in _&&n(100,H=_.stores),"locale"in _&&n(4,Bt=_.locale),"shapes"in _&&en(n(5,ue=_.shapes)),"toolbar"in _&&n(101,Ce=_.toolbar),"toolShapes"in _&&n(102,me=_.toolShapes),"toolActive"in _&&n(0,It=_.toolActive),"toolSelectRadius"in _&&n(6,Oe=_.toolSelectRadius),"toolRetainStyles"in _&&n(103,cn=_.toolRetainStyles),"toolbarLayout"in _&&n(7,rn=_.toolbarLayout),"textInputMode"in _&&n(8,J=_.textInputMode),"shapeControls"in _&&n(9,jt=_.shapeControls),"enableButtonFlipVertical"in _&&n(10,Ae=_.enableButtonFlipVertical),"enablePresetSelectImage"in _&&n(11,Se=_.enablePresetSelectImage),"enablePresetDropImage"in _&&n(12,X=_.enablePresetDropImage),"enableSelectToolToAddShape"in _&&n(104,oe=_.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in _&&n(105,Zt=_.enableAutoSelectMoveTool),"enableTapToAddText"in _&&n(13,ee=_.enableTapToAddText),"enableMoveTool"in _&&n(106,Je=_.enableMoveTool),"enableViewTool"in _&&n(107,Fe=_.enableViewTool),"enableToolShareStyles"in _&&n(108,be=_.enableToolShareStyles),"enableMultiSelect"in _&&n(14,di=_.enableMultiSelect),"gridSize"in _&&n(15,Ri=_.gridSize),"snapThreshold"in _&&n(16,Wn=_.snapThreshold),"enableSnapToContext"in _&&n(17,_e=_.enableSnapToContext),"willRenderHeaderTools"in _&&n(109,Ve=_.willRenderHeaderTools),"willRenderPresetToolbar"in _&&n(110,wn=_.willRenderPresetToolbar),"willRenderShapeStyleControls"in _&&n(18,An=_.willRenderShapeStyleControls),"willStartInteraction"in _&&n(111,ae=_.willStartInteraction),"shapePresets"in _&&n(19,se=_.shapePresets),"utilKey"in _&&n(20,Rn=_.utilKey),"mapScreenPointToImagePoint"in _&&n(21,zn=_.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in _&&n(22,Ei=_.mapImagePointToScreenPoint),"imageRotation"in _&&n(23,$i=_.imageRotation),"imageFlipX"in _&&n(24,ti=_.imageFlipX),"imageFlipY"in _&&n(25,qn=_.imageFlipY),"parentRect"in _&&qe(n(26,kn=_.parentRect)),"hooks"in _&&n(112,yi=_.hooks)},t.$$.update=()=>{var _,ce,bn,nn;if(33554432&t.$$.dirty[4]&&n(124,i=V.includes(18)),1049088&t.$$.dirty[3]&&(gi&&me===gi||n(113,gi=me)),16&t.$$.dirty[1]&&sr.set(Lt),16&t.$$.dirty[1]&&xo.set(Lt),16&t.$$.dirty[1]&&lo.set(Lt),256&t.$$.dirty[3]&&n(33,r=Array.isArray(Ce)&&Ce.length>1&&Array.isArray(Ce[0][1])),4&t.$$.dirty[1]|256&t.$$.dirty[3]&&n(54,o=r?Ce.map((de,xe)=>[xe,de[0]]):[]),134217728&t.$$.dirty[0]|4&t.$$.dirty[1]|256&t.$$.dirty[3]&&n(140,a=r?Ce[vr][1]:Ce),524288&t.$$.dirty[0]|155648&t.$$.dirty[3]|65536&t.$$.dirty[4]&&n(32,s=((de,{willRenderPresetToolbar:xe,shapePresets:Dn,enableViewTool:xn,enableMoveTool:ye})=>{let ei=Dn.length!==0||xe?de:de.filter(Cn=>Cn[0]!=="preset");return r&&(ei=[["move",Cn=>Cn.shapeLabelToolMove,{icon:Cn=>Cn.shapeIconToolMove}],["view",Cn=>Cn.shapeLabelToolView,{icon:Cn=>Cn.shapeIconToolView}],...ei]),ei=ye?ei:ei.filter(Cn=>Cn[0]!=="move"),xn?ei:ei.filter(Cn=>Cn[0]!=="view")})(a,{willRenderPresetToolbar:wn,shapePresets:se,enableMoveTool:Je,enableViewTool:Fe})),2&t.$$.dirty[1]&&n(138,u=!!s.length),1&t.$$.dirty[0]|2&t.$$.dirty[1]|16384&t.$$.dirty[4]&&u&&It===void 0&&n(0,It=s[0][0]),134217729&t.$$.dirty[0]|4&t.$$.dirty[1]|2097152&t.$$.dirty[3]|65536&t.$$.dirty[4]&&r&&n(114,to={...to,[vr]:a.map(([de])=>de).includes(It)?It:to[vr]||a[0][0]}),512&t.$$.dirty[0]&&n(137,l=!!Object.keys(jt).length),2&t.$$.dirty[1]&&n(34,c=s.length>1),12&t.$$.dirty[1]&&n(53,d=c||r),1&t.$$.dirty[0]&&n(139,p=It!==void 0),57344&t.$$.dirty[4]&&n(52,h=(!p||u)&&l),536870912&t.$$.dirty[0]&&n(31,xt=Ti&&(_=Ti,(de,xe)=>{_.dispatchEvent(zs(de,xe))})),1&t.$$.dirty[0]|17&t.$$.dirty[1]&&Lt&&xt&&xt("selectcontrol",It),16&t.$$.dirty[1]&&(Lt?kt(Qr,Me[Rn]={maskMarkupOpacity:.85},Me):delete Me[Rn]),1&t.$$.dirty[0]|1048576&t.$$.dirty[3]&&n(136,f=It&&gi[It]?gi[It][1]:void 0),4096&t.$$.dirty[4]&&n(125,g=f&&f.isSelection?"selection":"shapes"),3&t.$$.dirty[4]&&(de=>{if(!On)return;const xe=On.getShapeDraft($r);xe&&(de&&(vo=xe.drawMode),On.updateShapeDraft({drawMode:de?"subtract":vo},$r))})(g==="selection"&&i),268435457&t.$$.dirty[0]&&It&&On){const de=On.getMarkupItemDraft();de&&co(de)}if(1&t.$$.dirty[0]&&It&&On&&It!=="move"&&On.blurShapes(),16&t.$$.dirty[1]|134217728&t.$$.dirty[4]&&n(51,$=$e&&Lt),256&t.$$.dirty[1]|8388608&t.$$.dirty[4]&&n(50,y=qt&&ot(mt.x-qt.x,mt.y-qt.y)),512&t.$$.dirty[0]&&n(135,v=Object.keys(jt)),16384&t.$$.dirty[0]|16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(122,w=di?Lt&&Tt.filter(La):[]),536870912&t.$$.dirty[3]&&n(123,S=w.length>1),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(119,R=Lt&&Tt.filter(La)[0]),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(130,M=Lt&&Tt.find(de=>N1(de))),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(133,B=Lt&&Tt.find(de=>ho(de))),1&t.$$.dirty[0]|16&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&n(127,C=Lt&&gi[It]?x2(Di({...gi[It][0],...Le[Rn]?Le[Rn][It]:{}})):{}),1048576&t.$$.dirty[3]&&gi&&n(115,wi={}),1&t.$$.dirty[0]|4227072&t.$$.dirty[3]|2056&t.$$.dirty[4]&&n(126,D=C&&Object.keys(C).reduce((de,xe)=>{const Dn=xe==="disableStyle",xn=xe==="settings",ye=!!v.find(So=>So.split("_").includes(xe));if(!Dn&&!xn&&!ye||C[xe]===void 0||C.disableStyle===!0||C.disableStyle&&C.disableStyle.includes(xe))return de;if(xe==="strokeWidth"&&Object.keys(wi).includes("strokeWidth")&&wi[xe]===void 0&&Ee(C,"points"))return de[xe]=C[xe],de;const{share:ei=!0}=C.settings&&C.settings[xe]||{},Cn=be&&ei?wi:wi[It]||{};return de[xe]=Ee(Cn,xe)?Cn[xe]:C[xe],de},{})),1048577&t.$$.dirty[0]|1024&t.$$.dirty[3]|4&t.$$.dirty[4]&&(cn?((de,xe,Dn)=>{const xn=Le[de],ye=xn?xn[xe]:{};tr.set({...Le,[de]:{...xn,[xe]:{...ye,...Dn}}})})(Rn,It,D):(ce=Rn,tr.set({[ce]:{}}))),16&t.$$.dirty[1]|67108864&t.$$.dirty[3]|67108868&t.$$.dirty[4]&&n(134,O=De&&Lt?R||D:void 0),1610612736&t.$$.dirty[3]|1536&t.$$.dirty[4]&&n(49,P=S?function(de){const xe={};return de.forEach(Dn=>{Object.entries(Dn).filter(([xn])=>!xn.startsWith("_")).forEach(([xn,ye])=>{Ee(xe,xn)?xn==="disableStyle"&&xe[xn].push(...ye):xe[xn]=ye})}),xe}(w):O||B),1&t.$$.dirty[0]|8&t.$$.dirty[4]&&n(48,b=Ee(C,"eraseRadius")||Ee(C,"points")&&!Ee(C,"pathClose")||It==="move"||It==="view"),64&t.$$.dirty[1]|8&t.$$.dirty[4]&&n(47,W=C&&C.eraseRadius!==void 0?wo(C.eraseRadius,Wt):void 0),16&t.$$.dirty[1]|33554432&t.$$.dirty[4]&&n(131,nt=Lt&&V.includes(32)),1&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(132,k=Lt&&It==="view"),384&t.$$.dirty[4]&&n(129,N=k||nt),96&t.$$.dirty[4]&&n(128,j=!!N&&(!!M||cu(document.activeElement))),16&t.$$.dirty[1]|48&t.$$.dirty[4]&&yo.set(!Lt||N&&!j),16&t.$$.dirty[1]|16&t.$$.dirty[4]&&Wa.set(!Lt||!j),64&t.$$.dirty[1]|12&t.$$.dirty[4]&&n(120,ut=C.cursorStyle?(({cursorStyle:de,cursorSize:xe},Dn,xn)=>{let ye;const ei=Dn[xe];if(ei===void 0?ye=wo(xe,xn):Ze(ei)?ye=ei:Ne(ei)&&(ye=c4(xe,Dn[xe],xn),xe==="strokeWidth"&&(ye*=.5)),!(ye<=0||ye===void 0))return{size:ye,style:de}})(C,{...C,...D},Wt):void 0),33554432&t.$$.dirty[3]|16777216&t.$$.dirty[4]&&n(121,Z=Ui&&(nn=ie,(bn=Ui).x>=0&&bn.y>=0&&bn.x<=nn.width&&bn.y<=nn.height)),1048576&t.$$.dirty[0]|160&t.$$.dirty[1]|427819008&t.$$.dirty[3]|3&t.$$.dirty[4])if(Z&&!Xo&&ut&&!yt){const de=ut.size*at.scale,xe={id:"cursor-"+Rn,x:_i.x,y:_i.y,strokeWidth:.5,strokeColor:[0,0,0]};ut.style==="ellipse"&&(xe.rx=de,xe.ry=de);const Dn={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},xn=[{...xe,...Dn},xe];if(g==="selection"&&i){const ye=de,ei=_i.x+ye,Cn=_i.y+ye+4,So={id:"cursor-"+Rn,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:ei,y:Cn},{x:ei+4,y:Cn}]};xn.push({...So,...Dn,strokeWidth:2,points:[{x:ei-.5,y:Cn},{x:ei+4.5,y:Cn}]},So)}(ye=>{Eo.update(ei=>[...ei.filter(Cn=>Cn.id!=="cursor-"+Rn),...ye])})(xn)}else Eo.update(de=>de.filter(xe=>xe.id!=="cursor-"+Rn));1&t.$$.dirty[0]|128&t.$$.dirty[1]|478150656&t.$$.dirty[3]&&n(46,ft=Z?((de,xe,Dn,xn,ye,ei)=>{if(xn)return ye?"grabbing":"grab";if(de&&!xe)return"none";if(!xe)return ei==="move"?"default":"crosshair";let Cn=xe||Dn;return La(Cn)?N1(Cn)?J==="modal"?"default":"text":!Cl(Cn)||S&&!w.every(Cl)?"default":"move":"default"})(ut,Xo,R,yt,!1,It):"default"),526337&t.$$.dirty[0]|131072&t.$$.dirty[3]&&n(45,q=It==="preset"&&(se.length>0||Se||wn)),64&t.$$.dirty[1]&&(ht=!Ee(Wt,"x")&&!Ee(Wt,"y")),4194304&t.$$.dirty[4]&&n(44,lt=Vt*Ai),131072&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&n(43,Ct=rt&&wn?de=>uu(()=>wn(de,Fo,{..._t},()=>ji.set({}))):ri),524288&t.$$.dirty[3]&&n(42,it=Object.keys(yi).reduce((de,xe)=>(xe==="beforeAddShape"||yi[xe]===void 0||(de[xe]=yi[xe]),de),{})),16&t.$$.dirty[1]&&(de=>{Tt&&ue.update(xe=>xe.map(Dn=>(Dn._prerender=!!de&&N1(Dn),Dn)))})(Lt),65536&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&n(30,vt=rt&&Ve([],_t,()=>ji.set({}))),1073742336&t.$$.dirty[0]&&n(41,K=!!vt.length||!!Object.keys(jt).some(de=>Lr.includes(de))),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&bt&&no.set(Lt?0:20),t.$$.dirty[4],131072&t.$$.dirty[4]&&n(40,Ft=Ht?`translateY(${Ht}px)`:"none")},Ar.set(!1),[It,He,Y,Pt,Bt,ue,Oe,rn,J,jt,Ae,Se,X,ee,di,Ri,Wn,_e,An,se,Rn,zn,Ei,$i,ti,qn,kn,vr,On,Ti,vt,xt,s,r,c,Lt,at,Wt,yt,qt,Ft,K,it,Ct,lt,q,ft,W,b,P,y,$,h,d,o,Be,mn,wt,$r,Jr,Rr,tr,ao,Yi,Ro,pi,_r,yr,Xi,Eo,Qr,so,bo,Ki,Go,Er,Lo,({index:_},ce)=>{n(27,vr=_),n(0,It=to[_])},({value:_},ce)=>{n(0,It=_),(oe||/enter/i.test(ce.key))&&Zo(_)},_=>{if(It==="eraser")li=On.eraseShape();else if(It&&gi[It]){const[ce,bn={}]=gi[It],{drawMode:nn}=O;g==="selection"&&nn==="new"&&$r.set([]);let de={};g==="selection"&&(xt("selectiondown",[...De]),i&&(vo=ce.drawMode,de.drawMode="subtract")),li=On.createShape({...ce,...D,...de},bn)}else li=void 0;return!!li&&(li.start(_),!0)},_=>!!li&&(li.update(_),!0),_=>!!li&&(li.release(_),!0),_=>!!li&&(li.cancel(_),li=void 0,!0),_=>{if(!li)return!1;if(li.end(_),li=void 0,g==="selection"){if(_.detail.isTap){const[nn]=gi[It];nn.bitmap||$r.set([])}xt("selectionup",[...De])}const ce=On.getMarkupItemDraft(),bn=Je&&(Zt===!0||Array.isArray(Zt)&&Zt.includes(It));return ce&&!ce.isEditing||!bn||n(0,It="move"),!0},_=>{const{key:ce}=_,bn=On.getMarkupItemDraft();/escape/i.test(ce)&&bn&&(_.preventDefault(),_.stopPropagation(),On.discardMarkupItemDraft(),li=void 0),/enter/i.test(ce)&&bn&&(_.preventDefault(),_.stopPropagation(),co(bn),li=void 0)},function(_){Object.keys(_).forEach(ce=>{const{retain:bn=!0,share:nn=!0}=C.settings&&C.settings[ce]||{};bn&&(be&&nn?n(115,wi[ce]=_[ce],wi):(wi[It]||n(115,wi[It]={},wi),n(115,wi[It][ce]=_[ce],wi)))}),xt("selectstyle",_),R&&(S?w.forEach(ce=>{On.updateMarkupShape(ce,uo(_,ce))}):On.updateMarkupShape(R,_),clearTimeout(ci),ci=setTimeout(()=>{po()},200))},(_,ce,bn)=>{n(117,_i=ce),n(118,Ui=bn)},()=>{n(118,Ui=void 0),n(117,_i=void 0)},_=>{xt("markuptap",_)},_=>n(116,Xo=_),()=>{wr=!1},(_,ce)=>{if(wr)return;const{beforeAddShape:bn=()=>!0}=yi,nn=qi(ce),de=On.getMarkupItemDraft(),xe=jd(we,{x:nn.x+(Wt.x||0),y:nn.y+(Wt.y||0)});if(de&&!xe&&On.discardMarkupItemDraft(),xe){if(!de){const Dn=vg(_,we),xn=Yo(Dn,nn);return bn(xn)?(Sh(xn),void On.addShape(xn)):(wr=!0,void ce.preventDefault())}No(de)&&(nn.x-=.5*de.width,nn.y-=.5*de.height),_.shape&&(Ee(_.shape,"x")&&(nn.x=_.shape.x),Ee(_.shape,"y")&&(nn.y=_.shape.y)),On.updateMarkupShape(de,nn)}},(_,ce)=>{if(wr)return;const bn=qi(ce);if(!jd(we,{x:bn.x+(Wt.x||0),y:bn.y+(Wt.y||0)}))return void On.discardMarkupItemDraft();const nn=On.confirmMarkupItemDraft();On.selectShape(nn),xt("addshape",nn),Ke.write()},_=>Fo(_),_=>{return ce=_.detail.resources,bn=qi(_.detail.event),ce.forEach(nn=>Fo(nn,bn));var ce,bn},_=>{if(!ae)return!0;const ce=rectClone(le);return rectScale(ce,1/te),rectTranslate(ce,$t),rectScale(ce,at.scale),ae(_,{...ce,x:ce.x+mt.x,y:ce.y+mt.y})},po,ji,Lr,no,H,Ce,me,cn,oe,Zt,Je,Fe,be,Ve,wn,ae,yi,gi,to,wi,Xo,_i,Ui,R,ut,Z,w,S,i,g,D,C,j,N,M,nt,k,B,O,v,f,l,u,p,a,Ht,bt,_t,rt,Tt,Vt,mt,ie,V,De,$e,function(_){Kr.call(this,t,_)},_=>_[0]===It,(_,ce,bn)=>{const nn=_.filter(([,de])=>!Lr.includes(de));return An?An(nn,ce,bn):nn},_=>_[0]===vr,_=>{Promise.resolve().then(()=>{xt("addshape",_),po()})},_=>{xt("selectshape",_)},_=>{Promise.resolve().then(()=>{xt("blurshape",_)})},_=>{xt("tapshape",_)},_=>{xt("updateshape",_),po()},_=>{xt("removeshape",_),po()},()=>{po()},function(_){jn[_?"unshift":"push"](()=>{On=_,n(28,On)})},function(_){jn[_?"unshift":"push"](()=>{Ti=_,n(29,Ti)})},_=>_.filter(([,ce])=>Lr.includes(ce)),function(_){Kr.call(this,t,_)}]}class fp extends pn{constructor(e){super(),dn(this,e,J8,q8,ln,{isActive:1,isActiveFraction:2,isVisible:3,stores:100,locale:4,shapes:5,toolbar:101,toolShapes:102,toolActive:0,toolSelectRadius:6,toolRetainStyles:103,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:104,enableAutoSelectMoveTool:105,enableTapToAddText:13,enableMoveTool:106,enableViewTool:107,enableToolShareStyles:108,enableMultiSelect:14,gridSize:15,snapThreshold:16,enableSnapToContext:17,willRenderHeaderTools:109,willRenderPresetToolbar:110,willRenderShapeStyleControls:18,willStartInteraction:111,shapePresets:19,utilKey:20,mapScreenPointToImagePoint:21,mapImagePointToScreenPoint:22,imageRotation:23,imageFlipX:24,imageFlipY:25,parentRect:26,hooks:112},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),E()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),E()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),E()}get stores(){return this.$$.ctx[100]}set stores(e){this.$$set({stores:e}),E()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),E()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),E()}get toolbar(){return this.$$.ctx[101]}set toolbar(e){this.$$set({toolbar:e}),E()}get toolShapes(){return this.$$.ctx[102]}set toolShapes(e){this.$$set({toolShapes:e}),E()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),E()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),E()}get toolRetainStyles(){return this.$$.ctx[103]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),E()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),E()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),E()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),E()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),E()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),E()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),E()}get enableSelectToolToAddShape(){return this.$$.ctx[104]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),E()}get enableAutoSelectMoveTool(){return this.$$.ctx[105]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),E()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),E()}get enableMoveTool(){return this.$$.ctx[106]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),E()}get enableViewTool(){return this.$$.ctx[107]}set enableViewTool(e){this.$$set({enableViewTool:e}),E()}get enableToolShareStyles(){return this.$$.ctx[108]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),E()}get enableMultiSelect(){return this.$$.ctx[14]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),E()}get gridSize(){return this.$$.ctx[15]}set gridSize(e){this.$$set({gridSize:e}),E()}get snapThreshold(){return this.$$.ctx[16]}set snapThreshold(e){this.$$set({snapThreshold:e}),E()}get enableSnapToContext(){return this.$$.ctx[17]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),E()}get willRenderHeaderTools(){return this.$$.ctx[109]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),E()}get willRenderPresetToolbar(){return this.$$.ctx[110]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),E()}get willRenderShapeStyleControls(){return this.$$.ctx[18]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),E()}get willStartInteraction(){return this.$$.ctx[111]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),E()}get shapePresets(){return this.$$.ctx[19]}set shapePresets(e){this.$$set({shapePresets:e}),E()}get utilKey(){return this.$$.ctx[20]}set utilKey(e){this.$$set({utilKey:e}),E()}get mapScreenPointToImagePoint(){return this.$$.ctx[21]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),E()}get mapImagePointToScreenPoint(){return this.$$.ctx[22]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),E()}get imageRotation(){return this.$$.ctx[23]}set imageRotation(e){this.$$set({imageRotation:e}),E()}get imageFlipX(){return this.$$.ctx[24]}set imageFlipX(e){this.$$set({imageFlipX:e}),E()}get imageFlipY(){return this.$$.ctx[25]}set imageFlipY(e){this.$$set({imageFlipY:e}),E()}get parentRect(){return this.$$.ctx[26]}set parentRect(e){this.$$set({parentRect:e}),E()}get hooks(){return this.$$.ctx[112]}set hooks(e){this.$$set({hooks:e}),E()}}var O0=(t,e,n,i,r,o,a,s,l)=>{const c=We(t),u=.5*n.width,d=.5*n.height,p=.5*e.width,h=.5*e.height,f=r.x+i.x,g=r.y+i.y;s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y);const $=Math.cos(o),y=Math.sin(o);c.x-=u,c.y-=d;const v=c.x*$-c.y*y,w=c.x*y+c.y*$;c.x=u+v,c.y=d+w,c.x*=a,c.y*=a,c.x+=p,c.y+=h,c.x+=f,c.y+=g,c.x-=u*a,c.y-=d*a;const S=(r.x-f)*a,R=(r.y-g)*a,M=S*$-R*y,B=S*y+R*$;return c.x+=M,c.y+=B,c},_0=(t,e,n,i,r,o,a,s,l)=>{const c=We(t),u=ac(n),d=ac(e),p=ot(r.x+i.x,r.y+i.y),h=Math.cos(o),f=Math.sin(o);c.x-=d.x,c.y-=d.y;const g=(r.x-p.x)*a,$=(r.y-p.y)*a,y=g*h-$*f,v=g*f+$*h;c.x-=y,c.y-=v,c.x-=p.x,c.y-=p.y,c.x/=a,c.y/=a;const w=c.x*h+c.y*f,S=c.x*f-c.y*h;return c.x=w,c.y=-S,c.x+=u.x,c.y+=u.y,s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y),c},dc=t=>typeof t=="boolean";function Q8(t){let e,n,i;function r(a){t[60](a)}let o={utilKey:t[1],stores:t[5],locale:t[6],isActive:t[2],isActiveFraction:t[3],isVisible:t[4],mapScreenPointToImagePoint:t[46],mapImagePointToScreenPoint:t[45],imageRotation:t[47],imageFlipX:t[44],imageFlipY:t[43],shapes:t[49],toolbar:t[21]||t[7],toolShapes:t[22]||t[8],toolRetainStyles:t[9],enableSelectToolToAddShape:t[31],enableTapToAddText:t[32],enableViewTool:t[30],enableMoveTool:t[34],enableAutoSelectMoveTool:t[33],enableMultiSelect:t[35],snapThreshold:t[16],gridSize:Ze(t[18])?t[18]:t[15],enableSnapToContext:dc(t[19])?t[19]:t[17],enableToolShareStyles:t[13],shapeControls:t[23]||t[10],shapePresets:t[27],enableButtonFlipVertical:t[24],parentRect:t[50],enablePresetDropImage:t[26],enablePresetSelectImage:t[25],toolSelectRadius:t[11],textInputMode:t[12],willStartInteraction:t[14],willRenderPresetToolbar:t[28]||t[20],willRenderShapeStyleControls:t[29],hooks:{willRenderShapeControls:t[36],willRenderShapeTextControls:t[37],beforeAddShape:t[38],beforeRemoveShape:t[39],beforeDeselectShape:t[40],beforeSelectShape:t[41],beforeUpdateShape:t[42]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new fp({props:o}),jn.push(()=>Io(e,"toolActive",r)),e.$on("measure",t[61]),{c(){Ot(e.$$.fragment)},m(a,s){zt(e,a,s),i=!0},p(a,s){const l={};32&s[0]&&(l.stores=a[5]),64&s[0]&&(l.locale=a[6]),4&s[0]&&(l.isActive=a[2]),8&s[0]&&(l.isActiveFraction=a[3]),16&s[0]&&(l.isVisible=a[4]),32768&s[1]&&(l.mapScreenPointToImagePoint=a[46]),16384&s[1]&&(l.mapImagePointToScreenPoint=a[45]),65536&s[1]&&(l.imageRotation=a[47]),8192&s[1]&&(l.imageFlipX=a[44]),4096&s[1]&&(l.imageFlipY=a[43]),2097280&s[0]&&(l.toolbar=a[21]||a[7]),4194560&s[0]&&(l.toolShapes=a[22]||a[8]),512&s[0]&&(l.toolRetainStyles=a[9]),1&s[1]&&(l.enableSelectToolToAddShape=a[31]),2&s[1]&&(l.enableTapToAddText=a[32]),1073741824&s[0]&&(l.enableViewTool=a[30]),8&s[1]&&(l.enableMoveTool=a[34]),4&s[1]&&(l.enableAutoSelectMoveTool=a[33]),16&s[1]&&(l.enableMultiSelect=a[35]),65536&s[0]&&(l.snapThreshold=a[16]),294912&s[0]&&(l.gridSize=Ze(a[18])?a[18]:a[15]),655360&s[0]&&(l.enableSnapToContext=dc(a[19])?a[19]:a[17]),8192&s[0]&&(l.enableToolShareStyles=a[13]),8389632&s[0]&&(l.shapeControls=a[23]||a[10]),134217728&s[0]&&(l.shapePresets=a[27]),16777216&s[0]&&(l.enableButtonFlipVertical=a[24]),67108864&s[0]&&(l.enablePresetDropImage=a[26]),33554432&s[0]&&(l.enablePresetSelectImage=a[25]),2048&s[0]&&(l.toolSelectRadius=a[11]),4096&s[0]&&(l.textInputMode=a[12]),16384&s[0]&&(l.willStartInteraction=a[14]),269484032&s[0]&&(l.willRenderPresetToolbar=a[28]||a[20]),536870912&s[0]&&(l.willRenderShapeStyleControls=a[29]),4064&s[1]&&(l.hooks={willRenderShapeControls:a[36],willRenderShapeTextControls:a[37],beforeAddShape:a[38],beforeRemoveShape:a[39],beforeDeselectShape:a[40],beforeSelectShape:a[41],beforeUpdateShape:a[42]}),!n&&1&s[0]&&(n=!0,l.toolActive=a[0],jo(()=>n=!1)),e.$set(l)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){Dt(e,a)}}}function tk(t,e,n){let i,r,o,a,s,l,c,u,d,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:f}=e,{stores:g}=e,{locale:$={}}=e,{markupEditorToolbar:y}=e,{markupEditorToolStyles:v}=e,{markupEditorToolRetainStyles:w}=e,{markupEditorShapeStyleControls:S}=e,{markupEditorToolSelectRadius:R}=e,{markupEditorTextInputMode:M}=e,{markupEditorToolShareStyles:B}=e,{markupEditorWillStartInteraction:C}=e,{markupEditorGridSize:D=0}=e,{markupEditorSnapThreshold:O=0}=e,{markupEditorSnapToContext:P=!1}=e,{annotateGridSize:b}=e,{annotateSnapToContext:W}=e,{willRenderShapePresetToolbar:nt}=e,{annotateTools:k}=e,{annotateToolShapes:N}=e,{annotateShapeControls:j}=e,{annotateActiveTool:ut}=e,{annotateEnableButtonFlipVertical:Z=!1}=e,{annotateEnableSelectImagePreset:ft=!1}=e,{annotateEnableDropImagePreset:q=!0}=e,{annotatePresets:ht=[]}=e,{annotateWillRenderShapePresetToolbar:xt}=e,{annotateWillRenderShapeStyleControls:lt}=e,{enableViewTool:Ct}=e,{enableSelectToolToAddShape:it}=e,{enableTapToAddText:vt}=e,{enableAutoSelectMoveTool:K}=e,{enableMoveTool:Ft}=e,{enableMultiSelect:Ht}=e,{willRenderShapeControls:Lt}=e,{willRenderShapeTextControls:bt}=e,{beforeAddShape:_t}=e,{beforeRemoveShape:rt}=e,{beforeDeselectShape:Tt}=e,{beforeSelectShape:Vt}=e,{beforeUpdateShape:mt}=e;const{rootRect:at,imageAnnotation:$t,imageSize:te,imageRotation:le,imageFlipX:Wt,imageFlipY:we,imageTransforms:yt,imageTransformsInterpolated:ie}=g;return F(t,at,V=>n(59,u=V)),F(t,te,V=>n(58,c=V)),F(t,le,V=>n(47,d=V)),F(t,Wt,V=>n(44,a=V)),F(t,we,V=>n(43,o=V)),F(t,yt,V=>n(57,l=V)),F(t,ie,V=>n(56,s=V)),t.$$set=V=>{"isActive"in V&&n(2,p=V.isActive),"isActiveFraction"in V&&n(3,h=V.isActiveFraction),"isVisible"in V&&n(4,f=V.isVisible),"stores"in V&&n(5,g=V.stores),"locale"in V&&n(6,$=V.locale),"markupEditorToolbar"in V&&n(7,y=V.markupEditorToolbar),"markupEditorToolStyles"in V&&n(8,v=V.markupEditorToolStyles),"markupEditorToolRetainStyles"in V&&n(9,w=V.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in V&&n(10,S=V.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in V&&n(11,R=V.markupEditorToolSelectRadius),"markupEditorTextInputMode"in V&&n(12,M=V.markupEditorTextInputMode),"markupEditorToolShareStyles"in V&&n(13,B=V.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in V&&n(14,C=V.markupEditorWillStartInteraction),"markupEditorGridSize"in V&&n(15,D=V.markupEditorGridSize),"markupEditorSnapThreshold"in V&&n(16,O=V.markupEditorSnapThreshold),"markupEditorSnapToContext"in V&&n(17,P=V.markupEditorSnapToContext),"annotateGridSize"in V&&n(18,b=V.annotateGridSize),"annotateSnapToContext"in V&&n(19,W=V.annotateSnapToContext),"willRenderShapePresetToolbar"in V&&n(20,nt=V.willRenderShapePresetToolbar),"annotateTools"in V&&n(21,k=V.annotateTools),"annotateToolShapes"in V&&n(22,N=V.annotateToolShapes),"annotateShapeControls"in V&&n(23,j=V.annotateShapeControls),"annotateActiveTool"in V&&n(0,ut=V.annotateActiveTool),"annotateEnableButtonFlipVertical"in V&&n(24,Z=V.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in V&&n(25,ft=V.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in V&&n(26,q=V.annotateEnableDropImagePreset),"annotatePresets"in V&&n(27,ht=V.annotatePresets),"annotateWillRenderShapePresetToolbar"in V&&n(28,xt=V.annotateWillRenderShapePresetToolbar),"annotateWillRenderShapeStyleControls"in V&&n(29,lt=V.annotateWillRenderShapeStyleControls),"enableViewTool"in V&&n(30,Ct=V.enableViewTool),"enableSelectToolToAddShape"in V&&n(31,it=V.enableSelectToolToAddShape),"enableTapToAddText"in V&&n(32,vt=V.enableTapToAddText),"enableAutoSelectMoveTool"in V&&n(33,K=V.enableAutoSelectMoveTool),"enableMoveTool"in V&&n(34,Ft=V.enableMoveTool),"enableMultiSelect"in V&&n(35,Ht=V.enableMultiSelect),"willRenderShapeControls"in V&&n(36,Lt=V.willRenderShapeControls),"willRenderShapeTextControls"in V&&n(37,bt=V.willRenderShapeTextControls),"beforeAddShape"in V&&n(38,_t=V.beforeAddShape),"beforeRemoveShape"in V&&n(39,rt=V.beforeRemoveShape),"beforeDeselectShape"in V&&n(40,Tt=V.beforeDeselectShape),"beforeSelectShape"in V&&n(41,Vt=V.beforeSelectShape),"beforeUpdateShape"in V&&n(42,mt=V.beforeUpdateShape)},t.$$.update=()=>{503328768&t.$$.dirty[1]&&n(46,i=V=>_0(V,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),503328768&t.$$.dirty[1]&&n(45,r=V=>O0(V,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[ut,"annotate",p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,W,nt,k,N,j,Z,ft,q,ht,xt,lt,Ct,it,vt,K,Ft,Ht,Lt,bt,_t,rt,Tt,Vt,mt,o,a,r,i,d,at,$t,te,le,Wt,we,yt,ie,s,l,c,u,function(V){ut=V,n(0,ut)},function(V){Kr.call(this,t,V)}]}var ek={util:["annotate",class extends pn{constructor(t){super(),dn(this,t,tk,Q8,ln,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,markupEditorWillStartInteraction:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,annotateGridSize:18,annotateSnapToContext:19,willRenderShapePresetToolbar:20,annotateTools:21,annotateToolShapes:22,annotateShapeControls:23,annotateActiveTool:0,annotateEnableButtonFlipVertical:24,annotateEnableSelectImagePreset:25,annotateEnableDropImagePreset:26,annotatePresets:27,annotateWillRenderShapePresetToolbar:28,annotateWillRenderShapeStyleControls:29,enableViewTool:30,enableSelectToolToAddShape:31,enableTapToAddText:32,enableAutoSelectMoveTool:33,enableMoveTool:34,enableMultiSelect:35,willRenderShapeControls:36,willRenderShapeTextControls:37,beforeAddShape:38,beforeRemoveShape:39,beforeDeselectShape:40,beforeSelectShape:41,beforeUpdateShape:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[4]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[5]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[6]}set locale(t){this.$$set({locale:t}),E()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),E()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),E()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),E()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),E()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),E()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),E()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[14]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),E()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),E()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),E()}get annotateGridSize(){return this.$$.ctx[18]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),E()}get annotateSnapToContext(){return this.$$.ctx[19]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),E()}get willRenderShapePresetToolbar(){return this.$$.ctx[20]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),E()}get annotateTools(){return this.$$.ctx[21]}set annotateTools(t){this.$$set({annotateTools:t}),E()}get annotateToolShapes(){return this.$$.ctx[22]}set annotateToolShapes(t){this.$$set({annotateToolShapes:t}),E()}get annotateShapeControls(){return this.$$.ctx[23]}set annotateShapeControls(t){this.$$set({annotateShapeControls:t}),E()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$$set({annotateActiveTool:t}),E()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[24]}set annotateEnableButtonFlipVertical(t){this.$$set({annotateEnableButtonFlipVertical:t}),E()}get annotateEnableSelectImagePreset(){return this.$$.ctx[25]}set annotateEnableSelectImagePreset(t){this.$$set({annotateEnableSelectImagePreset:t}),E()}get annotateEnableDropImagePreset(){return this.$$.ctx[26]}set annotateEnableDropImagePreset(t){this.$$set({annotateEnableDropImagePreset:t}),E()}get annotatePresets(){return this.$$.ctx[27]}set annotatePresets(t){this.$$set({annotatePresets:t}),E()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[28]}set annotateWillRenderShapePresetToolbar(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),E()}get annotateWillRenderShapeStyleControls(){return this.$$.ctx[29]}set annotateWillRenderShapeStyleControls(t){this.$$set({annotateWillRenderShapeStyleControls:t}),E()}get enableViewTool(){return this.$$.ctx[30]}set enableViewTool(t){this.$$set({enableViewTool:t}),E()}get enableSelectToolToAddShape(){return this.$$.ctx[31]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),E()}get enableTapToAddText(){return this.$$.ctx[32]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),E()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),E()}get enableMoveTool(){return this.$$.ctx[34]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),E()}get enableMultiSelect(){return this.$$.ctx[35]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}get willRenderShapeControls(){return this.$$.ctx[36]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),E()}get willRenderShapeTextControls(){return this.$$.ctx[37]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),E()}get beforeAddShape(){return this.$$.ctx[38]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),E()}get beforeRemoveShape(){return this.$$.ctx[39]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),E()}get beforeDeselectShape(){return this.$$.ctx[40]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),E()}get beforeSelectShape(){return this.$$.ctx[41]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),E()}get beforeUpdateShape(){return this.$$.ctx[42]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),E()}}]};function nk(t){let e,n,i;function r(a){t[52](a)}let o={utilKey:t[1],stores:t[5],locale:t[6],isActive:t[2],isActiveFraction:t[3],isVisible:t[4],mapScreenPointToImagePoint:t[44],mapImagePointToScreenPoint:t[43],shapes:t[46],toolbar:t[20]||t[7],toolShapes:t[21]||t[8],toolRetainStyles:t[9],shapeControls:t[22]||t[10],shapePresets:t[26],enableSelectToolToAddShape:t[29],enableTapToAddText:t[30],enableViewTool:t[31],enableMoveTool:t[32],enableAutoSelectMoveTool:t[33],enableMultiSelect:t[34],snapThreshold:t[16],gridSize:Ze(t[18])?t[18]:t[15],enableSnapToContext:dc(t[19])?t[19]:t[17],enableToolShareStyles:t[13],enablePresetSelectImage:t[24],enablePresetDropImage:t[25],enableButtonFlipVertical:t[23],parentRect:t[45],toolSelectRadius:t[11],textInputMode:t[12],willStartInteraction:t[42],willRenderPresetToolbar:t[27]||t[14],willRenderShapeStyleControls:t[28],hooks:{willRenderShapeControls:t[35],willRenderShapeTextControls:t[36],beforeAddShape:t[37],beforeRemoveShape:t[38],beforeDeselectShape:t[39],beforeSelectShape:t[40],beforeUpdateShape:t[41]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new fp({props:o}),jn.push(()=>Io(e,"toolActive",r)),e.$on("measure",t[53]),{c(){Ot(e.$$.fragment)},m(a,s){zt(e,a,s),i=!0},p(a,s){const l={};32&s[0]&&(l.stores=a[5]),64&s[0]&&(l.locale=a[6]),4&s[0]&&(l.isActive=a[2]),8&s[0]&&(l.isActiveFraction=a[3]),16&s[0]&&(l.isVisible=a[4]),8192&s[1]&&(l.mapScreenPointToImagePoint=a[44]),4096&s[1]&&(l.mapImagePointToScreenPoint=a[43]),1048704&s[0]&&(l.toolbar=a[20]||a[7]),2097408&s[0]&&(l.toolShapes=a[21]||a[8]),512&s[0]&&(l.toolRetainStyles=a[9]),4195328&s[0]&&(l.shapeControls=a[22]||a[10]),67108864&s[0]&&(l.shapePresets=a[26]),536870912&s[0]&&(l.enableSelectToolToAddShape=a[29]),1073741824&s[0]&&(l.enableTapToAddText=a[30]),1&s[1]&&(l.enableViewTool=a[31]),2&s[1]&&(l.enableMoveTool=a[32]),4&s[1]&&(l.enableAutoSelectMoveTool=a[33]),8&s[1]&&(l.enableMultiSelect=a[34]),65536&s[0]&&(l.snapThreshold=a[16]),294912&s[0]&&(l.gridSize=Ze(a[18])?a[18]:a[15]),655360&s[0]&&(l.enableSnapToContext=dc(a[19])?a[19]:a[17]),8192&s[0]&&(l.enableToolShareStyles=a[13]),16777216&s[0]&&(l.enablePresetSelectImage=a[24]),33554432&s[0]&&(l.enablePresetDropImage=a[25]),8388608&s[0]&&(l.enableButtonFlipVertical=a[23]),2048&s[0]&&(l.toolSelectRadius=a[11]),4096&s[0]&&(l.textInputMode=a[12]),2048&s[1]&&(l.willStartInteraction=a[42]),134234112&s[0]&&(l.willRenderPresetToolbar=a[27]||a[14]),268435456&s[0]&&(l.willRenderShapeStyleControls=a[28]),2032&s[1]&&(l.hooks={willRenderShapeControls:a[35],willRenderShapeTextControls:a[36],beforeAddShape:a[37],beforeRemoveShape:a[38],beforeDeselectShape:a[39],beforeSelectShape:a[40],beforeUpdateShape:a[41]}),!n&&1&s[0]&&(n=!0,l.toolActive=a[0],jo(()=>n=!1)),e.$set(l)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){z(e.$$.fragment,a),i=!1},d(a){Dt(e,a)}}}function ik(t,e,n){let i,r,o,a,s,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:u}=e,{stores:d}=e,{locale:p={}}=e,{markupEditorToolbar:h}=e,{markupEditorToolStyles:f}=e,{markupEditorToolRetainStyles:g}=e,{markupEditorShapeStyleControls:$}=e,{markupEditorToolSelectRadius:y}=e,{markupEditorTextInputMode:v}=e,{markupEditorToolShareStyles:w}=e,{willRenderShapePresetToolbar:S}=e,{markupEditorGridSize:R}=e,{markupEditorSnapThreshold:M}=e,{markupEditorSnapToContext:B=!0}=e,{decorateGridSize:C}=e,{decorateSnapToContext:D}=e,{decorateTools:O}=e,{decorateToolShapes:P}=e,{decorateShapeControls:b}=e,{decorateActiveTool:W}=e,{decorateEnableButtonFlipVertical:nt=!1}=e,{decorateEnableSelectImagePreset:k=!1}=e,{decorateEnableDropImagePreset:N=!0}=e,{decoratePresets:j=[]}=e,{decorateWillRenderShapePresetToolbar:ut}=e,{decorateWillRenderShapeStyleControls:Z}=e,{enableSelectToolToAddShape:ft}=e,{enableTapToAddText:q}=e,{enableViewTool:ht}=e,{enableMoveTool:xt}=e,{enableAutoSelectMoveTool:lt}=e,{enableMultiSelect:Ct}=e,{willRenderShapeControls:it}=e,{willRenderShapeTextControls:vt}=e,{beforeAddShape:K}=e,{beforeRemoveShape:Ft}=e,{beforeDeselectShape:Ht}=e,{beforeSelectShape:Lt}=e,{beforeUpdateShape:bt}=e,{markupEditorWillStartInteraction:_t}=e;const{imageCropRect:rt,imageDecoration:Tt,imageSelectionRectPresentation:Vt,imageTransformsInterpolated:mt}=d;return F(t,Vt,at=>n(50,a=at)),F(t,mt,at=>n(51,s=at)),t.$$set=at=>{"isActive"in at&&n(2,l=at.isActive),"isActiveFraction"in at&&n(3,c=at.isActiveFraction),"isVisible"in at&&n(4,u=at.isVisible),"stores"in at&&n(5,d=at.stores),"locale"in at&&n(6,p=at.locale),"markupEditorToolbar"in at&&n(7,h=at.markupEditorToolbar),"markupEditorToolStyles"in at&&n(8,f=at.markupEditorToolStyles),"markupEditorToolRetainStyles"in at&&n(9,g=at.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in at&&n(10,$=at.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in at&&n(11,y=at.markupEditorToolSelectRadius),"markupEditorTextInputMode"in at&&n(12,v=at.markupEditorTextInputMode),"markupEditorToolShareStyles"in at&&n(13,w=at.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in at&&n(14,S=at.willRenderShapePresetToolbar),"markupEditorGridSize"in at&&n(15,R=at.markupEditorGridSize),"markupEditorSnapThreshold"in at&&n(16,M=at.markupEditorSnapThreshold),"markupEditorSnapToContext"in at&&n(17,B=at.markupEditorSnapToContext),"decorateGridSize"in at&&n(18,C=at.decorateGridSize),"decorateSnapToContext"in at&&n(19,D=at.decorateSnapToContext),"decorateTools"in at&&n(20,O=at.decorateTools),"decorateToolShapes"in at&&n(21,P=at.decorateToolShapes),"decorateShapeControls"in at&&n(22,b=at.decorateShapeControls),"decorateActiveTool"in at&&n(0,W=at.decorateActiveTool),"decorateEnableButtonFlipVertical"in at&&n(23,nt=at.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in at&&n(24,k=at.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in at&&n(25,N=at.decorateEnableDropImagePreset),"decoratePresets"in at&&n(26,j=at.decoratePresets),"decorateWillRenderShapePresetToolbar"in at&&n(27,ut=at.decorateWillRenderShapePresetToolbar),"decorateWillRenderShapeStyleControls"in at&&n(28,Z=at.decorateWillRenderShapeStyleControls),"enableSelectToolToAddShape"in at&&n(29,ft=at.enableSelectToolToAddShape),"enableTapToAddText"in at&&n(30,q=at.enableTapToAddText),"enableViewTool"in at&&n(31,ht=at.enableViewTool),"enableMoveTool"in at&&n(32,xt=at.enableMoveTool),"enableAutoSelectMoveTool"in at&&n(33,lt=at.enableAutoSelectMoveTool),"enableMultiSelect"in at&&n(34,Ct=at.enableMultiSelect),"willRenderShapeControls"in at&&n(35,it=at.willRenderShapeControls),"willRenderShapeTextControls"in at&&n(36,vt=at.willRenderShapeTextControls),"beforeAddShape"in at&&n(37,K=at.beforeAddShape),"beforeRemoveShape"in at&&n(38,Ft=at.beforeRemoveShape),"beforeDeselectShape"in at&&n(39,Ht=at.beforeDeselectShape),"beforeSelectShape"in at&&n(40,Lt=at.beforeSelectShape),"beforeUpdateShape"in at&&n(41,bt=at.beforeUpdateShape),"markupEditorWillStartInteraction"in at&&n(42,_t=at.markupEditorWillStartInteraction)},t.$$.update=()=>{1048576&t.$$.dirty[1]&&n(49,i=s?s.scale:1),786432&t.$$.dirty[1]&&n(44,r=at=>{const $t=We(at);return $t.x-=a.x,$t.y-=a.y,$t.x/=i,$t.y/=i,$t}),786432&t.$$.dirty[1]&&n(43,o=at=>{const $t=We(at);return $t.x*=i,$t.y*=i,$t.x+=a.x,$t.y+=a.y,$t})},[W,"decorate",l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,nt,k,N,j,ut,Z,ft,q,ht,xt,lt,Ct,it,vt,K,Ft,Ht,Lt,bt,_t,o,r,rt,Tt,Vt,mt,i,a,s,function(at){W=at,n(0,W)},function(at){Kr.call(this,t,at)}]}var rk={util:["decorate",class extends pn{constructor(t){super(),dn(this,t,ik,nk,ln,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,willRenderShapePresetToolbar:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,decorateGridSize:18,decorateSnapToContext:19,decorateTools:20,decorateToolShapes:21,decorateShapeControls:22,decorateActiveTool:0,decorateEnableButtonFlipVertical:23,decorateEnableSelectImagePreset:24,decorateEnableDropImagePreset:25,decoratePresets:26,decorateWillRenderShapePresetToolbar:27,decorateWillRenderShapeStyleControls:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableViewTool:31,enableMoveTool:32,enableAutoSelectMoveTool:33,enableMultiSelect:34,willRenderShapeControls:35,willRenderShapeTextControls:36,beforeAddShape:37,beforeRemoveShape:38,beforeDeselectShape:39,beforeSelectShape:40,beforeUpdateShape:41,markupEditorWillStartInteraction:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[4]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[5]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[6]}set locale(t){this.$$set({locale:t}),E()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),E()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),E()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),E()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),E()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),E()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),E()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),E()}get willRenderShapePresetToolbar(){return this.$$.ctx[14]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),E()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),E()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),E()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),E()}get decorateGridSize(){return this.$$.ctx[18]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),E()}get decorateSnapToContext(){return this.$$.ctx[19]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),E()}get decorateTools(){return this.$$.ctx[20]}set decorateTools(t){this.$$set({decorateTools:t}),E()}get decorateToolShapes(){return this.$$.ctx[21]}set decorateToolShapes(t){this.$$set({decorateToolShapes:t}),E()}get decorateShapeControls(){return this.$$.ctx[22]}set decorateShapeControls(t){this.$$set({decorateShapeControls:t}),E()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$$set({decorateActiveTool:t}),E()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[23]}set decorateEnableButtonFlipVertical(t){this.$$set({decorateEnableButtonFlipVertical:t}),E()}get decorateEnableSelectImagePreset(){return this.$$.ctx[24]}set decorateEnableSelectImagePreset(t){this.$$set({decorateEnableSelectImagePreset:t}),E()}get decorateEnableDropImagePreset(){return this.$$.ctx[25]}set decorateEnableDropImagePreset(t){this.$$set({decorateEnableDropImagePreset:t}),E()}get decoratePresets(){return this.$$.ctx[26]}set decoratePresets(t){this.$$set({decoratePresets:t}),E()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set decorateWillRenderShapePresetToolbar(t){this.$$set({decorateWillRenderShapePresetToolbar:t}),E()}get decorateWillRenderShapeStyleControls(){return this.$$.ctx[28]}set decorateWillRenderShapeStyleControls(t){this.$$set({decorateWillRenderShapeStyleControls:t}),E()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),E()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),E()}get enableViewTool(){return this.$$.ctx[31]}set enableViewTool(t){this.$$set({enableViewTool:t}),E()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),E()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),E()}get enableMultiSelect(){return this.$$.ctx[34]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}get willRenderShapeControls(){return this.$$.ctx[35]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),E()}get willRenderShapeTextControls(){return this.$$.ctx[36]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),E()}get beforeAddShape(){return this.$$.ctx[37]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),E()}get beforeRemoveShape(){return this.$$.ctx[38]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),E()}get beforeDeselectShape(){return this.$$.ctx[39]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),E()}get beforeSelectShape(){return this.$$.ctx[40]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),E()}get beforeUpdateShape(){return this.$$.ctx[41]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[42]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}}]};function ok(t){let e,n;return e=new fp({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[26],mapImagePointToScreenPoint:t[25],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[35]:t[36],toolActive:"preset",imageFlipX:!!t[6]&&t[24],imageFlipY:!!t[6]&&t[23],imageRotation:t[6]?t[31]:0,parentRect:t[6]?t[37]:t[33],snapThreshold:t[29],gridSize:t[28],enableMultiSelect:t[12],enableSnapToContext:t[27],enablePresetDropImage:t[7],enablePresetSelectImage:t[30],enableButtonFlipVertical:t[10]||t[8],toolSelectRadius:t[15],willStartInteraction:t[22],willRenderPresetToolbar:t[11]||t[9]||t[16],hooks:{willRenderShapeControls:t[13],willRenderShapeTextControls:t[14],beforeAddShape:t[17],beforeRemoveShape:t[18],beforeDeselectShape:t[19],beforeSelectShape:t[20],beforeUpdateShape:t[21]}}}),e.$on("measure",t[60]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};8&r[0]&&(o.stores=i[3]),16&r[0]&&(o.locale=i[4]),1&r[0]&&(o.isActive=i[0]),2&r[0]&&(o.isActiveFraction=i[1]),4&r[0]&&(o.isVisible=i[2]),67108864&r[0]&&(o.mapScreenPointToImagePoint=i[26]),33554432&r[0]&&(o.mapImagePointToScreenPoint=i[25]),32&r[0]&&(o.shapePresets=i[5]),64&r[0]&&(o.shapes=i[6]?i[35]:i[36]),16777280&r[0]&&(o.imageFlipX=!!i[6]&&i[24]),8388672&r[0]&&(o.imageFlipY=!!i[6]&&i[23]),64&r[0]|1&r[1]&&(o.imageRotation=i[6]?i[31]:0),64&r[0]&&(o.parentRect=i[6]?i[37]:i[33]),536870912&r[0]&&(o.snapThreshold=i[29]),268435456&r[0]&&(o.gridSize=i[28]),4096&r[0]&&(o.enableMultiSelect=i[12]),134217728&r[0]&&(o.enableSnapToContext=i[27]),128&r[0]&&(o.enablePresetDropImage=i[7]),1073741824&r[0]&&(o.enablePresetSelectImage=i[30]),1280&r[0]&&(o.enableButtonFlipVertical=i[10]||i[8]),32768&r[0]&&(o.toolSelectRadius=i[15]),4194304&r[0]&&(o.willStartInteraction=i[22]),68096&r[0]&&(o.willRenderPresetToolbar=i[11]||i[9]||i[16]),4087808&r[0]&&(o.hooks={willRenderShapeControls:i[13],willRenderShapeTextControls:i[14],beforeAddShape:i[17],beforeRemoveShape:i[18],beforeDeselectShape:i[19],beforeSelectShape:i[20],beforeUpdateShape:i[21]}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function ak(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,{isActive:v}=e,{isActiveFraction:w}=e,{isVisible:S}=e,{stores:R}=e,{locale:M={}}=e,{stickers:B=[]}=e,{stickerForceEnable:C=!1}=e,{stickerStickToImage:D=!1}=e,{stickerEnableSelectImagePreset:O=!0}=e,{stickerEnableDropImagePreset:P=!0}=e,{stickerEnableButtonFlipVertical:b=!1}=e,{stickerWillRenderShapePresetToolbar:W}=e,{stickerEnableSelectImage:nt=!0}=e,{stickersEnableButtonFlipVertical:k=!1}=e,{stickersWillRenderShapePresetToolbar:N}=e,{markupEditorGridSize:j=0}=e,{markupEditorSnapThreshold:ut=0}=e,{markupEditorSnapToContext:Z=!1}=e,{enableMultiSelect:ft}=e,{annotateGridSize:q}=e,{annotateSnapToContext:ht}=e,{decorateGridSize:xt}=e,{decorateSnapToContext:lt}=e,{willRenderShapeControls:Ct}=e,{willRenderShapeTextControls:it}=e,{markupEditorToolSelectRadius:vt}=e,{willRenderShapePresetToolbar:K}=e,{beforeAddShape:Ft}=e,{beforeRemoveShape:Ht}=e,{beforeDeselectShape:Lt}=e,{beforeSelectShape:bt}=e,{beforeUpdateShape:_t}=e,{markupEditorWillStartInteraction:rt}=e;const{rootRect:Tt,imageCropRect:Vt,imageSelectionRectPresentation:mt,imageAnnotation:at,imageDecoration:$t,imageSize:te,imageTransforms:le,imageTransformsInterpolated:Wt,imageRotation:we,imageFlipX:yt,imageFlipY:ie}=R;return F(t,Tt,V=>n(59,$=V)),F(t,mt,V=>n(55,u=V)),F(t,te,V=>n(58,g=V)),F(t,le,V=>n(57,f=V)),F(t,Wt,V=>n(56,h=V)),F(t,we,V=>n(31,y=V)),F(t,yt,V=>n(24,p=V)),F(t,ie,V=>n(23,d=V)),t.$$set=V=>{"isActive"in V&&n(0,v=V.isActive),"isActiveFraction"in V&&n(1,w=V.isActiveFraction),"isVisible"in V&&n(2,S=V.isVisible),"stores"in V&&n(3,R=V.stores),"locale"in V&&n(4,M=V.locale),"stickers"in V&&n(5,B=V.stickers),"stickerForceEnable"in V&&n(44,C=V.stickerForceEnable),"stickerStickToImage"in V&&n(6,D=V.stickerStickToImage),"stickerEnableSelectImagePreset"in V&&n(45,O=V.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in V&&n(7,P=V.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in V&&n(8,b=V.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in V&&n(9,W=V.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in V&&n(46,nt=V.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in V&&n(10,k=V.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in V&&n(11,N=V.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in V&&n(47,j=V.markupEditorGridSize),"markupEditorSnapThreshold"in V&&n(48,ut=V.markupEditorSnapThreshold),"markupEditorSnapToContext"in V&&n(49,Z=V.markupEditorSnapToContext),"enableMultiSelect"in V&&n(12,ft=V.enableMultiSelect),"annotateGridSize"in V&&n(50,q=V.annotateGridSize),"annotateSnapToContext"in V&&n(51,ht=V.annotateSnapToContext),"decorateGridSize"in V&&n(52,xt=V.decorateGridSize),"decorateSnapToContext"in V&&n(53,lt=V.decorateSnapToContext),"willRenderShapeControls"in V&&n(13,Ct=V.willRenderShapeControls),"willRenderShapeTextControls"in V&&n(14,it=V.willRenderShapeTextControls),"markupEditorToolSelectRadius"in V&&n(15,vt=V.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in V&&n(16,K=V.willRenderShapePresetToolbar),"beforeAddShape"in V&&n(17,Ft=V.beforeAddShape),"beforeRemoveShape"in V&&n(18,Ht=V.beforeRemoveShape),"beforeDeselectShape"in V&&n(19,Lt=V.beforeDeselectShape),"beforeSelectShape"in V&&n(20,bt=V.beforeSelectShape),"beforeUpdateShape"in V&&n(21,_t=V.beforeUpdateShape),"markupEditorWillStartInteraction"in V&&n(22,rt=V.markupEditorWillStartInteraction)},t.$$.update=()=>{33554432&t.$$.dirty[1]&&n(54,i=h?h.scale:1),49152&t.$$.dirty[1]&&n(30,r=O!==!1&&nt),131072&t.$$.dirty[1]&&n(29,o=ut),64&t.$$.dirty[0]|2686976&t.$$.dirty[1]&&n(28,a=D?Ze(q)?q:j:Ze(xt)?xt:j),64&t.$$.dirty[0]|5505024&t.$$.dirty[1]&&n(27,s=D?dc(ht)?ht:Z:dc(lt)?lt:Z),25165888&t.$$.dirty[0]|528482304&t.$$.dirty[1]&&n(26,l=D?V=>_0(V,$,g,h.origin,h.translation,f.rotation.z,h.scale,p,d):V=>{const De=We(V);return De.x-=u.x,De.y-=u.y,De.x/=i,De.y/=i,De}),25165888&t.$$.dirty[0]|528482304&t.$$.dirty[1]&&n(25,c=D?V=>O0(V,$,g,h.origin,h.translation,f.rotation.z,h.scale,p,d):V=>{const De=We(V);return De.x*=i,De.y*=i,De.x+=u.x,De.y+=u.y,De})},[v,w,S,R,M,B,D,P,b,W,k,N,ft,Ct,it,vt,K,Ft,Ht,Lt,bt,_t,rt,d,p,c,l,s,a,o,r,y,Tt,Vt,mt,at,$t,te,le,Wt,we,yt,ie,"sticker",C,O,nt,j,ut,Z,q,ht,xt,lt,i,u,h,f,g,$,function(V){Kr.call(this,t,V)}]}var sk={util:["sticker",class extends pn{constructor(t){super(),dn(this,t,ak,ok,ln,{name:43,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:44,stickerStickToImage:6,stickerEnableSelectImagePreset:45,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:46,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:47,markupEditorSnapThreshold:48,markupEditorSnapToContext:49,enableMultiSelect:12,annotateGridSize:50,annotateSnapToContext:51,decorateGridSize:52,decorateSnapToContext:53,willRenderShapeControls:13,willRenderShapeTextControls:14,markupEditorToolSelectRadius:15,willRenderShapePresetToolbar:16,beforeAddShape:17,beforeRemoveShape:18,beforeDeselectShape:19,beforeSelectShape:20,beforeUpdateShape:21,markupEditorWillStartInteraction:22},null,[-1,-1])}get name(){return this.$$.ctx[43]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),E()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$$set({stickers:t}),E()}get stickerForceEnable(){return this.$$.ctx[44]}set stickerForceEnable(t){this.$$set({stickerForceEnable:t}),E()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$$set({stickerStickToImage:t}),E()}get stickerEnableSelectImagePreset(){return this.$$.ctx[45]}set stickerEnableSelectImagePreset(t){this.$$set({stickerEnableSelectImagePreset:t}),E()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(t){this.$$set({stickerEnableDropImagePreset:t}),E()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(t){this.$$set({stickerEnableButtonFlipVertical:t}),E()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(t){this.$$set({stickerWillRenderShapePresetToolbar:t}),E()}get stickerEnableSelectImage(){return this.$$.ctx[46]}set stickerEnableSelectImage(t){this.$$set({stickerEnableSelectImage:t}),E()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(t){this.$$set({stickersEnableButtonFlipVertical:t}),E()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(t){this.$$set({stickersWillRenderShapePresetToolbar:t}),E()}get markupEditorGridSize(){return this.$$.ctx[47]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),E()}get markupEditorSnapThreshold(){return this.$$.ctx[48]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),E()}get markupEditorSnapToContext(){return this.$$.ctx[49]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),E()}get enableMultiSelect(){return this.$$.ctx[12]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}get annotateGridSize(){return this.$$.ctx[50]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),E()}get annotateSnapToContext(){return this.$$.ctx[51]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),E()}get decorateGridSize(){return this.$$.ctx[52]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),E()}get decorateSnapToContext(){return this.$$.ctx[53]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),E()}get willRenderShapeControls(){return this.$$.ctx[13]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),E()}get willRenderShapeTextControls(){return this.$$.ctx[14]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),E()}get markupEditorToolSelectRadius(){return this.$$.ctx[15]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),E()}get willRenderShapePresetToolbar(){return this.$$.ctx[16]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),E()}get beforeAddShape(){return this.$$.ctx[17]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),E()}get beforeRemoveShape(){return this.$$.ctx[18]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),E()}get beforeDeselectShape(){return this.$$.ctx[19]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),E()}get beforeSelectShape(){return this.$$.ctx[20]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),E()}get beforeUpdateShape(){return this.$$.ctx[21]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[22]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}},({stickers:t,stickerEnableSelectImage:e,stickerEnableSelectImagePreset:n,stickerEnableDropImagePreset:i,stickerForceEnable:r})=>t&&t.length||e||n||i||r]};function lk(t){let e,n,i=(t[14](t[36].value)||"")+"";return{c(){e=new b0(!1),n=Ii(),e.a=n},m(r,o){e.m(i,r,o),et(r,n,o)},p(r,o){32&o[1]&&i!==(i=(r[14](r[36].value)||"")+"")&&e.p(i)},i:Xe,o:Xe,d(r){r&&Q(n),r&&e.d()}}}function ck(t){let e,n;return e=new qr({props:{items:t[16](t[36].value)}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};32&r[1]&&(o.items=i[16](i[36].value)),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function uk(t){let e,n,i,r,o,a,s,l,c=(Yn(t[36].label)?t[36].label(t[1]):t[36].label)+"";const u=[ck,lk],d=[];function p(h,f){return 32&f[1]&&(n=null),n==null&&(n=!!h[15](h[36].value)),n?0:1}return i=p(t,[-1,-1]),r=d[i]=u[i](t),{c(){e=dt("div"),r.c(),o=he(),a=dt("span"),s=vi(c),T(e,"slot","option")},m(h,f){et(h,e,f),d[i].m(e,null),St(e,o),St(e,a),St(a,s),l=!0},p(h,f){let g=i;i=p(h,f),i===g?d[i].p(h,f):(Ie(),z(d[g],1,1,()=>{d[g]=null}),Re(),r=d[i],r?r.p(h,f):(r=d[i]=u[i](h),r.c()),I(r,1),r.m(e,o)),(!l||2&f[0]|32&f[1])&&c!==(c=(Yn(h[36].label)?h[36].label(h[1]):h[36].label)+"")&&Oi(s,c)},i(h){l||(I(r),l=!0)},o(h){z(r),l=!1},d(h){h&&Q(e),d[i].d()}}}function dk(t){let e,n;return e=new Ss({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[6],onchange:t[12],$$slots:{option:[uk,({option:i})=>({36:i}),({option:i})=>[0,i?32:0]]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};2&r[0]&&(o.locale=i[1]),4&r[0]&&(o.options=i[2]),64&r[0]&&(o.selectedIndex=i[6]),2&r[0]|96&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function pk(t){let e,n,i,r,o;return n=new gp({props:{locale:t[1],class:"PinturaControlPanels",shapeProps:t[4],onchange:t[13],controls:t[3],scrollElasticity:t[7]}}),r=new Va({props:{elasticity:t[10],$$slots:{default:[dk]},$$scope:{ctx:t}}}),{c(){e=dt("div"),Ot(n.$$.fragment),i=he(),Ot(r.$$.fragment),T(e,"slot","footer"),Et(e,"transform",t[5])},m(a,s){et(a,e,s),zt(n,e,null),St(e,i),zt(r,e,null),o=!0},p(a,s){const l={};2&s[0]&&(l.locale=a[1]),16&s[0]&&(l.shapeProps=a[4]),8&s[0]&&(l.controls=a[3]),128&s[0]&&(l.scrollElasticity=a[7]),n.$set(l);const c={};70&s[0]|64&s[1]&&(c.$$scope={dirty:s,ctx:a}),r.$set(c),32&s[0]&&Et(e,"transform",a[5])},i(a){o||(I(n.$$.fragment,a),I(r.$$.fragment,a),o=!0)},o(a){z(n.$$.fragment,a),z(r.$$.fragment,a),o=!1},d(a){a&&Q(e),Dt(n),Dt(r)}}}function hk(t){let e,n;return e=new Rl({props:{$$slots:{footer:[pk]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};254&r[0]|64&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function mk(t,e,n){let i,r,o,a,s,l,c,u,d=Xe,p=()=>(d(),d=Zr(h,k=>n(22,s=k)),h);t.$$.on_destroy.push(()=>d());let{isActive:h}=e;p();let{stores:f}=e,{locale:g={}}=e,{frameStyles:$={}}=e,{frameOptions:y=[]}=e,{markupEditorShapeStyleControls:v}=e;const w=mi("elasticityMultiplier");F(t,w,k=>n(24,u=k));const{history:S,animation:R,scrollElasticity:M,imageFrame:B,allowPan:C,allowZoom:D,allowZoomControls:O,allowPlayPause:P}=f;F(t,R,k=>n(23,l=k)),F(t,B,k=>n(4,c=k));let b={},W;const nt=hn(l?20:0);return F(t,nt,k=>n(21,a=k)),t.$$set=k=>{"isActive"in k&&p(n(0,h=k.isActive)),"stores"in k&&n(19,f=k.stores),"locale"in k&&n(1,g=k.locale),"frameStyles"in k&&n(20,$=k.frameStyles),"frameOptions"in k&&n(2,y=k.frameOptions),"markupEditorShapeStyleControls"in k&&n(3,v=k.markupEditorShapeStyleControls)},t.$$.update=()=>{4194304&t.$$.dirty[0]&&C.set(s),4194304&t.$$.dirty[0]&&D.set(s),4194304&t.$$.dirty[0]&&O.set(s),4194304&t.$$.dirty[0]&&s&&P.set(!0),16777216&t.$$.dirty[0]&&n(7,i=u*M),20&t.$$.dirty[0]&&n(6,r=c?y.findIndex(([k])=>k===c.id):0),12582912&t.$$.dirty[0]&&l&&nt.set(s?0:20),2097152&t.$$.dirty[0]&&n(5,o=a?`translateY(${a}px)`:"none")},[h,g,y,v,c,o,r,i,w,R,M,B,({value:k})=>{const N=$[k];if(!N||!N.shape)return B.set(void 0),void S.write();const{shape:j}=N,ut={id:k,...Di(j),...Object.keys(b).reduce((Z,ft)=>(j[ft]&&(Z[ft]=b[ft]),Z),{})};B.set(ut),S.write()},function(k){Ee(k,"frameColor")&&(b.frameColor=k.frameColor),c&&(za(c,k),B.set(c),clearTimeout(W),W=setTimeout(()=>{S.write()},200))},k=>{const N=$[k];var j;if(N&&N.thumb)return j=N.thumb,/div/i.test(j)||Hb(j)?j:/rect|path|circle|line|<g>/i.test(j)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${j}</svg>`:`<img src="${j}" alt=""/>`},k=>{const N=$[k];return!(!N||!N.thumb)&&Mi(N.thumb)},k=>$[k].thumb,nt,"frame",f,$,a,s,l,u,function(k){Kr.call(this,t,k)}]}var gk={util:["frame",class extends pn{constructor(t){super(),dn(this,t,mk,hk,ln,{name:18,isActive:0,stores:19,locale:1,frameStyles:20,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[18]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[19]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),E()}get frameStyles(){return this.$$.ctx[20]}set frameStyles(t){this.$$set({frameStyles:t}),E()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$$set({frameOptions:t}),E()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),E()}},({src:t})=>t&&!mc(t)]};function fk(t){let e,n,i,r,o,a,s,l;return{c(){e=dt("div"),n=dt("input"),r=he(),o=dt("label"),a=vi(t[1]),T(n,"id",t[0]),T(n,"type","number"),T(n,"min","1"),T(n,"inputmode","numeric"),T(n,"pattern","[0-9]*"),T(n,"data-state",t[3]),T(n,"autocomplete","off"),T(n,"placeholder",t[4]),n.value=i=t[5]===void 0?"":t[7](t[5]+""),T(o,"for",t[0]),T(o,"title",t[2]),T(o,"aria-label",t[2]),T(e,"class","PinturaInputDimension")},m(c,u){et(c,e,u),St(e,n),St(e,r),St(e,o),St(o,a),s||(l=At(n,"input",t[8]),s=!0)},p(c,[u]){1&u&&T(n,"id",c[0]),8&u&&T(n,"data-state",c[3]),16&u&&T(n,"placeholder",c[4]),160&u&&i!==(i=c[5]===void 0?"":c[7](c[5]+""))&&n.value!==i&&(n.value=i),2&u&&Oi(a,c[1]),1&u&&T(o,"for",c[0]),4&u&&T(o,"title",c[2]),4&u&&T(o,"aria-label",c[2])},i:Xe,o:Xe,d(c){c&&Q(e),s=!1,l()}}}function $k(t,e,n){let{id:i}=e,{label:r}=e,{title:o}=e,{state:a}=e,{placeholder:s}=e,{value:l}=e,{onchange:c}=e,{format:u=d=>d.replace(/\D/g,"")}=e;return t.$$set=d=>{"id"in d&&n(0,i=d.id),"label"in d&&n(1,r=d.label),"title"in d&&n(2,o=d.title),"state"in d&&n(3,a=d.state),"placeholder"in d&&n(4,s=d.placeholder),"value"in d&&n(5,l=d.value),"onchange"in d&&n(6,c=d.onchange),"format"in d&&n(7,u=d.format)},[i,r,o,a,s,l,c,u,d=>c(u(d.currentTarget.value))]}class Ty extends pn{constructor(e){super(),dn(this,e,$k,fk,ln,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function yk(t){let e;return{c(){e=Tr("g")},m(n,i){et(n,e,i),e.innerHTML=t[2]},p(n,i){4&i&&(e.innerHTML=n[2])},d(n){n&&Q(e)}}}function bk(t){let e,n,i,r,o,a,s,l;return o=new Ho({props:{$$slots:{default:[yk]},$$scope:{ctx:t}}}),{c(){e=dt("div"),n=dt("input"),i=he(),r=dt("label"),Ot(o.$$.fragment),T(n,"id",t[0]),T(n,"class","implicit"),T(n,"type","checkbox"),n.checked=t[1],T(r,"for",t[0]),T(r,"title",t[3])},m(c,u){et(c,e,u),St(e,n),St(e,i),St(e,r),zt(o,r,null),a=!0,s||(l=At(n,"change",t[5]),s=!0)},p(c,[u]){(!a||1&u)&&T(n,"id",c[0]),(!a||2&u)&&(n.checked=c[1]);const d={};68&u&&(d.$$scope={dirty:u,ctx:c}),o.$set(d),(!a||1&u)&&T(r,"for",c[0]),(!a||8&u)&&T(r,"title",c[3])},i(c){a||(I(o.$$.fragment,c),a=!0)},o(c){z(o.$$.fragment,c),a=!1},d(c){c&&Q(e),Dt(o),s=!1,l()}}}function xk(t,e,n){let{id:i}=e,{locked:r}=e,{icon:o}=e,{title:a}=e,{onchange:s}=e;return t.$$set=l=>{"id"in l&&n(0,i=l.id),"locked"in l&&n(1,r=l.locked),"icon"in l&&n(2,o=l.icon),"title"in l&&n(3,a=l.title),"onchange"in l&&n(4,s=l.onchange)},[i,r,o,a,s,l=>s(l.currentTarget.checked)]}class vk extends pn{constructor(e){super(),dn(this,e,xk,bk,ln,{id:0,locked:1,icon:2,title:3,onchange:4})}}function wk(t){let e;return{c(){e=vi("Save")},m(n,i){et(n,e,i)},d(n){n&&Q(e)}}}function Sk(t){let e,n,i,r,o,a,s,l,c,u,d,p,h,f=t[1].resizeLabelFormCaption+"";return l=new qr({props:{items:t[4]}}),u=new ks({props:{type:"submit",class:"implicit",$$slots:{default:[wk]},$$scope:{ctx:t}}}),{c(){e=dt("form"),n=dt("div"),i=dt("fieldset"),r=dt("legend"),o=vi(f),a=he(),s=dt("div"),Ot(l.$$.fragment),c=he(),Ot(u.$$.fragment),T(r,"class","implicit"),T(s,"class","PinturaFieldsetInner"),T(n,"class","PinturaFormInner"),T(e,"slot","footer"),Et(e,"transform",t[3])},m(g,$){et(g,e,$),St(e,n),St(n,i),St(i,r),St(r,o),St(i,a),St(i,s),zt(l,s,null),t[66](s),St(n,c),zt(u,n,null),d=!0,p||(h=[At(s,"focusin",t[15]),At(s,"focusout",t[16]),At(e,"submit",y4(t[17]))],p=!0)},p(g,$){(!d||2&$[0])&&f!==(f=g[1].resizeLabelFormCaption+"")&&Oi(o,f);const y={};16&$[0]&&(y.items=g[4]),l.$set(y);const v={};32&$[3]&&(v.$$scope={dirty:$,ctx:g}),u.$set(v),8&$[0]&&Et(e,"transform",g[3])},i(g){d||(I(l.$$.fragment,g),I(u.$$.fragment,g),d=!0)},o(g){z(l.$$.fragment,g),z(u.$$.fragment,g),d=!1},d(g){g&&Q(e),Dt(l),t[66](null),Dt(u),p=!1,Kn(h)}}}function kk(t){let e,n;return e=new Rl({props:{$$slots:{footer:[Sk]},$$scope:{ctx:t}}}),e.$on("measure",t[67]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};30&r[0]|32&r[3]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Ck(t,e,n){let i,r,o,a,s,l,c,u,d,p,h,f,g,$,y,v,w,S,R,M,B,C,D,O,P,b,W,nt,k,N,j=Xe,ut=()=>(j(),j=Zr(ft,J=>n(50,h=J)),ft);t.$$.on_destroy.push(()=>j());const Z=(J,jt=0,Ae=9999)=>{if(Ne(J)&&!(J=J.replace(/\D/g,"")).length)return;const Se=Math.round(J);return Number.isNaN(Se)?void 0:si(Se,jt,Ae)};let{isActive:ft}=e;ut();let{stores:q}=e,{locale:ht={}}=e,{resizeMinSize:xt=Zi(1,1)}=e,{resizeMaxSize:lt=Zi(9999,9999)}=e,{resizeAspectRatioLocked:Ct=!1}=e,{resizeEnableButtonLockAspectRatio:it=!0}=e,{resizeSizePresetOptions:vt}=e,{resizeWidthPresetOptions:K}=e,{resizeHeightPresetOptions:Ft}=e,{resizeWillRenderFooter:Ht=ri}=e,{resizeFormatIconButtonMaintainAspectRatio:Lt=function(J){const{active:jt,activeFraction:Ae}=J;return{active:jt,activeFraction:3*(Ae-1)}}}=e;const bt=hn(0,{stiffness:.15,damping:.3});F(t,bt,J=>n(55,v=J));const{animation:_t,imageSize:rt,imageCropRect:Tt,imageCropRectAspectRatio:Vt,imageCropAspectRatio:mt,imageOutputSize:at,imageSelectionZoom:$t,imageSelectionPan:te,history:le,env:Wt,allowPan:we,allowZoom:yt,allowZoomControls:ie,allowPlayPause:V}=q;F(t,_t,J=>n(51,f=J)),F(t,rt,J=>n(74,nt=J)),F(t,Tt,J=>n(53,$=J)),F(t,Vt,J=>n(54,y=J)),F(t,mt,J=>n(73,O=J)),F(t,at,J=>n(62,D=J)),F(t,$t,J=>n(75,k=J)),F(t,te,J=>n(76,N=J)),F(t,Wt,J=>n(52,g=J));const De=ya();let Le,qt,$e,Me,Be,mn,wt=ui();const re=(J,jt,Ae,Se,X)=>J!=null&&Ae!==jt?J>=Se[jt]&&J<=X[jt]?"valid":"invalid":"undetermined",on=(J,jt,Ae)=>Math.round(J!=null?J/jt:Ae.height),Ue=()=>{Ct&&qt&&$e&&(Me==="width"?n(40,$e=Math.round(qt/y)):Me==="height"?n(39,qt=Math.round($e*y)):(Be==="width"?n(40,$e=Math.round(qt/y)):Be==="height"&&n(39,qt=Math.round($e*y)),en()))},en=J=>{let jt=Z(qt),Ae=Z($e),Se=jt,X=Ae,oe=Se&&X,Zt=J||y;if(!Se&&!X)return;Se&&!X?X=Math.round(Se/Zt):X&&!Se&&(Se=Math.round(X*Zt)),Zt=J||oe?ha(Se,X):y;let ee=Zi(Se,X);Ud(lt,ee)||(ee=oo(lt,Zt)),Ud(ee,xt)||(ee=xs(xt,Zt)),n(39,qt=jt!=null?Math.round(ee.width):void 0),n(40,$e=Ae!=null?Math.round(ee.height):void 0)},ke=()=>{en();const{width:J,height:jt}=D||{};J===qt&&jt===$e||(qt||$e?(qt&&$e&&kt(mt,O=qt/$e,O),kt(at,D=Zi(qt,$e),D)):(kt(mt,O=nt.width/nt.height,O),kt(mt,O=void 0,O),kt(at,D=void 0,D)),le.write())},qe=at.subscribe(J=>{if(!J)return n(39,qt=void 0),void n(40,$e=void 0);n(39,qt=J.width),n(40,$e=J.height),en()}),vn=mt.subscribe(J=>{(qt||$e)&&J&&(qt&&$e&&ha(qt,$e)!==J?(n(40,$e=qt/J),en(J)):en())}),In=J=>Ne(J[0])?(J[1]=J[1].map(In),J):Ze(J)?[J,""+J]:J,Hn=J=>{if(Ne(J[0]))return J[1]=J[1].map(Hn),J;let[jt,Ae]=J;if(Ze(jt)&&Ze(Ae)){const[Se,X]=[jt,Ae];Ae=`${Se} &times; ${X}`,jt=[Se,X]}return[jt,Ae]},Jt=fe();F(t,Jt,J=>n(61,C=J));const He=fe();F(t,He,J=>n(65,W=J));const Y=fe();F(t,Y,J=>n(59,M=J));const Pt=fe();F(t,Pt,J=>n(64,b=J));const H=fe();F(t,H,J=>n(57,S=J));const Bt=fe();F(t,Bt,J=>n(63,P=J));const ue=Vn([at,He],([J,jt],Ae)=>{if(!jt)return Ae(-1);const Se=jt.findIndex(([X])=>{if(!X&&!J)return!0;if(!X)return!1;const[oe,Zt]=X;return J.width===oe&&J.height===Zt});Ae(Se<0?0:Se)});F(t,ue,J=>n(60,B=J));const Ce=Vn([at,Pt],([J,jt],Ae)=>{if(!jt)return Ae(-1);const Se=jt.findIndex(([X])=>!X&&!J||!!X&&J.width===X);Ae(Se<0?0:Se)});F(t,Ce,J=>n(58,R=J));const me=Vn([at,Bt],([J,jt],Ae)=>{if(!jt)return Ae(-1);const Se=jt.findIndex(([X])=>!X&&!J||!!X&&J.height===X);Ae(Se<0?0:Se)});F(t,me,J=>n(56,w=J));let It,Oe;const cn=mi("redrawTrigger"),rn=hn(f?20:0);return F(t,rn,J=>n(49,p=J)),aa(()=>{qe(),vn()}),t.$$set=J=>{"isActive"in J&&ut(n(0,ft=J.isActive)),"stores"in J&&n(30,q=J.stores),"locale"in J&&n(1,ht=J.locale),"resizeMinSize"in J&&n(31,xt=J.resizeMinSize),"resizeMaxSize"in J&&n(32,lt=J.resizeMaxSize),"resizeAspectRatioLocked"in J&&n(28,Ct=J.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in J&&n(33,it=J.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in J&&n(34,vt=J.resizeSizePresetOptions),"resizeWidthPresetOptions"in J&&n(35,K=J.resizeWidthPresetOptions),"resizeHeightPresetOptions"in J&&n(36,Ft=J.resizeHeightPresetOptions),"resizeWillRenderFooter"in J&&n(37,Ht=J.resizeWillRenderFooter),"resizeFormatIconButtonMaintainAspectRatio"in J&&n(38,Lt=J.resizeFormatIconButtonMaintainAspectRatio)},t.$$.update=()=>{524288&t.$$.dirty[1]&&we.set(!h),524288&t.$$.dirty[1]&&yt.set(!h),524288&t.$$.dirty[1]&&ie.set(!h),524288&t.$$.dirty[1]&&h&&V.set(!0),1073741832&t.$$.dirty[1]&&vt&&(kt(Jt,C=vt.map(Hn),C),kt(He,W=Us(C),W)),1073741824&t.$$.dirty[1]&&n(48,a=!!C),536870912&t.$$.dirty[1]|8&t.$$.dirty[2]&&n(47,i=B>-1&&W[B][1]),268435472&t.$$.dirty[1]&&K&&(kt(Y,M=K.map(In),M),kt(Pt,b=Us(M),b)),268566528&t.$$.dirty[1]&&n(45,s=!a&&M),134217728&t.$$.dirty[1]|4&t.$$.dirty[2]&&n(46,r=R>-1&&b[R][1]),67108896&t.$$.dirty[1]&&Ft&&(kt(H,S=Ft.map(In),S),kt(Bt,P=Us(S),P)),67239936&t.$$.dirty[1]&&n(44,l=!a&&S),33554432&t.$$.dirty[1]|2&t.$$.dirty[2]&&n(43,o=w>-1&&P[w][1]),155648&t.$$.dirty[1]&&n(42,c=!a&&!s&&!l),268435458&t.$$.dirty[0]|2145648583&t.$$.dirty[1]&&n(4,u=cn&&uu(()=>{return Ht([a&&["Dropdown","size-presets",{label:i,options:C,onchange:Se=>{return(X=Se.value)&&!It&&(It={...$},Oe=O),X?(kt(mt,O=ha(X[0],X[1]),O),kt(at,D=Xy(X),D)):(kt(Tt,$=It,$),kt(mt,O=Oe,O),kt(at,D=void 0,D),It=void 0,Oe=void 0),void le.write();var X},selectedIndex:B}],s&&["Dropdown","width-presets",{label:r,options:M,onchange:Se=>{n(39,qt=Se.value),ke()},selectedIndex:R}],s&&l&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],l&&["Dropdown","height-presets",{label:o,options:S,onchange:Se=>{n(40,$e=Se.value),ke()},selectedIndex:w}],c&&[Ty,"width-input",{id:"width-"+De,title:ht.resizeTitleInputWidth,label:ht.resizeLabelInputWidth,placeholder:(J=Z($e),jt=y,Ae=$,Math.round(J!=null?J*jt:Ae.width)),value:qt,state:re(Z(qt),"width",Me,xt,lt),onchange:Se=>{n(39,qt=Se),Ue()}}],c&&it&&[vk,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+De,title:ht.resizeTitleButtonMaintainAspectRatio,icon:Yn(ht.resizeIconButtonMaintainAspectRatio)?ht.resizeIconButtonMaintainAspectRatio(Ct,v):Ns(ht.resizeIconButtonMaintainAspectRatio,Lt({active:Ct,activeFraction:v}),"{","}"),locked:Ct,onchange:Se=>{n(28,Ct=Se),Ue()}}],c&&[Ty,"height-input",{id:"height-"+De,title:ht.resizeTitleInputHeight,label:ht.resizeLabelInputHeight,placeholder:on(Z(qt),y,$),value:$e,state:re(Z($e),"height",Me,xt,lt),onchange:Se=>{n(40,$e=Se),Ue()}}]].filter(Boolean),{...g},()=>cn.set({}));var J,jt,Ae}).filter(Boolean)),268435456&t.$$.dirty[0]&&bt.set(Ct?1:0),1024&t.$$.dirty[1]&&Me&&(Be=Me),524288&t.$$.dirty[1]&&h&&(wt=N,mn=k),524288&t.$$.dirty[1]|1&t.$$.dirty[2]&&(h?setTimeout(()=>{return J=D,kt(te,N=ui(),N),void kt($t,k=J&&$?J.width/$.width||J.height/$.height:1,k);var J},0):(kt(te,N=wt,N),kt($t,k=mn,k))),1572864&t.$$.dirty[1]&&f&&rn.set(h?0:20),262144&t.$$.dirty[1]&&n(3,d=p?`translateY(${p}px)`:"none")},[ft,ht,Le,d,u,bt,_t,rt,Tt,Vt,mt,at,$t,te,Wt,J=>{const jt=J.target.id;/width/.test(jt)?n(41,Me="width"):/height/.test(jt)?n(41,Me="height"):/aspectRatio/i.test(jt)?n(41,Me="lock"):n(41,Me=void 0)},J=>{Le.contains(J.relatedTarget)||ke(),n(41,Me=void 0)},ke,Jt,He,Y,Pt,H,Bt,ue,Ce,me,rn,Ct,"resize",q,xt,lt,it,vt,K,Ft,Ht,Lt,qt,$e,Me,c,o,l,s,r,i,a,p,h,f,g,$,y,v,w,S,R,M,B,C,D,P,b,W,function(J){jn[J?"unshift":"push"](()=>{Le=J,n(2,Le)})},function(J){Kr.call(this,t,J)}]}var Tk={util:["resize",class extends pn{constructor(t){super(),dn(this,t,Ck,kk,ln,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37,resizeFormatIconButtonMaintainAspectRatio:38},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[30]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),E()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(t){this.$$set({resizeMinSize:t}),E()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(t){this.$$set({resizeMaxSize:t}),E()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(t){this.$$set({resizeAspectRatioLocked:t}),E()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(t){this.$$set({resizeEnableButtonLockAspectRatio:t}),E()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(t){this.$$set({resizeSizePresetOptions:t}),E()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(t){this.$$set({resizeWidthPresetOptions:t}),E()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(t){this.$$set({resizeHeightPresetOptions:t}),E()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(t){this.$$set({resizeWillRenderFooter:t}),E()}get resizeFormatIconButtonMaintainAspectRatio(){return this.$$.ctx[38]}set resizeFormatIconButtonMaintainAspectRatio(t){this.$$set({resizeFormatIconButtonMaintainAspectRatio:t}),E()}}]};function Mk(t){let e,n;return e=new fp({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[10],mapImagePointToScreenPoint:t[9],enableMultiSelect:t[6],utilKey:"redact",imageRotation:t[11],imageFlipX:t[8],imageFlipY:t[7],shapes:t[12],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[14],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[25]}}}),e.$on("measure",t[26]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,[r]){const o={};8&r&&(o.stores=i[3]),16&r&&(o.locale=i[4]),1&r&&(o.isActive=i[0]),2&r&&(o.isActiveFraction=i[1]),4&r&&(o.isVisible=i[2]),1024&r&&(o.mapScreenPointToImagePoint=i[10]),512&r&&(o.mapImagePointToScreenPoint=i[9]),64&r&&(o.enableMultiSelect=i[6]),2048&r&&(o.imageRotation=i[11]),256&r&&(o.imageFlipX=i[8]),128&r&&(o.imageFlipY=i[7]),32&r&&(o.willStartInteraction=i[5]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Pk(t,e,n){let i,r,o,a,s,l,c,u,d,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:f}=e,{stores:g}=e,{locale:$={}}=e,{markupEditorWillStartInteraction:y}=e,{enableMultiSelect:v}=e;const{imageRedaction:w,rootRect:S,imageSize:R,imageRotation:M,imageFlipX:B,imageFlipY:C,imageTransforms:D,imageTransformsInterpolated:O}=g;return F(t,S,P=>n(24,u=P)),F(t,R,P=>n(23,c=P)),F(t,M,P=>n(11,d=P)),F(t,B,P=>n(8,a=P)),F(t,C,P=>n(7,o=P)),F(t,D,P=>n(22,l=P)),F(t,O,P=>n(21,s=P)),t.$$set=P=>{"isActive"in P&&n(0,p=P.isActive),"isActiveFraction"in P&&n(1,h=P.isActiveFraction),"isVisible"in P&&n(2,f=P.isVisible),"stores"in P&&n(3,g=P.stores),"locale"in P&&n(4,$=P.locale),"markupEditorWillStartInteraction"in P&&n(5,y=P.markupEditorWillStartInteraction),"enableMultiSelect"in P&&n(6,v=P.enableMultiSelect)},t.$$.update=()=>{31457664&t.$$.dirty&&n(10,i=P=>_0(P,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),31457664&t.$$.dirty&&n(9,r=P=>O0(P,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[p,h,f,g,$,y,v,o,a,r,i,d,w,S,R,M,B,C,D,O,"redact",s,l,c,u,P=>{const b=Nh(P[0]);return qw("to-front",b),P},function(P){Kr.call(this,t,P)}]}var Ik={util:["redact",class extends pn{constructor(t){super(),dn(this,t,Pk,Mk,ln,{name:20,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5,enableMultiSelect:6})}get name(){return this.$$.ctx[20]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}get enableMultiSelect(){return this.$$.ctx[6]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}},({src:t})=>t&&!mc(t)]};function Rk(t){let e;return{c(){e=dt("div")},m(n,i){et(n,e,i)},p:Xe,d(n){n&&Q(e)}}}function Ek(t){let e,n,i,r;return{c(){e=dt("div"),T(e,"class","PinturaFillTile")},m(o,a){et(o,e,a),i||(r=Pn(n=Bk.call(null,e,t[31].value)),i=!0)},p(o,a){n&&Mn(n.update)&&1&a[1]&&n.update.call(null,o[31].value)},d(o){o&&Q(e),i=!1,r()}}}function Ak(t){let e,n,i;return{c(){e=dt("div"),n=dt("img"),Ag(n.src,i=t[31].value)||T(n,"src",i),T(n,"alt",""),T(n,"width","48"),T(n,"height","64"),T(e,"class","PinturaFillTile")},m(r,o){et(r,e,o),St(e,n)},p(r,o){1&o[1]&&!Ag(n.src,i=r[31].value)&&T(n,"src",i)},d(r){r&&Q(e)}}}function My(t){let e,n,i=(Yn(t[31].label)?t[31].label(t[1]):t[31].label)+"";return{c(){e=dt("span"),n=vi(i)},m(r,o){et(r,e,o),St(e,n)},p(r,o){2&o[0]|1&o[1]&&i!==(i=(Yn(r[31].label)?r[31].label(r[1]):r[31].label)+"")&&Oi(n,i)},d(r){r&&Q(e)}}}function Lk(t){let e,n,i,r;function o(c,u){return 1&u[1]&&(n=null),1&u[1]&&(i=null),n==null&&(n=!!Ne(c[31].value)),n?Ak:(i==null&&(i=!!Mi(c[31].value)),i?Ek:Rk)}let a=o(t,[-1,-1]),s=a(t),l=t[31].label&&My(t);return{c(){e=dt("div"),s.c(),r=he(),l&&l.c(),T(e,"slot","option")},m(c,u){et(c,e,u),s.m(e,null),St(e,r),l&&l.m(e,null)},p(c,u){a===(a=o(c,u))&&s?s.p(c,u):(s.d(1),s=a(c),s&&(s.c(),s.m(e,r))),c[31].label?l?l.p(c,u):(l=My(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(c){c&&Q(e),s.d(),l&&l.d()}}}function Fk(t){let e,n;return e=new Ss({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[4],onchange:t[10],$$slots:{option:[Lk,({option:i})=>({31:i}),({option:i})=>[0,i?1:0]]},$$scope:{ctx:t}}}),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};2&r[0]&&(o.locale=i[1]),4&r[0]&&(o.options=i[2]),16&r[0]&&(o.selectedIndex=i[4]),2&r[0]|3&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function zk(t){let e,n,i;return n=new Va({props:{elasticity:t[5],$$slots:{default:[Fk]},$$scope:{ctx:t}}}),{c(){e=dt("div"),Ot(n.$$.fragment),T(e,"slot","footer"),Et(e,"transform",t[3])},m(r,o){et(r,e,o),zt(n,e,null),i=!0},p(r,o){const a={};32&o[0]&&(a.elasticity=r[5]),22&o[0]|2&o[1]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a),8&o[0]&&Et(e,"transform",r[3])},i(r){i||(I(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&Q(e),Dt(n)}}}function Dk(t){let e,n;return e=new Rl({props:{$$slots:{footer:[zk]},$$scope:{ctx:t}}}),e.$on("measure",t[21]),{c(){Ot(e.$$.fragment)},m(i,r){zt(e,i,r),n=!0},p(i,r){const o={};62&r[0]|2&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){Dt(e,i)}}}function Bk(t){const e=document.createElement("div");return t.append(e),{update(n){const[i,r,o,a]=n.map((s,l)=>l<3?Math.round(255*s):s);t.dataset.transparent=a<1,e.style.backgroundColor=`rgba(${i},${r},${o},${a})`}}}function Ok(t,e,n){let i,r,o,a,s,l,c,u,d,p,h=Xe,f=()=>(h(),h=Zr(g,k=>n(16,l=k)),g);t.$$.on_destroy.push(()=>h());let{isActive:g}=e;f();let{stores:$}=e,{locale:y={}}=e,{fillOptions:v=[]}=e;const w=k=>k.map(N=>(j=>Mi(j)&&Ne(j[0])&&Mi(j[1]))(N)?[N[0],w(N[1]),N[2]]:(j=>[Array.isArray(j)&&j.length===3?[...j,1]:j,void 0,{disabled:!1}])(N)),S=mi("elasticityMultiplier");F(t,S,k=>n(20,p=k));const{history:R,animation:M,scrollElasticity:B,imageBackgroundColor:C,imageBackgroundImage:D,allowPan:O,allowZoom:P,allowZoomControls:b,allowPlayPause:W}=$;F(t,M,k=>n(17,c=k)),F(t,C,k=>n(19,d=k)),F(t,D,k=>n(18,u=k));const nt=hn(c?20:0);return F(t,nt,k=>n(15,s=k)),t.$$set=k=>{"isActive"in k&&f(n(0,g=k.isActive)),"stores"in k&&n(13,$=k.stores),"locale"in k&&n(1,y=k.locale),"fillOptions"in k&&n(14,v=k.fillOptions)},t.$$.update=()=>{16384&t.$$.dirty[0]&&n(2,i=w(v)),65536&t.$$.dirty[0]&&O.set(l),65536&t.$$.dirty[0]&&P.set(l),65536&t.$$.dirty[0]&&b.set(l),65536&t.$$.dirty[0]&&l&&W.set(!0),1048576&t.$$.dirty[0]&&n(5,r=p*B),786436&t.$$.dirty[0]&&n(4,o=i.findIndex(([k])=>u?k===u:Array.isArray(k)?vs(k,d):void 0)||0),196608&t.$$.dirty[0]&&c&&nt.set(l?0:20),32768&t.$$.dirty[0]&&n(3,a=s?`translateY(${s}px)`:"none")},[g,y,i,a,o,r,S,M,C,D,({value:k})=>{Ne(k)&&(kt(C,d=void 0,d),kt(D,u=k,u)),Mi(k)&&(kt(C,d=k,d),kt(D,u=void 0,u)),R.write()},nt,"fill",$,v,s,l,c,u,d,p,function(k){Kr.call(this,t,k)}]}var _k={util:["fill",class extends pn{constructor(t){super(),dn(this,t,Ok,Dk,ln,{name:12,isActive:0,stores:13,locale:1,fillOptions:14},null,[-1,-1])}get name(){return this.$$.ctx[12]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[13]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),E()}get fillOptions(){return this.$$.ctx[14]}set fillOptions(t){this.$$set({fillOptions:t}),E()}},({src:t,fillOptions:e})=>t&&!mc(t)&&e&&e.length]};const Py='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',yh='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var Vk={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:"{features} not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoom:"Zoom",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:Py,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:Py,statusImageLoadNone:"Waiting for image",statusImageLoadMinSize:"Minimum image size is {minWidth} &times; {minHeight}",statusImageLoadPrepare:"Preparing image&hellip;",statusImageLoadBusy:"Loading image&hellip;",statusImageLoadError:"Error loading image",statusImageProcessBusy:"Processing image&hellip;",statusImageProcessError:"Error processing image",statusImageUploadBusy:"Uploading image&hellip;",statusImageUploadError:"Error uploading image"};const Wk={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+yh,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+yh,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+yh,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var Nk={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:`<g fill="currentColor">
        <rect opacity="{a}" x="2" y="4" width="10" height="18" rx="1"/>
        <rect opacity="{b}" x="4" y="8" width="14" height="14" rx="1"/>
        <rect opacity="{c}" x="6" y="12" width="17" height="10" rx="1"/>
    </g>`,cropIconCropBoundary:`<g fill="currentColor">
        <rect opacity="{a}" x="2" y="3" width="20" height="20" rx="1"/>
        <rect opacity="{b}" x="7" y="8" width="10" height="10" rx="1"/>
        <rect opacity="{c}" x="4" y="8" width="14" height="14" rx="1"/>
        <rect opacity="{d}" x="12" y="4" width="10" height="10" rx="1"/>
    </g>`,cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},Uk={fillLabel:"Fill",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},jk={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:'<defs><mask id="mask1" x="-2" y="-2" width="24" height="24"><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g mask="url(#mask1)"><path transform="translate(0 {activeFraction})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>'},Hk={frameLabel:"Frame",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},Gk={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},Hh=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t);Object.keys(n).forEach(i=>{n[i].get?Object.defineProperty(e,i,{get:()=>t[i],set:r=>t[i]=r}):e[i]=t[i]})},Zb=t=>{const e={},{sub:n,pub:i}=bs();Mr()&&document.doctype!==null||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const r=K2();Hh(r,e);const o=((c,u)=>{const d={},p=new P$({target:c,props:{stores:u,pluginComponents:Array.from(Wh)}});let h=!1;const f=()=>{h||(Mr()&&window.removeEventListener("pagehide",f),p&&(h=!0,p.$destroy()))};hh||(hh=new Set(P0(P$).filter($=>!Gw.includes($)))),hh.forEach($=>{Object.defineProperty(d,$,{get:()=>p[$],set:Zw.includes($)?y=>{p[$]={...p[$],...y}}:y=>p[$]=y})}),Object.defineProperty(d,"previewImageData",{get:()=>p.imagePreviewCurrent}),Ib.forEach($=>{const y=Wd[$],v=y[0];Object.defineProperty(d,$,{get:()=>p.pluginInterface[v][$],set:w=>{const S=y.reduce((R,M)=>(R[M]={...p.pluginOptions[M],[$]:w},R),{});p.pluginOptions={...p.pluginOptions,...S}}})}),Object.defineProperty(d,"element",{get:()=>p.root,set:()=>{}});const g=p.history;return tp(d,{on:($,y)=>{if(h)return()=>{};if(/undo|redo|revert|writehistory/.test($))return g.on($,y);const v=[p.sub($,y),p.$on($,w=>y(w instanceof CustomEvent&&!w.detail?void 0:w))].filter(Boolean);return()=>v.forEach(w=>w())},updateImagePreview:$=>{p.imagePreviewSrc=$},close:()=>!h&&p.pub("close"),destroy:f}),Object.defineProperty(d,"history",{get:()=>({undo:()=>g.undo(),redo:()=>g.redo(),revert:()=>g.revert(),get:()=>g.get(),getCollapsed:()=>g.get().splice(0,g.index+1),set:$=>g.set($),write:$=>g.write($),get length(){return g.length()},get index(){return g.index},set index($){g.index=$}})}),Mr()&&window.addEventListener("pagehide",f),d})(t,r.stores);Hh(o,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>o.on(c,u=>{const d=r[c](u&&u.detail);d instanceof Promise&&d.catch(pe)})),s=(c,u)=>{const d=n(c,u),p=r.on(c,u),h=o.on(c,u);return()=>{d(),p(),h()}};e.handleEvent=pe;const l=Rb.map(c=>s(c,u=>e.handleEvent(c,u)));return tp(e,{on:s,updateImage:c=>new Promise((u,d)=>{const p=e.history.get(),h=e.history.index,f=e.imageState;r.loadImage(c).then(g=>{e.history.set(p),e.history.index=h,e.imageState=f,u(g)}).catch(d)}),close:()=>{i("close")},destroy:()=>{[...a,...l].forEach(c=>c()),o.destroy(),r.destroy(),i("destroy")}}),setTimeout(()=>i("init",e),0),e};Mr();var Zk=(t,e={})=>{const n=Ne(t)?document.querySelector(t):t;if(!sc(n))return;e.class=e.class?"pintura-editor "+e.class:"pintura-editor";const i=Zb(n);return Object.assign(i,e)};const Iy=(t,e,n,i)=>{const r=ot(e.x-t.x,e.y-t.y),o=go(r),a=5*n;let s;s=i?.5*a:Math.ceil(.5*(a-1));const l=Br(We(o),s);return{anchor:We(t),offset:l,normal:o,solid:i,size:a,sizeHalf:s}},Xk=(t,e,n)=>{const{strokeWidth:i,strokeColor:r,strokeJoin:o,strokeCap:a,...s}=t,{anchor:l,offset:c,normal:u,solid:d,size:p,sizeHalf:h}=e,f=l.x,g=l.y,$=Br(We(u),p),y=ot(f+$.x,g+$.y);if(Br($,.55),d){Wi(n,c);const v=Br(We(u),.5*h);return[{...s,points:[ot(f-v.x,g-v.y),ot(y.x-$.y,y.y+$.x),ot(y.x+$.y,y.y-$.x)],pathClose:!0,backgroundColor:r}]}{const v=Br((R=>{const M=R.x;return R.x=-R.y,R.y=M,R})(We(u)),.5),w=ot(f-v.x,g-v.y),S=ot(f+v.x,g+v.y);return[{...s,points:[ot(y.x+$.y,y.y-$.x),w,ot(f,g),S,ot(y.x-$.y,y.y+$.x)],pathClose:!1,strokeWidth:i,strokeColor:r,strokeJoin:o,strokeCap:a}]}},Yk=(t,e,n)=>{const{strokeWidth:i,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:u}=e;return Wi(n,l),s&&Wi(n,ec(We(c))),[{...o,x:a.x,y:a.y,rx:u,ry:u,backgroundColor:s?r:void 0,strokeWidth:s?void 0:i,strokeColor:s?void 0:r}]},Kk=(t,e)=>{const{strokeWidth:n,strokeColor:i,strokeJoin:r,strokeCap:o,...a}=t,{anchor:s,offset:l}=e;return[{...a,points:[ot(s.x-l.y,s.y+l.x),ot(s.x+l.y,s.y-l.x)],strokeWidth:n,strokeColor:i,strokeJoin:r,strokeCap:o}]},qk=(t,e,n)=>{const{strokeWidth:i,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:u}=e;return Wi(n,l),[{...o,x:a.x-u,y:a.y-u,width:2*u,height:2*u,rotation:(d=c,Math.atan2(d.y,d.x)),backgroundColor:s?r:void 0,strokeWidth:s?void 0:i,strokeColor:s?void 0:r}];var d},Jk=(t={})=>e=>{if(!e.lineStart&&!e.lineEnd)return;const n=[],{x1:i,y1:r,x2:o,y2:a,lineStart:s,lineEnd:l,strokeWidth:c,strokeColor:u,strokeJoin:d,strokeCap:p,strokeDash:h,bitmap:f,aboveFrame:g,opacity:$}=e,y=ot(i,r),v=ot(o,a),w=[y,v],S={bitmap:f,aboveFrame:g,opacity:$,strokeColor:u,strokeWidth:c,strokeJoin:d,strokeCap:p};if(s){const[R,M]=s.split("-"),B=t[R];if(B){const C=Iy(y,v,c,!!M);n.push(...B(S,C,y))}}if(l){const[R,M]=l.split("-"),B=t[R];if(B){const C=Iy(v,y,c,!!M);n.push(...B(S,C,v))}}return[{...S,strokeDash:h,points:w},...n]},Qk=()=>({arrow:Xk,circle:Yk,square:qk,bar:Kk}),Gh=(t,e)=>{const n=parseFloat(t)*e;return Ne(t)?n+"%":n},$a=(t,e)=>Ne(t)?Kd(t,e):t,tC=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?Gh(t.frameSize,2):"2.5%",frameRadius:t.frameRound?Gh(t.frameSize,2):0}],eC=({width:t,height:e,frameImage:n,frameSize:i="15%",frameOutset:r=0,frameSlices:o={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:a})=>{if(!n)return[];const s=Math.sqrt(t*e),l=$a(i,s),c=a?l:Math.round(l),u=c,d=$a(r,s),p=2*d,{x1:h,x2:f,y1:g,y2:$}=o,y={x0:0,y0:0,x1:c,y1:u,x2:t-c,y2:e-u,x3:t,y3:e,cw:c,ch:u,ew:t-c-c,eh:e-u-u},v=a?1:0,w=2*v,S=d>0,R={expandsCanvas:S,width:y.cw,height:y.ch,backgroundImage:n};return[{expandsCanvas:S,x:y.x1-v-d,y:y.y0-d,width:y.ew+w+p,height:y.ch,backgroundCorners:[{x:h,y:0},{x:f,y:0},{x:f,y:g},{x:h,y:g}],backgroundImage:n},{expandsCanvas:S,x:y.x1-v-d,y:y.y2+d,width:y.ew+w+p,height:y.ch,backgroundCorners:[{x:h,y:$},{x:f,y:$},{x:f,y:1},{x:h,y:1}],backgroundImage:n},{expandsCanvas:S,x:y.x0-d,y:y.y1-v-d,width:y.cw,height:y.eh+w+p,backgroundCorners:[{x:0,y:g},{x:h,y:g},{x:h,y:$},{x:0,y:$}],backgroundImage:n},{expandsCanvas:S,x:y.x2+d,y:y.y1-v-d,width:y.cw,height:y.eh+w+p,backgroundCorners:[{x:f,y:g},{x:1,y:g},{x:1,y:$},{x:f,y:$}],backgroundImage:n},{...R,x:y.x0-d,y:y.y0-d,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:g},{x:0,y:g}]},{...R,x:y.x2+d,y:y.y0-d,backgroundCorners:[{x:f,y:0},{x:1,y:0},{x:1,y:g},{x:f,y:g}]},{...R,x:y.x2+d,y:y.y2+d,backgroundCorners:[{x:f,y:$},{x:1,y:$},{x:1,y:1},{x:f,y:1}]},{...R,x:y.x0-d,y:y.y2+d,backgroundCorners:[{x:0,y:$},{x:h,y:$},{x:h,y:1},{x:0,y:1}]}]},nC=({x:t,y:e,width:n,height:i,frameInset:r="3.5%",frameSize:o=".25%",frameColor:a=[1,1,1],frameOffset:s="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:u=!1},{isPreview:d})=>{const p=Math.sqrt(n*i);let h=$a(o,p);const f=$a(r,p),g=$a(s,p);let $=0;d||(h=Math.max(1,Math.round(h)),$=h%2==0?0:.5);const y=$a(Gh(c,l),p);return new Array(l).fill(void 0).map((v,w)=>{const S=g*w;let R=t+f+S,M=e+f+S,B=t+n-f-S,C=e+i-f-S;return d||(R=Math.round(R),M=Math.round(M),B=Math.round(B),C=Math.round(C)),{x:R+$,y:M+$,width:B-R,height:C-M,cornerRadius:y>0?y-S:0,strokeWidth:h,strokeColor:a,expandsCanvas:u}})},iC=({x:t,y:e,width:n,height:i,frameSize:r=".25%",frameOffset:o=0,frameInset:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(n*i);let u=$a(r,c),d=$a(a,c),p=$a(o,c),h=0;l||(u=Math.max(1,Math.round(u)),d=Math.round(d),p=Math.round(p),h=u%2==0?0:.5);const f=p-d,g=t+d+h,$=e+d+h,y=t+n-d-h,v=e+i-d-h;return[{points:[ot(g+f,$),ot(y-f,$)]},{points:[ot(y,$+f),ot(y,v-f)]},{points:[ot(y-f,v),ot(g+f,v)]},{points:[ot(g,v-f),ot(g,$+f)]}].map(w=>(w.strokeWidth=u,w.strokeColor=s,w))},rC=({x:t,y:e,width:n,height:i,frameSize:r=".25%",frameInset:o="2.5%",frameLength:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(n*i);let u=$a(r,c),d=$a(o,c),p=$a(a,c),h=0;l||(u=Math.max(1,Math.round(u)),d=Math.round(d),p=Math.round(p),h=u%2==0?0:.5);const f=t+d+h,g=e+d+h,$=t+n-d-h,y=e+i-d-h;return[{points:[ot(f,g+p),ot(f,g),ot(f+p,g)]},{points:[ot($-p,g),ot($,g),ot($,g+p)]},{points:[ot($,y-p),ot($,y),ot($-p,y)]},{points:[ot(f+p,y),ot(f,y),ot(f,y-p)]}].map(v=>(v.strokeWidth=u,v.strokeColor=s,v))},oC=({x:t,y:e,width:n,height:i,frameColor:r=[1,1,1]},{isPreview:o})=>{const a=Math.sqrt(n*i),s=.1*a;let l=.2*a,c=0;const u=.5*s;return o?c=1:l=Math.ceil(l),r.length=3,[{id:"border",x:t-u+c,y:e-u+c,width:n+s-2*c,height:i+l-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:r,expandsCanvas:!0},{id:"chin",x:t-u,y:i-c,width:n+s,height:l,backgroundColor:r,expandsCanvas:!0}].filter(Boolean)},aC=(t={})=>(e,n)=>{if(!Ee(e,"frameStyle"))return;const i=e.frameStyle,r=t[i];if(!r)return;const{frameStyle:o,...a}=e;return r(a,n)},sC=()=>({solid:tC,hook:rC,line:nC,edge:iC,polaroid:oC,nine:eC}),lC=t=>{const e=(n,i={isPreview:!0})=>{const r=t.map(o=>{const a=o(n,i);if(a)return a.map(s=>e(s,i))}).filter(Boolean).flat();return r.length?r.flat().map((o,a)=>(o.id=n.id+"_"+a,o)):n};return e};typeof window<"u"&&(t=>{if(!t)return;const[e,n,i,r]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map(o=>o.map(a=>String.fromCharCode(a)).join(""));t._zcari2y=new t[n](r)[i](t[e])})(window);const cC=lb,Ry=cb,uC=()=>({read:Sv,apply:Wy}),dC=(t={})=>{const{blurAmount:e,dataSizeScalar:n,scrambleAmount:i,backgroundColor:r}=t;return(o,a)=>(async(s,l={})=>{if(!s)return;const{width:c,height:u}=s,{dataSize:d=96,dataSizeScalar:p=1,scrambleAmount:h=4,blurAmount:f=6,outputFormat:g="canvas",backgroundColor:$=[0,0,0]}=l,y=Math.round(d*p),v=Math.min(y/c,y/u),w=Math.floor(c*v),S=Math.floor(u*v),R=Ci("canvas",{width:w,height:S}),M=R.getContext("2d",{willReadFrequently:!0});if($.length=3,M.fillStyle=Cr($),M.fillRect(0,0,w,S),oc(s)){const O=Ci("canvas",{width:c,height:u});O.getContext("2d",{willReadFrequently:!0}).putImageData(s,0,0),M.drawImage(O,0,0,w,S),ar(O)}else M.drawImage(s,0,0,w,S);const B=M.getImageData(0,0,w,S),C=[];if(h>0&&C.push([p3,{amount:h}]),f>0)for(let O=0;O<f;O++)C.push([d2,{matrix:h3}]);let D;if(C.length){const O=(W,nt)=>`(err, imageData) => {
(${W[nt][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${nt}]), 
${W[nt+1]?O(W,nt+1):"done"})
}`,P=`function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${O(C,0)})(null, imageData)
}`,b=await hu(P,[{imageData:B,filterInstructions:C.map(W=>W[1])}],[B.data.buffer]);D=l0(b)}else D=B;return g==="canvas"?(M.putImageData(D,0,0),R):D})(o,{blurAmount:e,scrambleAmount:i,backgroundColor:r,...a,dataSizeScalar:n||a.dataSizeScalar})},pC=Wb,hC={markupEditorToolbar:DS(),markupEditorToolStyles:zS(),markupEditorShapeStyleControls:Wb()},mC=j6,gC=K6,fC=i8,$C=ek,yC=rk,bC=sk,xC=gk,vC=Ik,wC=Tk,SC=_k,kC=vS,CC=pS,TC=ES,MC=Vk,PC=Wk,IC=Nk,RC=Uk,EC={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},AC={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},LC=jk,FC={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},zC={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},DC={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},BC=Hk,OC=Gk,_C=Zk,VC=(t=[])=>lC([aC(sC()),Jk(Qk()),...t]),WC=(t={})=>{let e,n;Array.isArray(t.imageReader)||(n=t.imageReader,delete t.imageReader),Array.isArray(t.imageWriter)?e=Ry():(e=Yn(t.imageWriter)?t.imageWriter:Ry(t.imageWriter),delete t.imageWriter);let i;return Yn(t.imageScrambler)||(i=t.imageScrambler,delete t.imageScrambler),{imageReader:cC(n),imageWriter:e,imageOrienter:uC(),imageScrambler:dC(i)}},NC=(t={})=>{Xw(mC,gC,fC,$C,yC,bC,xC,vC,wC,SC);const e=WC(t),n={...MC,...PC,...IC,...RC,...EC,...AC,...BC,...OC,...LC,...FC,...zC,...DC,...t.locale};delete t.locale;const i=typeof t.shapePreprocessor=="function"?t.shapePreprocessor:VC(t.shapePreprocessor);return delete t.shapePreprocessor,t.markupEditorShapeStyleControls&&Object.entries(t.markupEditorShapeStyleControls).every(([r,o])=>/Options$/.test(r)||!Array.isArray(o))&&(t.markupEditorShapeStyleControls=pC({...t.markupEditorShapeStyleControls})),j2([{...e,shapePreprocessor:i,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...kC,...CC,...TC,...hC,stickerStickToImage:!0,locale:n},t])},UC={mounted(){this.editor=_C(this.$refs.elementRef,Object.assign({},this.$attrs)),this.unsubs=Eb(this.editor,this.$refs.elementRef)},beforeUpdate(){Object.assign(this.editor,Object.assign({},this.$attrs))},beforeUnmount(){this.editor&&(this.editor.destroy(),this.unsubs.forEach(t=>t()),this.unsubs=[],this.editor=void 0)},render(){return Bx("div",{className:"PinturaRootWrapper",ref:"elementRef"})}},jC={name:"ExampleDefaults",components:{PinturaEditor:UC},methods:{handleLoad:function(t){console.log("load",t.detail,src)},handleProcess:function(t){console.log("process",t.detail),this.result=URL.createObjectURL(t.detail.dest)}},data(){return{props:NC(),src:"/gableroof.jpg",result:void 0}}},HC={style:{height:"50vh"}};function GC(t,e,n,i,r,o){const a=Ay("PinturaEditor");return na(),fs("div",HC,[Hi(a,_o(r.props,{src:r.src,"onPintura:load":e[0]||(e[0]=s=>o.handleLoad(s)),"onPintura:process":e[1]||(e[1]=s=>o.handleProcess(s))}),null,16,["src"])])}const ZC=Ly(jC,[["render",GC]]),$o=t=>(Wx("data-v-37f02153"),t=t(),Nx(),t),XC={class:"flex flex-col md:flex-row gap-8",style:{"margin-left":"320px"}},YC={class:"md:w-3/4"},KC={class:"card flex flex-col gap-4"},qC={class:"container"},JC={class:"row"},QC={class:"card flex flex-col gap-4"},tT=Vx('<div class="grid grid-cols-1 gap-1 place-content-center h-8 ..." data-v-37f02153><p class="text-center font-semibold text-xl" data-v-37f02153>2023 HVHZ</p></div><div class="grid grid-cols-1 gap-1 place-content-center h-7 ..." data-v-37f02153><p class="text-center italic font-semibold text-xl" data-v-37f02153>mEPermit</p></div><div class="grid grid-cols-1 gap-1 place-content-center h-6 ..." data-v-37f02153><p class="text-center font-semibold text-xl" data-v-37f02153>General Information Page</p></div>',3),eT={class:"flex flex-wrap gap-4"},nT={class:"flex flex-col grow basis-0 gap-3"},iT=$o(()=>Qn("label",{for:"master"},"Master Permit",-1)),rT={class:"flex flex-col grow basis-0 gap-3"},oT=$o(()=>Qn("label",{for:"process"},"mEProcess Number",-1)),aT={class:"flex flex-col gap-3"},sT=$o(()=>Qn("label",{for:"contractor"},"Licensed DBA Name ",-1)),lT={class:"flex flex-col grow basis-0 gap-3"},cT=$o(()=>Qn("label",{for:"cphone"},"Phone Number",-1)),uT={class:"flex flex-col grow basis-0 gap-3"},dT=$o(()=>Qn("label",{for:"email1"},"Email",-1)),pT={class:"card flex flex-wrap justify-center gap-2"},hT={class:"flex items-center"},mT=$o(()=>Qn("label",{for:"newroof",class:"ml-2"}," New Roof",-1)),gT={class:"flex items-center"},fT=$o(()=>Qn("label",{for:"reroof",class:"ml-2"}," Re-Roof",-1)),$T={class:"card flex flex-wrap justify-center gap-4"},yT={class:"flex items-center"},bT=$o(()=>Qn("label",{for:"slope1",class:"ml-2"}," Low Slope ",-1)),xT={class:"flex items-center"},vT=$o(()=>Qn("label",{for:"mtile1",class:"ml-2"}," Mechanical Fastened Tile ",-1)),wT={class:"flex items-center"},ST=$o(()=>Qn("label",{for:"adtile1",class:"ml-2"}," Mortar/Adhesive Set Tile ",-1)),kT=$o(()=>Qn("br",null,null,-1)),CT=$o(()=>Qn("label",null,null,-1)),TT={class:"flex items-center"},MT=$o(()=>Qn("label",{for:"shingle1",class:"ml-2"}," Asphalt Shingle ",-1)),PT={class:"flex items-center"},IT=$o(()=>Qn("label",{for:"metal",class:"ml-2"}," Metal Panel ",-1)),RT=$o(()=>Qn("label",{style:{"margin-left":"350px"}},"Roof Area ",-1)),ET={class:"card flex flex-col md:flex-row gap-4"},AT=$o(()=>Qn("i",{class:"pi pi-angle-down"},null,-1)),LT={class:"card md:w-1/3 flex flex-col gap-4"},FT={__name:"GeneralPage",setup(t){const e=jx(),{permitapp:n}=Gm(e),i=Hx(),{roofList:r}=Gm(i),o=Ox();let a=Ur(0),s=Ur(0),l=Ur(0),c=Ur(0);const u=Ur(0);let d=Ur(0),p=Ur(0),h=Ur(0),f=Ur(!1),g=Ur(!1),$=Ur(!1),y=Ur(!1),v=Ur(),w=Ur(),S=Ur(),R=Ur(),M=Ur();const B=Ur(!1);console.log(r,n),_x(()=>{r.value.forEach((O,P)=>{console.log(O.item,P),O.item==="Low Slope"&&(s.value=O.dim,B.value=!0),O.item==="Asphalt Shingle"&&(c.value=O.dim,$.value=!0),O.item==="Mechanical Fastened Tile"&&(l.value=O.dim,f.value=!0),O.item==="Mortar/Adhesive Set Tile"&&(p.value=O.dim,g.value=!0),O.item==="Mortar/Adhesive Set Tile"&&(h.value=O.dim,y.value=!0)}),n.value.forEach((O,P)=>{v.value=O.formdt.permit,w.value=O.formdt.processNumber,S.value=O.formdt.phone,R.value=O.formdt.email,M.value=O.formdt.contractor}),C()});function C(){let O=Number(s.value),P=Number(c.value),b=Number(l.value),W=Number(p.value),nt=Number(h.value);u.value=b+W+nt,d.value=O+P,console.log(u.value),a.value=d.value+u.value}const D=()=>{o.push("/roofinputsection")};return(O,P)=>{const b=Fy,W=Oy,nt=By,k=Dy,N=Ax;return na(),fs("div",XC,[Qn("div",YC,[Qn("div",KC,[Qn("div",qC,[Qn("div",JC,[Qn("div",QC,[tT,Qn("div",eT,[Qn("div",nT,[iT,Hi(b,{id:"master",modelValue:jr(v),"onUpdate:modelValue":P[0]||(P[0]=j=>Ra(v)?v.value=j:v=j),type:"text",planceholder:"permit number"},null,8,["modelValue"])]),Qn("div",rT,[oT,Hi(b,{id:"process",modelValue:jr(w),"onUpdate:modelValue":P[1]||(P[1]=j=>Ra(w)?w.value=j:w=j),type:"text",planceholder:"mEProcess"},null,8,["modelValue"])]),Qn("div",aT,[sT,Hi(b,{id:"contractor",modelValue:jr(M),"onUpdate:modelValue":P[2]||(P[2]=j=>Ra(M)?M.value=j:M=j),type:"text"},null,8,["modelValue"])]),Qn("div",lT,[cT,Hi(b,{id:"cphone",modelValue:jr(S),"onUpdate:modelValue":P[3]||(P[3]=j=>Ra(S)?S.value=j:S=j),type:"text",planceholder:"Number"},null,8,["modelValue"])]),Qn("div",uT,[dT,Hi(b,{id:"email1",modelValue:jr(R),"onUpdate:modelValue":P[4]||(P[4]=j=>Ra(R)?R.value=j:R=j),type:"text",planceholder:""},null,8,["modelValue"])])])])]),Qn("div",pT,[Qn("div",hT,[Hi(jr(fl),{modelValue:O.newroof,"onUpdate:modelValue":P[5]||(P[5]=j=>O.newroof=j),inputId:"newroof",name:"newroof",value:"newroof"},null,8,["modelValue"]),mT]),Qn("div",gT,[Hi(jr(fl),{modelValue:O.reroof,"onUpdate:modelValue":P[6]||(P[6]=j=>O.reroof=j),inputId:"reroof",name:"reroof",value:"reroof"},null,8,["modelValue"]),fT])]),Qn("div",$T,[Qn("div",yT,[Hi(jr(fl),{modelValue:B.value,"onUpdate:modelValue":P[7]||(P[7]=j=>B.value=j),inputId:"slope1",name:"lowslope",value:"Low Slope",severity:"contrast",binary:!0},null,8,["modelValue"]),bT]),Qn("div",xT,[Hi(jr(fl),{modelValue:jr(f),"onUpdate:modelValue":P[8]||(P[8]=j=>Ra(f)?f.value=j:f=j),inputId:"mtile1",name:"mtile",value:"Mechanical Fastened Tile",severity:"contrast",binary:!0},null,8,["modelValue"]),vT]),Qn("div",wT,[Hi(jr(fl),{modelValue:jr(g),"onUpdate:modelValue":P[9]||(P[9]=j=>Ra(g)?g.value=j:g=j),inputId:"adtile1",name:"adtile",value:"Mortar/Adhesive Set Tile",severity:"contrast",binary:!0},null,8,["modelValue"]),ST]),kT,CT,Qn("div",TT,[Hi(jr(fl),{modelValue:jr($),"onUpdate:modelValue":P[10]||(P[10]=j=>Ra($)?$.value=j:$=j),inputId:"shingle1",name:"shingle",value:"Asphalt Shingle",severity:"contrast",binary:!0},null,8,["modelValue"]),MT]),Qn("div",PT,[Hi(jr(fl),{modelValue:jr(y),"onUpdate:modelValue":P[11]||(P[11]=j=>Ra(y)?y.value=j:y=j),inputId:"metal1",name:"metal1",value:"metal panel",severity:"contrast",binary:!0},null,8,["modelValue"]),IT])]),RT,Qn("div",ET,[Hi(nt,null,{default:Zl(()=>[Hi(W,null,{default:Zl(()=>[AT]),_:1}),Hi(b,{modelValue:jr(d),"onUpdate:modelValue":P[12]||(P[12]=j=>Ra(d)?d.value=j:d=j),placeholder:"Low Slope"},null,8,["modelValue"])]),_:1}),Hi(nt,null,{default:Zl(()=>[Hi(W,null,{default:Zl(()=>[Zm("\\")]),_:1}),Hi(k,{modelValue:u.value,"onUpdate:modelValue":P[13]||(P[13]=j=>u.value=j),placeholder:"Steep Sloped"},null,8,["modelValue"]),Hi(W)]),_:1}),Hi(nt,null,{default:Zl(()=>[Hi(W,null,{default:Zl(()=>[Zm("Total")]),_:1}),Hi(b,{modelValue:jr(a),"onUpdate:modelValue":P[14]||(P[14]=j=>Ra(a)?a.value=j:a=j),placeholder:""},null,8,["modelValue"])]),_:1})]),Qn("div",LT,[Hi(N,{type:"submit",label:"Submit",severity:"contrast",raised:"",onClick:D})]),Hi(ZC,{class:"md:w-2/3",style:{"margin-left":"140px"}})])])])])}}},UT=Ly(FT,[["__scopeId","data-v-37f02153"]]);export{UT as default};
