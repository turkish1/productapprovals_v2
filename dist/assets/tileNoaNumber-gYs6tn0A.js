import{s as fe}from"./index-BvujZvnS.js";import{a as Z,u as ye}from"./tilevalueStore-l4d1lxTD.js";import{u as B}from"./useAxios-c5LqnOyH.js";import{e as t,a0 as _e,h as V,f as ee,w as R,i as he,af as be,ah as Te,o as A,c as k,k as C,l as Q,am as W,j as F,C as $,au as ae,E as w,an as te,z as le,D as X,q as Se,I as De,F as we,y as ze,t as Me,d as Ee,at as Y,T as Ie,L as Ne,M as xe}from"./index-BFHByW5m.js";import{u as Ae}from"./useDripedge-D_Sv9EeL.js";import{u as ke}from"./roofList-CJxnyLQS.js";import{s as Ve}from"./index-BFZkrHzA.js";import{s as $e}from"./index-B9EqkDRn.js";import{s as oe}from"./reset-store-Bhin_631.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Oe(){const s=t([]),e=t([]),i=t([]),n=t([]),u=t(!1),d=t(null),l=t([]);u.value=!0;const c=Z();let r="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/dripmaterials";const{execute:p,then:y,data:o}=B(r,{method:"GET"},{immediate:!1});return i.value=p().then(_=>{e.value=o.value.result,s.value=o.value.result.Drip_Edge_Material_Type;for(let a=0;a<s.value.length;a++)l.value.push(s.value[a]);return n.value.push(e.value.size1,e.value.size2,e.value.size3,e.value.size4),c.addDripTile(e),c.addDripTile(n),s.value}),u.value=!1,{ttype:l,error:d,loading:u,hold:s,results:i,typeSize:n,holdSizes:e}}const Re={class:"flex flex-col w-96 mb-4 gap-3",style:{"margin-left":"20px"}},Ce=F("label",{style:{color:"#122620"}},"Drip Edge Material",-1),Fe=F("label",{style:{color:"#122620"}},"Drip Edge Size",-1),va={__name:"DripEdAdTile",emits:["update-valuesize"],setup(s,{emit:e}){const{selectDripEdge:i,selectDripEdgeSize:n,holdSize:u,type:d}=Ae(),l=ke(),c=t(l.$state.roofList),r=t();Oe();const p=t(null),y=Z(),o=e;let _=t(!1);const a=t(),g=_e(()=>{if(c.value.length===0)return"";for(let f=0;f<c.value.length;f++)c.value[f].item==="Adhesive Set Tile"&&(console.log(c.value[f].item),_.value=!0,r.value=d.value);h()}),m=V({DripEdgeMaterial:"",DripEdgeSize:""}),N=()=>{o("update-valuesize",n.value),m.DripEdgeSize=n.value,z()};ee(()=>{E()});function h(){for(let f=0;f<c.value.length;f++)c.value[f].item==="Adhesive Set Tile"&&M()}function E(){r.value=d.value}function z(){i.value?(i.value==="Galvanized Steel Metal ¹"&&(a.value=u.value.size1,h()),i.value==="Stainless Steel Metal ²"&&(a.value=u.value.size2,h()),i.value==="Aluminum Metal ³"&&(a.value=u.value.size3,h()),i.value==="Copper Metal ⁴"&&(a.value=u.value.size4,h())):console.log("The element not mounted yet"),h()}function M(){m.DripEdgeMaterial=i.value,T()}const T=f=>{_.value===!0&&(m.DripEdgeSize=n.value,console.log(m.DripEdgeSize),y.insertDripAtIndex(4,m.DripEdgeMaterial),y.insertDripAtIndex(6,m.DripEdgeSize))};return R(r,a,d),he(E,z),be(async()=>{await Te(g).toBe(!0)}),(f,D)=>{const x=fe;return A(),k("div",Re,[Ce,C(x,{modelValue:Q(i),"onUpdate:modelValue":D[0]||(D[0]=I=>W(i)?i.value=I:null),options:r.value,placeholder:"make selection",onClick:E},null,8,["modelValue","options"]),Fe,C(x,{ref_key:"selectSizeRef",ref:p,modelValue:Q(n),"onUpdate:modelValue":D[1]||(D[1]=I=>W(n)?n.value=I:null),options:a.value,onClick:z,onChange:N,onUpdateValuesize:T,placeholder:"make selection"},null,8,["modelValue","options"])])}}},se=$("inputdatas",{state:()=>({inputdatas:[],id:0}),actions:{addtileDatas(s){this.inputdatas.push({doublepaddyData:s,completed:!1})},reset(){this.doublepaddyData=[]}},getters:{tileDatas:s=>s.doublepaddyData}}),je=ae();je.use(oe);function qe(){const s=t(),e=t([]);let i=t([]);const n=t(),u=t(""),d=t(""),l=se();let c="https://ewa5ibqdkpzvdvtynh2z7agljm0epptp.lambda-url.us-east-1.on.aws/";const{execute:r,then:p,data:y}=B(c,{method:"GET"},{immediate:!1}),o=V({noa:"",applicant:"",material:"",content:"",description:[],Table2:[],Table3:[],expiration_date:"",resistance:[],selection:"",select_tile:[],tile_map:[],table2_map:[],slope:0,height:0,dripEdgeMaterial:[],dripEdgeSize:[],deckType:"",prescriptiveSelection:"",paddy_category:""});function _(g){console.log(g),s.value=g,n.value=Number(s.value),console.log(n.value),a()}const a=async()=>{try{const g=await r({params:{NOA:n.value}}).then(m=>(console.log(m.data.value[0]),e.value=m.data.value,console.log(e.value),e.value));g.length>0&&e.value[0].Table2.content==="multiple"?(console.log(e.value),o.noa=e.value[0].NOA,o.applicant=e.value[0].applicant,o.content=e.value[0].Table2.content,o.material=e.value[0].AdhesiveMaterial,o.selection=e.value[0].AdhesiveMaterials,o.description=e.value[0].description,o.Table2=e.value[0].Table2,o.Table3=e.value[0].Table3,o.select_tile=e.value[0].Select_Tile,o.tile_map=e.value[0].Tile_Map,o.table2_map=e.value[0].Table2_Map,o.resistance=e.value[0].Resistance,o.expiration_date=e.value[0].expiration_date,o.paddy_category=e.value[0].paddy_category,l.addtileDatas(o)):g.length>0?(console.log(e.value),o.noa=e.value[0].NOA,o.applicant=e.value[0].applicant,o.material=e.value[0].AdhesiveMaterial,o.selection=e.value[0].AdhesiveMaterials,o.description=e.value[0].description,o.Table2=e.value[0].Table2,o.Table3=e.value[0].Table3,o.select_tile=e.value[0].Select_Tile,o.tile_map=e.value[0].Tile_Map,o.table2_map=e.value[0].Table2_Map,o.resistance=e.value[0].Resistance,o.expiration_date=e.value[0].expiration_date,o.paddy_category=e.value[0].paddy_category,l.addtileDatas(o),console.log(o,"System added")):console.warn("No data found!")}catch(g){console.log("Error, fectching data",g)}return i};return{getTilenoa:_,fetchData:a,useDoublepaddy:l,responseMessage:u,noaNum:e,error:d,results:i,tileData:o}}const ne=$("inputdata",{state:()=>({inputdata:[],id:0}),actions:{addtileData(s){this.inputdata.push({singlepaddyData:s,completed:!1})},reset(){this.singlepaddyData=[]}},getters:{tileData:s=>s.singlepaddyData}}),Be=ae();Be.use(oe);function Le(){const s=t(null),e=t([]),i=t([]),n=t(""),u=t(""),d=ne(),l=V({noa:"",applicant:"",material:[],content:"",description:"",Table2:[],Table3:[],Table2_obj_map:[],Table3_obj_map:[],expiration_date:"",resistance:[],selection:"",select_tile:[],tile_map:[],table2_map:[],paddy_cat:"",height:"",area:"",slope:"",Decktype:"",perimeter:""});function c(_){s.value=_,n.value=Number(s.value),console.log("Fetching NOA for number:",n.value),o()}const r="https://bndobvdmx2hlyfu7pbizohgova0aefyp.lambda-url.us-east-1.on.aws",{execute:p,data:y}=B(r,{method:"GET"},{immediate:!1}),o=async()=>{try{const _=await p({params:{NOA:n.value}}).then(a=>(e.value=y.value[0],e.value));if(console.log(_),y.value.length>0&&y.value[0].Table2.content==="multiple"){console.log("Entered due to Table2 and Table3 content multiple");const a=await y.value[0];console.log(a),l.noa=await a.NOA,l.content=await a.content,l.applicant=await a.applicant,l.material=await a.AdhesiveMaterial,l.selection=await a.AdhesiveMaterials,l.description=await a.description,l.select_tile=await a.Select_Tile,l.Table3_obj_map=await a.Tile_Map,l.Table2_obj_map=await a.Table2_Map,l.resistance=await a.Resistance,l.paddy_cat=await a.paddy_category,l.expiration_date=await a.expiration_date,console.log("Tile data fetched:",l),d.addtileData(l)}else if(y.value.length>0){const a=await y.value[0];l.noa=await a.NOA,l.applicant=await a.applicant,l.material=await a.AdhesiveMaterial,l.selection=await a.AdhesiveMaterials,l.description=await a.description,l.Table2=await a.Table2,l.Table3=await a.Table3,l.select_tile=await a.Select_Tile,l.tile_map=await a.Tile_Map,l.table2_map=await a.Table2_Map,l.resistance=await a.Resistance,l.expiration_date=await a.expiration_date,l.paddy_cat=await a.paddy_category,console.log("Tile data fetched:",l),d.addtileData(l)}}catch(_){console.log("Error, fectching data",_)}return i};return{getTilenoas:c,responseMessage:u,fetchData:o,noaNum:e,results:i,tileDatas:l,paddyStore:d}}const Ue=$("pdInputs",{state:()=>({pdInputs:[],id:0}),actions:{addNoas(s){this.pdInputs.push({pdNumbers:s,completed:!1})},reset(){this.pdNumbers=[]}},getters:{pdNumbers:s=>s.pdNumbers}});function Ge(){const s=t(),e=t("");let i=t([]);const n=Ue(),u=V({noa:[]});function d(){p()}const l=w(()=>"https://kqhhddc2c4.execute-api.us-east-1.amazonaws.com/doublePaddyNOAstaging"),{data:c,error:r}=te(l).get().json(),p=async()=>{if(r.value){e.value=r.value;return}else u.noa=c,n.addNoas(u)};return{input:s,fetchData:p,callFunctions:d,errors:e,results:i,...le(u),doubleStore:n}}const Je=$("pdInput",{state:()=>({pdInput:[],id:0}),actions:{addNoas(s){this.pdInput.push({pdNumber:s,completed:!1})},reset(){this.$reset()}},getters:{pdNumber:s=>s.pdNumber}});function He(){const s=t(null),e=t([]),i=t(""),n=Je(),u=V({noa:[]});function d(){p()}const l=w(()=>"https://u839u4s4pi.execute-api.us-east-1.amazonaws.com/singlePaddynoastaging"),{data:c,error:r}=te(l).get().json(),p=async()=>{if(r.value){i.value=r.value;return}else u.noa=c,console.log(c),n.addNoas(u)};return{input:s,fetchData:p,callFunction:d,errors:i,results:e,...le(u),singleStore:n}}const Ke=$("paddycatInput",{state:()=>({paddycatInput:[],id:0}),actions:{addPaddyCatval(s){this.paddycatInput.push({paddyValues:s,completed:!1})},reset(){this.paddyValues=[]}},getters:{getPaddyvalue:s=>s.paddycatInput}}),Qe=s=>(Ne("data-v-81f55074"),s=s(),xe(),s),We={class:"autocomplete"},Xe={class:"w-64 gap-2 mt-3 space-y-2 mb-2",style:{"margin-left":"20px"}},Ye=Qe(()=>F("label",{for:"ac"},"Tile NOA: 00000000",-1)),Ze={key:0,class:"suggestions"},ea=["onMousedown"],aa={__name:"tileNoaNumber",setup(s){const{getTilenoas:e}=Le(),{getTilenoa:i}=qe(),{callFunction:n,singleStore:u}=He(),{callFunctions:d,doubleStore:l}=Ge(),c=Ke(),r=ye(),p=ne(),{inputdata:y}=X(p),o=se(),{inputdatas:_}=X(o),a=t(""),g=t([]),m=t(!1),N=t(!1),h=t(c.$state.paddycatInput[0].paddyValues),E=t([]),z=t([]),M=t(null),T=t(null),f=w(()=>p.inputdata),D=w(()=>o.inputdatas);ee(()=>{d(),n()}),t({...f.value}),t({...D.value});async function x(){return h.value=c.$state.paddycatInput[0].paddyValues,h.value==="double"?(z.value=l.$state,console.log(z.value),g.value=z.value,N.value=!1,console.log("Entered double paddy value",T.value)):(E.value=u.$state,g.value=E.value,N.value=!0),g.value}const I=t([]);R(x,()=>{});const L=w(()=>{var P,O;if(!a.value)return[];I.value=h.value==="double"?(P=g.value.pdInputs)==null?void 0:P[0].pdNumbers.noa.body:(O=g.value.pdInput)==null?void 0:O[0].pdNumber.noa.body;const v=JSON.stringify(I.value).split("[").join(),b=JSON.stringify(v).split("]").join();return w(()=>b.split(",").map(S=>S.trim())).value.filter(S=>S.toString().includes(a.value))});async function ie(){if(a.value){M.value=y.value,T.value=_.value;try{h.value==="single"?(console.log("Entered single paddy value",M.value),e(a.value),await ue(M.value),re()):(N.value=!1,console.log("Entered double paddy value",T.value),i(a.value),await ce(T.value),de())}catch(v){console.error("Failed to process input:",v)}}}const U=t([]);R(()=>p.inputdata,v=>{f.value=v}),R(()=>o.inputdatas,v=>{D.value=v});const j=t(),q=t(),G=t();async function ue(v){try{console.log(M.value),console.log(v),U.value=v,console.log(U.value),j.value=w(()=>M.value),console.log(j.value),r.addSystemvalues(j.value)}catch(b){console.error("Error in paddyInputSelection:",b)}}async function ce(v){try{console.log(T.value),console.log(v),G.value=v,console.log(G.value),q.value=w(()=>T.value),console.log(q.value),r.addSystemvalues(q.value)}catch(b){console.error("Error in paddyInputSelection:",b)}}const J=t(),H=t(),re=()=>{J.value=f.value,Y(()=>{console.log("DOM is updated, message is now:",J.value)})},de=()=>{H.value=D.value,Y(()=>{console.log(H.value)})};function pe(v){a.value=v,m.value=!1}function ve(){m.value=!0}function ge(){setTimeout(()=>{m.value=!1},50)}return(v,b)=>{const K=$e,P=Ve,O=Ie;return A(),k("div",We,[F("div",Xe,[C(P,null,{default:Se(()=>[De(C(K,{id:"tilenoa",modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=S=>a.value=S),inputId:"ac",onFocus:b[1]||(b[1]=S=>m.value=!0),onBlur:ge,onInput:ve,onChange:ie,onUpdate:x},null,8,["modelValue"]),[[O,"Press Tab after value",void 0,{bottom:!0}]]),Ye]),_:1})]),m.value&&L.value.length?(A(),k("ul",Ze,[(A(!0),k(we,null,ze(L.value,(S,me)=>(A(),k("li",{key:me,onMousedown:ta=>pe(S)},Me(S),41,ea))),128))])):Ee("",!0)])}}},ga=Pe(aa,[["__scopeId","data-v-81f55074"]]);export{va as _,ne as a,se as b,qe as c,Le as d,ga as e,Ke as u};
