import{T as H}from"./index-B303VXph.js";import{s as J}from"./index-DqZevSvy.js";import{s as K}from"./index-C2GjvsQA.js";import{s as Q}from"./index-DEkTg8Z6.js";import{s as X}from"./index-CSKiZIhq.js";import{s as Y}from"./index-DMA6btlb.js";import{u as Z,a as $,b as M,_ as ee}from"./use-createProcessnumber-DI90xILb.js";import{u as oe}from"./accountsStore-yntmiqht.js";import{u as le}from"./permitapp-Dda4NvbD.js";import{r as a,u as te,a as se,o as C,A as ae,a8 as ne,a9 as re,as as ie,n as ce,b,c as D,k as R,z as S,e as o,d as r,f as de,h as me,t as ue,F as pe,a7 as fe,am as ve,p as be,i as ye}from"./index-DCKf2MA0.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BfkMcd0l.js";import"./index-v9Eo3iUO.js";import"./index-CBarOO3h.js";import"./index-DgoQZy6b.js";import"./index-D43cZfJm.js";import"./index-BFqcoe7Y.js";import"./index-B6DB1EPb.js";import"./index-1V0JA-zQ.js";import"./useAxios-1rm-BwXP.js";import"./processStore-C1n_uItL.js";a(1);const _e={setup(){const s=a(!1),l=a(""),y=te(),t=a(!1),P=a(),{procData:B,procReceive:u}=Z(),{accountUsers:n,getUser:c,addUser:p}=oe();console.log(n._value[0]);const f=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),g=a("me"),_=le(),e=se({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),E=a(!0),k=a(""),A=a(""),h=a(""),N=a(""),U=a("");C(()=>{ae.init({duration:800,easing:"ease-in-out",once:!0})}),ne(()=>{if(n._value[0].name==="")return y.push("/");t.value=!0,k.value=n._value[0].name,A.value=n._value[0].email,h.value=n._value[0].phone,N.value=n._value[0].secondary_status,U.value=n._value[0].dba});const I=re(()=>E.value===!0?f.value[0]:"");$();const{lastNum:x,resNum:L}=M();h.value=n._value[0].phone,a(null);const m=a(""),V=a("");C(()=>{t.value=!0});const T=async()=>{try{s.value=!0,setTimeout(()=>{s.value=!1},3e3);const d=a(e.address),G=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(d.value)}&to=200`,w=await(await fetch(G)).json();console.log(w),e.muni=w.MinimumPropertyInfos[0].Municipality,e.license=n._value[0].license,e.contractor=n._value[0].name,e.folio=w.MinimumPropertyInfos[0].Strap,console.log(x.value);let W=String(x.value).substring(2,13),q=fe(W).value+1,z=String(q);e.processNumber=g.value.concat(z),console.log(e.processNumber),V.value=e.folio,m.value=V.value.substring(1,2),console.log(m.value),u(e)}catch(d){alert(d)}},F=async()=>{u(e)},O=()=>{y.push("/roofsystem")};function j(d,v){d=e,v=I.value,d.length!==0&&(_.addSystem(d,v,m.value),console.log(d,v,m.value,"System added"))}return{isDialog:t,onSubmit:F,accountUsers:n,getUser:c,email:A,dba:U,invoke:ie,phone:h,contractor:k,licenseStatus:N,addUser:p,navigateNext:O,addItemAndClear:j,selectedApplication:I,type:f,resNum:L,...ce(e),responseMessage:l,lastNum:x,useLast:M,load:T,checkMB:m,checkV:V,content:P}}},i=s=>(be("data-v-e45c5476"),s=s(),ye(),s),he={class:"container md:w-1/3",style:{"margin-left":"330px"}},xe={class:"flex flex-row"},Ve={class:"flex mt-4 space-y-2 flex-col gap-2"},we=i(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Se={class:"flex justify-center"},Pe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},ke=i(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ae={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Ne={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-2"},Ue=i(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Ie={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Me=i(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),Ce={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},De=i(()=>o("label",{for:"contractor",style:{color:"#122620"}},"Contractor Name",-1)),Re={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Be=i(()=>o("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Ee={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Le=i(()=>o("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),Te={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Fe=i(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Oe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},je=i(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},We=i(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=i(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),He={key:0},Je=i(()=>o("br",null,null,-1)),Ke=i(()=>o("br",null,null,-1));function Qe(s,l,y,t,P,B){const u=ee,n=Y,c=X,p=Q,f=K,g=J,_=H;return b(),D(pe,null,[t.isDialog?(b(),R(u,{key:0})):S("",!0),o("div",he,[o("form",null,[o("div",xe,[o("div",Ve,[we,o("div",Se,[r(n,{modelValue:t.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=e=>t.selectedApplication=e),options:t.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",Pe,[ke,r(c,{id:"license",modelValue:t.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=e=>t.licenseStatus=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Ae,[o("form",{class:"w-2/3",onSubmit:l[12]||(l[12]=(...e)=>t.onSubmit&&t.onSubmit(...e))},[o("div",Ne,[Ue,de(r(c,{id:"addr",type:"text",modelValue:s.address,"onUpdate:modelValue":l[2]||(l[2]=e=>s.address=e),placeholder:"address"},null,8,["modelValue"]),[[_,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),r(p,{id:"search",type:"button",label:"Search",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:s.loading,onClick:t.load,onInput:s.createHtml},null,8,["loading","onClick","onInput"])]),o("div",Ie,[Me,r(c,{id:"dba",modelValue:t.dba,"onUpdate:modelValue":l[3]||(l[3]=e=>t.dba=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Ce,[De,r(c,{id:"contractor",modelValue:t.contractor,"onUpdate:modelValue":l[4]||(l[4]=e=>t.contractor=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Re,[Be,r(f,{modelValue:t.phone,"onUpdate:modelValue":l[5]||(l[5]=e=>t.phone=e),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:t.phone===""},null,8,["modelValue","invalid"])]),o("div",Ee,[Le,r(c,{modelValue:t.email,"onUpdate:modelValue":l[6]||(l[6]=e=>t.email=e),invalid:t.email===null,error:s.emailError},null,8,["modelValue","invalid","error"]),s.invalid?(b(),R(g,{key:0,severity:"error"},{default:me(()=>[ve("Email is required")]),_:1})):S("",!0)]),o("div",Te,[Fe,r(c,{id:"muni",modelValue:s.muni,"onUpdate:modelValue":l[7]||(l[7]=e=>s.muni=e),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),o("div",Oe,[je,r(c,{id:"folio",modelValue:s.folio,"onUpdate:modelValue":l[8]||(l[8]=e=>s.folio=e),type:"text",placeholder:"folio",onInput:s.updatemEProcess},null,8,["modelValue","onInput"])]),o("div",Ge,[We,r(c,{id:"permit",modelValue:s.permit,"onUpdate:modelValue":l[9]||(l[9]=e=>s.permit=e),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",qe,[ze,r(c,{id:"processnum",modelValue:s.processNumber,"onUpdate:modelValue":l[10]||(l[10]=e=>s.processNumber=e),type:"text",placeholder:"process number"},null,8,["modelValue"])]),t.responseMessage?(b(),D("p",He,ue(t.responseMessage),1)):S("",!0),Je,r(p,{id:"submit",type:"submit",label:"Submit",class:"w-1/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[11]||(l[11]=e=>t.addItemAndClear(s.formData,t.selectedApplication))})],32),Ke])])])])])],64)}const xo=ge(_e,[["render",Qe],["__scopeId","data-v-e45c5476"]]);export{xo as default};
