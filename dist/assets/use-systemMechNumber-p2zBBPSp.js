import{s as $}from"./index-CVJ94zE_.js";import{u as j}from"./useDripedge-BdO0GTXG.js";import{D as V,e as r,f as z,Z as F,g as A,V as _,w as B,ae as C,af as H,o as I,c as L,j as w,k as N,ak as T,i as k,al as O}from"./index-Xp8LqGSK.js";import{u as P}from"./roofList-BnHBPrpV.js";import{u as G,a as Z}from"./useAxios-xZtDjFwy.js";const J=V("dripinputmaterial",{state:()=>({dripinputmaterial:[],dripMTileMaterial:[],dripinputsize:[],inputselectedUserDripEdge:[],selectedDripSize:[],id:2}),actions:{addMTileDrip(e){this.dripinputmaterial.push({dripMTileData:e,completed:!1})},addSTileDrip(e){this.dripinputsize.push({selectedDripSizenew:e,completed:!1})},insertDripAtIndex(e,s){this.dripinputmaterial.splice(e,0,{dripMTileMaterial:s,completed:!1})},addUseritems(e){this.inputselectedUserDripEdge.push({dripSelection:e,completed:!1})},resetState(){console.log("reset was called: ",this.inputselectedUserDripEdge),this.inputselectedUserDripEdge=[],console.log("reset was called: ",this.inputselectedUserDripEdge)}}}),K={class:"flex flex-col w-96 mb-4 gap-3",style:{"margin-left":"20px"}},Q=k("label",{style:{color:"#122620"}},"Drip Edge Material",-1),W=k("label",{style:{color:"#122620"}},"Drip Edge Size",-1),ie={__name:"DripEdMechTile",emits:["update-valuesize"],setup(e,{emit:s}){const{selectDripEdge:l,selectDripEdgeSize:a,type:m,sizeTypeMetal:i}=j(),o=P(),c=r(o.$state.roofList),d=r(),p=r(null),n=J(),f=s;let t=r(!1);const h=r(),M=z({DripEdgeMaterial:"",DripEdgeSize:""}),q=F(()=>{if(c.value.length===0)return"";for(let u=0;u<c.value.length;u++)c.value[u].item==="Mechanical Fastened Tile"&&(t.value=!0,d.value=m.value);g()}),y=z({DripEdgeMaterial:"",DripEdgeSize:""}),U=()=>{f("update-valuesize",a.value),y.DripEdgeSize=a.value,S()};A(()=>{b()});function g(){for(let u=0;u<c.value.length;u++)c.value[u].item==="Mechanical Fastened Tile"&&console.log(c.value[u].item);x()}function b(){d.value=m.value}async function S(){l.value?(l.value==="Galvanized Steel Metal ¹"&&(h.value=i.galvanized,g()),l.value==="Stainless Steel Metal ²"&&(h.value=i.stainless,g()),l.value==="Aluminum Metal ³"&&(h.value=i.aluminum,g()),l.value==="Copper Metal ⁴"&&(h.value=i.copper,g())):console.log("The element not mounted yet"),M.DripEdgeMaterial=l.value,M.DripEdgeSize=a.value,g()}function x(){y.DripEdgeMaterial=l.value,R()}const R=async u=>{n.resetState(),n.addUseritems(M),console.log(n)};return _(d,h,m),B(b,S),C(async()=>{await H(q).toBe(!0)}),(u,v)=>{const E=$;return I(),L("div",K,[Q,w(E,{modelValue:N(l),"onUpdate:modelValue":[v[0]||(v[0]=D=>T(l)?l.value=D:null),b],options:d.value,placeholder:"make selection"},null,8,["modelValue","options"]),W,w(E,{ref_key:"selectSizeRef",ref:p,modelValue:N(a),"onUpdate:modelValue":v[1]||(v[1]=D=>T(a)?a.value=D:null),options:h.value,onClick:S,onChange:U,placeholder:"make selection"},null,8,["modelValue","options"])])}}},X="https://myfawca4fj3ewpg5usmepe6toi0wuvlw.lambda-url.us-east-1.on.aws/";function oe(){const e=r(null),s=r(!1),{data:l,error:a,isFetching:m,execute:i}=G(X,{method:"POST",headers:{"Content-Type":"application/json"}},Z,{immediate:!1}),o=async(d,p)=>{var n,f;s.value=!0,e.value=null;try{const t=await i({data:d});return(t==null?void 0:t.data)??l.value}catch(t){throw console.error(`Lambda ${p} failed:`,{message:t==null?void 0:t.message,code:t==null?void 0:t.code,status:(n=t==null?void 0:t.response)==null?void 0:n.status,data:(f=t==null?void 0:t.response)==null?void 0:f.data}),e.value=(t==null?void 0:t.message)||"Request failed",t}finally{s.value=!1}};return{data:l,errors:e,isFetching:m,loading:s,postMech:d=>o(d,"postMech")}}function re({min:e=null,max:s=null,required:l=!1}){const a=r(null);return{errorHeightMessage:a,validateTileHeight:i=>{const o=i;return e!==null&&o<e?(a.value=`Number must be greater than or equal to ${e}`,console.log("min",o,e),!1):s!==null&&o>=e&&o>=s?(a.value=`Number must be less than or equal to ${s}`,console.log("max",o),!1):l&&(i==null||i==="")?(a.value="This field is required",console.log("required"),!1):(a.value=null,!0)}}}function ne({min:e=null,max:s=null,required:l=!1}){const a=r(null);return{errorMessage:a,validateNumber:i=>{const o=i;return e!==null&&o<e?(a.value=`Number must be greater than or equal to ${e}`,!1):s!==null&&o>=e&&o>=s?(a.value=`Number must be less than or equal to ${s}`,console.log("max",o),!1):l&&(i==null||i==="")?(a.value="This field is required",console.log("required"),!1):(a.value=null,!0)}}}const Y=V("tileMechInput",{state:()=>({tileMechInput:[],id:0}),actions:{addSystem(e){this.tileMechInput.push({tileMechNumber:e,completed:!1})},reset(){this.$reset()}},getters:{tileMechNumber:e=>e.tileMechNumber}});function ue(){const e=Y(),s=r(""),l=r([]),a="https://mczqlparb6o6umu7j4ct7pv4vi0jrnat.lambda-url.us-east-1.on.aws/",{data:m,error:i,isFetching:o,execute:c}=O(a,{immediate:!1,afterFetch(p){var f;const n=(f=p.data)==null?void 0:f.body;return n&&(l.value=n,e.addSystem({tileMechNumber:{noa:n},fetchedAt:Date.now()})),p}}).get().json();return _(i,p=>{p&&(s.value=p)}),{tileMechNumber:l,callNumber:async()=>(s.value="",await c()),isFetching:o,errors:s,mechanicalStore:e}}export{ie as _,oe as a,ne as b,re as c,J as d,Y as e,ue as u};
