import{e as a,u as oe,j as le,ab as se,ap as te,at as O,O as ae,L as ne,o as y,c as W,a as q,d as N,g as o,h as r,R as G,l as re,t as ie,F as ce,au as de,aa as ue,q as me,W as pe,X as fe,_ as ve}from"./index-Bm5gC8i2.js";import{s as be}from"./index-BnQDOdCr.js";import{s as ge}from"./index-DN5Ym30U.js";import{s as ye}from"./index-Md6yl14w.js";import{s as he}from"./index-DtD_pquj.js";import{s as _e}from"./index-Dwb-pMZI.js";import{u as xe,a as Ve,b as H,_ as we}from"./use-createProcessnumber-BjGgCWpa.js";import{u as Pe}from"./accountsStore-DCOT6m6C.js";import{u as Se}from"./permitapp-_Ct7lFRU.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Dl81FAXT.js";import"./index-D6dA3XvJ.js";import"./index-DAT1sP59.js";import"./index-BHPvqRqp.js";import"./index-DQyP6-BE.js";import"./index-vgezHff7.js";import"./index-WKOLFz56.js";import"./useAxios-CTuPseIw.js";import"./processStore-DlSIWCuB.js";const Ne={setup(){const t=a(!1),l=a(""),M=oe(),s=a(!1),U=a(),{procData:X,procReceive:v}=xe(),{accountUsers:u,getUser:c,addUser:b}=Pe(),g=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),h=a("me"),f=Se(),e=a(""),_=a(""),n=le({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),z=a(!0),I=a(""),A=a(""),C=a(""),D=a(""),B=a(""),p=a([]);se(()=>{s.value=!0,x()});async function x(){p.value=await u.value[0],console.log(u.value[0]),C.value=p.value.bphone,I.value=p.value.name,A.value=p.value.email,D.value=p.value.secondary_status,B.value=p.value.dba}te(x,()=>{}),O(async()=>{await de(x).toBe(!0)});const E=ae(()=>z.value===!0?g.value[0]:"");Ve();const{lastNum:J,resNum:V}=H(),w=a(""),P=a(""),R=a(null),S=a(""),L=a(null);a("");const K=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},1e3),_.value=e.value,console.log(e.value,_.value);const d=a(n.address);console.log(d.value);const m=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${d.value}`;console.log(m),T(m),console.log(e.value),n.license=u.value[0].license,n.contractor=u.value[0].name,n.emails=u.value[0].email,n.muniProc=e.value,n.phNumber=u.value[0].bphone,console.log(V.value);let j=String(V.value);console.log(j);let F=j.substring(3,19);console.log(F);const k=ue(F);console.log(typeof k,k.value);let $=k.value+1,ee=String($);n.processNumber=h.value.concat(ee),v(n)}catch(d){alert(d)}},T=async d=>{t.value=!0,L.value=null;try{const m=await fetch(d);console.log(d),R.value=await m.json(),S.value=R.value.MinimumPropertyInfos[0],n.muni=S.value.Municipality,n.folio=S.value.Strap,P.value=n.folio,w.value=P.value.substring(1,2)}catch(m){L.value=m.message}finally{t.value=!1}},Q=async()=>{v(n)},Y=()=>{M.push("/roofsystem")};function Z(d,m){d=n,m=E.value,console.log(d),d.length!==0&&(f.addSystem(d,m,w.value,e.value,_.value),console.log(f))}return{isDialog:s,fetchData:T,onSubmit:Q,accountUsers:u,getUser:c,email:A,dba:B,invoke:O,phone:C,name:I,licenseStatus:D,muniProcess:e,addUser:b,navigateNext:Y,addItemAndClear:Z,selectedApplication:E,type:g,resNum:V,...ne(n),responseMessage:l,lastNum:J,useLast:H,load:K,checkMB:w,checkV:P,content:U}}},i=t=>(pe("data-v-90f55fe9"),t=t(),fe(),t),Me={class:"container md:w-1/3",style:{"margin-left":"650px"}},Ue={class:"flex flex-row"},Ie={class:"flex mt-4 space-y-2 flex-col gap-2"},Ae=i(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Ce={class:"flex justify-center"},De={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Be=i(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ee={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Re={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Le=i(()=>o("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Te={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},je=i(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Fe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Oe=i(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),We={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},qe=i(()=>o("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),Ge={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=i(()=>o("label",{id:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Xe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},ze=i(()=>o("label",{id:"Email",style:{color:"#122620"}},"Email",-1)),Je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ke=i(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Qe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ye=i(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},$e=i(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),eo={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},oo=i(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),lo={key:0},so=i(()=>o("br",null,null,-1)),to=i(()=>o("br",null,null,-1));function ao(t,l,M,s,U,X){const v=we,u=_e,c=he,b=ye,g=ge,h=be,f=ve;return y(),W(ce,null,[s.isDialog?(y(),q(v,{key:0})):N("",!0),o("div",Me,[o("form",null,[o("div",Ue,[o("div",Ie,[Ae,o("div",Ce,[r(u,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=e=>s.selectedApplication=e),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",De,[Be,r(c,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=e=>s.licenseStatus=e),type:"text",placeholder:"status"},null,8,["modelValue"])]),o("div",Ee,[o("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...e)=>s.onSubmit&&s.onSubmit(...e))},[o("div",Re,[Le,G(r(c,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=e=>s.muniProcess=e),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[f,"Enter Municipality Process Number",void 0,{top:!0}]])]),o("div",Te,[je,G(r(c,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=e=>t.address=e),placeholder:"address"},null,8,["modelValue"]),[[f,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),r(b,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),o("div",Fe,[Oe,r(c,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=e=>s.dba=e),type:"text",placeholder:"dba"},null,8,["modelValue"])]),o("div",We,[qe,r(c,{id:"name",modelValue:s.name,"onUpdate:modelValue":l[5]||(l[5]=e=>s.name=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",Ge,[He,r(g,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>s.phone=e),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),o("div",Xe,[ze,r(c,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=e=>s.email=e),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(y(),q(h,{key:0,severity:"error"},{default:re(()=>[me("Email is required")]),_:1})):N("",!0)]),o("div",Je,[Ke,r(c,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=e=>t.muni=e),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),o("div",Qe,[Ye,r(c,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=e=>t.folio=e),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),o("div",Ze,[$e,r(c,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=e=>t.permit=e),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",eo,[oo,r(c,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=e=>t.processNumber=e),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(y(),W("p",lo,ie(s.responseMessage),1)):N("",!0),so,r(b,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=e=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),to])])])])])],64)}const No=ke(Ne,[["render",ao],["__scopeId","data-v-90f55fe9"]]);export{No as default};
