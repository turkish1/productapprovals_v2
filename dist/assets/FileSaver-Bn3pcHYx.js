import{r as c,aJ as z,a1 as S,p as i,s as d,u as a,F as $,v as F,A as p,a4 as u,a3 as m,V as C,af as D}from"./vue-vendor-DzAkcJj_.js";const L={class:"flex items-center justify-center flex-col"},U=a("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"},null,-1),B={class:"flex flex-wrap gap-4"},E={class:"font-semibold text-ellipsis max-w-250 whitespace-nowrap overflow-hidden"},P={__name:"FileSaver",setup(M){const n=c([]),v=z();S();const f=c(0),w=c(0),g=e=>{e.dataTransfer.dropEffect="copy"},y=e=>{const l=v.config.locale.fileSizeTypes;if(e===0)return`0 ${l[0]}`;const s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(3))} ${l[s]}`},h=async e=>{n.value=[...e.dataTransfer.files];for(const o of n.value)await b(o),console.log(o)},_=e=>{n.value.splice(e,1)},k=e=>{w.value=f.value/1,e()},b=async e=>{if(window.showSaveFilePicker)try{const o=await window.showSaveFilePicker({suggestedName:e.name,types:[{description:e.type,accept:{[e.type]:[`.${e.name.split(".").pop()}`]}}]});console.log(o);const t=await o.createWritable();await t.write(e),await t.close(),console.log(`${e.name} saved successfully!`)}catch(o){console.error("Error saving file:",o)}else{const o=URL.createObjectURL(e),t=document.createElement("a");t.href=o,t.download=e.name,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(o),console.log(`${e.name} downloaded!`)}};return(e,o)=>{const t=C,l=D;return i(),d("div",{class:"dropzone",onDragover:m(g,["prevent"]),onDrop:m(h,["prevent"])},[a("div",L,[U,a("p",{class:"mt-6 mb-0",onUpload:o[0]||(o[0]=s=>e.onTemplatedUpload(s))},"Drag and drop files to here to upload.",32)]),a("div",B,[(i(!0),d($,null,F(n.value,(s,r)=>(i(),d("div",{key:r+s.url+s.size,class:"p-8 rounded-border flex flex-col border border-surface items-center gap-4"},[a("div",null,[p(t,{onClick:o[1]||(o[1]=x=>k()),icon:"pi pi-cloud-upload",rounded:"",outlined:"",severity:"success",disabled:!n.value||n.value.length===0},null,8,["disabled"])]),a("span",E,u(s.name),1),a("div",null,u(y(s.size)),1),p(l,{value:"Completed",class:"mt-4",severity:"success"}),p(t,{icon:"pi pi-times",onClick:x=>_(r),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])],32)}}};export{P as _};
