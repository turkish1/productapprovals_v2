import{i as q,af as J,ag as U,N as z,w as _,a0 as K,ah as R,r as B}from"./index-CYDbCOX0.js";import{a as H}from"./axios-DTyqpfTh.js";const{Axios:$,AxiosError:M,CanceledError:ee,isCancel:te,CancelToken:ne,VERSION:oe,all:re,Cancel:ie,isAxiosError:le,spread:se,toFormData:ue,AxiosHeaders:ae,HttpStatusCode:ce,formToJSON:fe,getAdapter:de,mergeConfig:he}=H;function g(e){return typeof e=="function"?e():z(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const V=()=>{};function G(e,r=!1,n="Timeout"){return new Promise((d,w)=>{setTimeout(r?()=>w(n):d,e)})}function Q(e){return U()}function me(e,r=!0,n){Q()?q(e,n):r?e():J(e)}function S(e,r=!1){function n(t,{flush:l="sync",deep:a=!1,timeout:c,throwOnTimeout:m}={}){let i=null;const h=[new Promise(u=>{i=_(e,f=>{t(f)!==r&&(i==null||i(),u(f))},{flush:l,deep:a,immediate:!0})})];return c!=null&&h.push(G(c,m).then(()=>g(e)).finally(()=>i==null?void 0:i())),Promise.race(h)}function d(t,l){if(!K(t))return n(f=>f===t,l);const{flush:a="sync",deep:c=!1,timeout:m,throwOnTimeout:i}=l??{};let s=null;const u=[new Promise(f=>{s=_([e,t],([y,P])=>{r!==(y===P)&&(s==null||s(),f(y))},{flush:a,deep:c,immediate:!0})})];return m!=null&&u.push(G(m,i).then(()=>g(e)).finally(()=>(s==null||s(),g(e)))),Promise.race(u)}function w(t){return n(l=>!!l,t)}function C(t){return d(null,t)}function v(t){return d(void 0,t)}function A(t){return n(Number.isNaN,t)}function T(t,l){return n(a=>{const c=Array.from(a);return c.includes(t)||c.includes(g(t))},l)}function x(t){return b(1,t)}function b(t=1,l){let a=-1;return n(()=>(a+=1,a>=t),l)}return Array.isArray(g(e))?{toMatch:n,toContains:T,changed:x,changedTimes:b,get not(){return S(e,!r)}}:{toMatch:n,toBe:d,toBeTruthy:w,toBeNull:C,toBeNaN:A,toBeUndefined:v,changed:x,changedTimes:b,get not(){return S(e,!r)}}}function X(e){return S(e)}function pe(...e){const r=typeof e[0]=="string"?e[0]:void 0,n=typeof r=="string"?1:0,d={immediate:!!n,shallow:!0,abortPrevious:!0};let w={},C=H,v=d;const A=o=>!!(o!=null&&o.request);e.length>0+n&&(A(e[0+n])?C=e[0+n]:w=e[0+n]),e.length>1+n&&A(e[1+n])&&(C=e[1+n]),(e.length===2+n&&!A(e[1+n])||e.length===3+n)&&(v=e[e.length-1]||d);const{initialData:T,shallow:x,onSuccess:b=V,onError:t=V,immediate:l,resetOnExecute:a=!1}=v,c=R(),m=(x?R:B)(T),i=B(!1),s=B(!1),h=B(!1),u=R();let f=new AbortController;const y=o=>{i.value||!s.value||(f.abort(o),f=new AbortController,h.value=!0,s.value=!1,i.value=!1)},P=o=>{s.value=o,i.value=!o},W=()=>{a&&(m.value=T)},I=()=>new Promise((o,E)=>{X(i).toBe(!0).then(()=>u.value?E(u.value):o(D))}),N={then:(...o)=>I().then(...o),catch:(...o)=>I().catch(...o)};let O=0;const k=(o=r,E={})=>{u.value=void 0;const F=typeof o=="string"?o:r??E.url;if(F===void 0)return u.value=new M(M.ERR_INVALID_URL),i.value=!0,N;W(),v.abortPrevious!==!1&&y(),P(!0),O+=1;const j=O;return h.value=!1,C(F,{...w,...typeof o=="object"?o:E,signal:f.signal}).then(p=>{if(h.value)return;c.value=p;const L=p.data;m.value=L,b(L)}).catch(p=>{u.value=p,t(p)}).finally(()=>{var p;(p=v.onFinish)==null||p.call(v),j===O&&P(!1)}),N};l&&r&&k();const D={response:c,data:m,error:u,isFinished:i,isLoading:s,cancel:y,isAborted:h,isCanceled:h,abort:y,execute:k};return{...D,...N}}export{me as t,pe as u};
