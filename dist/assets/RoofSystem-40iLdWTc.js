import{_ as U}from"./FileSaver-y64vpMOZ.js";import{e as r,H as D,f as V,E as q,h as E,o as k,c as b,i as e,F as P,z as N,t as C,n as H,J as A,k as w,X as J,Y as X,j as h,v as Y,p as Q,q as W,x as O,A as Z}from"./index-DB22J1Qz.js";import{s as ee}from"./index-BLsMO3ai.js";import{u as te,a as se}from"./useAxios-C_JGlPe5.js";import{u as oe}from"./generalpageStore-CukAiyeM.js";import{u as L}from"./roofList-DH0aDuRt.js";import{u as ae}from"./permitapp-mG24VnsZ.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as j}from"./index-xsC5fmRE.js";import{s as le}from"./index-CYBuMZz7.js";import{s as ne}from"./index-C2pc8rGu.js";import"./index-CnLY4hcO.js";import"./index-BaRFtnaA.js";import"./index-9PWifAu8.js";import"./index-D373fHBn.js";import"./index-Bx7E9Rwr.js";import"./index-B2rtuQuO.js";const ie="https://75tyxhvxx6be6gznfs5kcne73a0sxznj.lambda-url.us-east-1.on.aws/";function re(){const p=r(null),i=r(!1);var m=r(null),d=r(null);const{data:v,error:u,isFetching:f,execute:l}=te(ie,{method:"POST",headers:{"Content-Type":"application/json"}},se,{immediate:!1});return{data:v,errors:p,isFetching:f,loading:i,postGeneral:async a=>{d.value=a,console.log(d.value),i.value=!0,u.value=null;try{return await l({data:d.value})}catch(_){u.value=_.massage,console.error("Lambda post failed:",_)}finally{i.value=!1}},postRoofcheck:async a=>{m.value=a,console.log(m.value),i.value=!0,u.value=null;try{return await l({data:m.value})}catch(_){u.value=_.massage,console.error("Lambda post failed:",_)}finally{i.value=!1}}}}function de(){const p=L(),{roofList:i}=D(p);r(!1);const m=oe(),{postGeneral:d}=re(),v=r(null),u=r(m.$state.generalpdfinput),f=r(!1),l=V({mtile:!1,adtile:!1,shingle:!1,metal:!1,slope:!1}),o=V({steep1:0,steep2:0,steep3:0,steep4:0,low1:0}),t=V({steep:0,lowslope:0,total:0}),a=V({steepData:"",slopeData:"",totalData:"",mtileChk:!1,adtileChk:!1,shingleChk:!1,slopeChk:!1,metalChk:!1,roofCheck:"",area:""});function _(M){v.value=M.value[0];const T={"Asphalt Shingle":{dim:"dim1",flag:"shingle",steepKey:"steep1"},"Adhesive Set Tile":{dim:"dim4",flag:"adtile",steepKey:"steep2"},"Mechanical Fastened Tile":{dim:"dim3",flag:"mtile",steepKey:"steep3"},"Metal Panel":{dim:"dim5",flag:"metal",steepKey:"steep4"},"Low Slope":{dim:"dim2",flag:"slope"}};Object.keys(l).forEach(S=>l[S]=!1),Object.keys(o).forEach(S=>o[S]=0),i.value.forEach(S=>{const g=T[S.item];if(g){const $=Number(S[g.dim])||0;l[g.flag]=!0,a[`${g.flag}Chk`]=!0,console.log(g.flag),g.flag==="slope"?o.low1=$:o[g.steepKey]=$}}),R()}async function R(){t.steep=o.steep1+o.steep2+o.steep3+o.steep4,t.lowslope=o.low1,t.total=t.steep+t.lowslope,a.area=t.total,a.steepData=t.steep,a.slopeData=t.lowslope,a.totalData=t.total,a.roofCheck=v.value,m.addgeneralpdfData(a),await d(a),f.value=!0}return{addRoof:_,roofArea:R,dataGeneral:a,generalType:u,isGeneralPageValid:f}}const ce=q("roofinput",{state:()=>({roofinput:[],id:0}),actions:{addCheck(p){this.roofinput.push({roofCheckdata:p,completed:!1})},reset(){this.roofinput=[]},persist:!0}}),pe={class:"terminal"},ue={class:"terminal-content"},me={class:"content"},fe=["onClick"],ve=15,he={__name:"RoofSystemList",setup(p){const i=L(),{roofList:m}=D(i),{toggleCompleted:d}=D(i),v=["Initializing system...","Loading modules...","Connecting to server...","Server connection established.","Awaiting Roof System Selection..."],u=r([]);function f(){let l=0;const o=setInterval(()=>{l<v.length?(u.value.length>=ve&&u.value.shift(),u.value.push(v[l]),l++):clearInterval(o)},500)}return E(()=>{f()}),(l,o)=>(k(),b("div",pe,[e("div",ue,[(k(!0),b(P,null,N(u.value,(t,a)=>(k(),b("div",{key:a,class:"terminal-line"},C(t),1))),128)),(k(!0),b(P,null,N(w(m),t=>(k(),b("div",{key:t.id,class:"item"},[e("div",me,[e("span",{class:H({completed:t.completed}),style:{color:"green"}},C(t.item)+" "+C(t.dim1)+" "+C(t.dim2)+" "+C(t.dim3)+" "+C(t.dim4)+" "+C(t.dim5),3),e("span",{onClick:A(a=>w(d)(t.id),["stop"])},"âœ”",8,fe)])]))),128))])]))}},_e=I(he,[["__scopeId","data-v-66faea4b"]]),y=p=>(Q("data-v-708e2a43"),p=p(),W(),p),ge={class:"layout"},ye={class:"card glass"},Se=y(()=>e("i",{class:"pi pi-refresh"},null,-1)),ke=y(()=>e("h2",{class:"title"},"Roof System",-1)),be={class:"field"},xe=y(()=>e("label",{for:"area"},"Square Footage",-1)),Ce={class:"field"},we=y(()=>e("label",{for:"system"},"Roof System",-1)),$e={class:"flex flex-wrap mt-4 space-y-6 justify-center gap-8"},Ve={class:"flex items-center mt-4 space-y-6"},Re=y(()=>e("label",{for:"newroof",class:"ml-2",style:{color:"#122620"}},"New Roof ",-1)),Te={class:"flex items-center mt-4 space-y-6"},Ae=y(()=>e("label",{for:"reroof",class:"ml-2",style:{color:"#122620"}},"Re-Roof ",-1)),De={class:"footer"},Le=y(()=>e("br",null,null,-1)),Ie=y(()=>e("p",{class:"dz-title"},"For Images documents",-1)),Me=y(()=>e("p",{class:"dz-sub"},[O("Drag & drop files here"),e("br"),O("or click to upload")],-1)),Fe=2,Ge={__name:"RoofSystemForm",setup(p){var F,G;const i=ae(),m=ce(),d=L(),v=[{name:" "},{name:"Asphalt Shingle"},{name:"Low Slope"},{name:"Mechanical Fastened Tile"},{name:"Adhesive Set Tile"},{name:"Metal Panel"}],u=v.slice(1),f=r(""),l=r(null),o=r(!1),t=r(!1),a=r((G=(F=i.$state.permitapp[0])==null?void 0:F.formdt)==null?void 0:G.muni),_=J(a.value);X(()=>{console.log(i.$state),t.value=_.value===Fe});const{addRoof:R,roofArea:M}=de(),T=V({roofCheck:""});r("");async function S(){var n,z,B;const c=(z=(n=l.value)==null?void 0:n.name)==null?void 0:z.trim();if(!c)return;const s=f.value,x={"Asphalt Shingle":()=>d.addSystemShingle(c,s),"Low Slope":()=>d.addSystemBur(c,s),"Mechanical Fastened Tile":()=>d.addSystemMTile(c,s),"Adhesive Set Tile":()=>d.addSystemATile(c,s),"Metal Panel":()=>d.addSystemMetal(c,s)};(B=x[c])==null||B.call(x),console.log(o.value,x),T.roofCheck=o.value,m.addCheck(T),$()}function g(){R(o),$()}function $(){f.value="",l.value=null}function K(){d.$reset()}return(c,s)=>{const x=ee;return k(),b("main",ge,[e("aside",ye,[h(w(j),{class:"icon-btn",plain:"",text:"",onClick:K},{default:Y(()=>[Se]),_:1}),ke,e("form",{class:"grid-form",onSubmit:s[4]||(s[4]=A(()=>{},["prevent"]))},[e("div",be,[xe,h(w(le),{id:"area",modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=n=>f.value=n),placeholder:"e.g. 1200"},null,8,["modelValue"])]),e("div",Ce,[we,h(w(ne),{id:"system",modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=n=>l.value=n),options:t.value?w(u):v,optionLabel:"name",placeholder:"Select roof system",class:"w-full",onChange:S},null,8,["modelValue","options"])]),e("div",$e,[e("div",Ve,[h(x,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=n=>o.value=n),invalid:!o.value,inputId:"newroof",name:"checked",value:"newroof"},null,8,["modelValue","invalid"]),Re]),e("div",Te,[h(x,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=n=>o.value=n),invalid:!o.value,inputId:"reroof",name:"checked",value:"reroof"},null,8,["modelValue","invalid"]),Ae])])],32),e("footer",De,[h(w(j),{label:"Submit",severity:"contrast",raised:"",as:"router-link",to:"/dynamicstepper",onClick:g})]),Le,h(_e)]),e("section",{class:"card dropzone",onDragover:s[6]||(s[6]=A(n=>c.dragOver=!0,["prevent"])),onDragleave:s[7]||(s[7]=n=>c.dragOver=!1),onDrop:s[8]||(s[8]=A((...n)=>c.handleDrop&&c.handleDrop(...n),["prevent"]))},[Ie,Me,e("input",{type:"file",accept:"application/pdf",multiple:"",class:"file-input",onChange:s[5]||(s[5]=(...n)=>c.handleFiles&&c.handleFiles(...n))},null,32)],32)])}}},ze=I(Ge,[["__scopeId","data-v-708e2a43"]]),Be={id:"id",class:"grid grid-cols-3 gap-6"},Pe={class:"roof-app",style:{"margin-left":"250px","margin-top":"20px",border:"none","border-radius":"12px","box-shadow":"4px 4px 16px rgb(22, 183, 183)","padding-bottom":"10px",position:"center","max-height":"400px",width:"500px",top:"5vh"}},Ne={__name:"RoofSystemApp",setup(p){return E(()=>{Z.init({duration:4500,easing:"ease-in-out",once:!1})}),(i,m)=>(k(),b("div",Be,[e("div",Pe,[h(ze)])]))}},Oe=I(Ne,[["__scopeId","data-v-d0495c4e"]]),je={class:"grid grid-cols-2 gap-0"},Ee={"data-aos":"fade-up-right","data-aos-delay":"500",style:{"margin-top":"90px"}},it={__name:"RoofSystem",setup(p){return(i,m)=>(k(),b("div",je,[h(Oe),e("div",Ee,[h(U)])]))}};export{it as default};
