import{e as a,u as $,j as ee,f as S,A as oe,Y as le,ah as se,C as te,o as h,c as F,a as W,d as k,g as o,h as r,O as q,l as ae,t as ne,F as re,W as ie,q as ce,v as de,x as ue,T as me}from"./index-Bv5J4zq0.js";import{s as pe}from"./index-DL3HKZrB.js";import{s as fe}from"./index-D1ZD0fHR.js";import{s as ve}from"./index-CkuIhVEU.js";import{s as ge}from"./index-DJSvI-eB.js";import{s as be}from"./index-QQ_vMxn5.js";import{u as ye,a as he,b as O,_ as _e}from"./use-createProcessnumber-DCYTzsTo.js";import{u as xe}from"./accountsStore-4zZYQV7T.js";import{u as Ve}from"./permitapp-BFPhG2LU.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DbBDEmZW.js";import"./index-DF4rHrjo.js";import"./index-B-nI7Cp_.js";import"./index-BiQLLJVw.js";import"./index-sDyUVxut.js";import"./index-CIIanmua.js";import"./index-BC6CPJm0.js";import"./index-d7_ML1sd.js";import"./index-C4VPZ_QS.js";import"./useAxios-OAQaXJYc.js";import"./processStore-BfjrS8fY.js";const Pe={setup(){const t=a(!1),l=a(""),N=$(),s=a(!1),M=a(),{procData:G,procReceive:v}=ye(),{accountUsers:c,getUser:d,addUser:g}=xe(),b=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),_=a("me"),p=Ve(),e=a(""),x=a(""),n=ee({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),H=a(!0),U=a(""),I=a(""),A=a(""),C=a(""),D=a("");S(()=>{oe.init({duration:800,easing:"ease-in-out",once:!0})}),S(()=>{c.value[0].name===""||(s.value=!0,U.value=c.value[0].name,I.value=c.value[0].email,C.value=c.value[0].secondary_status,D.value=c.value[0].dba)});const E=le(()=>H.value===!0?b.value[0]:"");he();const{lastNum:Y,resNum:V}=O();a(null);const y=a(""),w=a(""),B=a(null),f=a(""),R=a(null);S(()=>{s.value=!0,A.value=c.value[0].bphone});const z=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},2e3),x.value=e.value,console.log(e.value,x.value);const u=a(n.address);console.log(u.value);const m=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${u.value}`;console.log(m),L(m),console.log(e.value),n.license=c.value[0].license,n.contractor=c.value[0].name,n.emails=c.value[0].email,n.muniProc=e.value,n.phNumber=c.value[0].bphone,console.log(V.value);let T=String(V.value);console.log(T);let j=T.substring(3,19);console.log(j);const P=ie(j);console.log(typeof P,P.value);let X=P.value+1,Z=String(X);n.processNumber=_.value.concat(Z),v(n)}catch(u){alert(u)}},L=async u=>{t.value=!0,R.value=null;try{const m=await fetch(u);console.log(u),B.value=await m.json(),f.value=B.value.MinimumPropertyInfos[0],console.log(f.value),n.muni=f.value.Municipality,console.log(f.value.Strap),n.folio=f.value.Strap,w.value=n.folio,y.value=w.value.substring(1,2),console.log(y.value)}catch(m){R.value=m.message}finally{t.value=!1}},J=async()=>{v(n)},K=()=>{N.push("/roofsystem")};function Q(u,m){u=n,m=E.value,console.log(u),u.length!==0&&(p.addSystem(u,m,y.value,e.value,x.value),console.log(p))}return{isDialog:s,fetchData:L,onSubmit:J,accountUsers:c,getUser:d,email:I,dba:D,invoke:se,phone:A,name:U,licenseStatus:C,muniProcess:e,addUser:g,navigateNext:K,addItemAndClear:Q,selectedApplication:E,type:b,resNum:V,...te(n),responseMessage:l,lastNum:Y,useLast:O,load:z,checkMB:y,checkV:w,content:M}}},i=t=>(de("data-v-ed91cc62"),t=t(),ue(),t),Se={class:"container md:w-1/3",style:{"margin-left":"650px"}},ke={class:"flex flex-row"},Ne={class:"flex mt-4 space-y-2 flex-col gap-2"},Me=i(()=>o("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Ue={class:"flex justify-center"},Ie={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Ae=i(()=>o("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ce={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},De={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Ee=i(()=>o("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),Be={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Re=i(()=>o("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Le={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Te=i(()=>o("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),je={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Fe=i(()=>o("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),We={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},qe=i(()=>o("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Oe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ge=i(()=>o("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),He={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ye=i(()=>o("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Je=i(()=>o("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),Ke={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Qe=i(()=>o("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),Xe={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},Ze=i(()=>o("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),$e={key:0},eo=i(()=>o("br",null,null,-1)),oo=i(()=>o("br",null,null,-1));function lo(t,l,N,s,M,G){const v=_e,c=be,d=ge,g=ve,b=fe,_=pe,p=me;return h(),F(re,null,[s.isDialog?(h(),W(v,{key:0})):k("",!0),o("div",Se,[o("form",null,[o("div",ke,[o("div",Ne,[Me,o("div",Ue,[r(c,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=e=>s.selectedApplication=e),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),o("div",Ie,[Ae,r(d,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=e=>s.licenseStatus=e),type:"text",placeholder:"status"},null,8,["modelValue"])]),o("div",Ce,[o("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...e)=>s.onSubmit&&s.onSubmit(...e))},[o("div",De,[Ee,q(r(d,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=e=>s.muniProcess=e),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[p,"Enter Municipality Process Number",void 0,{top:!0}]])]),o("div",Be,[Re,q(r(d,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=e=>t.address=e),placeholder:"address"},null,8,["modelValue"]),[[p,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),r(g,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),o("div",Le,[Te,r(d,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=e=>s.dba=e),type:"text",placeholder:"dba"},null,8,["modelValue"])]),o("div",je,[Fe,r(d,{id:"name",modelValue:s.name,"onUpdate:modelValue":l[5]||(l[5]=e=>s.name=e),type:"text",placeholder:"name"},null,8,["modelValue"])]),o("div",We,[qe,r(b,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>s.phone=e),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),o("div",Oe,[Ge,r(d,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=e=>s.email=e),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(h(),W(_,{key:0,severity:"error"},{default:ae(()=>[ce("Email is required")]),_:1})):k("",!0)]),o("div",He,[Ye,r(d,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=e=>t.muni=e),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),o("div",ze,[Je,r(d,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=e=>t.folio=e),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),o("div",Ke,[Qe,r(d,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=e=>t.permit=e),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),o("div",Xe,[Ze,r(d,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=e=>t.processNumber=e),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(h(),F("p",$e,ne(s.responseMessage),1)):k("",!0),eo,r(g,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=e=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),oo])])])])])],64)}const ko=we(Pe,[["render",lo],["__scopeId","data-v-ed91cc62"]]);export{ko as default};
