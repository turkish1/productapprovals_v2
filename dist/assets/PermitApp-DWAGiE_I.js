import{T as J}from"./index-B6Tb4iuD.js";import{s as K}from"./index-qG-zq0yw.js";import{s as Q}from"./index-CPD0g_rF.js";import{s as X}from"./index-D1O2t5nZ.js";import{s as Y}from"./index-B8E7U33m.js";import{s as Z}from"./index-C_F7wMhT.js";import{u as $,a as ee,b as C,_ as oe}from"./use-createProcessnumber-EvjQU6js.js";import{u as le}from"./accountsStore-CLfgB1to.js";import{u as se}from"./permitapp-C0_u5Iyu.js";import{r as a,u as te,a as ae,o as D,A as ne,a8 as re,a9 as ie,as as de,n as ce,b as y,c as R,k as B,z as S,e,d as n,f as me,h as ue,t as pe,F as fe,a7 as be,am as ve,p as ye,i as ge}from"./index-B33AcKP-.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BXlyRocq.js";import"./index-DLDenhYK.js";import"./index-C7KQm4bG.js";import"./index-CKx-J7aY.js";import"./index-DVdAoSMc.js";import"./index-DGttZ4B0.js";import"./index-CWYYMvr1.js";import"./index-CR6cFGhm.js";import"./useAxios-DK8Zj9Ws.js";import"./processStore-WSG9pyeR.js";a(1);const he={setup(){const t=a(!1),o=a(""),g=te(),l=a(!1),N=a(),{procData:E,procReceive:u}=$(),{accountUsers:i,getUser:d,addUser:p}=le();console.log(i._value[0]);const f=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),_=a("me"),b=se(),s=a(""),c=ae({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",date:new Date}),L=a(!0),k=a(""),A=a(""),h=a(""),U=a(""),M=a("");D(()=>{ne.init({duration:800,easing:"ease-in-out",once:!0})}),re(()=>{if(i._value[0].name==="")return g.push("/");l.value=!0,k.value=i._value[0].name,A.value=i._value[0].email,h.value=i._value[0].phone,U.value=i._value[0].secondary_status,M.value=i._value[0].dba});const I=ie(()=>L.value===!0?f.value[0]:"");ee();const{lastNum:x,resNum:T}=C();h.value=i._value[0].phone,a(null);const v=a(""),V=a("");D(()=>{l.value=!0});const F=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},3e3);const m=a(c.address),W=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,P=await(await fetch(W)).json();console.log(P),c.muni=P.MinimumPropertyInfos[0].Municipality,c.license=i._value[0].license,c.contractor=i._value[0].name,c.folio=P.MinimumPropertyInfos[0].Strap,console.log(x.value);let q=String(x.value).substring(2,13),z=be(q).value+1,H=String(z);c.processNumber=_.value.concat(H),console.log(c.processNumber),V.value=c.folio,v.value=V.value.substring(1,2),console.log(v.value),u(c)}catch(m){alert(m)}},O=async()=>{u(c)},j=()=>{g.push("/roofsystem")};function G(m,w){m=c,w=I.value,m.length!==0&&(b.addSystem(m,w,v.value,s.value),console.log(b))}return{isDialog:l,onSubmit:O,accountUsers:i,getUser:d,email:A,dba:M,invoke:de,phone:h,contractor:k,licenseStatus:U,muniProcess:s,addUser:p,navigateNext:j,addItemAndClear:G,selectedApplication:I,type:f,resNum:T,...ce(c),responseMessage:o,lastNum:x,useLast:C,load:F,checkMB:v,checkV:V,content:N}}},r=t=>(ye("data-v-f4f97f2d"),t=t(),ge(),t),xe={class:"container md:w-1/3",style:{"margin-left":"530px"}},Ve={class:"flex flex-row"},we={class:"flex mt-4 space-y-2 flex-col gap-2"},Pe=r(()=>e("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),Se={class:"flex justify-center"},Ne={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},ke=r(()=>e("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Ae={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Ue={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Me=r(()=>e("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Ie={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Ce=r(()=>e("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),De={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},Re=r(()=>e("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),Be={class:"flex flex-col w-full md:w-64 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Ee=r(()=>e("label",{for:"contractor",style:{color:"#122620"}},"Contractor Name",-1)),Le={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Te=r(()=>e("label",{for:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),Fe={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Oe=r(()=>e("label",{for:"Email",style:{color:"#122620"}},"Email",-1)),je={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ge=r(()=>e("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),We={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},qe=r(()=>e("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},He=r(()=>e("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),Je={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},Ke=r(()=>e("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),Qe={key:0},Xe=r(()=>e("br",null,null,-1)),Ye=r(()=>e("br",null,null,-1));function Ze(t,o,g,l,N,E){const u=oe,i=Z,d=Y,p=X,f=Q,_=K,b=J;return y(),R(fe,null,[l.isDialog?(y(),B(u,{key:0})):S("",!0),e("div",xe,[e("form",null,[e("div",Ve,[e("div",we,[Pe,e("div",Se,[n(i,{modelValue:l.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=s=>l.selectedApplication=s),options:l.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),e("div",Ne,[ke,n(d,{id:"license",modelValue:l.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=s=>l.licenseStatus=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Ae,[e("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:o[13]||(o[13]=(...s)=>l.onSubmit&&l.onSubmit(...s))},[e("div",Ue,[Me,me(n(d,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=s=>t.address=s),placeholder:"address"},null,8,["modelValue"]),[[b,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),n(p,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:l.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),e("div",Ie,[Ce,n(d,{id:"processMuni",modelValue:l.muniProcess,"onUpdate:modelValue":o[3]||(o[3]=s=>l.muniProcess=s),type:"text",placeholder:"municipal process number"},null,8,["modelValue"])]),e("div",De,[Re,n(d,{id:"dba",modelValue:l.dba,"onUpdate:modelValue":o[4]||(o[4]=s=>l.dba=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Be,[Ee,n(d,{id:"contractor",modelValue:l.contractor,"onUpdate:modelValue":o[5]||(o[5]=s=>l.contractor=s),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",Le,[Te,n(f,{modelValue:l.phone,"onUpdate:modelValue":o[6]||(o[6]=s=>l.phone=s),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:l.phone===""},null,8,["modelValue","invalid"])]),e("div",Fe,[Oe,n(d,{modelValue:l.email,"onUpdate:modelValue":o[7]||(o[7]=s=>l.email=s),invalid:l.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(y(),B(_,{key:0,severity:"error"},{default:ue(()=>[ve("Email is required")]),_:1})):S("",!0)]),e("div",je,[Ge,n(d,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[8]||(o[8]=s=>t.muni=s),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",We,[qe,n(d,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[9]||(o[9]=s=>t.folio=s),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",ze,[He,n(d,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[10]||(o[10]=s=>t.permit=s),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",Je,[Ke,n(d,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[11]||(o[11]=s=>t.processNumber=s),type:"text",placeholder:"process number"},null,8,["modelValue"])]),l.responseMessage?(y(),R("p",Qe,pe(l.responseMessage),1)):S("",!0),Xe,n(p,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:o[12]||(o[12]=s=>l.addItemAndClear(t.formData,l.selectedApplication))})],32),Ye])])])])])],64)}const Po=_e(he,[["render",Ze],["__scopeId","data-v-f4f97f2d"]]);export{Po as default};
