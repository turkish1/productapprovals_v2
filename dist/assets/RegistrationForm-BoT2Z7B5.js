import{e as a,f as w,D as O,E as F,G as C,h as P,H as $,I as H,J as j,o as k,c as N,j as t,K as q,L as T,k as d,M as K,t as Y,d as J,q as Q,v as W,N as X,T as Z}from"./index-JMpC5vnI.js";import{_ as ee}from"./FileSaver-BrsC0Xg8.js";import{s as te}from"./index-D7cdsMnX.js";import{s as se}from"./index-CsbYHtvJ.js";import{s as oe}from"./index-GFfkhKxs.js";import{s as ae}from"./index-BPxoyx4x.js";import{u as le}from"./accountsStore-xb8oO36w.js";import{u as G}from"./useAxios-Dv3B_cJm.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./permitapp-Bo8_7I9r.js";import"./index-m3qcElWz.js";import"./index-DkTynFrv.js";import"./index-CJqhvQBi.js";import"./index-DwHXNODV.js";import"./index-B0QkfyXg.js";function ie(){const l=a([]),p=a("");let _=a([]);const{accountUsers:m,getUser:e,addUser:b}=le();let x=w({license:"",dba:"",name:"",username:"",password:"",secondary_status:"",expiration_date:"",address:"",projects:[],password:"",cphone:"",bphone:"",email:"",date:new Date});const I=a("");let y="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/accounts";const{execute:u,data:r}=G(y,{method:"POST"},{immediate:!1});let f=w({});function V(i){console.log(i),f=i,u({data:i}),p.value="Form submitted successfully!",b(f),console.log(f,"System added")}return{takp:V,noaNum:l,formData:x,error:I,accountUsers:m,getUser:e,addUser:b,accountUsers:m,results:_,responseMessage:p,...O(f)}}const de=F("cccinput",{state:()=>({cccinput:[],id:0}),actions:{addData(l){this.cccinput.push({cccAccounts:l,completed:!1})}},getters:{cccData:l=>l.cccAccounts}});function ce(){const l=a(""),p=a(""),_=a(""),m=a(""),e=a("");let b="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/contractors";const{execute:x,then:I,data:y}=G(b,{method:"GET"},{immediate:!1}),u=w({});let r=w({license:"",dba:"",name:"",city:"",license_status:"",expiration_date:"",address:"",zipcode:""});x().then(h=>(u.value=y.value,_));function f(h){console.log(h),m.value=h,S(m.value)}const V=a(""),i=a([]);function S(h){console.log(h),V.value=h;for(let g=0;g<u.value.length-1;g++)V.value===u.value[g].alt_license&&i.value.push(u.value[g]);console.log(i.value),r.license=i.value[0].alt_license,r.dba=i.value[0].dba,r.name=i.value[0].name,r.license_status=i.value[0].secondary_status,r.city=i.value[0].city,r.expiration_date=i.value[0].expiration_date,r.effective_date=i.value[0].effective_date,r.address=i.value[0].address1,r.zipcode=i.value[0].zip}return de(),{error:p,retrieveAccount:f,responseMessage:l,results:_,fndContract:S,contractors:u,licenseNumbers:e,cccAccounts:r}}const re=F("auth",{state:()=>({user:a({}),message:a("")}),getters:{userFirstName:l=>{if(l.user.name)return l.user.name.charAt(0).toUpperCase()+l.user.name.slice(1)}},actions:{async register(l,p,_){const m={createdName:l,createdUserName:p,createdPassword:_};myFetch("register","POST",m).then(e=>{e.response.value.message?this.message=e.response.value.message:(this.user=e.response.value,C.push("/"))})},async login(l,p){const _={username:l,password:p};myFetch("login","POST",_).then(m=>{this.user=m.response.value.user,C.push("/")})},logout(){this.$reset(),C.push("/")}},greeting:{enabled:!1}}),n=l=>(Q("data-v-861ee885"),l=l(),W(),l),ue={class:"hero"},me={class:"card"},pe=n(()=>t("h1",{class:"title"},"Registration",-1)),_e=n(()=>t("div",{class:"h-[10rem]"},null,-1)),ve=n(()=>t("div",{class:"font-semibold text-xl"},"Contractor Information",-1)),fe={class:"field"},he=n(()=>t("label",{for:"lic1",style:{color:"#122620"}},"State of Florida License No.",-1)),be={class:"field"},ye=n(()=>t("label",{for:"trade",style:{color:"#122620"}},"Trade",-1)),Ve={class:"field"},ge=n(()=>t("label",{for:"dba",style:{color:"#122620"}},"DBA",-1)),xe={class:"field"},Se=n(()=>t("label",{for:"addr",style:{color:"#122620"}},"Business Address",-1)),we={class:"field span-2"},Ie=n(()=>t("label",{for:"name",style:{color:"#122620"}},"Qualifier Name",-1)),Ue={class:"field"},Ce=n(()=>t("label",{for:"secondary_status",style:{color:"#122620"}},"License Status",-1)),De={class:"field"},Ae=n(()=>t("label",{for:"license",style:{color:"#122620"}},"License Expiration Date",-1)),Me={class:"field"},ke=n(()=>t("label",{for:"license",style:{color:"#122620"}},"Insurance Policy Number",-1)),Ne={class:"field"},Te=n(()=>t("label",{for:"license",style:{color:"#122620"}},"Insurance Carrier",-1)),Fe={class:"field"},Ge=n(()=>t("label",{for:"state",style:{color:"#122620"}},"City",-1)),Re={class:"field"},Be=n(()=>t("label",{for:"state",style:{color:"#122620"}},"State",-1)),Ee={class:"field"},Le=n(()=>t("label",{for:"bphone",style:{color:"#122620"}},"Business Phone",-1)),ze={class:"field"},Oe=n(()=>t("label",{for:"cphone",style:{color:"#122620"}},"Cell Phone Number",-1)),Pe={class:"field"},$e=n(()=>t("label",{for:"email1",style:{color:"#122620"}},"Gmail account",-1)),He={class:"span-2 submit-row"},je={class:"full:w-3/4 flex flex-col gap-2",style:{"margin-top":"120px"}},qe=n(()=>t("label",{for:"addr",style:{color:"#122620"}},"Upload Insurance Information",-1)),Ke={key:0},Ye={__name:"RegistrationForm",setup(l){const p=P();$();const _=re();H(_),a(!0),a(!1);const m=a(!1);a(!1);const e=w({license:"",dba:"",name:"",username:"",password:"",license_status:"",expiration_date:"",address:"",city:"",projects:[],cphone:"",bphone:"",email:"",insurance:"",carrier:"",date:new Date}),{cccAccounts:b,retrieveAccount:x}=ce(),{takp:I}=ie(),y=a([]),u=a("");a(null);const r=a(null),f=a(null);a(null);const V=a([{name:"Florida",code:"Florida"},{name:"Georgia",code:"Georgia"}]);a([{name:"Miami",code:"Miami"},{name:"Homestead",code:"Homestead"},{name:"Miami Beach",code:"Miami Beach"},{name:"Miami Gardens",code:"Miami Gardens"}]);const i=a([{name:"Roofing Contractor",code:"Roofing"},{name:"General Contractor",code:"General"}]),S=j(()=>e.insurance.trim()!==""&&e.carrier.trim()!==""&&e.license_status.trim()!==""&&e.license_status.trim()!=="I"&&e.email.trim()!=="");function h(){S.value&&(I(e),Object.assign(e,{license:"",name:"",license_status:"",dba:"",address:"",cphone:"",bphone:"",email:"",insurance:"",carrier:"",zipcode:""}),U())}function g(){x(e.license),y.value=b,console.log(e);const c=y.value;e.dba=c.dba,e.name=c.name,e.expiration_date=c.expiration_date,e.address=c.address,e.city=c.city,e.zipcode=c.zipcode,e.license_status=c.license_status,u.value=c.license_status,R()}function R(){u.value===""?e.license_status="":u.value==="A"?(e.license_status="Active",B()):u.value==="I"&&(e.license_status="Inactive",alert("Your license is Inactive!"),U())}function B(){const c=new Date(e.expiration_date),s=new Date;c.setHours(0,0,0,0),s.setHours(0,0,0,0),c<=s&&(m.value=!0,alert("Your license is Expired!"),U())}function U(){p.push("/")}return(c,s)=>{const v=ae,D=oe,A=se,E=te,L=X,z=ee,M=Z;return k(),N("section",ue,[t("div",me,[pe,t("form",{class:"grid-form",onSubmit:q(h,["prevent"])},[_e,ve,t("div",fe,[he,T(d(v,{type:"text",modelValue:e.license,"onUpdate:modelValue":s[0]||(s[0]=o=>e.license=o),placeholder:"CRC000000",onChange:c.checkLicense,invalid:e.license==="",onKeydown:K(g,["tab"])},null,8,["modelValue","onChange","invalid"]),[[M,"Enter your license and hit tab"]])]),t("div",be,[ye,d(D,{id:"trad",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=o=>r.value=o),options:i.value,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),t("div",Ve,[ge,d(v,{id:"dba",type:"text",modelValue:e.dba,"onUpdate:modelValue":s[2]||(s[2]=o=>e.dba=o),placeholder:" ",invalid:e.dba===""},null,8,["modelValue","invalid"])]),t("div",xe,[Se,d(v,{id:"addr",type:"text",modelValue:e.address,"onUpdate:modelValue":s[3]||(s[3]=o=>e.address=o),placeholder:"address"},null,8,["modelValue"])]),t("div",we,[Ie,d(v,{id:"name",type:"text",modelValue:e.name,"onUpdate:modelValue":s[4]||(s[4]=o=>e.name=o),placeholder:" ",invalid:e.name===""},null,8,["modelValue","invalid"])]),t("div",Ue,[Ce,d(v,{id:"secondary_status",type:"text",modelValue:e.license_status,"onUpdate:modelValue":s[5]||(s[5]=o=>e.license_status=o),placeholder:" ",invalid:e.license_status===""},null,8,["modelValue","invalid"])]),t("div",De,[Ae,d(v,{id:"license",type:"text",modelValue:e.expiration_date,"onUpdate:modelValue":s[6]||(s[6]=o=>e.expiration_date=o),placeholder:" ",invalid:e.expiration_date===""},null,8,["modelValue","invalid"])]),t("div",Me,[ke,d(v,{id:"license",type:"text",modelValue:e.insurance,"onUpdate:modelValue":s[7]||(s[7]=o=>e.insurance=o),placeholder:" ",invalid:e.insurance===""},null,8,["modelValue","invalid"])]),t("div",Ne,[Te,d(v,{id:"license",type:"text",modelValue:e.carrier,"onUpdate:modelValue":s[8]||(s[8]=o=>e.carrier=o),placeholder:" ",invalid:e.carrier===""},null,8,["modelValue","invalid"])]),t("div",Fe,[Ge,d(v,{id:"city",type:"text",modelValue:e.city,"onUpdate:modelValue":s[9]||(s[9]=o=>e.city=o),placeholder:"city"},null,8,["modelValue"])]),t("div",Re,[Be,d(D,{id:"state",modelValue:f.value,"onUpdate:modelValue":s[10]||(s[10]=o=>f.value=o),options:V.value,optionLabel:"name",placeholder:"Select One",class:"w-full"},null,8,["modelValue","options"])]),t("div",Ee,[Le,d(A,{modelValue:e.bphone,"onUpdate:modelValue":s[11]||(s[11]=o=>e.bphone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.bphone===""},null,8,["modelValue","invalid"])]),t("div",ze,[Oe,d(A,{modelValue:e.cphone,"onUpdate:modelValue":s[12]||(s[12]=o=>e.cphone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:e.cphone===""},null,8,["modelValue","invalid"])]),t("div",Pe,[$e,T(d(v,{id:"email1",modelValue:e.email,"onUpdate:modelValue":s[13]||(s[13]=o=>e.email=o),type:"text",placeholder:"email",invalid:e.email===""},null,8,["modelValue","invalid"]),[[M,"Enter your gmail account in order to submit"]])]),t("div",He,[d(E,{label:"Submit",severity:"contrast",raised:"",onClick:h,disabled:!S.value},null,8,["disabled"])]),t("div",je,[qe,d(L),d(z,{class:"w-3/4"})])],32),c.responseMessage?(k(),N("p",Ke,Y(c.responseMessage),1)):J("",!0)])])}}},rt=ne(Ye,[["__scopeId","data-v-861ee885"]]);export{rt as default};
