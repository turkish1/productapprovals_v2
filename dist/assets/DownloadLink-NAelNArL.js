import{s as A}from"./index-BRLRYhi8.js";import{e,N as G,f as b,ao as I,ab as N,ap as x,at as Y,o as B,c as V,R as L,aq as O,h as P,p as j,g as n,t as T,d as H,au as J,ar as K}from"./index-fT6uM7hJ.js";import{u as Q,a as W}from"./use-downloadpdf-swC4qYrx.js";import{c as X,u as Z}from"./pdfsignStore-BBXGQEdA.js";import{u as oo}from"./permitapp-DOr21xHV.js";import"./index-BPfmzsMd.js";import"./useAxios-CgEwUL7U.js";const eo={class:"card"},so={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},to={class:"payment-widget"},ao=n("h2",{style:{color:"black"}},"Download Link",-1),no={key:0,class:"confirmation"},wo={__name:"DownloadLink",setup(lo){var _,h;const U=oo(),u=X(),i=e(0),C=e(((h=(_=U.$state.permitapp[0])==null?void 0:_.formdt)==null?void 0:h.muniProc)||""),E=e(!1),R=e(!1),l=e(!1),$=e(!1),z=e(!1),d=e(!1);e(null);const{getNumber:F,result:ro,secondFetch:m}=Q(),r=W();G(r.$state);const{resp:p}=Z();b(()=>{var o,s;i.value=1,u.addCount(i),console.log(u),((s=(o=p.value)==null?void 0:o.status)==null?void 0:s.status)===200&&($.value=!0,console.log(p.value.status.status))});const f=e("");b(async()=>{const o=new URLSearchParams(location.search).get("session_id");if(f.value=o,o)console.log(f.value);else{console.log(o);return}});const t=I("my-storage",{processNumber:C.value}),M=N(()=>{F(),l.value=!0});x(M,()=>{});function v(){m(t.value),g()}const w=N(()=>{setTimeout(()=>{z.value=!0},1e3),m(t.value),console.log(t.value),g()}),g=async()=>{var y,k,S,D;const o=(k=(y=r.downloadinput[0])==null?void 0:y.downloadData)==null?void 0:k.download_url;if(console.log(o),!o||o.length===0)return;console.log(o,t.value);const s=(D=(S=r.downloadinput[0])==null?void 0:S.downloadData)==null?void 0:D.download_url;if(!s)return;E.value=!0;const c=s,q="processnumber.zip",a=document.createElement("a");a.href=c,a.download=q,a.click(),a.remove(),l.value=!0,d.value=!0};return x(w,v,()=>{}),Y(async()=>{await J(w).toBe(!0)}),(o,s)=>{const c=A;return B(),V("div",eo,[L(P(j(K),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[O,R.value]]),n("div",so,[n("div",to,[ao,L(P(c,{icon:"pi pi-arrow-circle-down",severity:"info","aria-label":"User",onClick:v},null,512),[[O,l.value]]),d.value?(B(),V("div",no,[n("p",null,"Thank you, "+T(o.Name)+"! Your payment of $"+T(107)+" was processed.",1)])):H("",!0)])])])}}};export{wo as default};
