import{e as a,u as le,j as se,ab as te,ap as ae,at as W,O as ne,L as re,o as _,c as q,a as G,d as M,g as e,h as r,R as H,l as ie,t as de,F as ce,au as ue,aa as me,q as pe,W as fe,X as ve,_ as be}from"./index-CwblT9dz.js";import{s as ye}from"./index-DUkQZSiw.js";import{s as ge}from"./index-BSi_bfSh.js";import{s as he}from"./index-Blhupvfz.js";import{s as _e}from"./index-DGllmmcI.js";import{s as xe}from"./index-CPW9GLwu.js";import{u as Ve,a as we,b as X,_ as Pe}from"./use-createProcessnumber-Dv1MbX2k.js";import{u as Se}from"./accountsStore-CiPTwm6e.js";import{u as ke}from"./permitapp-C0-XncpE.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-9BGaeT_k.js";import"./index-IuVg38UT.js";import"./index-DpO-8MpI.js";import"./index-BEUX_cvU.js";import"./index-CGmhIiLv.js";import"./index-D5uCsewu.js";import"./index-BKGVFunD.js";import"./useAxios-DAHSS8zp.js";import"./processStore-D9AE3Ubi.js";const Ue={setup(){const t=a(!1),l=a(""),I=le(),s=a(!1),A=a(),{procData:z,procReceive:v}=Ve(),{accountUsers:m,getUser:d,addUser:b}=Se(),y=a([{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),x=a("me"),g=ke(),o=a(""),C=a(""),n=se({address:"",muni:"",license:"",folio:"",contractor:"",permit:"",processNumber:"",phNumber:"",emails:"",muniProc:"",date:new Date}),J=a(!0),D=a(""),B=a(""),V=a(""),E=a(""),L=a(""),p=a([]);te(()=>{s.value=!0,w(),localStorage.clear()});async function w(){var c,u,f,N,h,U;p.value=await m.value[0],console.log((c=p.value)==null?void 0:c.bphone),V.value=(u=p.value)==null?void 0:u.bphone,D.value=(f=p.value)==null?void 0:f.name,B.value=(N=p.value)==null?void 0:N.email,E.value=(h=p.value)==null?void 0:h.secondary_status,L.value=(U=p.value)==null?void 0:U.dba}ae(w,()=>{}),W(async()=>{await ue(w).toBe(!0)});const R=ne(()=>J.value===!0?y.value[0]:"");we();const{lastNum:K,resNum:T}=X(),P=a(""),S=a(""),j=a(null),k=a(""),F=a(null);a("");const Q=async()=>{try{t.value=!0,setTimeout(()=>{t.value=!1},1e3),C.value=o.value;const f=`https://6x2kydgvuahfitwvxkkfbybv6u0kbxgl.lambda-url.us-east-1.on.aws/?address=${a(n.address).value}`;O(f),n.license=m.value[0].license,n.contractor=m.value[0].name,n.emails=m.value[0].email,n.muniProc=o.value,n.phNumber=m.value[0].bphone;let h=String(T.value).substring(3,19),ee=me(h).value+1,oe=String(ee);n.processNumber=x.value.concat(oe),v(n)}catch(c){alert(c)}},O=async c=>{var u;t.value=!0,F.value=null;try{const f=await fetch(c);j.value=await f.json(),k.value=j.value.MinimumPropertyInfos[0],n.muni=k.value.Municipality,n.folio=k.value.Strap,S.value=n.folio,P.value=S.value.substring(1,2),V.value=(u=p.value)==null?void 0:u.bphone}catch(f){F.value=f.message}finally{t.value=!1}},Y=async()=>{v(n)},Z=()=>{I.push("/roofsystem")};function $(c,u){c=n,u=R.value,console.log(c),c.length!==0&&g.addSystem(c,u,P.value,o.value,C.value)}return{isDialog:s,fetchData:O,onSubmit:Y,accountUsers:m,getUser:d,email:B,dba:L,invoke:W,phone:V,name:D,licenseStatus:E,muniProcess:o,addUser:b,navigateNext:Z,addItemAndClear:$,selectedApplication:R,type:y,resNum:T,localStorage,...re(n),responseMessage:l,lastNum:K,useLast:X,load:Q,checkMB:P,checkV:S,content:A}}},i=t=>(fe("data-v-5940de96"),t=t(),ve(),t),Me={class:"container md:w-1/3",style:{"margin-left":"650px"}},Ie={class:"flex flex-row"},Ae={class:"flex mt-4 space-y-2 flex-col gap-2"},Ce=i(()=>e("div",{class:"font-semibold text-xl",style:{color:"#122620","margin-left":"230px"}},"Permit Application",-1)),De={class:"flex justify-center"},Be={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3",style:{"max-width":"200px","margin-left":"30px"}},Ee=i(()=>e("label",{for:"license",style:{color:"#122620"}},"License Status",-1)),Le={class:"flex mt-3 space-y-2 flex-col gap-2",style:{"margin-left":"30px"}},Re={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-4"},Te=i(()=>e("label",{for:"processMuni",style:{color:"#122620"}},"Municipality Process Number",-1)),je={class:"flex flex-col mt-3 w-full w-64 space-y-2 grow basis-0 gap-4"},Fe=i(()=>e("label",{for:"addr",style:{color:"#122620"}},"Property Address",-1)),Oe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4"},We=i(()=>e("label",{for:"dba",style:{color:"#122620"}},"DBA ",-1)),qe={class:"flex flex-col w-full md:w-72 mt-3 space-y-2 grow basis-0 gap-4",style:{"margin-left":"55px"}},Ge=i(()=>e("label",{for:"name",style:{color:"#122620"}},"Contractor Name",-1)),He={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Xe=i(()=>e("label",{id:"phone",style:{color:"#122620"}},"Cell Phone Number",-1)),ze={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Je=i(()=>e("label",{id:"Email",style:{color:"#122620"}},"Email",-1)),Ke={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Qe=i(()=>e("label",{for:"muni",style:{color:"#122620"}},"Municipality",-1)),Ye={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},Ze=i(()=>e("label",{for:"folio",style:{color:"#122620"}},"Folio",-1)),$e={class:"flex flex-col mt-3 space-y-2 grow basis-0 gap-3"},eo=i(()=>e("label",{for:"permit",style:{color:"#122620"}},"Master Permit",-1)),oo={class:"flex flex-col font-semibold mt-3 space-y-2 grow basis-0 gap-3"},lo=i(()=>e("label",{for:"processnum",style:{color:"#122620"}},"mEProcess Number",-1)),so={key:0},to=i(()=>e("br",null,null,-1)),ao=i(()=>e("br",null,null,-1));function no(t,l,I,s,A,z){const v=Pe,m=xe,d=_e,b=he,y=ge,x=ye,g=be;return _(),q(ce,null,[s.isDialog?(_(),G(v,{key:0})):M("",!0),e("div",Me,[e("form",null,[e("div",Ie,[e("div",Ae,[Ce,e("div",De,[r(m,{modelValue:s.selectedApplication,"onUpdate:modelValue":l[0]||(l[0]=o=>s.selectedApplication=o),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56",style:{"margin-top":"30px"}},null,8,["modelValue","options"])]),e("div",Be,[Ee,r(d,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":l[1]||(l[1]=o=>s.licenseStatus=o),type:"text",placeholder:"status"},null,8,["modelValue"])]),e("div",Le,[e("form",{class:"md:w-3/4 grid grid-cols-2 gap-6",onSubmit:l[13]||(l[13]=(...o)=>s.onSubmit&&s.onSubmit(...o))},[e("div",Re,[Te,H(r(d,{id:"processMuni",modelValue:s.muniProcess,"onUpdate:modelValue":l[2]||(l[2]=o=>s.muniProcess=o),type:"text",placeholder:"municipal process number",onChange:s.load},null,8,["modelValue","onChange"]),[[g,"Enter Municipality Process Number",void 0,{top:!0}]])]),e("div",je,[Fe,H(r(d,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":l[3]||(l[3]=o=>t.address=o),placeholder:"address"},null,8,["modelValue"]),[[g,"Make sure that either street or avenue is spelled out, direction could be shorten (sw)",void 0,{top:!0}]]),r(b,{id:"search",type:"button",label:"Search",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"])]),e("div",Oe,[We,r(d,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":l[4]||(l[4]=o=>s.dba=o),type:"text",placeholder:"dba"},null,8,["modelValue"])]),e("div",qe,[Ge,r(d,{id:"name",modelValue:s.name,"onUpdate:modelValue":l[5]||(l[5]=o=>s.name=o),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",He,[Xe,r(y,{modelValue:s.phone,"onUpdate:modelValue":l[6]||(l[6]=o=>s.phone=o),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),e("div",ze,[Je,r(d,{modelValue:s.email,"onUpdate:modelValue":l[7]||(l[7]=o=>s.email=o),invalid:s.email===null,error:t.emailError},null,8,["modelValue","invalid","error"]),t.invalid?(_(),G(x,{key:0,severity:"error"},{default:ie(()=>[pe("Email is required")]),_:1})):M("",!0)]),e("div",Ke,[Qe,r(d,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":l[8]||(l[8]=o=>t.muni=o),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",Ye,[Ze,r(d,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":l[9]||(l[9]=o=>t.folio=o),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",$e,[eo,r(d,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":l[10]||(l[10]=o=>t.permit=o),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",oo,[lo,r(d,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":l[11]||(l[11]=o=>t.processNumber=o),type:"text",placeholder:"process number"},null,8,["modelValue"])]),s.responseMessage?(_(),q("p",so,de(s.responseMessage),1)):M("",!0),to,r(b,{id:"submit",type:"submit",label:"Submit",class:"w-2/3",style:{"background-color":"#a4b5b9"},raised:"",as:"router-link",to:"/roofsystem",onClick:l[12]||(l[12]=o=>s.addItemAndClear(t.formData,s.selectedApplication))})],32),ao])])])])])],64)}const No=Ne(Ue,[["render",no],["__scopeId","data-v-5940de96"]]);export{No as default};
