import{s as z,a as S}from"./index-B-f1Tw53.js";import{r as c,j as $,k as F,o as i,c as d,e as a,F as L,l as U,z as u,d as p,t as m}from"./index-BGiu3NXE.js";const C={class:"flex items-center justify-center flex-col"},D=a("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"},null,-1),j={class:"flex flex-wrap gap-4"},B=["alt","src"],E={class:"font-semibold text-ellipsis max-w-60 whitespace-nowrap overflow-hidden"},P={__name:"FileSaver",setup(M){const n=c([]),v=$();F();const f=c(0),w=c(0),h=e=>{e.dataTransfer.dropEffect="copy"},g=e=>{const r=v.config.locale.fileSizeTypes;if(e===0)return`0 ${r[0]}`;const s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(3))} ${r[s]}`},y=async e=>{n.value=[...e.dataTransfer.files];for(const o of n.value)await b(o)},_=e=>{n.value.splice(e,1)},k=e=>{w.value=f.value/1,e()},b=async e=>{if(window.showSaveFilePicker)try{const t=await(await window.showSaveFilePicker({suggestedName:e.name,types:[{description:e.type,accept:{[e.type]:[`.${e.name.split(".").pop()}`]}}]})).createWritable();await t.write(e),await t.close(),console.log(`${e.name} saved successfully!`)}catch(o){console.error("Error saving file:",o)}else{const o=URL.createObjectURL(e),t=document.createElement("a");t.href=o,t.download=e.name,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(o),console.log(`${e.name} downloaded!`)}};return(e,o)=>{const t=z,r=S;return i(),d("div",{class:"dropzone",onDragover:u(h,["prevent"]),onDrop:u(y,["prevent"])},[a("div",C,[D,a("p",{class:"mt-6 mb-0",onUpload:o[0]||(o[0]=s=>e.onTemplatedUpload(s))},"Drag and drop files to here to upload.",32)]),a("div",j,[(i(!0),d(L,null,U(n.value,(s,l)=>(i(),d("div",{key:l+s.type+s.size,class:"p-8 rounded-border flex flex-col border border-surface items-center gap-4"},[a("div",null,[p(t,{onClick:o[1]||(o[1]=x=>k()),icon:"pi pi-cloud-upload",rounded:"",outlined:"",severity:"success",disabled:!n.value||n.value.length===0},null,8,["disabled"]),a("img",{role:"presentation",alt:s.name,src:s.objectURL,width:"100",height:"50"},null,8,B)]),a("span",E,m(s.name),1),a("div",null,m(g(s.size)),1),p(r,{value:"Completed",class:"mt-4",severity:"success"}),p(t,{icon:"pi pi-times",onClick:x=>_(l),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])],32)}}};export{P as _};
