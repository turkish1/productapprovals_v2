import{e as s,ab as v,ao as B,v as T,o as F,a as Y,l as D,q as R,p as g,j as x,M as O,N as V,f as A,ap as P,aq as Q,c as Z,R as $,ar as M,h as k,g as _,as as G,at as U}from"./index-G5mPgPjO.js";import{u as N,a as C,b as j}from"./pdfsignStore-CA5U98Zk.js";import{u as E}from"./permitapp-CjO1n72g.js";import{u as q}from"./useAxios-vk8MrifI.js";import{c as H}from"./countStore-CSpaxSYL.js";const I={__name:"BuyButton",setup(n){var c,i;const u=E(),e=s(((i=(c=u.$state.permitapp[0])==null?void 0:c.formdt)==null?void 0:i.muniProc)||""),l="pk_test_51PDPFeE9FsYF7D6YfBrV7kYvnDYIAR5QQfaR8ba5TGnoQAbEQgSeY7DLwhOZafrl8ZXJOPsbZN9tYl5HMLlhkxB100cmCtoWo7",{secondFetch:o}=N(),d="buy_btn_1QidgHE9FsYF7D6Yb3ycAXZZ",p=s(!1);v(()=>{setTimeout(()=>{p.value=!0},1e3),o(e.value),p.value=!1,m()}),B("my-storage",{processNumber:e.value});const m=async r=>{console.log("Entered CaptureSession",r),new URL(window.location.href)};return(r,f)=>{const t=T("stripe-buy-button");return F(),Y(t,{"buy-button-id":g(d),"publishable-key":g(l),onUpdate:m},{default:D(()=>[R("Pay")]),_:1},8,["buy-button-id","publishable-key"])}}};function X(){const n=s(""),u=x({status:"",message:"",isFinished:"",isLoading:""}),e=x({status:"",message:"",isFinished:"",isLoading:""}),l=s("");let o="https://4cgf7owinctxji4vx56hnisxh40iskps.lambda-url.us-east-1.on.aws/";const{execute:d,then:p,data:m}=q(o,{method:"GET"},{immediate:!1}),{confirmResponse:c,addResponse:i}=C();function r(t){console.log(t),n.value=t+"/",f()}const f=async()=>{try{const t=await d({params:{processnumber:n.value}}).then(a=>{console.log(a),e.status=a.response.value.status,e.message=a.data.value,e.isFinished=a.isFinished,e.isLoading=a.isLoading});i(e)}catch(t){console.log("Error, fectching data",t)}};return{error:l,sendProc:n,getSignpdf:r,fetchSignPdf:f,result:e,confirmResponse:c,results:u}}const z=O("sessioninput",{state:()=>({sessioninput:[],id:0}),actions:{addSession(n){this.sessioninput.push({sessionData:n,completed:!1})}}}),J={class:"card"},K={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},W={class:"payment-widget"},ee=_("h2",{style:{color:"black"}},"Credit Card Payment",-1),ie={__name:"Paymentgateway",setup(n){var S,w;const u=E();z();const e=H(),l=s(0),o=s(((w=(S=u.$state.permitapp[0])==null?void 0:S.formdt)==null?void 0:w.muniProc)||"");s(!1);const d=s(!1),p=s(!1),m=s(!1),c=s(!1),{getSignpdf:i}=X(),r=v(()=>{setTimeout(()=>{isSigned.value=!0},2e3),i(a.value.processNumber),console.log(o.value)}),f=j();V(f.$state);const{resp:t}=C();A(()=>{var h,b;l.value=1,((b=(h=t.value)==null?void 0:h.status)==null?void 0:b.status)===200&&(m.value=!0,console.log(t.value.status.status))});const a=B("my-storage",{processNumber:o.value}),{getNumber:se,secondFetch:L}=N(),y=v(()=>{L(a.value.processNumber),e.addCount(o.value),console.log(e.$state),setTimeout(()=>{c.value=!0},1e3),console.log(o.value),p.value=!0});return P(y,()=>{}),P(r,()=>{}),Q(async()=>{await G(isSigned).toBe(!0)}),(h,b)=>(F(),Z("div",J,[$(k(g(U),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[M,d.value]]),_("div",K,[_("div",W,[ee,k(I,{onClick:g(y)},null,8,["onClick"])])])]))}};export{ie as default};
