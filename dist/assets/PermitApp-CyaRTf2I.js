import{s as ae,_ as le}from"./index-ahnQ61n1.js";import{s as O}from"./index-DupsRXdp.js";import{s as ne}from"./index-CWUoc72A.js";import{s as re}from"./index-8OnZQ3Df.js";import{s as ie}from"./index-DfcXLqwn.js";import{s as ce}from"./index-DOVKg5v6.js";import{_ as $,r as l,c as S,d as k,e as d,i as de,f as e,p as G,j as J,k as pe,a as Z,u as ue,o as me,w as ge,t as fe,M as j,q,n as ve}from"./index-znhUBuM4.js";import{a as he,u as be}from"./useAxios-H31hYZUL.js";import{u as _e}from"./accountsStore-BlbT2dul.js";import{u as ye}from"./permitapp-D6WiSX5-.js";import{h as we,E as Se}from"./jspdf.es.min-b0wVuitv.js";import{a as Pe,i as z,u as xe,b as Ve}from"./index-fshsc8uh.js";import"./index-slrEYwYb.js";import"./index-D3eJTGSa.js";const f=t=>(G("data-v-670e2bc7"),t=t(),J(),t),Ae={class:"card flex justify-center ."},ke=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"The use of the mePermit Application system is limited to properly licensed & insured Roofing Contractors.")],-1)),Ne=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"This application is only valid for residential work or commercial work subsidiary to a master building permit.")],-1)),Ie=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Roofing permits cannot be issued for mobile homes (approved by the State of Florida Department of Motor Vehicles).")],-1)),Ue=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-8 ..."},[e("p",{style:{color:"black"}},"It is the applicant's responsiblity to complete this application correctly.")],-1)),De=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Failure to provide valid permitting information can result in failed inspections and/or cancelation of the permit by the Authority Having Jurisdiction (AHJ).")],-1)),Me=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"Double permit fees plus a fine determined by the AHJ issuing the permit, can be required for work without a permit.")],-1)),Ce=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"red"}},"Refunds will not be provided by the AHJ issuing the permit, due to errors on the applicant's part.")],-1)),Te=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"red"}},"Any deviations from an approved permit package will require a permit revision.")],-1)),Ee=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"This application is only valid for residential roof permits, either standalone or tied to a master building permit.")],-1)),Be=f(()=>e("div",{class:"grid grid-cols-1 gap-2 place-content-center h-12 ..."},[e("p",{style:{color:"black"}},"The permit applicant agrees to comply with these terms of use requirements when obtaining this permit electronically.")],-1)),Fe={class:"flex justify-end gap-2"},Le={__name:"PermitInitalAgreement",setup(t){const o=l(!0);return(i,s)=>{const v=ce,b=O,_=ie;return S(),k("div",Ae,[d(_,{visible:o.value,"onUpdate:visible":s[2]||(s[2]=c=>o.value=c),modal:"",header:"Terms Of Use",style:{width:"70rem"}},{default:de(()=>[ke,Ne,Ie,Ue,d(v),De,Me,Ce,Te,Ee,Be,e("div",Fe,[d(b,{type:"button",modelValue:i.agreement,"onUpdate:modelValue":s[0]||(s[0]=c=>i.agreement=c),severity:"contrast",label:"I Agree",onClick:s[1]||(s[1]=c=>o.value=!1)},null,8,["modelValue"])])]),_:1},8,["visible"])])}}},Re=$(Le,[["__scopeId","data-v-670e2bc7"]]),a=he.create({baseURL:"https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint",headers:{"Cache-Control":"no-cache","Content-Type":"application/json",apiKey:"LduI7j9z7Iwppo1AbxE9TBz2z2lJFZZFF3MU5ZFCbfxHU8wMlyCjvz0pWMByVH5n","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}}),He={getAddr(){return a.get("/folio")},postProcessnumber(t){return a.post("/process",t)},getLastProcess(){return a.get("/lastnumber")},getSlopeless(){return a.get("/slopeless")},getSlopemore(){return a.get("/slopemore")},getdeOne(){return a.get("/desupone")},getdeTwo(){return a.get("/desuptwo")},getdeThree(){return a.get("/desupthree")},getdeFour(){return a.get("/desupfour")},getZones23(){return a.get("/gableroofs23")},getNoa(){return a.get("/noa")},getSBS(){return a.get("/shinglesbs")},getSystemE(){return a.get("/systemtype")},getburMaterial(){return a.get("/burmaterial")},getnewburMaterial(){return a.get("/burmaterials")},getburSystem(){return a.get("/bursystem")},getPoly(){return a.get("/shinglepoly")},getSystemF(){return a.get("/systemtypef")},getdeGauge(){return a.get("/degauge")},getdeMaterial(){return a.get("/dematerial")},getdeMatMore(){return a.get("/dematerials")},getdeSize(){return a.get("/desize")},getdeFastener(){return a.get("/defastener")},getprimeBase(){return a.get("/primebase")},getPerimeter(){return a.get("/perimeter")},getNoas(){return a.post("/shinglenoa")},getTile(){return http.get("/tileroof")},getTiles(){return a.get("/tilenoa")},getZones(){return a.get("/gablezones")},getLay(){return a.get("/underlaymentshingle")},getContractors(){return a.get("/contractors")},postAccount(t){return a.post("/accounts",t)},getAccount(){return a.get("/retriveaccounts")},getDripMaterials(){return a.get("/dripmaterials")}};function N(){const t=l(null),o=l(0);return He.getLastProcess().then(i=>{t.value=i.data,t.value.forEach(s=>{console.log(s.processNumber),o.value=s.processNumber})}).catch(i=>{console.error("Error:",i)}),{resNum:t,lastNum:o}}function je(){const{resNum:t,lastNum:o}=N(),i=l(""),s=l(new Date().getFullYear()),v=l(6),b=l("me"),_=Array.from({length:10**v.value},(r,g)=>`${b.value}${s.value}${String(g).padStart(v.value,"0")}`),c=N();return console.log(c),i.value=_[0]+1,o.value!==0||(i.value=o.value+1),{pNum:i,lastNum:o,resNum:t,test:c}}const qe=pe("processinput",{state:()=>({processinput:[],id:0}),actions:{addData(t){this.processinput.push({procData:t,completed:!1})}}});function ze(){const t=l("");let o=l([]);const i=qe(),s=l("");let v="https://us-east-1.aws.data.mongodb-api.com/app/data-aquwo/endpoint/process";const{execute:b,data:_}=be(v,{method:"POST"},{immediate:!1});let c=Z({});function r(g){console.log(g),c=g,b({data:g}),t.value="Form submitted successfully!",i.addData(c),console.log(c,"System added")}return{error:s,results:o,procReceive:r,responseMessage:t,procData:c,procStore:i}}l(1);const Oe={setup(){const t=l(""),o=ue(),i=l(!1),s=l(),v=l(),b=l(),{procData:_,procReceive:c}=ze(),{accountUsers:r,getUser:g,addUser:I}=_e();console.log(r._value[0]);const U=l("me"),n=ye(),u=Z({address:"",muni:"",folio:"",permit:"",processNumber:"",date:new Date}),T=l(""),E=l(""),D=l(""),B=l(""),F=l("");Pe(()=>{if(r._value[0].name==="")return o.push("/");i.value=!0,T.value=r._value[0].name,E.value=r._value[0].email,D.value=r._value[0].phone,B.value=r._value[0].secondary_status,F.value=r._value[0].dba,console.log(r._value[0].phone)});const M=l(!1),L=l(!1);je();const{lastNum:V,resNum:W}=N();D.value=r._value[0].phone,l(null);const P=l(""),C=l("");me(()=>{i.value=!0});const Y=async()=>{try{const m=l(u.address),x=`https://www.miamidade.gov/Apps/PA/PApublicServiceProxy/PaServicesProxy.ashx?Operation=GetAddress&clientAppName=PropertySearch&myUnit=&from=1&myAddress=${encodeURIComponent(m.value)}&to=200`,w=await fetch(x);L.value=!0;const h=await w.json();console.log(h),u.muni=h.MinimumPropertyInfos[0].Municipality,u.folio=h.MinimumPropertyInfos[0].Strap;let A=String(V.value);console.log(V.value.length,V.value,A);let te=A.substring(2,13),oe=xe(te).value+1,se=String(oe);u.processNumber=U.value.concat(se),console.log(u.processNumber),C.value=u.folio,P.value=C.value.substring(1,2),console.log(P.value),c(u),setTimeout(()=>{L.value=!1},2e3)}catch(m){alert(m)}},K=async()=>{c(u)},R=l(),Q=l([{name:"",code:" "},{name:"Roofing Permit",code:"RP"},{name:"Doors Permit",code:"DP"},{name:"Windows Permit",code:"WP"}]),X=()=>{o.push("/roofsystem")};function ee(m,y){m=u,y=R.value,m.length!==0&&(n.addSystem(m,y,P.value),M.value=!0,console.log(m,y,P.value,"System added"))}const H=()=>{const m=document.getElementById("permitapp");console.log(m),we(m).then(x=>{const w=x.toDataURL("image/png"),h=new Se;h.addImage(w,"PNG",10,10,190,0);const A=h.output("blob");y(A)});const y=async x=>{try{const h=await(await window.showSaveFilePicker({suggestedName:`${u.processNumber}-permitapp.pdf`,types:[{description:"PDF file",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await h.write(x),await h.close(),t.value="saved Pdf",console.log("PDF saved successfully without popping download dialog!")}catch(w){console.error("Error saving file:",w)}}};return z(async()=>{await Ve(M).changed(),H()}),ge(()=>{}),{isDialog:i,pdfcleared:M,generatePdf:H,onSubmit:K,accountUsers:r,getUser:g,email:E,dba:F,invoke:z,phone:D,contractor:T,licenseStatus:B,addUser:I,navigateNext:X,addItemAndClear:ee,selectedApplication:R,type:Q,resNum:W,...fe(u),responseMessage:t,lastNum:V,useLast:N,load:Y,checkMB:P,checkV:C,content:s,canvas:v,doc:b}}},p=t=>(G("data-v-d1c8116a"),t=t(),J(),t),$e={id:"permitapp",ref:"permitapp",class:"flex flex-col md:flex-row gap-2",style:{"margin-left":"220px"}},Ge={class:"md:w-3/4"},Je={class:"container"},Ze={class:"row"},We={class:"card flex flex-col gap-1"},Ye=p(()=>e("div",{class:"font-semibold text-xl"},"Permit Application",-1)),Ke={class:"card flex justify-center"},Qe={class:"card flex flex-col gap-2"},Xe={class:"flex flex-wrap gap-2"},et={class:"flex flex-col grow basis-0 gap-2"},tt={class:"flex flex-col mt-3 grow basis-0 gap-3"},ot=p(()=>e("label",{for:"license"},"License Status",-1)),st=p(()=>e("label",{for:"addr"},"Property Address",-1)),at={key:1,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},lt={class:"flex flex-col mt-3 grow basis-0 gap-3"},nt=p(()=>e("label",{for:"dba"},"DBA ",-1)),rt={class:"flex flex-col mt-3 grow basis-0 gap-3"},it=p(()=>e("label",{for:"contractor"},"Contractor Name",-1)),ct={class:"flex flex-col mt-3 grow basis-0 gap-3"},dt=p(()=>e("label",{for:"phone"},"Cell Phone Number",-1)),pt={class:"flex flex-col mt-3 grow basis-0 gap-3"},ut=p(()=>e("label",{for:"Email"},"Email",-1)),mt={class:"flex flex-col mt-3 grow basis-0 gap-3"},gt=p(()=>e("label",{for:"muni"},"Municipality",-1)),ft={class:"flex flex-col mt-3 grow basis-0 gap-3"},vt=p(()=>e("label",{for:"folio"},"Folio",-1)),ht={class:"flex flex-col mt-3 grow basis-0 gap-3"},bt=p(()=>e("label",{for:"permit"},"Master Permit",-1)),_t={class:"flex flex-col mt-3 grow basis-0 gap-3"},yt=p(()=>e("label",{for:"processnum"},"mEProcess Number",-1)),wt=p(()=>e("br",null,null,-1)),St={key:0};function Pt(t,o,i,s,v,b){const _=Re,c=re,r=ne,g=O,I=ae,U=le;return S(),k("div",$e,[s.isDialog?(S(),j(_,{key:0})):q("",!0),e("div",Ge,[e("div",Je,[e("form",null,[e("div",Ze,[e("div",We,[Ye,e("div",Ke,[d(c,{modelValue:s.selectedApplication,"onUpdate:modelValue":o[0]||(o[0]=n=>s.selectedApplication=n),options:s.type,showClear:"",optionLabel:"name",placeholder:"Select a permit type",class:"w-full md:w-56"},null,8,["modelValue","options"])]),e("div",Qe,[e("div",Xe,[e("form",{class:"w-3/4",onSubmit:o[12]||(o[12]=(...n)=>s.onSubmit&&s.onSubmit(...n))},[e("div",et,[e("div",tt,[ot,d(r,{id:"license",modelValue:s.licenseStatus,"onUpdate:modelValue":o[1]||(o[1]=n=>s.licenseStatus=n),type:"text",placeholder:"name"},null,8,["modelValue"])]),st,d(r,{id:"addr",type:"text",modelValue:t.address,"onUpdate:modelValue":o[2]||(o[2]=n=>t.address=n),placeholder:"address"},null,8,["modelValue"]),t.loading?(S(),k("i",at)):(S(),j(g,{key:0,type:"button",label:"Search",severity:"contrast",icon:"pi pi-search-plus",loading:t.loading,onClick:s.load,onInput:t.createHtml},null,8,["loading","onClick","onInput"]))]),e("div",lt,[nt,d(r,{id:"dba",modelValue:s.dba,"onUpdate:modelValue":o[3]||(o[3]=n=>s.dba=n),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",rt,[it,d(r,{id:"contractor",modelValue:s.contractor,"onUpdate:modelValue":o[4]||(o[4]=n=>s.contractor=n),type:"text",placeholder:"name"},null,8,["modelValue"])]),e("div",ct,[dt,d(I,{modelValue:s.phone,"onUpdate:modelValue":o[5]||(o[5]=n=>s.phone=n),mask:"(999) 999-9999",placeholder:"(999) 999-9999",invalid:s.phone===""},null,8,["modelValue","invalid"])]),e("div",pt,[ut,d(r,{modelValue:s.email,"onUpdate:modelValue":o[6]||(o[6]=n=>s.email=n),invalid:s.email===null},null,8,["modelValue","invalid"])]),e("div",mt,[gt,d(r,{id:"muni",modelValue:t.muni,"onUpdate:modelValue":o[7]||(o[7]=n=>t.muni=n),type:"text",placeholder:"municipality"},null,8,["modelValue"])]),e("div",ft,[vt,d(r,{id:"folio",modelValue:t.folio,"onUpdate:modelValue":o[8]||(o[8]=n=>t.folio=n),type:"text",placeholder:"folio",onInput:t.updatemEProcess},null,8,["modelValue","onInput"])]),e("div",ht,[bt,d(r,{id:"permit",modelValue:t.permit,"onUpdate:modelValue":o[9]||(o[9]=n=>t.permit=n),type:"text",placeholder:"20000000"},null,8,["modelValue"])]),e("div",_t,[yt,d(r,{id:"processnum",modelValue:t.processNumber,"onUpdate:modelValue":o[10]||(o[10]=n=>t.processNumber=n),type:"text",placeholder:"process number"},null,8,["modelValue"])]),wt,d(U),s.responseMessage?(S(),k("p",St,ve(s.responseMessage),1)):q("",!0),d(g,{type:"submit",label:"Submit",severity:"contrast",raised:"",as:"router-link",to:"/roofsystem",onClick:o[11]||(o[11]=n=>s.addItemAndClear(t.formData,s.selectedApplication)),onChange:s.generatePdf},null,8,["onChange"])],32)])])])])])])])],512)}const Rt=$(Oe,[["render",Pt],["__scopeId","data-v-d1c8116a"]]);export{Rt as default};
