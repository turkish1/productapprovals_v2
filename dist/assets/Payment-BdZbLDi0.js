import{s as Y}from"./index-Bd6hUW_u.js";import{e as o,N as j,u as H,f as p,bd as J,P as K,ao as Q,ab as D,ap as T,at as W,o as X,c as Z,R as V,aq as C,h as a,p as ee,g as v,l as oe,au as te,ar as se,q as ae,Y as ne}from"./index-RcNKE_b0.js";import{s as le}from"./index-ClNW4T8F.js";import{u as re,a as ce}from"./use-downloadpdf-CsIqZJe6.js";import{c as ue,u as ie}from"./pdfsignStore-5PXHgb4k.js";import{u as de}from"./permitapp-DuqFbsNI.js";import{s as me}from"./sessionStore-DN8vXj2r.js";import"./index-Crp4jmUR.js";import"./useAxios-Df7bHI4y.js";const pe={class:"card"},ve={class:"flex flex-col w-1/3 gap-2 shadow-lg shadow-cyan-800",style:{"margin-left":"550px","margin-top":"440px"}},fe={class:"payment-widget"},we=v("h2",{style:{color:"black"}},"Download Link",-1),De={__name:"Payment",setup(ge){var S,N;const E=de();me();const f=ue(),w=o(0),M=o(((N=(S=E.$state.permitapp[0])==null?void 0:S.formdt)==null?void 0:N.muniProc)||""),O=o(!1),R=o(!1),n=o(!1),U=o(!1),l=o(!1);o(!1),o(null);const{getNumber:$,result:_e,secondFetch:g}=re(),r=ce();j(r.$state);const I=H(),{resp:_}=ie();p(()=>{q()}),J(()=>{z()});const L=K(),c=o(0),u=o(),q=()=>{u.value=setInterval(()=>{let e=c.value+Math.floor(Math.random()*10)+1;e>=100&&(e=100,L.add({severity:"contrast",summary:"Success",detail:"Process Completed",life:1e3})),c.value=e},1e3)},z=()=>{clearInterval(u.value),u.value=null};p(()=>{var e,t;w.value=1,f.addCount(w),console.log(f),((t=(e=_.value)==null?void 0:e.status)==null?void 0:t.status)===200&&(U.value=!0,console.log(_.value.status.status))});const h=o("");p(async()=>{const e=new URLSearchParams(location.search).get("session_id");if(h.value=e,e)console.log(h.value);else{console.log(e);return}});const i=Q("my-storage",{processNumber:M.value}),F=D(()=>{$(),setTimeout(()=>{l.value=!0},500),n.value=!0});T(F,()=>{});function A(){g(i.value),x()}const y=D(()=>{setTimeout(()=>{l.value=!0},500),g(i.value),console.log(i.value),x()}),x=async()=>{var P,k,b,B;const e=(k=(P=r.downloadinput[0])==null?void 0:P.downloadData)==null?void 0:k.download_url;if(console.log(e),!e||e.length===0)return;const t=(B=(b=r.downloadinput[0])==null?void 0:b.downloadData)==null?void 0:B.download_url;if(!t)return;O.value=!0;const d=t,m="processnumber.zip",s=document.createElement("a");s.href=d,s.download=m,s.click(),s.remove(),n.value=!0,G()};T(y,()=>{}),W(async()=>{await te(y).toBe(!0)});const G=()=>{console.log("Entered Navigate"),setTimeout(()=>{l.value=!0},1e3),I.push("/download")};return(e,t)=>{const d=le,m=ne,s=Y;return X(),Z("div",pe,[V(a(ee(se),{color:"#784EA7",size:"100px",style:{"margin-top":"500px","margin-left":"850px"}},null,512),[[C,R.value]]),v("div",ve,[v("div",fe,[we,V(a(d,{onClick:A,severity:"contrast"},{default:oe(()=>[ae("Click to download")]),_:1},512),[[C,n.value]]),a(m),a(s,{value:c.value,severity:"contrast"},null,8,["value"])])])])}}};export{De as default};
